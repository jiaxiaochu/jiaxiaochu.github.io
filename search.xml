<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title></title>
      <link href="/2020/01/16/2019-03-06-ji-suan-ji-wang-luo-di-yi-zhang-gai-shu/"/>
      <url>/2020/01/16/2019-03-06-ji-suan-ji-wang-luo-di-yi-zhang-gai-shu/</url>
      
        <content type="html"><![CDATA[<h1 id="什么是计算机网络？"><a href="#什么是计算机网络？" class="headerlink" title="什么是计算机网络？"></a>什么是计算机网络？</h1><blockquote><p>计算机网络(computer network)是自主计算机的互连集合。（ANDREW S. TANENBAUM）</p></blockquote><blockquote><p>计算机网络是利用通信设备和线路将地理位置不同的、功 能独立的<strong>多个计算机系统***</strong>连接***起来，以功能完善的网络软件实现网络的硬件、软件及资源共享和信息传递的系统。 简单来说就是连接两台或多台计算机进行通信的系统。（维基百科）</p></blockquote><h2 id="直接连接的网络"><a href="#直接连接的网络" class="headerlink" title="直接连接的网络"></a>直接连接的网络</h2><pre class=" language-mermaid"><code class="language-mermaid">graph LRA--链路（link），专用介质（dedicated medium）---B,节点(node)或主机(host)</code></pre><p>点到点网络 (point-to-point network)</p><ul><li>单向(simplex)</li><li>半双工(half duplex)</li><li>全双工(full duplex)<a id="more"></a><pre class=" language-mermaid"><code class="language-mermaid">graph LR共享介质(shared medium), 广播, 碰撞(collision)</code></pre></li></ul><pre><code>多路访问网络 (multiple access network)- 单播(unicast)- 多播(multicast)- 广播(broadcast)## 间接连接的网络- 中间节点、路由器(router)- 包(packet)- 存储转发(store-and-forward)- 路由选择(routing)- 路由(route)- 目的地(destination),下一跳(next hop)- 路由表(routing table)## 网络互连用路由器(或网关)连接起来构成的网络称为互连网络(internetwork 或internet)。因特网 (Internet) 是一种互连网络。```mermaidgraph TB路由器---网络1路由器---网络2路由器---网络3</code></pre><ul><li>系统域网(System Area Network, SAN)</li><li>局域网(Local Area Network, LAN)</li><li>城域网(Metropolitan Area Network, MAN)</li><li>广域网(Wide Area Network, WAN)</li></ul><p>局域网（LAN）：一般限定在较小的区域内（小于10km的范围），通常采用有线的方法连接起来。<br>城域网（MAN）：规模局限在一座城市的范围内。<br>广域网（WAN）：网络跨越国界、洲界，甚至遍及全球范围。<br>个人区域网（PAN）：一般指家庭一台或多台电脑所使用的网络<br>无线局域网（WLAN）：是指通过无线设备建立的，给支持无线通信的设备使用的，比如无线网卡，或手机上的WIFI。</p><h1 id="什么是因特网？"><a href="#什么是因特网？" class="headerlink" title="什么是因特网？"></a>什么是因特网？</h1><p>ISP ( Internet Service Provider) – 因特网服务提供商</p><ul><li>终端系统(end system)：主机<ul><li>运行网络应用程序 (例如，浏览器)</li></ul></li><li>通信链路(communication link)<ul><li>光纤, 铜线, 无线电, 卫星</li><li>传输速率=带宽</li></ul></li><li>路由器(router)</li></ul><h1 id="因特网体系结构"><a href="#因特网体系结构" class="headerlink" title="因特网体系结构"></a>因特网体系结构</h1><h2 id="网络提供的服务"><a href="#网络提供的服务" class="headerlink" title="网络提供的服务"></a>网络提供的服务</h2><p>数据链路层一般都提供3种基本服务，即无确认的无连接服务、有确认的无连接服务、有确认 的面向连接的服务。</p><p>（1）无确认的无连接服务 无确认的无连接服务是源机器向目的机器发送独立的帧，而目的机器对收到的帧不作确认。<br>如果由于线路上的噪声而造成帧丢失，数据链路层不作努力去恢复它，恢复工作留给上层去完成。<br>这类服务适用于误码率很低的情况，也适用于像语音之类的实时传输，实时传输情况下有时数据延误比数据损坏影响更严重。<br>大多数局域网在数据链路层都使用无确认的无连接服务。</p><p>（2）有确认的无连接服务 这种服务仍然不建立连接，但是所发送的每一帧都进行单独确认。<br>以这种方式，发送方就会知道帧是否正确地到达。如果在某个确定的时间间隔内，帧没有到达，就必须重新发此帧。</p><p>（3）有确认的面向连接的服务 采用这种服务，源机器和目的机器在传递任何数据之前，先建立一条连接。<br>在这条连接上所发送的每一帧都被编上号，数据链路层保证所发送的每一帧都确实已收到。<br>而且，它保证每帧只收到一次，所有的帧都是按正确顺序收到的。面向连接的服务为网络进程间提供了可靠地传送比特流的服务。</p><h1 id="开放系统互连参考模型"><a href="#开放系统互连参考模型" class="headerlink" title="开放系统互连参考模型"></a>开放系统互连参考模型</h1><h1 id="网络性能分析"><a href="#网络性能分析" class="headerlink" title="网络性能分析"></a>网络性能分析</h1><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>爬取网易财经中股票的历史交易数据</title>
      <link href="/2020/01/16/2017-08-14-pa-qu-wang-yi-cai-jing-zhong-gu-piao-de-li-shi-jiao-yi-shu-ju/"/>
      <url>/2020/01/16/2017-08-14-pa-qu-wang-yi-cai-jing-zhong-gu-piao-de-li-shi-jiao-yi-shu-ju/</url>
      
        <content type="html"><![CDATA[<h3 id="爬取网易财经中股票的历史交易数据"><a href="#爬取网易财经中股票的历史交易数据" class="headerlink" title="爬取网易财经中股票的历史交易数据"></a><strong>爬取网易财经中股票的历史交易数据</strong></h3><h4 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a><strong>需求分析</strong></h4><ul><li><p>得到股票代码</p><blockquote><p>股票代码的信息是在东方财富网中获取(<a href="http://quote.eastmoney.com/stocklist.html" target="_blank" rel="noopener">http://quote.eastmoney.com/stocklist.html</a>)</p></blockquote></li><li><p>得到股票的历史交易记录</p><blockquote><p>股票的历史交易记录是可以在网易财经中直接下载excel表的，地址(<a href="http://quotes.money.163.com/trade/lsjysj_603088.html#06f01)这是某一股票的历史交易记录详情，我们可以在页面中找到下载的链接地址。" target="_blank" rel="noopener">http://quotes.money.163.com/trade/lsjysj_603088.html#06f01)这是某一股票的历史交易记录详情，我们可以在页面中找到下载的链接地址。</a></p></blockquote><a id="more"></a><h4 id="代码撸起来"><a href="#代码撸起来" class="headerlink" title="代码撸起来"></a><strong>代码撸起来</strong></h4></li><li><p>首先我们需要在东方财富网中获取到股票的代码，在(<a href="http://quote.eastmoney.com/stocklist.html)页面中我们可以看到股票代码，我们可以利用xpath结合正则表达式将这些股票代码获取到" target="_blank" rel="noopener">http://quote.eastmoney.com/stocklist.html)页面中我们可以看到股票代码，我们可以利用xpath结合正则表达式将这些股票代码获取到</a></p><p><img src="http://img.blog.csdn.net/20170827212234257?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUHl0aG9uQ29kZVo=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="-----------图1"></p></li><li><p>获取股票代码列表的代码：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">StockCode</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>start_url <span class="token operator">=</span> <span class="token string">"http://quote.eastmoney.com/stocklist.html#sh"</span>        self<span class="token punctuation">.</span>headers <span class="token operator">=</span> <span class="token punctuation">{</span>            <span class="token string">"User-Agent"</span><span class="token punctuation">:</span> <span class="token string">":Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36"</span>        <span class="token punctuation">}</span>    <span class="token keyword">def</span> <span class="token function">parse_url</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 发起请求，获取响应</span>        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>self<span class="token punctuation">.</span>start_url<span class="token punctuation">,</span> headers<span class="token operator">=</span>self<span class="token punctuation">.</span>headers<span class="token punctuation">)</span>        <span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>response<span class="token punctuation">.</span>content<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">get_code_list</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 得到股票代码的列表</span>        node_list <span class="token operator">=</span> response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//*[@id="quotesearch"]/ul[1]/li'</span><span class="token punctuation">)</span>        code_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> node <span class="token keyword">in</span> node_list<span class="token punctuation">:</span>            <span class="token keyword">try</span><span class="token punctuation">:</span>                code <span class="token operator">=</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span>r<span class="token string">'.*?\((\d+)\)'</span><span class="token punctuation">,</span> etree<span class="token punctuation">.</span>tostring<span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>                <span class="token keyword">print</span> code                code_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>code<span class="token punctuation">)</span>            <span class="token keyword">except</span><span class="token punctuation">:</span>                <span class="token keyword">continue</span>        <span class="token keyword">return</span> code_list    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        html <span class="token operator">=</span> self<span class="token punctuation">.</span>parse_url<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>get_code_list<span class="token punctuation">(</span>html<span class="token punctuation">)</span></code></pre></li><li><p>分析网易财经中历史交易记录下载页面获取到下载的链接。</p><ul><li><p>使用谷歌浏览器检查工具，切换到network，在我们在点击下载的时候可以得到请求接口：</p><p><img src="http://img.blog.csdn.net/20170827212254684?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUHl0aG9uQ29kZVo=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="-----------图2"></p><p><img src="http://img.blog.csdn.net/20170827212310375?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUHl0aG9uQ29kZVo=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="-----------图3"></p></li><li><p>上图中，我们分析到，在点击下载时的url地址，需要传递的参数就是我们的股票代码和下载的起始时间和结束的时间，以及fields后面跟着的一堆参数值，在这里需要注意的是请求的url中股票代码前还多了一位是0。那么我们在爬取的时候，就需要理由xpath来提取页面中要下载数据的起始时间和结束时间，然后将在东方财富网中获取到的股票代码和url进行拼接，拼接成我们想要请求的下载连接。</p></li></ul></li><li><p>下载历史交易记录的代码</p><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">Download_HistoryStock</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>code <span class="token operator">=</span> code        self<span class="token punctuation">.</span>start_url <span class="token operator">=</span> <span class="token string">"http://quotes.money.163.com/trade/lsjysj_"</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>code <span class="token operator">+</span> <span class="token string">".html"</span>        <span class="token keyword">print</span> self<span class="token punctuation">.</span>start_url        self<span class="token punctuation">.</span>headers <span class="token operator">=</span> <span class="token punctuation">{</span>            <span class="token string">"User-Agent"</span><span class="token punctuation">:</span> <span class="token string">":Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.115 Safari/537.36"</span>        <span class="token punctuation">}</span>    <span class="token keyword">def</span> <span class="token function">parse_url</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>self<span class="token punctuation">.</span>start_url<span class="token punctuation">)</span>        <span class="token keyword">print</span> response<span class="token punctuation">.</span>status_code        <span class="token keyword">if</span> response<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> etree<span class="token punctuation">.</span>HTML<span class="token punctuation">(</span>response<span class="token punctuation">.</span>content<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token boolean">False</span>    <span class="token keyword">def</span> <span class="token function">get_date</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># 得到开始和结束的日期</span>        start_date <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//input[@name="date_start_type"]/@value'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        end_date <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>response<span class="token punctuation">.</span>xpath<span class="token punctuation">(</span><span class="token string">'//input[@name="date_end_type"]/@value'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> start_date<span class="token punctuation">,</span>end_date    <span class="token keyword">def</span> <span class="token function">download</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> start_date<span class="token punctuation">,</span> end_date<span class="token punctuation">)</span><span class="token punctuation">:</span>        download_url <span class="token operator">=</span> <span class="token string">"http://quotes.money.163.com/service/chddata.html?code=0"</span><span class="token operator">+</span>self<span class="token punctuation">.</span>code<span class="token operator">+</span><span class="token string">"&amp;start="</span><span class="token operator">+</span>start_date<span class="token operator">+</span><span class="token string">"&amp;end="</span><span class="token operator">+</span>end_date<span class="token operator">+</span><span class="token string">"&amp;fields=TCLOSE;HIGH;LOW;TOPEN;LCLOSE;CHG;PCHG;TURNOVER;VOTURNOVER;VATURNOVER;TCAP;MCAP"</span>        data <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>download_url<span class="token punctuation">)</span>        f <span class="token operator">=</span> open<span class="token punctuation">(</span>self<span class="token punctuation">.</span>code <span class="token operator">+</span> <span class="token string">'.csv'</span><span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> chunk <span class="token keyword">in</span> data<span class="token punctuation">.</span>iter_content<span class="token punctuation">(</span>chunk_size<span class="token operator">=</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">if</span> chunk<span class="token punctuation">:</span>                f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>        <span class="token keyword">print</span> <span class="token string">'股票---'</span><span class="token punctuation">,</span>self<span class="token punctuation">.</span>code<span class="token punctuation">,</span><span class="token string">'历史数据正在下载'</span>    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">try</span><span class="token punctuation">:</span>            html <span class="token operator">=</span> self<span class="token punctuation">.</span>parse_url<span class="token punctuation">(</span><span class="token punctuation">)</span>            start_date<span class="token punctuation">,</span>end_date <span class="token operator">=</span> self<span class="token punctuation">.</span>get_date<span class="token punctuation">(</span>html<span class="token punctuation">)</span>            self<span class="token punctuation">.</span>download<span class="token punctuation">(</span>start_date<span class="token punctuation">,</span> end_date<span class="token punctuation">)</span>        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>            <span class="token keyword">print</span> e</code></pre></li><li><p>运行项目，开始下载数据：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    code <span class="token operator">=</span> StockCode<span class="token punctuation">(</span><span class="token punctuation">)</span>    code_list <span class="token operator">=</span> code<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span> temp_code <span class="token keyword">in</span> code_list<span class="token punctuation">:</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>        download <span class="token operator">=</span> Download_HistoryStock<span class="token punctuation">(</span>temp_code<span class="token punctuation">)</span>        download<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></li><li><p>下载数据的时候发现，获取到的股票代码2-5开头的都下载不到历史的交易记录，但是从6开始，是可以下载了，下面是下载来的数据效果：</p><p><img src="http://img.blog.csdn.net/20170827212336188?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUHl0aG9uQ29kZVo=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="-------------与"></p><p><img src="http://img.blog.csdn.net/20170827212352700?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvUHl0aG9uQ29kZVo=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="---------------1111"></p></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Spider </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python中的垃圾回收机制</title>
      <link href="/2020/01/16/2017-11-17-la-ji-hui-shou/"/>
      <url>/2020/01/16/2017-11-17-la-ji-hui-shou/</url>
      
        <content type="html"><![CDATA[<h4 id="1、小整数对象池"><a href="#1、小整数对象池" class="headerlink" title="1、小整数对象池"></a>1、小整数对象池</h4><p>在程序中整数的使用非常的广泛，Python为了优化速度，使用了小整数对象池，避免为整数频繁申请和销毁内存的空间。<br>Python中对象小整数的定义是[-5,256]，这些整数的对象是提前建立好的，不会被垃圾回收。在一个Python的程序中，所有位于这个范围内的整数使用的都是同一个对象。</p><a id="more"></a><pre class=" language-python"><code class="language-python">In <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">:</span> a <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">5</span>In <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>a<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">10911520</span>In <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">:</span> b <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">5</span>In <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">10911520</span>In <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">:</span> c <span class="token operator">=</span> <span class="token number">256</span>In <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>c<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">10919872</span>In <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">:</span> d <span class="token operator">=</span> <span class="token number">256</span>In <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>d<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">10919872</span>In <span class="token punctuation">[</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">:</span> e <span class="token operator">=</span> <span class="token number">257</span>In <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>e<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">139826489334128</span>In <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">:</span> f <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">6</span>In <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>f<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">139826489334064</span></code></pre><p>​    上面中，我们可以看到范围在[-5,256]之间的整数，包含-5和256，对象在内存中的地址是相同的，同理，单个字母也是这样。</p><p>​    但是当定义两个相同的字符串时，引用计数为0,那么就会触发垃圾回收。</p><h4 id="2、大整数对象池"><a href="#2、大整数对象池" class="headerlink" title="2、大整数对象池"></a>2、大整数对象池</h4><p>每一个大整数，均创建一个新的对象。</p><pre class=" language-python"><code class="language-python">In <span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">:</span> a <span class="token operator">=</span> <span class="token number">1234</span>In <span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>a<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">139826489334576</span>In <span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">:</span> b <span class="token operator">=</span> <span class="token number">1234</span>In <span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">139826489334640</span></code></pre><h4 id="3、intern机制"><a href="#3、intern机制" class="headerlink" title="3、intern机制"></a>3、intern机制</h4><p>假如有好多个对象：</p><pre class=" language-python"><code class="language-python">a1 <span class="token operator">=</span> <span class="token string">"HelloWorld"</span>a2 <span class="token operator">=</span> <span class="token string">"HelloWorld"</span>a3 <span class="token operator">=</span> <span class="token string">"HelloWorld"</span>a4 <span class="token operator">=</span> <span class="token string">"HelloWorld"</span>a5 <span class="token operator">=</span> <span class="token string">"HelloWorld"</span>a6 <span class="token operator">=</span> <span class="token string">"HelloWorld"</span>a7 <span class="token operator">=</span> <span class="token string">"HelloWorld"</span>a8 <span class="token operator">=</span> <span class="token string">"HelloWorld"</span></code></pre><p>python会不会创建8个对象呢？会不会在内存中开辟8个内存 空间？<br>答案是不会的，想一下，如果我们写10000个对象，像上面那样，那岂不是会在内存中开辟10000个空间，那得占用多少的内存。所以在Python中有这样的一个机制—-&gt;<code>intern机制</code>，</p><p>让他只占用一个“HelloWorld”所占的空间，靠引用计数去维护何时释放。</p><pre class=" language-python"><code class="language-python">In <span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span><span class="token punctuation">:</span> a <span class="token operator">=</span> <span class="token string">'abcd'</span>In <span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>a<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">139826471344368</span>In <span class="token punctuation">[</span><span class="token number">21</span><span class="token punctuation">]</span><span class="token punctuation">:</span> b <span class="token operator">=</span> <span class="token string">'abcd'</span>In <span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">139826471344368</span>In <span class="token punctuation">[</span><span class="token number">23</span><span class="token punctuation">]</span><span class="token punctuation">:</span> c <span class="token operator">=</span> bIn <span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>c<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">139826471344368</span>In <span class="token punctuation">[</span><span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">del</span> aIn <span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token keyword">del</span> bIn <span class="token punctuation">[</span><span class="token number">27</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>c<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">27</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">139826471344368</span></code></pre><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h4><ul><li><p>小整数[-5,256]共用内存，常驻内存。</p></li><li><p>单个字符公用内存，常驻内存</p></li><li><p>单个单词，不可修改，默认开启intern机制，公用内存，引用计数为0，则销毁</p></li><li><p>字符串(含有空格)，不可修改，没开启intern机制，不共用对象，引用计数为0，销毁</p><pre class=" language-python"><code class="language-python">In <span class="token punctuation">[</span><span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">:</span> a <span class="token operator">=</span> <span class="token string">'hello world'</span>In <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">]</span><span class="token punctuation">:</span> b <span class="token operator">=</span> <span class="token string">'hello world'</span>In <span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>a<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">139826489193264</span>In <span class="token punctuation">[</span><span class="token number">33</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">33</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">139826489192816</span>In <span class="token punctuation">[</span><span class="token number">34</span><span class="token punctuation">]</span><span class="token punctuation">:</span> c <span class="token operator">=</span> <span class="token string">'helloworld'</span>In <span class="token punctuation">[</span><span class="token number">35</span><span class="token punctuation">]</span><span class="token punctuation">:</span> d <span class="token operator">=</span> <span class="token string">'helloworld'</span>In <span class="token punctuation">[</span><span class="token number">36</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>c<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">36</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">139826486896048</span>In <span class="token punctuation">[</span><span class="token number">37</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>d<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">37</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">139826486896048</span></code></pre></li><li><p>大整数不共用内存，引用计数为0，销毁</p></li><li><p>数值类型和字符串类型在Python中都是不可变的数据类型，这意味着你无法修改这个对象的值，每次对变量的修改，实际上是创建了一个新的对象。</p><pre class=" language-python"><code class="language-python">In <span class="token punctuation">[</span><span class="token number">39</span><span class="token punctuation">]</span><span class="token punctuation">:</span> a <span class="token operator">=</span> <span class="token number">110</span>In <span class="token punctuation">[</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>a<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">40</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">10915200</span>In <span class="token punctuation">[</span><span class="token number">41</span><span class="token punctuation">]</span><span class="token punctuation">:</span> a <span class="token operator">+=</span> <span class="token number">1</span>In <span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>a<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">10915232</span>In <span class="token punctuation">[</span><span class="token number">43</span><span class="token punctuation">]</span><span class="token punctuation">:</span> b <span class="token operator">=</span> <span class="token string">'hello'</span>In <span class="token punctuation">[</span><span class="token number">44</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">44</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">139826471345768</span>In <span class="token punctuation">[</span><span class="token number">45</span><span class="token punctuation">]</span><span class="token punctuation">:</span> b <span class="token operator">=</span> <span class="token string">'world'</span>In <span class="token punctuation">[</span><span class="token number">46</span><span class="token punctuation">]</span><span class="token punctuation">:</span> id<span class="token punctuation">(</span>b<span class="token punctuation">)</span>Out<span class="token punctuation">[</span><span class="token number">46</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token number">139826471344368</span></code></pre></li></ul><h4 id="4、Garbage-collection-GC垃圾回收"><a href="#4、Garbage-collection-GC垃圾回收" class="headerlink" title="4、Garbage collection(GC垃圾回收)"></a>4、Garbage collection(GC垃圾回收)</h4><p>python采用的是引用计数机制为主，分代收集机制为辅的策略</p><p>当引用计数为0时，该对象的生命就结束了</p><ul><li><p><strong>引用计数机制的优点：</strong></p><ul><li><p>简单</p></li><li><p>实时性：一旦没有引用，即引用计数为0，内存就直接释放了。不用像其他机制等到特定的时机，实时性还带来一个好处：处理回收内存的时间分摊到了平时</p></li></ul></li><li><p><strong>引用计数机制的缺点：</strong></p><ul><li><p>维护引用计数消耗资源</p></li><li><p>循环引用</p></li></ul><pre class=" language-python"><code class="language-python">list1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>list2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>list1<span class="token punctuation">.</span>append<span class="token punctuation">(</span>list2<span class="token punctuation">)</span>list2<span class="token punctuation">.</span>append<span class="token punctuation">(</span>list1<span class="token punctuation">)</span></code></pre><p>list1与list2相互引用，如果不存在其他对象对它们的引用，list1与list2的引用计数也仍然为1，所占用的内存永远无法被回收，这将是致命的。对于如今的强大硬件，缺点1尚可接受，但是循环引用导致内存泄露，注定python还将引入新的回收机制。(分代收集)</p><p>GC系统所承担的工作远比”垃圾回收”多得多。实际上，它们负责三个重要任务：</p><ul><li><code>为新生成的对象分配内存</code></li><li><code>识别哪些垃圾对象</code></li><li><code>从垃圾对象那回收内存</code></li></ul></li></ul><h4 id="5、垃圾回收机制"><a href="#5、垃圾回收机制" class="headerlink" title="5、垃圾回收机制"></a>5、垃圾回收机制</h4><ul><li><p>1、导致引用计数+1的情况</p><ul><li>对象被创建，如：a = 10</li><li>对象被引用，如：b = a</li><li>对象被作为参数，传递到一个函数中，如：func(a)</li><li>对象作为一个元素，存储在容器中，如：list = [a, a]</li></ul></li><li><p>2、导致引用计数-1的情况：</p><ul><li>对象的别名被显示销毁，如：del a</li><li>对象的别名被赋予新的对象，如：a = 20</li><li>一个对象离开他的作用域， 如函数f执行完毕时，func函数中的局部变量(全局变量不会)</li><li>对象所在的容器被销毁，或从容器中删除对象</li></ul></li><li><p>3、查看一个对象的引用计数</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> sysa <span class="token operator">=</span> <span class="token string">"hello world"</span>sys<span class="token punctuation">.</span>getrefcount<span class="token punctuation">(</span>a<span class="token punctuation">)</span></code></pre><p>可以查看a对象的应用计数，但是比正常计数大1，因为在调用函数的时候传入a，这会让a的引用计数+1</p></li></ul><h4 id="6、循环引用导致内存泄露"><a href="#6、循环引用导致内存泄露" class="headerlink" title="6、循环引用导致内存泄露"></a><strong>6、</strong>循环引用导致内存泄露</h4><p>​    内存泄露：</p><p>​    申请了某些内存，但是忘记了释放，那么这就造成了内存的浪费，久而久之内存就不够用了.                                </p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> gc<span class="token keyword">class</span> <span class="token class-name">ClassA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'object born,id:%s'</span><span class="token operator">%</span>str<span class="token punctuation">(</span>id<span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        c1 <span class="token operator">=</span> ClassA<span class="token punctuation">(</span><span class="token punctuation">)</span>        c2 <span class="token operator">=</span> ClassA<span class="token punctuation">(</span><span class="token punctuation">)</span>        c1<span class="token punctuation">.</span>t <span class="token operator">=</span> c2        c2<span class="token punctuation">.</span>t <span class="token operator">=</span> c1        <span class="token keyword">del</span> c1        <span class="token keyword">del</span> c2<span class="token comment" spellcheck="true">#python默认是开启垃圾回收的，可以通过下面代码来将其关闭</span>gc<span class="token punctuation">.</span>disable<span class="token punctuation">(</span><span class="token punctuation">)</span>f2<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>​    执行f2()，进程占用的内存会不断增大。        </p><ul><li>创建了c1，c2后这两块内存的引用计数都是1，执行<code>c1.t=c2</code>和<code>c2.t=c1</code>后，这两块内存的引用计数变成2.</li><li>在del c1后，引用计数变为1，由于不是为0，所以c1对象不会被销毁;同理，c2对象的引用数也是1。</li><li>python默认是开启垃圾回收功能的，但是由于以上程序已经将其关闭，因此导致垃圾回收器都不会回收它们，所以就会导致内存泄露。</li></ul><h4 id="7、垃圾回收"><a href="#7、垃圾回收" class="headerlink" title="7、垃圾回收"></a><strong>7、垃圾回收</strong></h4><pre class=" language-python"><code class="language-python"><span class="token keyword">class</span> <span class="token class-name">ClassA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'object born,id:%s'</span><span class="token operator">%</span>str<span class="token punctuation">(</span>id<span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        c1 <span class="token operator">=</span> ClassA<span class="token punctuation">(</span><span class="token punctuation">)</span>        c2 <span class="token operator">=</span> ClassA<span class="token punctuation">(</span><span class="token punctuation">)</span>        c1<span class="token punctuation">.</span>t <span class="token operator">=</span> c2        c2<span class="token punctuation">.</span>t <span class="token operator">=</span> c1        <span class="token keyword">del</span> c1        <span class="token keyword">del</span> c2        gc<span class="token punctuation">.</span>collect<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">#手动调用垃圾回收功能，这样在自动垃圾回收被关闭的情况下，也会进行回收</span><span class="token comment" spellcheck="true">#python默认是开启垃圾回收的，可以通过下面代码来将其关闭</span>gc<span class="token punctuation">.</span>disable<span class="token punctuation">(</span><span class="token punctuation">)</span>f2<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><p>​    <strong>有三种情况会触发垃圾回收</strong></p><ul><li>当gc模块的计数器达到阀值的时候，自动回收垃圾</li><li>调用gc.collect()，手动回收垃圾</li><li>程序退出的时候，python解释器来回收垃圾</li></ul><h4 id="8、gc模块的自动垃圾回收触发机制"><a href="#8、gc模块的自动垃圾回收触发机制" class="headerlink" title="8、gc模块的自动垃圾回收触发机制"></a>8、gc模块的自动垃圾回收触发机制</h4><p>在Python中，采用分代收集的方法。把对象分为三代，一开始，对象在创建的时候，放在一代中，如果在一次一代的垃圾检查中，改对象存活下来，就会被放到二代中，同理在一次二代的垃圾检查中，该对象存活下来，就会被放到三代中。</p><p>gc模块里面会有一个长度为3的列表的计数器，可以通过gc.get_count()获取。</p><p>例如<code>(488,3,0)</code>，其中488是指距离上一次一代垃圾检查，Python分配内存的数目减去释放内存的数目，注意是内存分配，而不是引用计数的增加。例如：</p><pre class=" language-python"><code class="language-python"><span class="token keyword">print</span> gc<span class="token punctuation">.</span>get_count<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># (590, 8, 0)</span>a <span class="token operator">=</span> ClassA<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span> gc<span class="token punctuation">.</span>get_count<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># (591, 8, 0)</span><span class="token keyword">del</span> a<span class="token keyword">print</span> gc<span class="token punctuation">.</span>get_count<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true"># (590, 8, 0)</span></code></pre><p><code>3</code>是指距离上一次二代垃圾检查，一代垃圾检查的次数，同理，<code>0</code>是指距离上一次三代垃圾检查，二代垃圾检查的次数。</p><p>gc模快有一个自动垃圾回收的<code>阀值</code>，即通过gc.get_threshold函数获取到的长度为3的元组，例如(700,10,10)，每一次计数器的增加，gc模块就会检查增加后的计数是否达到阀值的数目，如果是，就会执行对应的代数的垃圾检查，然后重置计数器。</p><p>例如，假设阀值是(700,10,10)：</p><blockquote><pre class=" language-python"><code class="language-python">当计数器从<span class="token punctuation">(</span><span class="token number">699</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>增加到<span class="token punctuation">(</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>，gc模块就会执行gc<span class="token punctuation">.</span>collect<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>即检查一代对象的垃圾，并重置计数器为<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>当计数器从<span class="token punctuation">(</span><span class="token number">699</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>增加到<span class="token punctuation">(</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>，gc模块就会执行gc<span class="token punctuation">.</span>collect<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>即检查一、二代对象的垃圾，并重置计数器为<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>当计数器从<span class="token punctuation">(</span><span class="token number">699</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span>增加到<span class="token punctuation">(</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span>，gc模块就会执行gc<span class="token punctuation">.</span>collect<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>即检查一、二、三代对象的垃圾，并重置计数器为<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span></code></pre></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>vim从入门到放弃</title>
      <link href="/2019/12/30/vim-cong-ru-men-dao-fang-qi/"/>
      <url>/2019/12/30/vim-cong-ru-men-dao-fang-qi/</url>
      
        <content type="html"><![CDATA[<p>一：三种常用模式的切换</p><p>vim启动进入普通模式，处于插入模式或命令行模式时只需要按Esc或者Ctrl+[(这在vim课程环境中不管用)即可进入普通模式。普通模式中按i（插入）或a（附加）键都可以进入插入模式，普通模式中按:进入命令行模式。命令行模式中输入wq回车后保存并退出vim。</p><p>二：进入vim</p><p><strong>1.</strong>使用<strong>vim</strong>命令进入<strong>vim</strong>界面</p><p>​    <strong>-</strong> vim后面加上你要打开的已存在的文件名或者不存在（则作为新建文件）的文件名。</p><p>​    - 直接使用vim也可以打开vim编辑器，但是不会打开任何文件。</p><p><strong>2.</strong>游标移动</p><p>​    - 在进入vim后，按下i键进入插入模式。在该模式下您可以输入文本信息</p><p>​    - 按Esc进入普通模式，在该模式下使用方向键或者h,j,k,l键可以移动游标。</p><table><thead><tr><th>按键</th><th>说明</th></tr></thead><tbody><tr><td>h</td><td>左</td></tr><tr><td>l</td><td>右（小写L）</td></tr><tr><td>j</td><td>下</td></tr><tr><td>k</td><td>上</td></tr><tr><td>w</td><td>移动到下一个单词</td></tr><tr><td>b</td><td>移动到上一个单词</td></tr><tr><td><a id="more"></a></td><td></td></tr></tbody></table><p>三：进入插入模式</p><p>​    - 在普通模式下使用下面的键将进入插入模式，并可以从相应的位置开始输入</p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>i</td><td>在当前光标处进行编辑</td></tr><tr><td>I</td><td>在行首插入</td></tr><tr><td>A</td><td>在行末插入</td></tr><tr><td>a</td><td>在光标后插入编辑</td></tr><tr><td>o</td><td>在当前行后插入一个新行</td></tr><tr><td>O</td><td>在当前行前插入一个新行</td></tr><tr><td>cw</td><td>替换从光标所在位置后到一个单词结尾的字符</td></tr></tbody></table><p>​    - 注意每次要先回到普通模式才能切换成以不同的方式进入插入模式</p><p>四：保存文档</p><p>命令行模式下保存文档</p><p>​    <strong>-</strong> 从普通模式输入:进入命令行模式，输入w回车，保存文档。输入:w 文件名可以将文档另存为其他文件名或存到其它路径下</p><p>五：退出vim</p><p>从普通模式输入:进入命令行模式，输入wq回车，保存并退出编辑</p><p>以下为其它几种退出方式：</p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>:q!</td><td>强制退出，不保存</td></tr><tr><td>:q</td><td>退出</td></tr><tr><td>:wq!</td><td>强制保存并退出</td></tr><tr><td>:w &lt;文件路径&gt;</td><td>另存为</td></tr><tr><td>:saveas 文件路径</td><td>另存为</td></tr><tr><td>:x</td><td>保存并退出</td></tr><tr><td>:wq</td><td>保存并退出</td></tr></tbody></table><p>普通模式下退出<strong>vim</strong></p><p>​    - 普通模式下输入Shift+zz即可保存退出vim</p><p>六：删除文本</p><p>进入普通模式，使用下列命令可以进行文本快速删除：</p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>x</td><td>删除游标所在的字符</td></tr><tr><td>X</td><td>删除游标所在前一个字符</td></tr><tr><td>Delete</td><td>同x</td></tr><tr><td>dd</td><td>删除整行</td></tr><tr><td>dw</td><td>删除一个单词（不适用中文）</td></tr><tr><td>d$或D</td><td>删除至行尾</td></tr><tr><td>d^</td><td>删除至行首</td></tr><tr><td>dG</td><td>删除到文档结尾处</td></tr><tr><td>d1G</td><td>删至文档首部</td></tr></tbody></table><p>除此之外，你还可以在命令之前加上数字，表示一次删除多行，如：</p><p>2dd表示一次删除2行</p><p>七： vim重复命令</p><p>普通模式下输入x，删除第一个字符，输入.(小数点)会再次删除一个字符，除此之外也可以重复dd的删除操作</p><p>执行指定次数相同的命令</p><p>进入普通模式输入N<command>，N 表示重复后面的次数</command></p><ul><li>输入10x，删除10个连续字符</li><li>输入3dd，将会删除3行文本</li></ul><p>在普通模式下，你还可以使用dw或者daw(delete a word)删除一个单词，所以你可以很容易的联想到dnw(<strong>n</strong>替换为相应数字) 表示删除n个单词</p><p>八：游标的快速跳转</p><p>普通模式下，下列命令可以让光标快速调转到指定位置，我们分别讨论快速实现行间跳转和行内跳转</p><p>行间跳转</p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>nG(n Shift+g)</td><td>游标移动到第 n 行(如果默认没有显示行号，请先进入命令模式，输入<strong>:set nu</strong>以显示行号)</td></tr><tr><td>gg</td><td>游标移动到到第一行</td></tr><tr><td>G(Shift+g)</td><td>到最后一行</td></tr></tbody></table><p>小技巧：你在完成依次跳转后，可以使用 <strong>Ctrl+o</strong> 快速回到上一次(跳转前)光标所在位置,这个技巧很实用，比如当你在写代码时，忽然想起有个 bug，需要修改，这时候你跳过去改好了，只需要按下 Ctrl+o 就可以回到你之前的位置。</p><ul><li>行内跳转</li></ul><p>普通模式下使用下列命令在行内按照单词为单位进行跳转</p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>w</td><td>到下一个单词的开头</td></tr><tr><td>e</td><td>到当前单词的结尾</td></tr><tr><td>b</td><td>到前一个单词的开头</td></tr><tr><td>ge</td><td>到前一个单词的结尾</td></tr><tr><td>0或^</td><td>到行头</td></tr><tr><td>$</td><td>到行尾</td></tr><tr><td>f&lt;字母&gt;</td><td>向后搜索&lt;字母&gt;并跳转到第一个匹配的位置(非常实用)</td></tr><tr><td>F&lt;字母&gt;</td><td>向前搜索&lt;字母&gt;并跳转到第一个匹配的位置</td></tr><tr><td>t&lt;字母&gt;</td><td>向后搜索&lt;字母&gt;并跳转到第一个匹配位置之前的一个字母(不常用)</td></tr><tr><td>T&lt;字母&gt;</td><td>向前搜索&lt;字母&gt;并跳转到第一个匹配位置之后的一个字母(不常用)</td></tr></tbody></table><p>依次进行如下操作练习：</p><ul><li>在普通模式下，任意跳转到一行，使用 w 跳转到一个单词的开头，然后使用 dw 删除这个单词</li><li>在普通模式下，使用 e 跳转到一个单词的结尾，并使用 ~ 将游标所在字母变成大写或小写</li></ul><p>九：复制粘贴和剪切</p><ul><li><p>复制及粘贴文本</p></li><li><p>普通模式中使用y复制</p></li><li><ul><li>普通模式中，yy复制游标所在的整行（3yy表示复制3行）</li><li>普通模式中，y^ 复制至行首，或y0。不含光标所在处字符。</li><li>普通模式中，y$ 复制至行尾。含光标所在处字符。</li><li>普通模式中，yw 复制一个单词。</li><li>普通模式中，y2w 复制两个单词。</li><li>普通模式中，yG 复制至文本末。</li><li>普通模式中，y1G 复制至文本开头。</li></ul></li><li><p>普通模式中使用 p 粘贴</p></li><li><ul><li>普通模式中，p(小写)代表粘贴至光标后（下）</li><li>普通模式中，P(大写)代表粘贴至光标前（上）</li></ul></li></ul><p>打开文件进入普通模式练习上述命令，这会儿你就可以随意 yy 了。</p><ul><li>剪切及粘贴</li></ul><p>其实前面讲得 dd 删除命令就是剪切，你每次 dd 删除文档内容后，便可以使用 p 来粘贴，也这一点可以让我们实现一个很爽快的功能——交换上下行：</p><p>ddp ,就这么简单，即实现了快速交换光标所在行与它下面的行</p><p>十：查找和替换</p><p>查找和替换是编辑器中最常用的功能之一，在普通编辑器当中查找替换时，你可能需要先移动鼠标在菜单中点击查找的功能，输入查找内容，再点击确认查找。而在vim中，所有的操作只需要敲击几下键盘就行了，手不用离开键盘区域，速度自然会快很多很多。</p><ul><li>字符替换命令</li><li>字符查找命令</li></ul><p>字符的替换及撤销(Undo操作)</p><ul><li>字符的替换及撤销(<strong>Undo</strong>操作)</li></ul><p>替换和<strong>Undo</strong>命令都是针对普通模式下的操作</p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>r+&lt;待替换字母&gt;</td><td>将游标所在字母替换为指定字母</td></tr><tr><td>R</td><td>连续替换，直到按下Esc</td></tr><tr><td>cc</td><td>替换整行，即删除游标所在行，并进入插入模式</td></tr><tr><td>cw</td><td>替换一个单词，即删除一个单词，并进入插入模式</td></tr><tr><td>C(大写)</td><td>替换游标以后至行末</td></tr><tr><td>~</td><td>反转游标所在字母大小写</td></tr><tr><td>u{n}</td><td>撤销一次或n次操作</td></tr><tr><td>U(大写)</td><td>撤销当前行的所有修改</td></tr><tr><td>Ctrl+r</td><td>redo，即撤销undo的操作</td></tr></tbody></table><p>打开文件进行编辑：</p><p>然后依次进行如下操作</p><ul><li>输入fa 跳转到第一个a字符</li><li>输入r，并且输入b，a字符被b字符替换（实用）</li><li>输入R替换字符，输入新字符串，输入完按ESC回到普通模式（实用）</li><li>输入cc替换整行字符，输入新字符串，输入完按ESC回到普通模式</li><li>输入cw 替换一个英文字(word)，输入完按ESC回到普通模式（实用）</li><li>输入~，翻转游标所在字符的大小写</li><li>输入C 替换至行尾，即游标所在处以后的字都会被替换，输入完按ESC回到普通模式</li><li>输入u 撤销上一次的操作</li></ul><p>十一：快速缩进</p><p>进操作均在普通模式下有效</p><p>打开文件进行编辑</p><ul><li>普通模式下输入15G，跳转到15行</li><li>普通模式下输入&gt;&gt; 整行将向右缩进（使用，用于格式化代码超爽）</li><li>普通模式下输入&lt;&lt; 整行向左回退</li><li>普通模式下输入:进入命令行模式下对shiftwidth值进行设置可以控制缩进和回退的字符数</li></ul><ul><li><strong>shiftwidth</strong>命令</li></ul><p>shiftwidth命令是指上面&gt;&gt;命令产生的缩进（可以简写成sw） 普通模式下输入:进入命令行模式下对shiftwidth值进行设置可以控制缩进和回退的字符数 获取目前的设定值</p><p>:set shiftwidth?</p><p>设置缩进为10个字符</p><p>:set shiftwidth=10</p><p>输入 ESC 回到普通模式，再次尝试 &gt;&gt; 看缩进量是否变化</p><ul><li>调整文本位置</li></ul><p>命令行模式下输入:ce(center)命令使本行内容居中</p><p>:ce</p><p>命令行模式下输入:ri(right)命令使本行文本靠右</p><p>:ri</p><p>命令行模式下输入:le(left)命令使本行内容靠左</p><p>:le</p><p>十二：查找</p><ul><li>快速查找</li></ul><p>普通模式下输入 / 然后键入需要查找的字符串 按回车后就会进行查找。 ？ 与/ 功能相同，只不过 ？ 是向上而 / 是向下查找。 进入查找之后，输入n 和 N 可以继续查找。 n是查找下一个内容,N查找上一个内容。</p><p>使用 vim 打开文件进行编辑（搜索高亮需要在配置文件 .vimrc 中设置 set hls ）</p><ul><li>普通模式下输入/server然后回车即可查找字符串 server</li><li>普通模式下输入n查找下一个 server</li><li>普通模式下输入？tt向上查找字符串 tt</li><li>普通模式下输入N查找上一个出现的 tt</li><li>命令行模式下输入 noh 然后回车即可取消搜索</li></ul><ul><li><p>高级查找</p></li><li><p>普通模式下输入*寻找游标所在处的单词</p></li><li><p>普通模式下输入#同上，但 # 是向前（上）找，*则是向后（下）找</p></li><li><p>普通模式下输入g*同* ，但部分符合该单词即可</p></li><li><p>普通模式下输入g#同# ，但部分符合该单词即可</p></li></ul><p>以上查找n,N 的继续查找命令依然可以用</p><hr><p>十三：多文件操作</p><ul><li>多文件编辑</li><li>可视模式</li><li>视窗操作</li><li>其他高级命令</li></ul><p>使用<strong>vim</strong>编辑多个文件</p><p>编辑多个文件有两种形式，一种是在进入vim前使用的参数就是多个文件。另一种就是进入vim后再编辑其他的文件。 同时创建两个新文件并编辑</p><p>$ vim 1.txt 2.txt</p><p>默认进入1.txt文件的编辑界面</p><ul><li>命令行模式下输入 :n 编辑 2.txt 文件，可以加 ! 即 :n! 强制切换，之前一个文件的输入没有保存，仅仅切换到另一个文件</li><li>命令行模式下输入 :N 编辑 1.txt 文件，可以加 ! 即 :N! 强制切换，之前文件内的输入没有保存，仅仅是切换到另一个文件</li></ul><p><strong>2.1.2</strong> 进入<strong>vim</strong>后打开新文件</p><ul><li>命令行模式下输入:e 3.txt 打开新文件3.txt</li><li>命令行模式下输入:e# 回到前一个文件</li><li>命令行模式下输入:ls可以列出以前编辑过的文档</li><li>命令行模式下输入:b 2.txt（或者编号）可以直接进入文件2.txt编辑</li><li>命令行模式下输入:bd 2.txt（或者编号）可以删除以前编辑过的列表中的文件项目</li><li>命令行模式下输入:e! 4.txt，新打开文件4.txt，放弃正在编辑的文件</li><li>命令行模式下输入:f 显示正在编辑的文件名</li><li>命令行模式下输入:f new.txt，改变正在编辑的文件名字为new.txt</li></ul><p><strong>2.1.3</strong> 恢复文件</p><p>由于在线环境的特殊性，请在本机尝试</p><p>如果因为断电等原因造成文档没有保存，可以采用恢复方式，vim -r进入文档后，输入:ewcover 1.txt来恢复</p><p>$ vim -r 1.txt</p><p>十四：可视模式</p><p>可视模式命令简介</p><ul><li>在普通模式下输入 v（小写），进入字符选择模式，就可以移动光标，光标走过的地方就会选取。再次按下v后就会取消选取。</li><li>在普通模式下输入 Shift+v（小写），进入行选择模式，按下V之后就会把整行选取，您可以上下移动光标选更多的行，同样，再按一次 Shift+v 就可以取消选取。</li><li>在普通模式下输入 Ctrl+v（小写），这是区域选择模式，可以进行矩形区域选择，再按一次 Ctrl+v 取消选取。</li><li>在可视模式下输入 d 删除选取区域内容</li><li>在可视模式下输入y复制选取区域内容</li></ul><p><strong>2.2.2</strong> 可视模式命令练习</p><p>拷贝练习文件到当前目录</p><p>打开练习文件</p><ul><li>在普通模式下6G跳转到第9行,输入Shift+v（小写V），进入可视模式进行行选择，选中5行，按下&gt;&gt;缩进，将5行整体缩进一个shiftwidth</li><li>在普通模式下输入 Ctrl+v（小写V），进入可视模式进行矩形区域选择，选中第一列字符然后x删除整列</li></ul><p>十五：视窗操作</p><p>vim 可以在一个界面里打开多个窗口进行编辑，这些编辑窗口称为 vim 的视窗。 打开方法有很多种，例如可以使用在命令行模式下输入 :new 打开一个新的 vim 视窗，并进入视窗编辑一个新文件（普通模式下输入 Ctrl+w也可以），除了 :new 命令，下述列举的多种方法也可以在命令模式或普通模式下打开新的视窗：</p><p>注意：快捷键可能会与浏览器的快捷键冲突，可换为 <strong>IE</strong> 浏览器进行实验或者在浏览器设置里禁用浏览器快捷键。</p><ul><li>命令行模式下输入:sp 1.txt 打开新的水平分屏视窗来编辑1.txt</li><li>命令行模式下输入:vsp 2.txt 打开新的垂直分屏视窗来编辑2.txt</li><li>普通模式下Ctrl+w s 将当前窗口分割成两个水平的窗口</li><li>普通模式下Ctrl+w v 将当前窗口分割成两个垂直的窗口</li><li>普通模式下Ctrl+w q 即 :q 结束分割出来的视窗。如果在新视窗中有输入需要使用强制符！即:q!</li><li>普通模式下Ctrl+w o 打开一个视窗并且隐藏之前的所有视窗</li><li>普通模式下Ctrl+w j 移至下面视窗</li><li>普通模式下Ctrl+w k 移至上面视窗</li><li>普通模式下Ctrl+w h 移至左边视窗</li><li>普通模式下Ctrl+w l 移至右边视窗</li><li>普通模式下Ctrl+w J 将当前视窗移至下面</li><li>普通模式下Ctrl+w K 将当前视窗移至上面</li><li>普通模式下Ctrl+w H 将当前视窗移至左边</li><li>普通模式下Ctrl+w L 将当前视窗移至右边</li><li>普通模式下Ctrl+w - 减小视窗的高度</li><li>普通模式下Ctrl+w + 增加视窗的高度</li></ul><p><strong>2.3.2</strong> 视窗操作练习</p><p>打开练习文件</p><p>$ vim 1.txt</p><ul><li>命令行模式下输入:new 打开一个新的vim视窗</li><li>命令行模式下输入:vsp 2.txt 打开新的横向视窗来编辑2.txt</li><li>命令行模式下输入:vsp 3.txt 打开新的横向视窗来编辑3.txt</li><li>如果使用非chrome浏览器可以使用Ctrl+w进行视窗间的跳转</li><li>分别在不同视窗的命令行模式下输入:q!退出多视窗编辑</li></ul><p>十六：文档加密</p><p>创建加密文档</p><p>$ vim -x file1</p><p>输入您的密码 确认密码 这样在下一次打开时，vim就会要求你输入密码</p><ul><li>在vim执行外部命令</li></ul><p>在命令行模式中输入!可以执行外部的shell命令</p><ul><li>:!ls 用于显示当前目录的内容</li><li>:!rm FILENAME用于删除名为 FILENAME 的文件</li><li>:w FILENAME可将当前 VIM 中正在编辑的文件另存为 FILENAME 文件</li></ul><p>十七：帮助系统</p><p><strong>vim</strong>中的查看帮助</p><ul><li>普通模式下按F1打开vim自己预设的帮助文档</li><li>命令行模式下输入:h shiftwidth 打开名为shiftwidth的帮助文件</li><li>命令行模式下输入:ver 显示版本及参数</li></ul><p>功能设定</p><p><strong>vim</strong>的功能设定</p><p>可以在编辑文件的时候进行功能设定，如命令行模式下输入:set nu（显示行数），设定值退出vim后不会保存。要永久保存配置需要修改vim配置文件。 vim的配置文件~/.vimrc可以打开文件进行修改，不过务必小心不要影响vim正常使用<br>获取目前的设定</p><ul><li>命令行模式下输入:set或者:se显示所有修改过的配置</li><li>命令行模式下输入:set all 显示所有的设定值</li><li>命令行模式下输入:set option? 显示option的设定值</li><li>命令行模式下输入:set nooption 取消当前设定值</li></ul><p><strong>set</strong>功能的说明</p><ul><li>命令行模式下输入:set autoindent(ai) 设置自动缩进</li><li>命令行模式下输入:set autowrite(aw) 设置自动存档，默认未打开</li><li>命令行模式下输入:set background=dark或light，设置背景风格</li><li>命令行模式下输入:set backup(bk) 设置自动备份，默认未打开</li><li>命令行模式下输入: set cindent(cin) 设置C语言风格缩进</li></ul><p>更多详细参数请参考vim手册</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vim </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac系统Python、PyCharm安装及使用方法详解</title>
      <link href="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/"/>
      <url>/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/</url>
      
        <content type="html"><![CDATA[<h2 id="一、下载安装Python3解释器"><a href="#一、下载安装Python3解释器" class="headerlink" title="一、下载安装Python3解释器"></a>一、下载安装Python3解释器</h2><blockquote><p>使用Python3</p></blockquote><ul><li>Python之父Guido van Rossum在邮件列表上宣布 Python 2.7将于2020年1月1日终止支持。用户如果想要在这个日期之后继续得到与Python 2.7有关的支持，则需要付费给商业供应商。</li></ul><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120150636393.png" alt="img"></p><a id="more"></a><pre><code>**Guido van Rossum 表示：**Let's not play games with semantics.**The way I see the situation for 2.7 is that EOL is January 1st, 2020, and there will be no updates, not even source-only security patches, after that date.（Python 2.7提供的支持截止到2020年1月1日，并且在那之后将不会有更新，甚至没有源代码安全补丁。）**Support (from the core devs, the PSF, and python.org) stops completely on that date. If you want support for 2.7 beyond that day you will have to pay a commercial vendor. Of course it's open source so people are also welcome to fork it. But the core devs have toiled long enough, and the 2020 EOL date (an extension from the originally annouced 2015 EOL!) was announced with sufficient lead time and fanfare that I don't feel bad about stopping to support it at all.</code></pre><p><strong>1.mac环境安装Python3解释器</strong></p><ul><li>1.有linux系统命令基础的伙伴可以按照我下方教程步骤安装</li><li>2.无linux系统命令基础的伙伴请参考  <strong>百度经验：如何在Mac上安装Python3</strong><ul><li>百度经验连接：<strong><a href="https://jingyan.baidu.com/article/4d58d54156e5069dd4e9c09b.html" target="_blank" rel="noopener">https://jingyan.baidu.com/article/4d58d54156e5069dd4e9c09b.html</a></strong></li></ul></li></ul><pre><code>1、查看 mac 自带系统版本#查看系统自带的pythonopen /System/Library/Frameworks/Python.framework/Versions#系统当前的python版本。python -V2、开始安装(这里我们使用神器homebrew)#安装前先搜索一下是否已经存在python3的包：brew search python3#已经存在，我们可以直接安装了：brew install python3#出现如下报错 Error: An unexpected error occurred during the `brew link` stepThe formula built, but is not symlinked into /usr/localPermission denied @ dir_s_mkdir - /usr/local/FrameworksError: Permission denied @ dir_s_mkdir - /usr/local/Frameworks#手动创建一个这个目录sudo mkdir /usr/local/Frameworks#再来解决权限问题：sudo chown $(whoami):admin /usr/local/Frameworks#手动执行一下安装时未完成的创建连接：brew link python3#当前系统下的python3的信息：brew info python3#系统当前的python版本。python -V</code></pre><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120114502890.png" alt="image-20191120114502890"></p><p><strong>2.修改mac当前系统的默认版本为Python3.*版本</strong></p><pre><code>#查找python3安装路径brew info python3#修改 Mac 系统配置文件vi ~/.bash_profile#添加配置信息 # Setting PATH for Python 3.7   # Python3的环境变量# The original version is saved in .bash_profile.pysavePATH="/Library/Frameworks/Python.framework/Versions/3.7/bin:${PATH}"export PATH#编译系统配置文件source ~/.bash_profile#系统当前的python版本。python -V</code></pre><ul><li>下面是我的<code>.bash_profile</code>配置文件(避免有的伙伴看不懂，加了中文注释哦！)<ul><li>虚拟环境、数据库的配置可以不用配置（不写上即可，没有安装写上会出错）</li></ul></li></ul><pre><code># Setting PATH for Python 3.7   # Python3的环境变量# The original version is saved in .bash_profile.pysavePATH="/Library/Frameworks/Python.framework/Versions/3.7/bin:${PATH}"export PATH# ———————————下面的虚拟环境、数据库的配置可以不用配置（不写上即可，没有安装写上会出错）—————————————————# Setting virtualenv PATH for Python 3.7        # 虚拟环境的配置export WORKON_HOME='~/workspace'export VIRTUALENVWRAPPER_SCRIPT=/Library/Frameworks/Python.framework/Versions/3.7/bin/virtualenvwrapper.shexport VIRTUALENVWRAPPER_PYTHON=/Library/Frameworks/Python.framework/Versions/3.7/bin/python3export VIRTUALENVWRAPPER_VIRTUALENV=/Library/Frameworks/Python.framework/Versions/3.7/bin/virtualenvexport VIRTUALENVWRAPPER_VIRTUALENV_ARGS='--no-site-packages'source /Library/Frameworks/Python.framework/Versions/3.7/bin/virtualenvwrapper.sh# setting MySQL PATH        # MySQL数据库的环境变量配置PATH=/usr/local/mysql/bin:$PATHexport PATH</code></pre><h2 id="二、下载安装Pycharm社区版"><a href="#二、下载安装Pycharm社区版" class="headerlink" title="二、下载安装Pycharm社区版"></a>二、下载安装Pycharm社区版</h2><p>PyCharm官网点击【DOWNLOAD NOW】后，有看到分专业版（Professional）和社区版（Community），社区版是免费的，一般使用社区版的就可以了。</p><ol><li><p>前往下载地址：<a href="https://www.jetbrains.com/pycharm/" target="_blank" rel="noopener">https://www.jetbrains.com/pycharm/</a></p></li><li><p>可以直接在首页中下载社区版</p></li></ol><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120115915844.png" alt="image-20191120115915844"></p><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120120155478.png" alt="image-20191120120155478"></p><ol start="3"><li>下载完成之后，双击打开，拖动到 mac 的应用列表中，<strong>和安装mac版其它软件是一样的操作</strong>。<br>若要使用专业付费版(土豪请随意)，请自行网上搜索。</li></ol><p><strong>下载完成后，安装过程和安装QQ等软件的过程是一样的，不要告诉我你不会，艹要是那样的话请出去补补课</strong></p><hr><h2 id="三、mac上Pycharm使用教程"><a href="#三、mac上Pycharm使用教程" class="headerlink" title="三、mac上Pycharm使用教程"></a>三、mac上Pycharm使用教程</h2><h4 id="Pycharm整体结构"><a href="#Pycharm整体结构" class="headerlink" title="Pycharm整体结构"></a>Pycharm整体结构</h4><ul><li>工具栏中可以对IDE做一些设置</li><li>项目文件区主要是自己工程下的一些文件，还有Python依赖库</li><li>运行调试区可以用来运行、调试Python代码</li><li>代码区为自己编写代码的窗口</li><li>控制台主要用于显示一些打印信息，还有调试信息</li></ul><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120120859668.png" alt="image-20191120120859668"></p><h4 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h4><ol><li>打开PyCharm，第一个按钮就是创建一个新的项目，第二个是选择打开已有的项目</li></ol><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120121013103.png" alt="image-20191120121013103"></p><ol start="2"><li>接着选择创建一个Python项目，右边第一栏location是选择项目的存放地址，第二栏INterpreter是选择解释器，可以看到这里有两个Python版本，一个Python 2.7，一个是3.6，这取决你自己电脑里安装了几个Python</li></ol><p>这里选择我们安装的Python3</p><ul><li>下图是解释如何参看我们安装的Python3路径</li></ul><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120114502890.png" alt="image-20191120114502890"></p><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120121045185.png" alt="image-20191120121045185"></p><ol start="3"><li>项目创建成功后，还只是一个空的项目，需要向里面添加Python文件</li></ol><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120121406687.png" alt="image-20191120121406687"></p><ol start="4"><li>创建文件名，点击OK</li></ol><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120121430116.png" alt="image-20191120121430116"></p><ol start="5"><li>然后就可以在创建好的Python文件里，编写自己的代码了</li></ol><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120121451814.png" alt="image-20191120121451814"></p><h3 id="修改-调整python解释器"><a href="#修改-调整python解释器" class="headerlink" title="修改/调整python解释器"></a>修改/调整python解释器</h3><p>有时候拿到一个Python项目，可能不是自己想要的解释器版本，可以选择调整解释器版本</p><ul><li>对整个项目调整其解释器</li></ul><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120121532582.png" alt="image-20191120121532582"></p><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120121543941.png" alt="image-20191120121543941"></p><p>也可以对单独一个文件设置其解释器</p><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120121605334.png" alt="image-20191120121605334"></p><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120121617263.png" alt="image-20191120121617263"></p><h4 id="执行Python文件"><a href="#执行Python文件" class="headerlink" title="执行Python文件"></a>执行Python文件</h4><ul><li>工具栏里选择执行run</li></ul><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120121637707.png" alt="image-20191120121637707"></p><ul><li>右上角执行run</li></ul><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120121702909.png" alt="image-20191120121702909"></p><ul><li>在代码区域右键选择run</li></ul><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120121722064.png" alt="image-20191120121722064"></p><ul><li>在左边文件区域，选择要执行的文件，右键run</li></ul><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120121924146.png" alt="image-20191120121924146"></p><ul><li>执行run之后，还可以在控制台重复执行run</li></ul><p><img src="/2019/11/20/mac-xi-tong-python-pycharm-an-zhuang-ji-shi-yong-fang-fa-xiang-jie/image-20191120122020326.png" alt="image-20191120122020326"></p><ul><li>如此，所示即表示安装完成</li></ul><p>由于篇幅短小和时间仓促,若你发现了错误请告知我。<br>希望我没有误导你，而是带你看了小小的新世界。</p><blockquote><p>更多资料欢迎访问我的博客：<a href="http://www.jiazhixiang.xyz">http://www.jiazhixiang.xyz</a></p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> Pycharm </tag>
            
            <tag> Python解释器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Microsoft Store微软应用商店安装Python解释器</title>
      <link href="/2019/10/25/shi-yong-microsoft-store-wei-ruan-ying-yong-shang-dian-an-zhuang-python-jie-shi-qi/"/>
      <url>/2019/10/25/shi-yong-microsoft-store-wei-ruan-ying-yong-shang-dian-an-zhuang-python-jie-shi-qi/</url>
      
        <content type="html"><![CDATA[<p><font color="red" size="5">视屏教程：<a href="https://www.bilibili.com/video/av70543472/" target="_blank" rel="noopener">使用Microsoft Store微软应用商店安装Python解释器</a></font></p><h3 id="使用Microsoft-Store微软应用商店安装Python解释器"><a href="#使用Microsoft-Store微软应用商店安装Python解释器" class="headerlink" title="使用Microsoft Store微软应用商店安装Python解释器"></a>使用Microsoft Store微软应用商店安装Python解释器</h3><blockquote><p>使用Microsoft Store微软应用商店需要先注册微软账号并成功登录微软应用商店</p></blockquote><ul><li>登录微软应用商店</li></ul><p><img src="/2019/10/25/shi-yong-microsoft-store-wei-ruan-ying-yong-shang-dian-an-zhuang-python-jie-shi-qi/1570448048783.png" alt="1570448048783"></p><a id="more"></a><ul><li>点击搜索Python</li></ul><p><img src="/2019/10/25/shi-yong-microsoft-store-wei-ruan-ying-yong-shang-dian-an-zhuang-python-jie-shi-qi/1570448110562.png" alt="1570448110562"></p><ul><li>点击Python3.7应用程序进行安装</li></ul><p><img src="/2019/10/25/shi-yong-microsoft-store-wei-ruan-ying-yong-shang-dian-an-zhuang-python-jie-shi-qi/1570448205316.png" alt="1570448205316"></p><ul><li>点击安装—开始安装</li></ul><p><img src="/2019/10/25/shi-yong-microsoft-store-wei-ruan-ying-yong-shang-dian-an-zhuang-python-jie-shi-qi/1570448305419.png" alt="1570448305419"></p><ul><li>等待下载完成</li></ul><p><img src="/2019/10/25/shi-yong-microsoft-store-wei-ruan-ying-yong-shang-dian-an-zhuang-python-jie-shi-qi/1570448349987.png" alt="1570448349987"></p><ul><li>完成安装</li></ul><p><img src="/2019/10/25/shi-yong-microsoft-store-wei-ruan-ying-yong-shang-dian-an-zhuang-python-jie-shi-qi/1570448380448.png" alt="1570448380448"></p><hr><h2 id="测试Python解释器是否安装成功"><a href="#测试Python解释器是否安装成功" class="headerlink" title="测试Python解释器是否安装成功"></a>测试Python解释器是否安装成功</h2><ul><li>按下电脑键盘 <strong>Win+R</strong> 组合键，打开运行窗口</li><li>如下图所示</li></ul><p><img src="/2019/10/25/shi-yong-microsoft-store-wei-ruan-ying-yong-shang-dian-an-zhuang-python-jie-shi-qi/1570448532402.png" alt="1570448532402"></p><ul><li>打开命令终端</li><li>输入   cmd  ——&gt;&gt;  回车/确定</li></ul><p><img src="/2019/10/25/shi-yong-microsoft-store-wei-ruan-ying-yong-shang-dian-an-zhuang-python-jie-shi-qi/1570448592344.png" alt="1570448592344"></p><ul><li>命令终端</li></ul><p><img src="/2019/10/25/shi-yong-microsoft-store-wei-ruan-ying-yong-shang-dian-an-zhuang-python-jie-shi-qi/1570448652651.png" alt="1570448652651"></p><ul><li>输入python   ——&gt;&gt;  回车/确定</li></ul><p><img src="/2019/10/25/shi-yong-microsoft-store-wei-ruan-ying-yong-shang-dian-an-zhuang-python-jie-shi-qi/1570448668658.png" alt="1570448668658"></p><ul><li>成功安装</li></ul><p><img src="/2019/10/25/shi-yong-microsoft-store-wei-ruan-ying-yong-shang-dian-an-zhuang-python-jie-shi-qi/1570448745452.png" alt="1570448745452"></p><ul><li>第一个程序</li><li>hello world</li></ul><p><img src="/2019/10/25/shi-yong-microsoft-store-wei-ruan-ying-yong-shang-dian-an-zhuang-python-jie-shi-qi/1570448797682.png" alt="1570448797682"></p><p>由于篇幅短小和时间仓促,若你发现了错误请告知我。<br>希望我没有误导你，而是带你看了小小的新世界。</p><blockquote><p>更多资料欢迎访问我的博客：<a href="http://www.jiazhixiang.xyz">http://www.jiazhixiang.xyz</a></p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pycharm指定Python解释器配置说明</title>
      <link href="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/"/>
      <url>/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/</url>
      
        <content type="html"><![CDATA[<p><font color="red" size="5">视屏教程：<a href="https://www.bilibili.com/video/av70541622/" target="_blank" rel="noopener">Pycharm指定Python解释器配置说明</a></font></p><ul><li>打开Pycharm编辑器</li></ul><p><img src="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/1570449574590.png" alt="1570449574590"></p><ul><li><p>创建一个新程序</p><a id="more"></a><p><img src="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/1570449665227.png" alt="1570449665227"></p></li><li><p>选择程序存放的位置</p></li></ul><p><img src="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/1570449730299.png" alt="1570449730299"></p><ul><li>选择存放在桌面</li></ul><p><img src="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/1570449864546.png" alt="1570449864546"></p><p><img src="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/1570449836108.png" alt=""></p><ul><li>创建first程序文件夹</li></ul><p><img src="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/1570450125656.png" alt="1570450125656"></p><ul><li>指定Python解释器</li></ul><p><img src="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/1570450195786.png" alt="1570450195786"></p><p><img src="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/1570450344375.png" alt="1570450344375"></p><p><img src="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/1570450372401.png" alt="1570450372401"></p><p><img src="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/1570450458760.png" alt="1570450458760"></p><ul><li>创建单个程序</li></ul><p><img src="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/1570450586216.png" alt="1570450586216"></p><p><img src="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/1570450607950.png" alt="1570450607950"></p><p><img src="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/1570450643999.png" alt="1570450643999"></p><p><img src="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/1570450748113.png" alt="1570450748113"></p><ul><li>运行程序</li></ul><p><img src="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/1570450819725.png" alt="1570450819725"></p><p><img src="/2019/10/25/pycharm-zhi-ding-python-jie-shi-qi-pei-zhi-shuo-ming/1570450846596.png" alt="1570450846596"></p><ul><li>如此，所示即表示安装完成</li></ul><p>由于篇幅短小和时间仓促,若你发现了错误请告知我。<br>希望我没有误导你，而是带你看了小小的新世界。</p><blockquote><p>更多资料欢迎访问我的博客：<a href="http://www.jiazhixiang.xyz">http://www.jiazhixiang.xyz</a></p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> Pycharm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows系统安装配置Pycharm社区版</title>
      <link href="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/"/>
      <url>/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/</url>
      
        <content type="html"><![CDATA[<p><font color="red" size="5">视屏教程：<a href="https://www.bilibili.com/video/av70541345/" target="_blank" rel="noopener">Windows系统安装配置Pycharm社区版</a></font></p><blockquote><ul><li>安装配置Pycharm前请先安装Python解释器<br>Python解释器配置文档连接：<a href="http://www.jiazhixiang.xyz/2018/05/15/Windows系统Python解释器的安装配置/">http://www.jiazhixiang.xyz/2018/05/15/Windows系统Python解释器的安装配置/</a><br><font color="red" size="5">视屏教程：<a href="https://www.bilibili.com/video/av70499867/" target="_blank" rel="noopener">Windows系统Python解释器的安装配置</a></font><br>微软应用商店安装Python解释器文档连接：<a href="http://www.jiazhixiang.xyz/2019/10/25/使用Microsoft-Store微软应用商店安装Python解释器/">http://www.jiazhixiang.xyz/2019/10/25/使用Microsoft-Store微软应用商店安装Python解释器/</a><br><font color="red" size="5">视屏教程：<a href="https://www.bilibili.com/video/av70543472/" target="_blank" rel="noopener">使用Microsoft Store微软应用商店安装Python解释器</a></font></li></ul></blockquote><h3 id="一、下载Pycharm社区版安装包"><a href="#一、下载Pycharm社区版安装包" class="headerlink" title="一、下载Pycharm社区版安装包"></a>一、下载Pycharm社区版安装包</h3><ol><li>使⽤浏览器打开Pycharm官⽅⽹站：<a href="http://www.jetbrains.com/pycharm" target="_blank" rel="noopener">http://www.jetbrains.com/pycharm</a></li></ol><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570443388459.png" alt="1570443388459"></p><a id="more"></a><ul><li>跳转至如下页面</li></ul><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570443779900.png" alt="1570443779900"></p><ul><li>请选择对应的电脑操作系统进行下载</li><li>这里我们选择免费的社区版进行下载安装</li></ul><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570443985810.png" alt="1570443985810"></p><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570444164240.png" alt="1570444164240"></p><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570444216034.png" alt="1570444216034"></p><ul><li>找到下载的安装包进行安装</li></ul><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570446550378.png" alt="1570446550378"></p><ul><li>开始进行安装</li></ul><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570446582921.png" alt="1570446582921"></p><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570446651235.png" alt="1570446651235"></p><ul><li>修改默认的安装路径</li></ul><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570446707821.png" alt="1570446707821"></p><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570446721299.png" alt="1570446721299"></p><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570446768031.png" alt="1570446768031"></p><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570446801086.png" alt="1570446801086"></p><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570446825101.png" alt="1570446825101"></p><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570446840489.png" alt="1570446840489"></p><ul><li>等待安装完成</li></ul><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570446881319.png" alt="1570446881319"></p><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570446922567.png" alt="1570446922567"></p><ul><li>运行pycharm编辑器</li></ul><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570449107750.png" alt="1570449107750"></p><ul><li>主题设置——建议选择黑色（护眼）</li></ul><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570449187614.png" alt="1570449187614"></p><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570449217292.png" alt="1570449217292"></p><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570449290577.png" alt="1570449290577"></p><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570449314449.png" alt="1570449314449"></p><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570449323284.png" alt="1570449323284"></p><p><img src="/2019/10/25/windows-xi-tong-an-zhuang-pei-zhi-pycharm-she-qu-ban/1570449353615.png" alt="1570449353615"></p><ul><li>如此，所示即表示安装完成</li></ul><p>由于篇幅短小和时间仓促,若你发现了错误请告知我。<br>希望我没有误导你，而是带你看了小小的新世界。</p><blockquote><p>更多资料欢迎访问我的博客：<a href="http://www.jiazhixiang.xyz">http://www.jiazhixiang.xyz</a></p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> Pycharm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>测试Markdown显示</title>
      <link href="/2019/09/07/ce-shi-markdown-xian-shi/"/>
      <url>/2019/09/07/ce-shi-markdown-xian-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><ul><li>代码块</li></ul><hr><pre><code>import requestsresponse = requests.get('https://translate.google.cn/')print(response.text)print(response.content)print(response.request.headers)print(response.headers)print(response.content.decode())</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Typora </tag>
            
            <tag> Markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pymysql远程连接被拒绝问题解决方法</title>
      <link href="/2019/07/23/pymysql-yuan-cheng-lian-jie-bei-ju-jue-wen-ti-jie-jue-fang-fa/"/>
      <url>/2019/07/23/pymysql-yuan-cheng-lian-jie-bei-ju-jue-wen-ti-jie-jue-fang-fa/</url>
      
        <content type="html"><![CDATA[<p><strong>pymysql远程连接被拒绝问题解决方法</strong></p><blockquote><p>pymysql.err.OperationalError: (2003, “Can’t connect to MySQL server on ‘172.16.112.136’ ([Errno 61] Connection refused)”)</p></blockquote><p><strong>一、 环境信息</strong></p><pre><code>服务器系统：Ubuntu16.04服务器MySQL版本：mysql Ver 14.14 Distrib 5.7.26, for Linux (x86_64) using  EditLine wrapper本地系统：MAC本地客户端：Pycharm本地开发环境：python(3.7.3)，PyMySQL(0.9.3)假设：登录用户名为:root，密码为:mysql ，MySQL连接端口:3306</code></pre><a id="more"></a><p><strong>二、问题描述</strong></p><ul><li><p>python连接MySQL报错</p></li><li><p>本地客户端及代码连接均失败： <code>2003, "Can't connect to MySQL server on ‘172.16.112.136 ’</code></p><pre><code>/usr/local/bin/python3.7 /Users/jiazhixiang/Desktop/Preparation/03-demo/demo.pyTraceback (most recent call last):  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pymysql/connections.py", line 583, in connect    **kwargs)  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socket.py", line 727, in create_connection    raise err  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/socket.py", line 716, in create_connection    sock.connect(sa)ConnectionRefusedError: [Errno 61] Connection refusedDuring handling of the above exception, another exception occurred:Traceback (most recent call last):  File "/Users/jiazhixiang/Desktop/Preparation/03-demo/demo.py", line 9, in &lt;module&gt;    conn = pymysql.connect(host='172.16.112.136', port=3306, user='root', password='mysql',database='school', charset='utf8')  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pymysql/__init__.py", line 94, in Connect    return Connection(*args, **kwargs)  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pymysql/connections.py", line 325, in __init__    self.connect()  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/pymysql/connections.py", line 630, in connect    raise excpymysql.err.OperationalError: (2003, "Can't connect to MySQL server on '172.16.112.136' ([Errno 61] Connection refused)")</code></pre><ul><li>如下图所示</li></ul><p><img src="/2019/07/23/pymysql-yuan-cheng-lian-jie-bei-ju-jue-wen-ti-jie-jue-fang-fa/image-20190524123716066.png" alt="img"></p></li></ul><p><strong>三、官方文档描述</strong></p><pre><code> "The error (2003) Can't connect to MySQL server on 'server' (10061) indicates that the network connection has been refused. You should check that there is a MySQL server running, that it has network connections enabled, and that the network port you specified is the one configured on the server." 谷歌译文：“错误（2003）无法连接到'服务器'上的MySQL服务器（10061）表示网络连接已被拒绝。您应检查是否有MySQL服务器正在运行，是否已启用网络连接，以及您指定的网络端口是服务器上配置的网络端口。“</code></pre><p><strong>四、解决过程</strong></p><blockquote><p><strong>授权法。</strong></p></blockquote><p><strong>需要注意mysql数据库配置文件中的bindaddress 的参数和skip-networking 配置</strong></p><pre><code>bindaddress : 设定哪些ip地址被配置，使得mysql服务器只回应哪些ip地址的请求),最好注释掉该参数或设置成为127.0.0.1以外的值skip-networking : 如果设置了该参数项，将导致所有TCP/IP端口没有被监听,也就是说出了本机，其他客户端都无法用网络连接到本mysql服务器，所以应该注释掉该参数</code></pre><ol><li>使用<code>ps aux|grep mysql</code>命令查看，MySQL服务是否已启动:</li></ol><p><img src="/2019/07/23/pymysql-yuan-cheng-lian-jie-bei-ju-jue-wen-ti-jie-jue-fang-fa/image-20190524125139053.png" alt="image-20190524125139053"></p><ol start="2"><li>使用<code>vim my.cnf</code>命令查看my.cnf文件(在MySQL安装目录下，我的位置是/u<code>/etc/mysql/mysql.conf.d</code>),修改其对应的值并重启MySQL。对应内容如下：</li></ol><p><img src="/2019/07/23/pymysql-yuan-cheng-lian-jie-bei-ju-jue-wen-ti-jie-jue-fang-fa/image-20190524125459064.png" alt="image-20190524125459064"></p><p><img src="/2019/07/23/pymysql-yuan-cheng-lian-jie-bei-ju-jue-wen-ti-jie-jue-fang-fa/image-20190524125535694.png" alt="image-20190524125535694"></p><ul><li>修改如下</li></ul><p><img src="/2019/07/23/pymysql-yuan-cheng-lian-jie-bei-ju-jue-wen-ti-jie-jue-fang-fa/image-20190524125641996.png" alt="image-20190524125641996"></p><pre><code>[mysqld]bind-address = 0.0.0.0  # 表示允许任何主机登陆MySQLport=3306               # 表示MySQL运行端口为3306(我的是3306，所以不用修改)</code></pre><ol start="3"><li>用<code>mysql -u root -p</code>命令，回车后输入密码<code>mysql</code>能正常登陆服务器MySQL</li></ol><p><img src="/2019/07/23/pymysql-yuan-cheng-lian-jie-bei-ju-jue-wen-ti-jie-jue-fang-fa/image-20190524125901337.png" alt="image-20190524125901337"></p><pre><code>mysql&gt; show global variables like 'port';  # 查看MySQL运行的实际端口+---------------+-------| Variable_name | Value |+---------------+-------+| port          | 3306  |+---------------+-------+1 row in set (0.01 sec)</code></pre><p><img src="/2019/07/23/pymysql-yuan-cheng-lian-jie-bei-ju-jue-wen-ti-jie-jue-fang-fa/image-20190524125958985.png" alt="image-20190524125958985"></p><pre><code>  mysql&gt; use mysql;  Reading table information for completion of table and column names  You can turn off this feature to get a quicker startup with -A  Database changed  mysql&gt; select host,user from user;+-----------+------------------+| host      | user             |+-----------+------------------+| localhost | debian-sys-maint || localhost | mysql.session    || localhost | mysql.sys        || localhost | root             |+-----------+------------------+4 rows in set (0.01 sec)</code></pre><pre><code># 如果上述查询结果，root用户对应的host不为%，则修改用户权限# 此处需注意的是，修改权限时要带上密码(IDENTIFIED BY 'mysql'),没加密码之前客户端还是不能远程访问MySQL。</code></pre><!-- ![image-20190524130314727](](pymysql远程连接被拒绝问题解决方法/image-20190524130314727.png) --><pre><code>mysql&gt; GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'mysql' WITH GRANT OPTION;Query OK, 0 rows affected, 1 warning (0.00 sec) # 表示修改成功# sql语句不区分大小写# grant all privileges on *.* to 'root'@'%' identified by 'mysql' with grant option;mysql&gt; FLUSH PRIVILEGES;    # 刷新数据库命令必须执行！！Query OK, 0 rows affected (0.00 sec)</code></pre><p><img src="/2019/07/23/pymysql-yuan-cheng-lian-jie-bei-ju-jue-wen-ti-jie-jue-fang-fa/image-20190524130842553.png" alt="image-20190524130842553"></p><pre><code>mysql&gt; select host,user from user;+-----------+------------------+| host      | user             |+-----------+------------------+| %         | root             || localhost | debian-sys-maint || localhost | mysql.session    || localhost | mysql.sys        |+-----------+------------------+4 rows in set (0.00 sec)</code></pre><ul><li>重启mysql服务</li></ul><p><img src="/2019/07/23/pymysql-yuan-cheng-lian-jie-bei-ju-jue-wen-ti-jie-jue-fang-fa/image-20190524131101204.png" alt="image-20190524131101204"></p><pre><code>python@ubuntu:~$ sudo service mysql stop[sudo] python 的密码： python@ubuntu:~$ sudo service mysql startpython@ubuntu:~$ ps aux | grep mysqlmysql     32273  3.0  6.6 1173600 134308 ?      Ssl  13:09   0:00 /usr/sbin/mysqldpython    32316  0.0  0.0  15984   936 pts/1    S+   13:09   0:00 grep --color=auto mysqlpython@ubuntu:~$ sudo service mysql status● mysql.service - MySQL Community Server   Loaded: loaded (/lib/systemd/system/mysql.service; enabled; vendor preset: enabled)   Active: active (running) since 五 2019-05-24 13:09:32 CST; 1min 9s ago  Process: 32274 ExecStartPost=/usr/share/mysql/mysql-systemd-start post (code=exited, status=0/SUCCESS)  Process: 32266 ExecStartPre=/usr/share/mysql/mysql-systemd-start pre (code=exited, status=0/SUCCESS) Main PID: 32273 (mysqld)   CGroup: /system.slice/mysql.service           └─32273 /usr/sbin/mysqld5月 24 13:09:30 ubuntu systemd[1]: Starting MySQL Community Server...5月 24 13:09:32 ubuntu systemd[1]: Started MySQL Community Server.</code></pre><ul><li>启动代码，问题已经解决</li></ul><p><img src="/2019/07/23/pymysql-yuan-cheng-lian-jie-bei-ju-jue-wen-ti-jie-jue-fang-fa/image-20190524131231367.png" alt="image-20190524131231367"></p><hr><blockquote><p>另一种方式：改表法</p></blockquote><p><strong>五、改表法。</strong></p><p>可能是你的帐号不允许从远程登陆，只能在localhost。这个时候只要在localhost的那台电脑，登入mysql后，更改 “mysql” 数据库里的 “user” 表里的 “host” 项，从”localhost”改称”%”</p><pre><code>登录数据库：mysql -u root -pmysqlmysql&gt;use mysql;mysql&gt;update user set host = '%' where user = 'root';mysql&gt;select host, user from user;mysql&gt;FLUSH PRIVILEGES;</code></pre><h2 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h2><blockquote><p>删除数据库中的其他用户</p></blockquote><ul><li>方法一</li></ul><p><code>delete from user where user='root' and host='localhost';</code></p><pre><code>mysql&gt;use mysqlDatabase changedmysql&gt; select host,user from user;+-----------+------------------+| host      | user             |+-----------+------------------+| %         | root             || localhost | debian-sys-maint || localhost | mysql.session    || localhost | mysql.sys        || localhost | root             |+-----------+------------------+5 rows in set (0.00 sec)mysql&gt;delete from user where user='root' and host='localhost';Query OK, 1 row affected (0.01 sec)mysql&gt;select host,user from user;+-----------+------------------+| host      | user             |+-----------+------------------+| %         | root             || localhost | debian-sys-maint || localhost | mysql.session    || localhost | mysql.sys        |+-----------+------------------+4 rows in set (0.00 sec)mysql&gt; flush privileges;Query OK, 0 rows affected (0.02 sec)</code></pre><p><img src="/2019/07/23/pymysql-yuan-cheng-lian-jie-bei-ju-jue-wen-ti-jie-jue-fang-fa/image-20190525101558520.png" alt="image-20190525101558520"></p><ul><li>方法二</li></ul><pre><code>drop user root@'localhost';</code></pre><h2 id="删除用户的数据库"><a href="#删除用户的数据库" class="headerlink" title="删除用户的数据库"></a>删除用户的数据库</h2><pre><code>drop database school;</code></pre><h2 id="修改指定用户密码"><a href="#修改指定用户密码" class="headerlink" title="修改指定用户密码"></a>修改指定用户密码</h2><pre><code>mysql -u root -p # 进入数据库update mysql.user set password=password('新密码') where User="phplamp" and Host="localhost";flush privileges;</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> Bug </tag>
            
            <tag> pymysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu系统搭建配置Python虚拟开发环境</title>
      <link href="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/"/>
      <url>/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/</url>
      
        <content type="html"><![CDATA[<p><strong>我们知道使用Python的过程中会安装各种库、包，甚至有时候还需要Python2和Python3两种环境混合使用，慢慢的你的Python运行环境会越来越臃肿，这倒还是其次，最可怕的是，有些应用会使用到某个Python包的特定版本，我们知道同一个Python运行环境里面是不能存在同一个包的不同版本的。所有这些都是你为什么要使用<br>Virtualenv的理由。</strong></p><p>Virtualenv给你一个<strong>干净的Python运行环境</strong>，并能让你不同的应用,使用不同版本的包文件提供了可能，甚至使 用<br>它可以让Python2和Python3和谐地共存。对于我们来说，我们用它的原因主要有以下几点：</p><pre><code>1.我们需要一个干净的Python环境，这个环境只针对我目前开发的应用；2.我们不希望多安装一个和项目无关的包，也不希望出现和其它应用有包版本冲突的问题；3.我们还需要生成一个requirements.txt用来告诉其他人我项目的依赖；4.我们不希望使用pyinstaller打包发布的过程中，给我加进来一堆没有用处的文件。</code></pre><pre><code>1.搭建虚拟环境主要是为了保证环境得统一性，对于不同得应用建立专属得python环境，比如针对后台开发得django可以建立一个虚拟环境，针对爬虫开发得应用可以在建立一个虚拟环境，避免环境之间产生冲突。2.可以避免一个环境造成得安装包过的多，导致环境加载缓慢.</code></pre><a id="more"></a><h2 id="搭建寻开发环境详细步骤"><a href="#搭建寻开发环境详细步骤" class="headerlink" title="搭建寻开发环境详细步骤"></a>搭建寻开发环境详细步骤</h2><ol><li>首先检查系统是否有安装pip</li></ol><pre><code>在终端输入如下命令：pip # 查看是否安装有pippip --version# 查看安装的pip版本___________________________________pip3 # 查看是否安装有pippip3 --version # 查看安装的pip3版本</code></pre><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557328279385.png" alt="1557328279385"></p><ul><li>安装pip<ul><li><code>sudo apt install python-pip</code></li></ul></li></ul><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557330160105.png" alt="1557330160105"></p><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557330201495.png" alt="1557330201495"></p><ul><li>安装pip3<ul><li><code>sudo apt install python3-pip</code></li></ul></li></ul><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557330305508.png" alt="1557330305508"></p><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557330371783.png" alt="1557330371783"></p><ol start="2"><li>安装 virtualenv 和 virtualenvwrapper</li></ol><pre><code>在终端输入如下命令：pip install virtualenvpip install virtualenvwrapper# 如果python2和python3共存，则需要同时安装pip3 install virtualenvpip3 install virtualenvwrapper# virtualenvwrapper是virtualenv的扩展包，可以更⽅便的新增、删除、复制、切换虚 拟环境。</code></pre><ul><li>Python2的安装</li></ul><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557337352791.png" alt="1557337352791"></p><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557337386266.png" alt="1557337386266"></p><ul><li>Python3的安装</li></ul><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557339330517.png" alt="1557339330517"></p><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557339362845.png" alt="1557339362845"></p><ul><li>找到 <code>virtualenvwrapper.sh</code> 的路径</li></ul><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557337564417.png" alt="1557337564417"></p><ul><li>修改<code>virtualenvwrapper.sh</code>的路径</li></ul><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557339703369.png" alt="1557339703369"></p><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557339743410.png" alt="1557339743410"></p><ul><li>测试 python3 解释器能否正常导入 <code>virtualenvwrapper</code><ul><li>如下图所示即代表成功</li></ul></li></ul><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557339461944.png" alt="1557339461944"></p><h3 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h3><ul><li>修改 <code>.bashrc</code> 文件（mac电脑是 <code>.bash_profile</code>文件）</li></ul><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557339743410.png" alt="1557337634587"></p><ul><li>将下列内容添加到<code>~/.bashrc</code> 文件中</li></ul><pre><code>#Setting virtualenv PATH for python3VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3source /usr/local/bin/virtualenvwrapper.sh # virtualenvwrapper.sh的路径export WORKON_HOME="/home/python/workspace"  # workspace是盛放虚拟环境的文件夹（根据自己的修改）# export WORKON_HOME=$HOME/.virtualenvs    # 盛放虚拟环境的文件夹也可以设置为.virtualenvs </code></pre><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557342578512.png" alt="1557342578512"></p><ul><li>更新环境变量<ul><li>执行<code>source ~/.bashrc</code></li></ul></li></ul><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557342603329.png" alt="1557342603329"></p><h3 id="创建虚拟开发环境"><a href="#创建虚拟开发环境" class="headerlink" title="创建虚拟开发环境"></a>创建虚拟开发环境</h3><ul><li>Django虚拟环境<ul><li><code>mkvitualenv -p python3 django_py3</code></li></ul></li></ul><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557342747600.png" alt="1557342747600"></p><ul><li>AI虚拟环境</li></ul><p><img src="/2019/07/22/ubuntu-xi-tong-da-jian-pei-zhi-python-xu-ni-kai-fa-huan-jing/1557342797321.png" alt="1557342797321"></p><ul><li>如此，虚拟环境即创建成功</li></ul><blockquote><p>由于篇幅短小和时间仓促,若你发现了错误请告知我。</p><p>希望我没有误导你，而是带你看了小小的新世界。</p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> 虚拟环境 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络 第三章 数据链路层</title>
      <link href="/2019/03/08/2019-03-08-ji-suan-ji-wang-luo-di-san-zhang-shu-ju-lian-lu-ceng/"/>
      <url>/2019/03/08/2019-03-08-ji-suan-ji-wang-luo-di-san-zhang-shu-ju-lian-lu-ceng/</url>
      
        <content type="html"><![CDATA[<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><blockquote><p>数据链路层负责把数据包从一个节点通过链路（直连网络或物理网络）传给相邻的另一个节点。</p></blockquote><ul><li>主机和路由器是节点(nodes)</li><li>连接相邻节点的通道是链路(links)<ul><li>有线链路(wired links)</li><li>无线链路(wireless links)</li><li>局域网(LANs)</li></ul></li><li>第2层的数据包(packet)是帧(frame)</li></ul><h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><ul><li>形成帧 (framing)</li><li>差错检测(error detect)：比特错，纠错</li><li>差错控制(error control)：丢包、重复、错序。流控制(flow control)</li><li>介质访问控制(medium access control): 多路访问，碰撞(collision)</li></ul><h1 id="差错检测"><a href="#差错检测" class="headerlink" title="差错检测"></a>差错检测</h1><pre class=" language-mermaid"><code class="language-mermaid">graph LR数据报-->数据报|校验码数据报|校验码--链路-->可能发生比特错可能发生比特错-->数据报'|校验码'数据报'|校验码'-->有错？有错？--有-->纠错或丢弃有错？--无-->数据报</code></pre><h2 id="奇偶校验"><a href="#奇偶校验" class="headerlink" title="奇偶校验"></a>奇偶校验</h2><h2 id="检验和-Checksum"><a href="#检验和-Checksum" class="headerlink" title="检验和(Checksum)"></a>检验和(Checksum)</h2><p>由于需要使用加法器实现算法，校验和一般不用于数据链路层 ，而是更高层，例如 ，IP层和传输层。</p><h2 id="循环冗余校验码-Cyclic-Redundancy-Check-CRC"><a href="#循环冗余校验码-Cyclic-Redundancy-Check-CRC" class="headerlink" title="循环冗余校验码(Cyclic Redundancy Check, CRC)"></a>循环冗余校验码(Cyclic Redundancy Check, CRC)</h2><p>如果传输过程中没有出现比特错，接 收方用相同的除数去除数据加CRC校 验码，余数应该为0。<br>(Cyclic Redundancy Check, CRC)</p><p>采用模2除法：做减法时没有借位，类似于按位异或。</p><p>链路层常用CRC检验，因为容易用硬件实现，速度快，检错率很高。</p><p>CRC-CCITT(x16+x12+x5+1)的错误检测能力：可以检出所 有随机奇数位错误和双位错，可以检出所有长度小于等 于16位的突发错；对于长度等于17位的突发错误，检错 率为99.9969%；长度大于等于18位的突发错误，检错率 为99.9985%。</p><h1 id="可靠数据传输"><a href="#可靠数据传输" class="headerlink" title="可靠数据传输"></a>可靠数据传输</h1><h1 id="停等协议"><a href="#停等协议" class="headerlink" title="停等协议"></a>停等协议</h1><h1 id="滑动窗口协议"><a href="#滑动窗口协议" class="headerlink" title="滑动窗口协议"></a>滑动窗口协议</h1><h1 id="PPP协议"><a href="#PPP协议" class="headerlink" title="PPP协议"></a>PPP协议</h1><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络 第二章 物理层</title>
      <link href="/2019/03/06/2019-03-06-ji-suan-ji-wang-luo-di-er-zhang-wu-li-ceng/"/>
      <url>/2019/03/06/2019-03-06-ji-suan-ji-wang-luo-di-er-zhang-wu-li-ceng/</url>
      
        <content type="html"><![CDATA[<h1 id="通信系统-Communication-System"><a href="#通信系统-Communication-System" class="headerlink" title="通信系统(Communication System)"></a>通信系统(Communication System)</h1><p>Information(信息) can be interpreted as a message(data), recorded as signs(符号), transmitted as signals(信号), measured as the entropy(熵)。</p><ul><li>信号(signal) : optical signal, electronic signal, radio signal</li><li>模拟信号(analog  signal)：连续取值的信号</li><li>数字信号(digitial signal)：用离散值表示的信号（跳变信号）</li><li>模拟传输(analog transmission): 模拟信号(analog  signal), 放大器(amplifier)</li><li>数字传输( digital transmission): 数字信号(digital  signal), 中继器(repeater)</li></ul><h1 id="正弦波信号"><a href="#正弦波信号" class="headerlink" title="正弦波信号"></a>正弦波信号</h1><ul><li>$\omega_c$ ：角频率。$\omega_c=2\pi f$</li><li>f：频率 (frequency) $f=1/T$</li><li>T:周期 (period)</li><li>A:振幅 (amplitude)</li><li>$\phi$: 相位 (phase) ( 初 相 ) 。</li></ul><h2 id="频移键控-Frequency-Shift-Keying-FSK"><a href="#频移键控-Frequency-Shift-Keying-FSK" class="headerlink" title="频移键控 (Frequency-Shift Keying, FSK)"></a>频移键控 (Frequency-Shift Keying, FSK)</h2><h2 id="幅移键控-Amplitude-Shift-Keying-ASK"><a href="#幅移键控-Amplitude-Shift-Keying-ASK" class="headerlink" title="幅移键控 (Amplitude-Shift Keying, ASK)"></a>幅移键控 (Amplitude-Shift Keying, ASK)</h2><h2 id="相移键控-Phase-Shift-Keying-PSK"><a href="#相移键控-Phase-Shift-Keying-PSK" class="headerlink" title="相移键控 (Phase-Shift Keying, PSK)"></a>相移键控 (Phase-Shift Keying, PSK)</h2><h2 id="正交调幅-QAM-–quadrature-amplitude-modulation"><a href="#正交调幅-QAM-–quadrature-amplitude-modulation" class="headerlink" title="正交调幅 (QAM –quadrature amplitude modulation)"></a>正交调幅 (QAM –quadrature amplitude modulation)</h2><h1 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h1><h2 id="单极编码-unipolar-encoding"><a href="#单极编码-unipolar-encoding" class="headerlink" title="单极编码(unipolar encoding)"></a>单极编码(unipolar encoding)</h2><h2 id="不归零编码-Non-Return-to-Zero-NRZ或NRZ-L"><a href="#不归零编码-Non-Return-to-Zero-NRZ或NRZ-L" class="headerlink" title="不归零编码 (Non-Return-to-Zero,NRZ或NRZ-L)"></a>不归零编码 (Non-Return-to-Zero,NRZ或NRZ-L)</h2><p>不归零编码是一种双极编码(bipolar encoding)。双极编码的波形就是二 进制符号，0、1分别与正、负电位相对应。它的电脉冲之间也无间隔。 RS-232C的接口电压就是采用双极编码</p><h2 id="曼彻斯特编码-Manchester-Encoding"><a href="#曼彻斯特编码-Manchester-Encoding" class="headerlink" title="曼彻斯特编码(Manchester Encoding)"></a>曼彻斯特编码(Manchester Encoding)</h2><p>曼彻斯特码的编码规则(以太网)是：0 → 10， 1 → 01</p><h2 id="差分曼彻斯特编码-Differential-Manchester-Encoding"><a href="#差分曼彻斯特编码-Differential-Manchester-Encoding" class="headerlink" title="差分曼彻斯特编码 (Differential Manchester Encoding)"></a>差分曼彻斯特编码 (Differential Manchester Encoding)</h2><p>差分曼彻斯特码是一种差分双相码，先把输入的NRZ波形变换成差分波形 ，再用绝对双相码(第一个规则)编码，即，”1”起始不跳变，”0”起始跳变， 再用Manchester编码第一规则按当前电平进行编码。简单描述：起始是否 跳变确定是否0或1，中间一定跳变。</p><h2 id="4B-5B编码"><a href="#4B-5B编码" class="headerlink" title="4B/5B编码"></a>4B/5B编码</h2><p>用5比特表示4比特。 每个编码没有多于1个的前导零和多于2个的末端 零。如果结合NRZI编码，就可以既防止跳变过多，又消除基线漂移和 时钟漂移。其它编码用于控制，如，11111表示空闲。</p><h1 id="物理介质-Physical-Media"><a href="#物理介质-Physical-Media" class="headerlink" title="物理介质(Physical Media)"></a>物理介质(Physical Media)</h1><h2 id="有线介质"><a href="#有线介质" class="headerlink" title="有线介质"></a>有线介质</h2><h3 id="非屏蔽双绞线-Unshielded-Twisted-Pair"><a href="#非屏蔽双绞线-Unshielded-Twisted-Pair" class="headerlink" title="非屏蔽双绞线(Unshielded Twisted Pair)"></a>非屏蔽双绞线(Unshielded Twisted Pair)</h3><ul><li>四对线: 绿 绿白，橙 橙白，蓝 蓝白，棕棕白</li><li>每对线先逆时针绞在一起，然后所有线对再逆时针绞在一起。</li><li>标准568A：绿白 1，绿 2，橙白 3，蓝 4，蓝白 5，橙 6，棕白 7，棕 8</li><li>标准568B：橙白 1，橙 2，绿白 3，蓝 4，蓝白 5，绿 6，棕白 7，棕 8</li></ul><h3 id="屏蔽双绞线-Shielded-Twisted-Pair"><a href="#屏蔽双绞线-Shielded-Twisted-Pair" class="headerlink" title="屏蔽双绞线 (Shielded Twisted Pair)"></a>屏蔽双绞线 (Shielded Twisted Pair)</h3><h3 id="光导纤维-Optical-Fiber"><a href="#光导纤维-Optical-Fiber" class="headerlink" title="光导纤维 (Optical Fiber)"></a>光导纤维 (Optical Fiber)</h3><ul><li>在玻璃纤维传输光脉冲, 每个脉冲一比特</li><li>全反射条件: 入射角大于临界角</li></ul><h4 id="单模光纤和多模光纤"><a href="#单模光纤和多模光纤" class="headerlink" title="单模光纤和多模光纤"></a>单模光纤和多模光纤</h4><h5 id="阶跃光纤"><a href="#阶跃光纤" class="headerlink" title="阶跃光纤"></a>阶跃光纤</h5><h5 id="渐变光纤"><a href="#渐变光纤" class="headerlink" title="渐变光纤"></a>渐变光纤</h5><h2 id="无线介质-大气"><a href="#无线介质-大气" class="headerlink" title="无线介质(大气)"></a>无线介质(大气)</h2><ul><li>地面微波 45 Mbps channels</li><li>WiFI 54 Mbps(802.11g),600Mbps(802.11n)</li><li>3G网络 ~ 1 Mbps</li><li>卫星 1 Kbps ~ 45Mbps 270 msec 延迟</li></ul><h3 id="电磁谱"><a href="#电磁谱" class="headerlink" title="电磁谱"></a>电磁谱</h3><h1 id="多路复用和电路交换"><a href="#多路复用和电路交换" class="headerlink" title="多路复用和电路交换"></a>多路复用和电路交换</h1><ul><li>时分多路复用(Time Division Multiplexing)  (STDM–Synchronous TDM)</li><li>频分多路复用(Frequency Division Multiplexing)</li><li>波分多路复用(Wavelength Division Multiplexing)</li><li>码分多路复用(Code Division Multiplexing)：3G中使用的CDMA通过编码的方式</li></ul><h2 id="波分多路复用和统计多路复用"><a href="#波分多路复用和统计多路复用" class="headerlink" title="波分多路复用和统计多路复用"></a>波分多路复用和统计多路复用</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 计算机网络 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>前馈神经网络</title>
      <link href="/2019/02/14/2019-02-14-qian-kui-shen-jing-wang-luo/"/>
      <url>/2019/02/14/2019-02-14-qian-kui-shen-jing-wang-luo/</url>
      
        <content type="html"><![CDATA[<p>节日快乐（并不）…</p><p>“机器学习”顾名思义就是机器通过对观测到的事物进行归纳，进而总结出它们之间的规律、关系一类。</p><p>各神经元从输入层开始，接收前一级输入，并输入到下一级，直至输出层。整个网络中无反馈，可用一个DAG（有向无环图）表示。</p><p>在这么多神经元更新的时候，让它们每个值都往一个方向变，什么方向呢？就是刚刚我们说的使得损失函数向不断降低的方向变，降低模型预测结果和给定的目标值之间的差距， 这点记住了就足够了。更为复杂的神经网络构建方式，从本质来讲都一样，是通过不断调整各个神经元中的待定系数使得损失函数向不断降低的方向移动。 </p><p>通过凸优化的方式能够顺利求出损失函数的极值。然而我们在真正的生产环境遇到的各种神经网络中包含着非常多的线性和非线性分类器函数组合，这也就意味着，在这种复杂的网络环境中，损失函数极有可能，甚至可以说几乎 一定不是凸函数一一在这个函数的空间中会呈现出“层峦叠幢”、 “坑坑洼洼”的不规则形 状，而非前面我们画出来的一个大碗。 因此，在真正的商用框架中——比如 Tensor Flow 会用很多技巧来寻找在整个向量空间中拥有极小值点的参数向量。对于这种不规则形状的非凸函数来说，当然也是可以通过遗传算法、随机梯度下降等多种方式相结合的方法来不断试探找到极小值点位置的。当然，这些过程对于一个普通的 TensorFlow 的使用者来说是透明的，它们已经由那些数据科学家们实现并封装在框架中了。</p><p>下面整理一些学习笔记。</p><h2 id="网络结构"><a href="#网络结构" class="headerlink" title="网络结构"></a>网络结构</h2><p>BP（前馈神经）网络是所有的神经网络中结构最为单纯的一种，如下图。分成输入层、隐藏层、输出层。节点数目可以不一样而且不对称。<strong>神经网络本身就有很多种设计模式，并且会在不同的模式下 产生不同的训练效果和运用特点。</strong><br><img src="https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=5367efb50324ab18f41be96554938da8/f7246b600c338744eaf925ef5b0fd9f9d72aa060.jpg" alt="BP网络"></p><h2 id="损失函数"><a href="#损失函数" class="headerlink" title="损失函数"></a>损失函数</h2><p>管这种函数叫<strong>Cost</strong>或者<strong>Loss</strong>。深度学习中的损失函数其实是不一而足的，每种损失函数在当初诞生的时候都是有－些客观环境和理由的。但不管是哪种损失函数，都有这样几个特点。</p><ul><li><strong>恒非负</strong>。都说是损失了，最圆满的情况就是没损失，或者说损失为 0，但凡有一点拟合的偏差那 就会让损失增加。 所以损失函数都是恒非负的，否则也无法出现合理的解释了。</li><li><strong>误差越小函数值越小</strong>。这个性质也是非常重要的，如果函数定义的不好，优化起来没有方向或者逻辑过于复 杂，那对于问题处理显然是不利的。</li><li><strong>收敛快</strong>。指在我们优化这个损失函数<strong>Loss</strong>的迭代过程中需要让它比较快地逼近极小值，逼近函数值的低点。同等情况下一个钟头能得到解那绝对没必要花三个钟头，好的损失函数的定义会让这个训练时间在一定程度上缩短的。这个条件不能算是必要条件，因为它只要不影响正确性，慢一点其实也不能算作“错误”。</li></ul><h2 id="训练过程"><a href="#训练过程" class="headerlink" title="训练过程"></a>训练过程</h2><p>回过头来再看我们初始化$(w_0,b_0,Loss_0)$后下一步怎么做。<br>$w_1=w_0-\eta\frac{\partial Loss}{\partial w},b_1=b_0-\eta\frac{\partial Loss}{\partial b}$<br>再次强调一下，不求梯度（偏导数）的情况下，通过改变$w$或$b$的值是一定能够比较 出来移动的方向的，但是问题是不知道移动多少比较适宜。 而有了偏导数与学习率$\eta$的乘积后，当这个点逐步接近“碗底”的时候，偏导数也随之降低，移动的步伐也会慢慢减小，收敛更为平缓，不会轻易出现“步子太大”而越过最低点的情况。一轮一轮进行迭代，直到每次更新的值非常小，损失值不再明显减少就可以判断为训 练结束。此时得到的$w,b$值就是我们要求的模型。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>卷积网络做图片分类</title>
      <link href="/2019/02/08/2019-02-08-juan-ji-wang-luo-zuo-tu-pian-fen-lei/"/>
      <url>/2019/02/08/2019-02-08-juan-ji-wang-luo-zuo-tu-pian-fen-lei/</url>
      
        <content type="html"><![CDATA[<p>一个用CNN做图片分类的例子，是把 CNN 应用于 CIFAR-10 上的 一个实验过程</p><pre class=" language-python"><code class="language-python"><span class="token triple-quoted-string string">"""挖坑待填…"""</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>一个基于MINST数据集的神经网络实验</title>
      <link href="/2019/02/06/2019-02-06-yi-ge-ji-yu-minst-shu-ju-ji-de-shen-jing-wang-luo-shi-yan/"/>
      <url>/2019/02/06/2019-02-06-yi-ge-ji-yu-minst-shu-ju-ji-de-shen-jing-wang-luo-shi-yan/</url>
      
        <content type="html"><![CDATA[<p>照着<a href="http://www.tensorfly.cn/tfdoc/tutorials/overview.html" target="_blank" rel="noopener">官方文档</a>按图索骥…算是熟悉一下TF的用法吧</p><pre><code>python3 fully_connected_feed.py/home/wuk/anaconda3/envs/tensorflow/lib/python3.7/importlib/_bootstrap.py:219: RuntimeWarning: compiletime version 3.6 of module 'tensorflow.python.framework.fast_tensor_util' does notmatch runtime version 3.7  return f(*args, **kwds)WARNING:tensorflow:From fully_connected_feed.py:120: read_data_sets (fromtensorflow.contrib.learn.python.learn.datasets.mnist) is deprecated and will be removed in a future version.Instructions for updating:Please use alternatives such as official/mnist/dataset.py from tensorflow/models.WARNING:tensorflow:From /home/wuk/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow/contrib/learn/python/learn/datasets/mnist.py:260: maybe_download (from tensorflow.contrib.learn.python.learn.datasets.base) is deprecated and will be removed in a future version.Instructions for updating:Please write your own downloading logic.WARNING:tensorflow:From /home/wuk/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow/contrib/learn/python/learn/datasets/mnist.py:262: extract_images (from tensorflow.contrib.learn.python.learn.datasets.mnist) is deprecated and will be removed in a future version.Instructions for updating:Please use tf.data to implement thisfunctionality.Extracting /tmp/tensorflow/mnist/input_data/train-images-idx3-ubyte.gzWARNING:tensorflow:From /home/wuk/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow/contrib/learn/python/learn/datasets/mnist.py:267: extract_labels (from tensorflow.contrib.learn.python.learn.datasets.mnist) is deprecated and will be removed in a future version.Instructions for updating:Please use tf.data to implement thisfunctionality.Extracting /tmp/tensorflow/mnist/input_data/train-labels-idx1-ubyte.gzExtracting /tmp/tensorflow/mnist/input_data/t10k-images-idx3-ubyte.gzExtracting /tmp/tensorflow/mnist/input_data/t10k-labels-idx1-ubyte.gzWARNING:tensorflow:From /home/wuk/anaconda3/envs/tensorflow/lib/python3.7/site-packages/tensorflow/contrib/learn/python/learn/datasets/mnist.py:290: DataSet.__init__ (from tensorflow.contrib.learn.python.learn.datasets.mnist) is deprecated and will be removed in a future version.Instructions for updating:Please use alternatives such as official/mnist/dataset.py from tensorflow/models.2019-02-06 19:33:58.080074: I tensorflow/core/platform/cpu_feature_guard.cc:141] Your CPU supports instructions that this TensorFlow binary was notcompiled to use: AVX2 FMAStep 0: loss = 2.31 (0.568 sec)Step 100: loss = 2.15 (0.003 sec)Step 200: loss = 1.93 (0.003 sec)Step 300: loss = 1.51 (0.004 sec)Step 400: loss = 1.28 (0.002 sec)Step 500: loss = 1.01 (0.003 sec)Step 600: loss = 0.77 (0.002 sec)Step 700: loss = 0.67 (0.002 sec)Step 800: loss = 0.69 (0.004 sec)Step 900: loss = 0.43 (0.003 sec)Training Data Eval:Num examples: 55000  Num correct: 47163  Precision @ 1: 0.8575Validation Data Eval:Num examples: 5000  Num correct: 4319  Precision @ 1: 0.8638Test Data Eval:Num examples: 10000  Num correct: 8663  Precision @ 1: 0.8663Step 1000: loss = 0.54 (0.044 sec)Step 1100: loss = 0.47 (0.552 sec)Step 1200: loss = 0.51 (0.003 sec)Step 1300: loss = 0.39 (0.003 sec)Step 1400: loss = 0.46 (0.003 sec)Step 1500: loss = 0.26 (0.003 sec)Step 1600: loss = 0.46 (0.003 sec)Step 1700: loss = 0.29 (0.003 sec)Step 1800: loss = 0.45 (0.003 sec)Step 1900: loss = 0.49 (0.003 sec)Training Data Eval:Num examples: 55000  Num correct: 49275  Precision @ 1: 0.8959Validation Data Eval:Num examples: 5000  Num correct: 4508  Precision @ 1: 0.9016Test Data Eval:Num examples: 10000  Num correct: 9014  Precision @ 1: 0.9014</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>配置TensorFlow</title>
      <link href="/2019/02/06/2019-02-06-pei-zhi-tensorflow/"/>
      <url>/2019/02/06/2019-02-06-pei-zhi-tensorflow/</url>
      
        <content type="html"><![CDATA[<p>该补上的文章🕊了太久了…</p><h2 id="工具准备"><a href="#工具准备" class="headerlink" title="工具准备"></a>工具准备</h2><h3 id="jupyter-notebook"><a href="#jupyter-notebook" class="headerlink" title="jupyter notebook"></a>jupyter notebook</h3><h3 id="Anaconda"><a href="#Anaconda" class="headerlink" title="Anaconda"></a>Anaconda</h3><p>Anaconda集成了很多 Python的第三方库。 安装它之后就可以不用再去一个一个地下载这些库并解决它们之间的依赖关系了，是十分方便的。<br>在<a href="https://www.anaconda.com/distribution/" target="_blank" rel="noopener">Anaconda Distribution</a>上下载。<br>运行下述脚本</p><pre><code>bash Anaconda3-2018.12-Linux-x86_64.sh</code></pre><p>运行下述命令检查</p><pre><code>conda list</code></pre><h4 id="报错：conda-未找到命令"><a href="#报错：conda-未找到命令" class="headerlink" title="报错：conda:未找到命令"></a>报错：conda:未找到命令</h4><p>修改环境变量</p><pre><code>vim ~/.bashrc</code></pre><p>在最后添加：</p><pre><code>export PATH=~/anaconda3/bin:$PATH</code></pre><p>重启环境变量：</p><pre><code>source ~/.bashrc</code></pre><h3 id="TensorFlow"><a href="#TensorFlow" class="headerlink" title="TensorFlow"></a>TensorFlow</h3><ul><li><a href="https://my.oschina.net/lupeng/blog/2986495" target="_blank" rel="noopener">坑</a></li></ul><p>建立TensorFlow的运行环境，并将其激活，执行：</p><pre><code>conda create -n tensorflow python=3.7source activate tensorflow</code></pre><p>这样就激活了虚拟环境。<br>执行以下代码进行 TensorFlow 的安装： </p><pre><code>pip3 install tensorflow</code></pre><p>执行以下代码测试 TensorFlow 是否安装成功，运行一个 Hello TensorFlow</p><pre class=" language-python"><code class="language-python"><span class="token keyword">import</span> tensorflow <span class="token keyword">as</span> tfhello <span class="token operator">=</span> tf<span class="token punctuation">.</span>constant<span class="token punctuation">(</span><span class="token string">'Hello, TensorFlow!'</span><span class="token punctuation">)</span>sess <span class="token operator">=</span> tf<span class="token punctuation">.</span>Session<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span> sess<span class="token punctuation">.</span>run<span class="token punctuation">(</span>hello<span class="token punctuation">)</span></code></pre><pre><code>Hello, TensorFlow!</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 机器学习 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>数据结构</title>
      <link href="/2019/02/03/2019-02-03-shu-ju-jie-gou/"/>
      <url>/2019/02/03/2019-02-03-shu-ju-jie-gou/</url>
      
        <content type="html"><![CDATA[<p>以下数据结构均采用ll作为值类型，应用时根据需求调整。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">long</span> <span class="token keyword">long</span> ll<span class="token punctuation">;</span><span class="token keyword">const</span> ll INF <span class="token operator">=</span> <span class="token number">1e9</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//表示（值）正无穷，且两个正无穷相加不会溢出</span><span class="token keyword">const</span> <span class="token keyword">int</span> NPOS <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//表示（下标）不存在</span></code></pre><h2 id="离散化"><a href="#离散化" class="headerlink" title="离散化"></a>离散化</h2><p>在vector基础上的离散化，使用push_back()向其中插值，init()排序并离散化，ask查询离散化之后的值，at/[]运算符查离散前的值。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Ranker <span class="token operator">:</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span><span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">sort</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">ask</span><span class="token punctuation">(</span>ll x<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">lower_bound</span><span class="token punctuation">(</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="并查集"><a href="#并查集" class="headerlink" title="并查集"></a>并查集</h2><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> UnionfindSet <span class="token operator">:</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token function">UnionfindSet</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token function">at</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> w<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>w <span class="token operator">=</span> <span class="token function">ask</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">,</span> u <span class="token operator">=</span> <span class="token function">ask</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">,</span> w <span class="token operator">!=</span> u<span class="token punctuation">)</span>            <span class="token function">at</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">at</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span> <span class="token operator">!=</span> u <span class="token operator">?</span> <span class="token function">at</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token function">at</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> u<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="单调队列和单调栈"><a href="#单调队列和单调栈" class="headerlink" title="单调队列和单调栈"></a>单调队列和单调栈</h2><p><a href="https://vjudge.net/solution/18456407" target="_blank" rel="noopener">使用示例</a></p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">typedef</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> ll<span class="token operator">></span> pil<span class="token punctuation">;</span><span class="token keyword">struct</span> Monotone <span class="token operator">:</span> deque<span class="token operator">&lt;</span>pil<span class="token operator">></span><span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">const</span> pil <span class="token operator">&amp;</span>p<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>second <span class="token operator">>=</span> p<span class="token punctuation">.</span>second<span class="token punctuation">)</span>            <span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token function">push_back</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span> p<span class="token punctuation">.</span>first <span class="token operator">-</span> <span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first <span class="token operator">>=</span> k<span class="token punctuation">;</span><span class="token punctuation">)</span>            <span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="ST表"><a href="#ST表" class="headerlink" title="ST表"></a>ST表</h2><p><a href="https://cn.vjudge.net/solution/14470893" target="_blank" rel="noopener">使用示例</a></p><p>$O(n\log n)$预处理，$O(1)$求静态区间最小值。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token comment" spellcheck="true">/*//可选优化#define log2(n) LOG2[n]struct Log : vector&lt;ll>{    Log(int N, ll E) : vector&lt;ll>(N, -1)    {        for (int i = 1; i &lt; N; ++i)            at(i) = at(i / E) + 1;    }} LOG2(N, 2);*/</span><span class="token keyword">struct</span> SparseTable<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>ll<span class="token operator">>></span> f<span class="token punctuation">;</span>    <span class="token function">SparseTable</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token operator">&amp;</span>a<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token function">log2</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> f<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>k<span class="token punctuation">)</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> k<span class="token punctuation">)</span> <span class="token operator">&lt;</span> a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                f<span class="token punctuation">[</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> k<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    ll <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token function">log2</span><span class="token punctuation">(</span>r <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">min</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>r <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> k<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="树状数组"><a href="#树状数组" class="headerlink" title="树状数组"></a>树状数组</h2><p>模板中Base是对应的基础版本，支持单点修改区间查询。</p><h3 id="一维"><a href="#一维" class="headerlink" title="一维"></a>一维</h3><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Fenwick<span class="token punctuation">{</span>    <span class="token keyword">struct</span> BaseFenwick    <span class="token punctuation">{</span>        vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> v<span class="token punctuation">;</span>        <span class="token function">BaseFenwick</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">v</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> ll w<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> x <span class="token operator">+</span><span class="token operator">=</span> x <span class="token operator">&amp;</span> <span class="token operator">-</span>x<span class="token punctuation">)</span>                v<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> w<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        ll <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> x<span class="token punctuation">;</span> x <span class="token operator">-</span><span class="token operator">=</span> x <span class="token operator">&amp;</span> <span class="token operator">-</span>x<span class="token punctuation">)</span>                ans <span class="token operator">+</span><span class="token operator">=</span> v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> ans<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    pair<span class="token operator">&lt;</span>BaseFenwick<span class="token punctuation">,</span> BaseFenwick<span class="token operator">></span> p<span class="token punctuation">;</span>    <span class="token function">Fenwick</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">p</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> ll w<span class="token punctuation">)</span> <span class="token punctuation">{</span> p<span class="token punctuation">.</span>first<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>second<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> x <span class="token operator">*</span> w<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> ll w<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">add</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span>r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    ll <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> p<span class="token punctuation">.</span>first<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">-</span> p<span class="token punctuation">.</span>second<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    ll <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">ask</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">ask</span><span class="token punctuation">(</span>l <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="二维"><a href="#二维" class="headerlink" title="二维"></a>二维</h3><p>高维的数据结构只要每一维维护低一维的数据（树套树）即可。其余数据结构亦同理。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Fenwick2<span class="token punctuation">{</span>    <span class="token keyword">struct</span> BaseFenwick2    <span class="token punctuation">{</span>        vector<span class="token operator">&lt;</span>Fenwick<span class="token operator">></span> v<span class="token punctuation">;</span>        <span class="token function">BaseFenwick2</span><span class="token punctuation">(</span><span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">v</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">,</span> ll w<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> x <span class="token operator">+</span><span class="token operator">=</span> x <span class="token operator">&amp;</span> <span class="token operator">-</span>x<span class="token punctuation">)</span>                v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> t<span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        ll <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> x<span class="token punctuation">;</span> x <span class="token operator">-</span><span class="token operator">=</span> x <span class="token operator">&amp;</span> <span class="token operator">-</span>x<span class="token punctuation">)</span>                ans <span class="token operator">+</span><span class="token operator">=</span> v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> ans<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    pair<span class="token operator">&lt;</span>BaseFenwick2<span class="token punctuation">,</span> BaseFenwick2<span class="token operator">></span> p<span class="token punctuation">;</span>    <span class="token function">Fenwick2</span><span class="token punctuation">(</span><span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token function">BaseFenwick2</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">BaseFenwick2</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">,</span> ll w<span class="token punctuation">)</span> <span class="token punctuation">{</span> p<span class="token punctuation">.</span>first<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> b<span class="token punctuation">,</span> t<span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>second<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> b<span class="token punctuation">,</span> t<span class="token punctuation">,</span> x <span class="token operator">*</span> w<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">,</span> ll w<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">add</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> b<span class="token punctuation">,</span> t<span class="token punctuation">,</span> w<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span>r <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">,</span> t<span class="token punctuation">,</span> <span class="token operator">-</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//(l,b)~(r,t)</span>    ll <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> p<span class="token punctuation">.</span>first<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> b<span class="token punctuation">,</span> t<span class="token punctuation">)</span> <span class="token operator">-</span> p<span class="token punctuation">.</span>second<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> b<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    ll <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">ask</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> b<span class="token punctuation">,</span> t<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">ask</span><span class="token punctuation">(</span>l <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="动态开点线段树"><a href="#动态开点线段树" class="headerlink" title="动态开点线段树"></a>动态开点线段树</h2><p><a href="https://vjudge.net/solution/18435320" target="_blank" rel="noopener">使用示例</a>，支持区间线性变换、区间查询（最大值最小值区间和）。</p><p>这样写改主席树也很方便，只要改<code>down</code>函数为每次都新建节点即可，<a href="https://vjudge.net/solution/18435724" target="_blank" rel="noopener">示例</a>。</p>```cppstruct SegmentTree{struct Val{int l, r;ll min, max, sum;void upd(ll mul, ll add) { min = min * mul + add, max = max * mul + add, sum = sum * mul + add * (r - l + 1); }};struct Node{Val v;int lc, rc;ll mul, add;};vector<node> v;SegmentTree(int l, int r) { v.reserve(r - l + 9 &lt;&lt; 1), build(l, r); }void build(int l, int r) { v.push_back({{l, r, 0, 0, 0}, NPOS, NPOS, 1, 0}); }Val up(const Val &amp;lc, const Val &amp;rc) { return {lc.l, rc.r, min(lc.min, rc.min), max(lc.max, rc.max), lc.sum + rc.sum}; }void down(int rt){int m = v[rt].v.l + v[rt].v.r &gt;&gt; 1;if (v[rt].lc == NPOS)v[rt].lc = v.size(), build(v[rt].v.l, m);if (v[rt].rc == NPOS)v[rt].rc = v.size(), build(m + 1, v[rt].v.r);upd(v[v[rt].lc].v.l, v[v[rt].lc].v.r, v[rt].mul, v[rt].add, v[rt].lc);upd(v[v[rt].rc].v.l, v[v[rt].rc].v.r, v[rt].mul, v[rt].add, v[rt].rc);v[rt].mul = 1, v[rt].add = 0;}void upd(int l, int r, ll mul, ll add, int rt = 0){if (l &lt;= v[rt].v.l &amp;&amp; v[rt].v.r &lt;="r)" return v[rt].mul *="mul," v[rt].add="v[rt].add" mul + add, v[rt].v.upd(mul, add); down(rt); if (r upd(l, r, mul, v[rt].lc); else (l&gt;= v[v[rt].rc].v.l)upd(l, r, mul, add, v[rt].rc);elseupd(l, v[v[rt].lc].v.r, mul, add, v[rt].lc), upd(v[v[rt].rc].v.l, r, mul, add, v[rt].rc);v[rt].v = up(v[v[rt].lc].v, v[v[rt].rc].v);}Val ask(int l, int r, int rt = 0){if (l &lt;= v[rt].v.l &amp;&amp; v[rt].v.r &lt;="r)" return v[rt].v; down(rt); if (r ask(l, r, v[rt].lc); (l&gt;= v[v[rt].rc].v.l)return ask(l, r, v[rt].rc);return up(ask(l, v[v[rt].lc].v.r, v[rt].lc), ask(v[v[rt].rc].v.l, r, v[rt].rc));}};```<h2 id="无旋Treap"><a href="#无旋Treap" class="headerlink" title="无旋Treap"></a>无旋Treap</h2><h3 id="按子树大小分裂"><a href="#按子树大小分裂" class="headerlink" title="按子树大小分裂"></a>按子树大小分裂</h3><p><a href="https://vjudge.net/solution/18405379" target="_blank" rel="noopener">使用示例</a></p>```cppstruct FhqTreap{struct Node{int ch[2], siz, rev;ll key, val, min, add;void upd(ll v, int r){val += v, min += v, add += v;if (r)rev ^= 1, swap(ch[0], ch[1]);}};vector<node> v;int root;FhqTreap() : v(1), root(0) {}void down(int k){if (!k)return;for (int i = 0, *ch = v[k].ch; i &lt; 2; ++i)if (ch[i])v[ch[i]].upd(v[k].add, v[k].rev);v[k].add = v[k].rev = 0;}void up(int k){if (!k)return;v[k].siz = 1, v[k].min = v[k].val;for (int i = 0, *ch = v[k].ch; i &lt; 2; ++i)if (ch[i])v[k].siz += v[ch[i]].siz, v[k].min = min(v[k].min, v[ch[i]].min);}int merge(int a, int b){if (!a || !b)return a + b;if (v[a].key &lt; v[b].key)return down(a), v[a].ch[1] = merge(v[a].ch[1], b), up(a), a;return down(b), v[b].ch[0] = merge(a, v[b].ch[0]), up(b), b;}void split(int a, int s, int &amp;l, int &amp;r){if (!s)l = 0, r = a;else if (v[v[a].ch[0]].siz &lt; s)down(a), split(v[a].ch[1], s - v[v[a].ch[0]].siz - 1, v[a].ch[1], r), up(l = a);elsedown(a), split(v[a].ch[0], s, l, v[a].ch[0]), up(r = a);}void push_back(ll d) { v.push_back(Node{{0, 0}, 1, 0, rand(), d, d, d}), root = merge(root, v.size() - 1); }void insert(int x, ll d){v.push_back(Node{{0, 0}, 1, 0, rand(), d, d, d});int a, b, c;split(root, x - 1, a, b), root = merge(merge(a, v.size() - 1), b);}void erase(int x){int a, b, c;split(root, x, a, b), split(a, x - 1, a, c), root = merge(a, b);}Node ask(int l, int r){int a, b, c;split(root, r, b, c), split(b, l - 1, a, b);Node ret = v[b];return root = merge(merge(a, b), c), ret;}void upd(int l, int r, ll add, int rev){int a, b, c;split(root, r, b, c), split(b, l - 1, a, b), v[b].upd(add, rev), root = merge(merge(a, b), c);}void revolve(int l, int r, int d){int a, b, c, e = r - l + 1;split(root, r, b, c), split(b, l - 1, a, b), split(b, (e - d % e) % e, b, e), root = merge(merge(a, merge(e, b)), c);}};```<h3 id="按值大小分裂"><a href="#按值大小分裂" class="headerlink" title="按值大小分裂"></a>按值大小分裂</h3><p><a href="https://vjudge.net/solution/18405431" target="_blank" rel="noopener">使用示例</a>，即排序树。</p>```cppstruct FhqTreap{struct Node{int ch[2], siz;ll key, val;};vector<node> v;int root;FhqTreap() : v(1), root(0) {}void up(int k) { v[k].siz = v[v[k].ch[0]].siz + v[v[k].ch[1]].siz + 1; }int merge(int a, int b){if (!a || !b)return a + b;if (v[a].key &lt; v[b].key)return v[a].ch[1] = merge(v[a].ch[1], b), up(a), a;return v[b].ch[0] = merge(a, v[b].ch[0]), up(b), b;}void splitVal(int a, ll w, int &amp;l, int &amp;r) //按值将树划分，使得左子树上的值恰小于w{if (!a)l = r = 0;else if (v[a].val &gt; w)splitVal(v[a].ch[0], w, l, v[a].ch[0]), up(r = a);elsesplitVal(v[a].ch[1], w, v[a].ch[1], r), up(l = a);}void insert(ll x){int a, b;v.push_back(Node{{0, 0}, 1, rand(), x}), splitVal(root, x, a, b), root = merge(merge(a, v.size() - 1), b);}void erase(ll x){int a, b, c;splitVal(root, x, a, b), splitVal(a, x - 1, a, c), root = merge(merge(a, merge(v[c].ch[0], v[c].ch[1])), b);}ll kth(int k){for (int u = root, ls;;){if (ls = v[v[u].ch[0]].siz, ls + 1 == k)return v[u].val;if (ls &lt; k)k -= ls + 1, u = v[u].ch[1];elseu = v[u].ch[0];}}int lower_bound(ll x) { return upper_bound(x - 1); }int upper_bound(ll x){int a, b, ret;return splitVal(root, x, a, b), ret = v[a].siz + 1, root = merge(a, b), ret;}};```<h2 id="莫队"><a href="#莫队" class="headerlink" title="莫队"></a>莫队</h2><p><a href="https://cn.vjudge.net/solution/14265915" target="_blank" rel="noopener">使用示例</a></p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Mo<span class="token punctuation">{</span>    <span class="token keyword">struct</span> Query    <span class="token punctuation">{</span>        <span class="token keyword">int</span> l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> id<span class="token punctuation">;</span>        <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> Query <span class="token operator">&amp;</span>n<span class="token punctuation">)</span> <span class="token keyword">const</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> l <span class="token operator">/</span> BS <span class="token operator">!=</span> n<span class="token punctuation">.</span>l <span class="token operator">/</span> BS <span class="token operator">?</span> l <span class="token operator">&lt;</span> n<span class="token punctuation">.</span>l <span class="token operator">:</span> r <span class="token operator">&lt;</span> n<span class="token punctuation">.</span>r<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>Query<span class="token operator">></span> q<span class="token punctuation">;</span>    <span class="token keyword">int</span> L<span class="token punctuation">,</span> R<span class="token punctuation">;</span>    <span class="token keyword">void</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span> q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>Query<span class="token punctuation">{</span>l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">rev</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">cal</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        L <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> R <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token function">sort</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>L <span class="token operator">&lt;</span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>l<span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span>L<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>L <span class="token operator">></span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>l<span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span><span class="token operator">--</span>L<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>R <span class="token operator">&lt;</span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>r<span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span><span class="token operator">++</span>R<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>R <span class="token operator">></span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>r<span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span>R<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">cal</span><span class="token punctuation">(</span>q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="带修莫队"><a href="#带修莫队" class="headerlink" title="带修莫队"></a>带修莫队</h3><p><a href="https://vjudge.net/solution/14269038" target="_blank" rel="noopener">使用示例</a></p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Mo<span class="token punctuation">{</span>    <span class="token keyword">struct</span> Update    <span class="token punctuation">{</span>        <span class="token keyword">int</span> pos<span class="token punctuation">,</span> NEW<span class="token punctuation">,</span> OLD<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token keyword">struct</span> Query    <span class="token punctuation">{</span>        <span class="token keyword">int</span> t<span class="token punctuation">,</span> l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> id<span class="token punctuation">;</span>        <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> Query <span class="token operator">&amp;</span>n<span class="token punctuation">)</span> <span class="token keyword">const</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> l <span class="token operator">/</span> BS <span class="token operator">!=</span> n<span class="token punctuation">.</span>l <span class="token operator">/</span> BS <span class="token operator">?</span> l <span class="token operator">&lt;</span> n<span class="token punctuation">.</span>l <span class="token operator">:</span> r <span class="token operator">/</span> BS <span class="token operator">!=</span> n<span class="token punctuation">.</span>r <span class="token operator">/</span> BS <span class="token operator">?</span> r <span class="token operator">&lt;</span> n<span class="token punctuation">.</span>r <span class="token operator">:</span> t <span class="token operator">&lt;</span> n<span class="token punctuation">.</span>t<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>Update<span class="token operator">></span> cq<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>Query<span class="token operator">></span> q<span class="token punctuation">;</span>    <span class="token keyword">int</span> T<span class="token punctuation">,</span> L<span class="token punctuation">,</span> R<span class="token punctuation">;</span>    <span class="token function">Mo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">cq</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span> q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>Query<span class="token punctuation">{</span>cq<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span> cq<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>Update<span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> t<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>vis<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token function">rev</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">,</span> <span class="token function">rev</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">rev</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">cal</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        T <span class="token operator">=</span> L <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> R <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token function">sort</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>T <span class="token operator">&lt;</span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>t<span class="token punctuation">)</span>                <span class="token operator">++</span>T<span class="token punctuation">,</span> <span class="token function">set</span><span class="token punctuation">(</span>cq<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">,</span> cq<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">.</span>NEW<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>T <span class="token operator">></span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>t<span class="token punctuation">)</span>                <span class="token function">set</span><span class="token punctuation">(</span>cq<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">,</span> cq<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">.</span>OLD<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">--</span>T<span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>L <span class="token operator">&lt;</span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>l<span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span>L<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>L <span class="token operator">></span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>l<span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span><span class="token operator">--</span>L<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>R <span class="token operator">&lt;</span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>r<span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span><span class="token operator">++</span>R<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>R <span class="token operator">></span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>r<span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span>R<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">cal</span><span class="token punctuation">(</span>q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="树上莫队"><a href="#树上莫队" class="headerlink" title="树上莫队"></a>树上莫队</h3><p><a href="https://vjudge.net/solution/14284324" target="_blank" rel="noopener">使用示例</a></p><p>按照欧拉序分块，使用Tarjan在生成欧拉序的同时预处理所有询问的lca，预处理时间复杂度$O(n+q)$。<br>h为查询图，即如果有一个询问(u,v)，即在h上连$u\to v,v\to u$。多个询问边有序插入h。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> TreeMo <span class="token operator">:</span> Graph<span class="token punctuation">{</span>    <span class="token keyword">struct</span> Query    <span class="token punctuation">{</span>        <span class="token keyword">int</span> l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> lca<span class="token punctuation">,</span> id<span class="token punctuation">;</span>        <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> Query <span class="token operator">&amp;</span>b<span class="token punctuation">)</span> <span class="token keyword">const</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> l <span class="token operator">/</span> BS <span class="token operator">!=</span> b<span class="token punctuation">.</span>l <span class="token operator">/</span> BS <span class="token operator">?</span> l <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>l <span class="token operator">:</span> r <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>r<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>Query<span class="token operator">></span> q<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> dfp<span class="token punctuation">,</span> dfi<span class="token punctuation">,</span> dfo<span class="token punctuation">;</span>    UnionFindSet ufs<span class="token punctuation">;</span>    Graph h<span class="token punctuation">;</span>    <span class="token keyword">int</span> L<span class="token punctuation">,</span> R<span class="token punctuation">;</span>    <span class="token function">TreeMo</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Graph</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">h</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">dfp</span><span class="token punctuation">(</span>n <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">dfi</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">dfo</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ufs</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        h<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Edge<span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> h<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Edge<span class="token punctuation">{</span>y<span class="token punctuation">,</span> x<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>Query<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">rev</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">cal</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>cnt<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        dfp<span class="token punctuation">[</span>dfi<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>cnt<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> to<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> to <span class="token operator">=</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span> <span class="token operator">!</span>dfi<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token function">dfs</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> cnt<span class="token punctuation">)</span><span class="token punctuation">,</span> ufs<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> to<span class="token punctuation">)</span><span class="token punctuation">;</span>        dfp<span class="token punctuation">[</span>dfo<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>cnt<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> to<span class="token punctuation">,</span> id<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> h<span class="token punctuation">.</span>v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> h<span class="token punctuation">.</span>v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> id <span class="token operator">=</span> k <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> to <span class="token operator">=</span> h<span class="token punctuation">.</span>e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span> dfo<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                q<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">.</span>lca <span class="token operator">=</span> ufs<span class="token punctuation">.</span><span class="token function">fa</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span>                q<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">.</span>l <span class="token operator">=</span> q<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">.</span>lca <span class="token operator">!=</span> u <span class="token operator">?</span> dfo<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">:</span> dfi<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>                q<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">.</span>r <span class="token operator">=</span> dfi<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> root <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> BS <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> BS <span class="token operator">=</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>BS<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">sort</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        L <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> R <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>L <span class="token operator">&lt;</span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>l<span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span>dfp<span class="token punctuation">[</span>L<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>L <span class="token operator">></span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>l<span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span>dfp<span class="token punctuation">[</span><span class="token operator">--</span>L<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>R <span class="token operator">&lt;</span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>r<span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span>dfp<span class="token punctuation">[</span><span class="token operator">++</span>R<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>R <span class="token operator">></span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>r<span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span>dfp<span class="token punctuation">[</span>R<span class="token operator">--</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>lca <span class="token operator">!=</span> dfp<span class="token punctuation">[</span>L<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span>q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>lca<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">cal</span><span class="token punctuation">(</span>q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>lca <span class="token operator">!=</span> dfp<span class="token punctuation">[</span>L<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span>q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>lca<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="树上带修莫队"><a href="#树上带修莫队" class="headerlink" title="树上带修莫队"></a>树上带修莫队</h3><p><a href="https://vjudge.net/solution/14269069" target="_blank" rel="noopener">使用示例</a></p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> CapitalTreeMo <span class="token operator">:</span> Graph<span class="token punctuation">{</span>    <span class="token keyword">struct</span> Update    <span class="token punctuation">{</span>        <span class="token keyword">int</span> pos<span class="token punctuation">,</span> NEW<span class="token punctuation">,</span> OLD<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token keyword">struct</span> Query    <span class="token punctuation">{</span>        <span class="token keyword">int</span> t<span class="token punctuation">,</span> l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> lca<span class="token punctuation">,</span> id<span class="token punctuation">;</span>        <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> Query <span class="token operator">&amp;</span>b<span class="token punctuation">)</span> <span class="token keyword">const</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> l <span class="token operator">/</span> BS <span class="token operator">!=</span> b<span class="token punctuation">.</span>l <span class="token operator">/</span> BS <span class="token operator">?</span> l <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>l <span class="token operator">:</span> r <span class="token operator">/</span> BS <span class="token operator">!=</span> b<span class="token punctuation">.</span>r <span class="token operator">/</span> BS <span class="token operator">?</span> r <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>r <span class="token operator">:</span> t <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>t<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//在BZOJ4129上去掉r/BS还快100ms?</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>Update<span class="token operator">></span> cq<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>Query<span class="token operator">></span> q<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> dfp<span class="token punctuation">,</span> dfi<span class="token punctuation">,</span> dfo<span class="token punctuation">;</span>    UnionFindSet ufs<span class="token punctuation">;</span>    Graph h<span class="token punctuation">;</span>    <span class="token keyword">int</span> T<span class="token punctuation">,</span> L<span class="token punctuation">,</span> R<span class="token punctuation">;</span>    <span class="token function">CapitalTreeMo</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">cq</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Graph</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">h</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">dfp</span><span class="token punctuation">(</span>n <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">dfi</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">dfo</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ufs</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        h<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Edge<span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> h<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Edge<span class="token punctuation">{</span>y<span class="token punctuation">,</span> x<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>Query<span class="token punctuation">{</span>cq<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        cq<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>Update<span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> t<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>cnt<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        dfp<span class="token punctuation">[</span>dfi<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>cnt<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> to<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> to <span class="token operator">=</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span> <span class="token operator">!</span>dfi<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token function">dfs</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> cnt<span class="token punctuation">)</span><span class="token punctuation">,</span> ufs<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> to<span class="token punctuation">)</span><span class="token punctuation">;</span>        dfp<span class="token punctuation">[</span>dfo<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">++</span>cnt<span class="token punctuation">]</span> <span class="token operator">=</span> u<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> to<span class="token punctuation">,</span> id<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> h<span class="token punctuation">.</span>v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> h<span class="token punctuation">.</span>v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> id <span class="token operator">=</span> k <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> to <span class="token operator">=</span> h<span class="token punctuation">.</span>e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span> dfo<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                q<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">.</span>lca <span class="token operator">=</span> ufs<span class="token punctuation">.</span><span class="token function">fa</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span>                q<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">.</span>l <span class="token operator">=</span> q<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">.</span>lca <span class="token operator">!=</span> u <span class="token operator">?</span> dfo<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">:</span> dfi<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>                q<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">.</span>r <span class="token operator">=</span> dfi<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> d<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>vis<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token function">rev</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">,</span> <span class="token function">rev</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">rev</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">cal</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> root <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> BS <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> BS <span class="token operator">=</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>BS<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">sort</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        T <span class="token operator">=</span> L <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> R <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>T <span class="token operator">&lt;</span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>t<span class="token punctuation">)</span>                <span class="token operator">++</span>T<span class="token punctuation">,</span> <span class="token function">set</span><span class="token punctuation">(</span>cq<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">,</span> cq<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">.</span>NEW<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>T <span class="token operator">></span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>t<span class="token punctuation">)</span>                <span class="token function">set</span><span class="token punctuation">(</span>cq<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">.</span>pos<span class="token punctuation">,</span> cq<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">.</span>OLD<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">--</span>T<span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>L <span class="token operator">&lt;</span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>l<span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span>dfp<span class="token punctuation">[</span>L<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>L <span class="token operator">></span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>l<span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span>dfp<span class="token punctuation">[</span><span class="token operator">--</span>L<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>R <span class="token operator">&lt;</span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>r<span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span>dfp<span class="token punctuation">[</span><span class="token operator">++</span>R<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>R <span class="token operator">></span> q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>r<span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span>dfp<span class="token punctuation">[</span>R<span class="token operator">--</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>lca <span class="token operator">!=</span> dfp<span class="token punctuation">[</span>L<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span>q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>lca<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token function">cal</span><span class="token punctuation">(</span>q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>lca <span class="token operator">!=</span> dfp<span class="token punctuation">[</span>L<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token function">rev</span><span class="token punctuation">(</span>q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>lca<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="字符串-模式匹配"><a href="#字符串-模式匹配" class="headerlink" title="字符串/模式匹配"></a>字符串/模式匹配</h2><h3 id="HashString"><a href="#HashString" class="headerlink" title="HashString"></a>HashString</h3><p><a href="https://vjudge.net/solution/18293901" target="_blank" rel="noopener">使用示例</a>，如果要修改模数或者直接使用<code>unsigned long long</code>的自然溢出的话直接修改Mod即可。</p><p>使用<code>unsigned long long</code>的自然溢出<a href="https://vjudge.net/solution/18293930" target="_blank" rel="noopener">快了5倍</a>，但是容易被卡。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> HashString <span class="token operator">:</span> Mod<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> f<span class="token punctuation">,</span> p<span class="token punctuation">;</span>    <span class="token function">HashString</span><span class="token punctuation">(</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> ll M <span class="token operator">=</span> <span class="token number">1e9</span> <span class="token operator">+</span> <span class="token number">7</span><span class="token punctuation">,</span> ll P <span class="token operator">=</span> <span class="token number">131</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Mod</span><span class="token punctuation">(</span>M<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">f</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">p</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            f<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token function">mul</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> P<span class="token punctuation">)</span><span class="token punctuation">,</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            p<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> P<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    ll <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> pos<span class="token punctuation">,</span> <span class="token keyword">int</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">add</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>pos <span class="token operator">+</span> len<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token function">mul</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>pos<span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span>len<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//从pos位置开始的长度为len的子串的hash值</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h3><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> KMP<span class="token punctuation">{</span>    <span class="token keyword">const</span> string s<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> next<span class="token punctuation">;</span>    <span class="token function">KMP</span><span class="token punctuation">(</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>s<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">s</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">next</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> next<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">)</span>                j <span class="token operator">=</span> next<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            next<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">?</span> j <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">bool</span> <span class="token function">find_in</span><span class="token punctuation">(</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>t<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> t<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>j <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!=</span> t<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                j <span class="token operator">=</span> next<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> t<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token operator">++</span>j<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">==</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//不return可得到t中s的所有匹配地址i+1-s.size()</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="AC自动机"><a href="#AC自动机" class="headerlink" title="AC自动机"></a>AC自动机</h3><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> AhoCorasick<span class="token punctuation">{</span>    <span class="token keyword">struct</span> Node    <span class="token punctuation">{</span>        <span class="token keyword">int</span> ch<span class="token punctuation">[</span><span class="token number">26</span><span class="token punctuation">]</span><span class="token punctuation">,</span> val<span class="token punctuation">,</span> f<span class="token punctuation">,</span> last<span class="token punctuation">;</span>        <span class="token keyword">int</span> <span class="token operator">&amp;</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> ch<span class="token punctuation">[</span>c <span class="token operator">-</span> <span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//如果不确定c的范围，使用map</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>Node<span class="token operator">></span> v<span class="token punctuation">;</span>    <span class="token function">AhoCorasick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">getFail</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>deque<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">q</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>last <span class="token operator">=</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>f <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> q<span class="token punctuation">.</span><span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">char</span> c <span class="token operator">=</span> <span class="token string">'a'</span><span class="token punctuation">;</span> c <span class="token operator">&lt;=</span> <span class="token string">'z'</span><span class="token punctuation">;</span> <span class="token operator">++</span>c<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">int</span> r <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> u <span class="token operator">=</span> v<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span> w <span class="token operator">=</span> v<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">.</span>f<span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>r <span class="token operator">&amp;&amp;</span> u<span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>                    v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>f <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>last <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                    <span class="token keyword">continue</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>u<span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    v<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token operator">=</span> v<span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">continue</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">while</span> <span class="token punctuation">(</span>w <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>v<span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">)</span>                    w <span class="token operator">=</span> v<span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token punctuation">.</span>f<span class="token punctuation">;</span>                v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>f <span class="token operator">=</span> v<span class="token punctuation">[</span>w<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>                v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>last <span class="token operator">=</span> v<span class="token punctuation">[</span>v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>f<span class="token punctuation">]</span><span class="token punctuation">.</span>val <span class="token operator">?</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>f <span class="token operator">:</span> v<span class="token punctuation">[</span>v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>f<span class="token punctuation">]</span><span class="token punctuation">.</span>last<span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token keyword">int</span> val<span class="token punctuation">,</span> <span class="token keyword">int</span> u <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> u <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                v<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">Node</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>val <span class="token operator">=</span> val<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">bool</span> <span class="token function">find_in</span><span class="token punctuation">(</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token keyword">int</span> u <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//调用需要调用`getFail()`生成失配函数。</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>u <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>val <span class="token operator">||</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>last<span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="暴力回文"><a href="#暴力回文" class="headerlink" title="暴力回文"></a>暴力回文</h3><p><a href="https://vjudge.net/solution/14387201" target="_blank" rel="noopener">使用示例</a></p><p>时间复杂度$O(n^2)$，常数低，但会被<code>ababababa</code>这样的数据卡。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">palindrome</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> b<span class="token punctuation">,</span> e<span class="token punctuation">;</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>b <span class="token operator">=</span> i<span class="token punctuation">;</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">)</span>            <span class="token operator">++</span>i<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>e <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> b <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">[</span>b <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>e<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">)</span>            <span class="token operator">--</span>b<span class="token punctuation">,</span> <span class="token operator">++</span>e<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>ans <span class="token operator">&lt;</span> e <span class="token operator">-</span> b<span class="token punctuation">)</span>            ans <span class="token operator">=</span> e <span class="token operator">-</span> b<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//此时[b,e)为最大回文区间</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="线性回文"><a href="#线性回文" class="headerlink" title="线性回文"></a>线性回文</h3><p><a href="https://vjudge.net/solution/14387164" target="_blank" rel="noopener">使用示例</a></p><p>对于一个位置i，[i−f[i]+1,i+f[i]−1]是最长的以i为中心的奇回文串，g[i]−i是最长的以i为开头的回文串长度。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Manacher<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> t<span class="token punctuation">,</span> f<span class="token punctuation">,</span> g<span class="token punctuation">;</span>    <span class="token function">Manacher</span><span class="token punctuation">(</span><span class="token keyword">const</span> string <span class="token operator">&amp;</span>s<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">t</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">f</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">g</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//t初始值为s中没有出现过的值，g开始为0</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            t<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> p <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> m <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> t<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">&lt;</span> m <span class="token operator">?</span> <span class="token function">min</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span><span class="token number">2</span> <span class="token operator">*</span> p <span class="token operator">-</span> i<span class="token punctuation">]</span><span class="token punctuation">,</span> m <span class="token operator">-</span> i<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>                 <span class="token number">0</span> <span class="token operator">&lt;</span> i <span class="token operator">-</span> f<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">+</span> f<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> t<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>                 t<span class="token punctuation">[</span>i <span class="token operator">-</span> f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> t<span class="token punctuation">[</span>i <span class="token operator">+</span> f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">)</span>                <span class="token operator">++</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>m <span class="token operator">&lt;</span> i <span class="token operator">+</span> f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                m <span class="token operator">=</span> i <span class="token operator">+</span> f<span class="token punctuation">[</span>p <span class="token operator">=</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> t<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>g<span class="token punctuation">[</span>i <span class="token operator">-</span> f<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>                g<span class="token punctuation">[</span>i <span class="token operator">-</span> f<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> t<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>g<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> g<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                g<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> g<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> l<span class="token punctuation">,</span> <span class="token keyword">int</span> r<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//多次询问可做一个ST表</span>    <span class="token punctuation">{</span>        <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> l <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">,</span> e <span class="token operator">=</span> r <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> e<span class="token punctuation">;</span> i <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>ans <span class="token operator">&lt;</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> i<span class="token punctuation">)</span>                ans <span class="token operator">=</span> g<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> i<span class="token punctuation">;</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="后缀自动机"><a href="#后缀自动机" class="headerlink" title="后缀自动机"></a>后缀自动机</h3><p><a href="https://vjudge.net/solution/14316681" target="_blank" rel="noopener">使用示例</a></p><p>m：字符集大小。</p><p>s：字符串，其中最后一位为加入的0。</p><p>sa[i]：字典序第i小的是哪个后缀。</p><p>rk[i]：后缀i的排名。</p><p>h[i]：lcp(sa[i],sa[i−1])。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SufArr<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> sa<span class="token punctuation">,</span> rk<span class="token punctuation">,</span> h<span class="token punctuation">;</span>    <span class="token function">SufArr</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token keyword">int</span> m<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">sa</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">rk</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">h</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">cnt</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> m<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token operator">++</span>cnt<span class="token punctuation">[</span>rk<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            cnt<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> cnt<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            sa<span class="token punctuation">[</span><span class="token operator">--</span>cnt<span class="token punctuation">[</span>rk<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;=</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> k <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> sa<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> k<span class="token punctuation">,</span> j <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>                    j <span class="token operator">+</span><span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                h<span class="token punctuation">[</span>cnt<span class="token punctuation">[</span>rk<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> j<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            cnt<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> sa<span class="token punctuation">[</span>h<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>rk<span class="token punctuation">[</span>h<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">!=</span> rk<span class="token punctuation">[</span>h<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">||</span> rk<span class="token punctuation">[</span>h<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> k<span class="token punctuation">]</span> <span class="token operator">!=</span> rk<span class="token punctuation">[</span>h<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> k<span class="token punctuation">]</span><span class="token punctuation">)</span>                    cnt<span class="token punctuation">[</span><span class="token operator">++</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>                sa<span class="token punctuation">[</span>h<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> j<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token function">swap</span><span class="token punctuation">(</span>rk<span class="token punctuation">,</span> sa<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">swap</span><span class="token punctuation">(</span>sa<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> rk<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">,</span> <span class="token operator">++</span>k<span class="token punctuation">)</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> <span class="token operator">~</span>k <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> s<span class="token punctuation">[</span>sa<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> k<span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">=</span> rk<span class="token punctuation">[</span>sa<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">--</span>k<span class="token punctuation">)</span>                h<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> k<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></node></node><!--=--><!--=--></node><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> Template </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ICPC模板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图论</title>
      <link href="/2019/02/03/2019-02-03-tu-lun/"/>
      <url>/2019/02/03/2019-02-03-tu-lun/</url>
      
        <content type="html"><![CDATA[<p>这里用类似邻接表的方法存图。有的算法可能需要邻接矩阵，详见线性代数部分。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Graph<span class="token punctuation">{</span>    <span class="token keyword">struct</span> Vertex    <span class="token punctuation">{</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> o<span class="token punctuation">,</span> i<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//相关出边和入边编号</span>        <span class="token keyword">int</span> siz<span class="token punctuation">,</span> dep<span class="token punctuation">,</span> top<span class="token punctuation">,</span> dfn<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//树链剖分中使用，依次代表子树节点数、深度、所在链的顶端节点、dfs序</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token keyword">struct</span> Edge <span class="token operator">:</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">></span>    <span class="token punctuation">{</span>        ll len<span class="token punctuation">,</span> cap<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//边长、容量，图论算法使用</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>Vertex<span class="token operator">></span> v<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//点集</span>    vector<span class="token operator">&lt;</span>Edge<span class="token operator">></span> e<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//边集</span>    <span class="token function">Graph</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">v</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">const</span> Edge <span class="token operator">&amp;</span>ed<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>ed<span class="token punctuation">.</span>first <span class="token operator">==</span> ed<span class="token punctuation">.</span>second<span class="token punctuation">)</span>            <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//如果有需要请拆点</span>        v<span class="token punctuation">[</span>ed<span class="token punctuation">.</span>first<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        v<span class="token punctuation">[</span>ed<span class="token punctuation">.</span>second<span class="token punctuation">]</span><span class="token punctuation">.</span>i<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        e<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>ed<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">ch</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> e<span class="token punctuation">[</span>v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//u的第i个孩子节点</span>    <span class="token keyword">int</span> <span class="token function">fa</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> e<span class="token punctuation">[</span>v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>i<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//u的第i个父节点</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="最短路"><a href="#最短路" class="headerlink" title="最短路"></a>最短路</h2><h3 id="Dijkstra算法"><a href="#Dijkstra算法" class="headerlink" title="Dijkstra算法"></a>Dijkstra算法</h3><p><a href="https://vjudge.net/solution/16970536" target="_blank" rel="noopener">使用示例</a>，适用于边权为正的情况（无论有向图还是无向图），用于求单源最短路。</p><p>直接给出其优先队列优化的版本。另外，由于<code>priority_queue</code>并不提供修改优先级的操作，为避免重复扩展，这里选择将新元素直接插入队列并在运行时判断该点是否被处理，并不影响结果的正确性。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Dijkstra <span class="token operator">:</span> Graph<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> d<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> p<span class="token punctuation">;</span>    <span class="token function">Dijkstra</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Graph</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        d<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> INF<span class="token punctuation">)</span><span class="token punctuation">;</span>        p<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">;</span>        priority_queue<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">>></span> q<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            ll dis <span class="token operator">=</span> <span class="token operator">-</span>q<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">;</span>            <span class="token keyword">int</span> u <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>second<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">&lt;</span> dis<span class="token punctuation">)</span>                <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> to<span class="token punctuation">;</span> i <span class="token operator">!=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> to <span class="token operator">=</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span>                    d<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">></span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>len<span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    d<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>len<span class="token punctuation">,</span> p<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> k<span class="token punctuation">;</span>                    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token operator">-</span>d<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">,</span> to<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="BellmanFord算法"><a href="#BellmanFord算法" class="headerlink" title="BellmanFord算法"></a>BellmanFord算法</h3><p><a href="https://vjudge.net/solution/16970652" target="_blank" rel="noopener">使用示例</a>，直接给出其队列优化、国内称之为SPFA算法的版本。较之Dijkstra算法，此算法不够快速稳定但是可以允许负边存在，当s到达负权回路时会直接返回0。稀疏图上性能优秀。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> BellmanFord <span class="token operator">:</span> Graph<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> d<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> p<span class="token punctuation">;</span>    <span class="token function">BellmanFord</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Graph</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">bool</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        d<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> INF<span class="token punctuation">)</span><span class="token punctuation">;</span>        p<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">cnt</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">flag</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>deque<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">q</span><span class="token punctuation">(</span>cnt<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> flag<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> q<span class="token punctuation">.</span><span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i <span class="token operator">=</span> flag<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> to<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> to <span class="token operator">=</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span>                    d<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">></span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>len<span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    d<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>len<span class="token punctuation">,</span> p<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> k<span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span>                    <span class="token punctuation">{</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">++</span>cnt<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span>                            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>                        flag<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4 id="差分约束系统"><a href="#差分约束系统" class="headerlink" title="差分约束系统"></a>差分约束系统</h4><p>按如下方式建图、跑SPFA：</p><p>对每个不等式$x_i−x_j\leq d$，从$j$向$i$连一条边，边长为$d$。</p><p>若不等号的方向相反，即$x_i−x_j\geq d$，则在不等式两边同时乘以$-1$，变成$x_j−x_i\leq -d$，即从$i$到$j$连一条边，边长为$d$。</p><h3 id="Floyed求多源最短路"><a href="#Floyed求多源最短路" class="headerlink" title="Floyed求多源最短路"></a>Floyed求多源最短路</h3><p>不连通的权置INF。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Floyed <span class="token operator">:</span> Matrix<span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>k<span class="token punctuation">)</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>                        a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="Astar求k短路"><a href="#Astar求k短路" class="headerlink" title="Astar求k短路"></a>Astar求k短路</h3><p><a href="https://vjudge.net/solution/16970766" target="_blank" rel="noopener">使用示例</a>，在这个比较坑的例子中需要在调用前补一句<code>if(s==t)++k;</code>。<strong>k下标从0开始，即最短路==第0短路</strong>。</p><p>朴素的想法是使用<code>priority_queue</code>从原点出发向外探索，当取出终点t第k次时就得到第k短路，类似bfs的思想，缺陷是越往后状态数越多。</p><p>我们在反向图上从$t\to s$跑Astar算法，通过优先展开到s近的状态，使搜索方向靠近答案，而不是一层一层全都展开，估价函数$f\approx g+h$，f是估计的s到t的距离，g是到达当前点已经点的花费，h是预计剩下的花费。这里h取当前点的距离到s距离，可通过从s跑一遍Dijkstra可以预处理得出。</p><p>Astar算法是只有到达终点的时候才能统计答案，这导致可能拓展很多个状态才能得到一个用来更新答案的有效状态。例如一个n元环，当我们到达终点之后,可能还要拓展n次才能得到下一个状态，于是时间复杂度就被卡到$O(nk)$。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Astar <span class="token operator">:</span> Dijkstra<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> ans<span class="token punctuation">;</span>    <span class="token function">Astar</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Dijkstra</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Dijkstra<span class="token operator">::</span><span class="token function">ask</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>        ans<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>k<span class="token punctuation">,</span> INF<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">==</span> INF<span class="token punctuation">)</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">cnt</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        priority_queue<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">>></span> q<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token operator">-</span>d<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> cnt<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">&lt;</span> k <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            ll dis <span class="token operator">=</span> <span class="token operator">-</span>q<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">;</span>            <span class="token keyword">int</span> u <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>second<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>u <span class="token operator">==</span> s<span class="token punctuation">)</span>                ans<span class="token punctuation">[</span>cnt<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> dis<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">++</span>cnt<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">></span> k<span class="token punctuation">)</span>                <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>i<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                k <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>i<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">-</span> d<span class="token punctuation">[</span>e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">]</span> <span class="token operator">-</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">-</span> dis<span class="token punctuation">,</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="网络流"><a href="#网络流" class="headerlink" title="网络流"></a>网络流</h2><h3 id="ISAP求最大流"><a href="#ISAP求最大流" class="headerlink" title="ISAP求最大流"></a>ISAP求最大流</h3><p><a href="https://vjudge.net/solution/16970964" target="_blank" rel="noopener">使用示例</a></p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> ISAP <span class="token operator">:</span> Graph<span class="token punctuation">{</span>    ll flow<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> f<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> h<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> gap<span class="token punctuation">;</span>    <span class="token function">ISAP</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Graph</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Edge ed<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Graph<span class="token operator">::</span><span class="token function">add</span><span class="token punctuation">(</span>ed<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">swap</span><span class="token punctuation">(</span>ed<span class="token punctuation">.</span>first<span class="token punctuation">,</span> ed<span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">,</span> ed<span class="token punctuation">.</span>cap <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        Graph<span class="token operator">::</span><span class="token function">add</span><span class="token punctuation">(</span>ed<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    ll <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">,</span> ll r<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> u <span class="token operator">==</span> t<span class="token punctuation">)</span>            <span class="token keyword">return</span> r<span class="token punctuation">;</span>        ll _f<span class="token punctuation">,</span> _r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>i <span class="token operator">=</span> cur<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">==</span> h<span class="token punctuation">[</span>e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                _f <span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span> t<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>r <span class="token operator">-</span> _r<span class="token punctuation">,</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>cap <span class="token operator">-</span> f<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                f<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> _f<span class="token punctuation">,</span> f<span class="token punctuation">[</span>k <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> _f<span class="token punctuation">,</span> _r <span class="token operator">+</span><span class="token operator">=</span> _f<span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>_r <span class="token operator">==</span> r <span class="token operator">||</span> h<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">>=</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token keyword">return</span> _r<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">--</span>gap<span class="token punctuation">[</span>h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            h<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">++</span>gap<span class="token punctuation">[</span><span class="token operator">++</span>h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> cur<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> _r<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        h<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        cur<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        gap<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/*        for(deque&lt;int> q(h[t]=gap[t]=1,t); !q.empty(); q.pop_front())//优化，加了能快一点            for(int i=0,u=q.front(),k,to; i&lt;v[u].o.size(); ++i)                if(to=e[v[u].o[i]].second,!h[to])                    ++gap[h[to]=h[u]+1],q.push_back(to);        */</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> flow <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> h<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">&lt;</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span>            flow <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> s<span class="token punctuation">,</span> t<span class="token punctuation">,</span> INF<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="PrimalDual求费用流"><a href="#PrimalDual求费用流" class="headerlink" title="PrimalDual求费用流"></a>PrimalDual求费用流</h3><p><a href="https://vjudge.net/solution/16971249" target="_blank" rel="noopener">使用示例</a>，定义一条边的费用为流量*边长，求总费用最小的最大流。性能优秀，只能跑非负权图。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> PrimalDual <span class="token operator">:</span> Graph<span class="token punctuation">{</span>    ll flow<span class="token punctuation">,</span> cost<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> f<span class="token punctuation">;</span>    <span class="token function">PrimalDual</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Graph</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Edge ed<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Graph<span class="token operator">::</span><span class="token function">add</span><span class="token punctuation">(</span>ed<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">swap</span><span class="token punctuation">(</span>ed<span class="token punctuation">.</span>first<span class="token punctuation">,</span> ed<span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">,</span> ed<span class="token punctuation">.</span>cap <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> ed<span class="token punctuation">.</span>len <span class="token operator">*</span><span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        Graph<span class="token operator">::</span><span class="token function">add</span><span class="token punctuation">(</span>ed<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//询问s到t的最小费用最大流，答案存在flow、cost中</span>    <span class="token punctuation">{</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">p</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token function">d</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> INF<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">h</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> flow <span class="token operator">=</span> cost <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            priority_queue<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">>></span> q<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>d<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                ll dis <span class="token operator">=</span> <span class="token operator">-</span>q<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>first<span class="token punctuation">;</span>                <span class="token keyword">int</span> u <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>second<span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">&lt;</span> dis<span class="token punctuation">)</span>                    <span class="token keyword">continue</span><span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> to<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> to <span class="token operator">=</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span>                        e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>cap <span class="token operator">></span> f<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> d<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">></span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">+</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">-</span> h<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span>                    <span class="token punctuation">{</span>                        d<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">+</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">-</span> h<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> k<span class="token punctuation">;</span>                        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span><span class="token operator">-</span>d<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">,</span> to<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">==</span> INF<span class="token punctuation">)</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> d<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> INF<span class="token punctuation">)</span>                    h<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> INF<span class="token punctuation">;</span>            ll _f <span class="token operator">=</span> INF<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> t<span class="token punctuation">;</span> u <span class="token operator">!=</span> s<span class="token punctuation">;</span> u <span class="token operator">=</span> e<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">)</span>                _f <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>_f<span class="token punctuation">,</span> e<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cap <span class="token operator">-</span> f<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> t<span class="token punctuation">;</span> u <span class="token operator">!=</span> s<span class="token punctuation">;</span> u <span class="token operator">=</span> e<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">)</span>                cost <span class="token operator">+</span><span class="token operator">=</span> _f <span class="token operator">*</span> e<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>len<span class="token punctuation">,</span> f<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> _f<span class="token punctuation">,</span> f<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> _f<span class="token punctuation">;</span>            flow <span class="token operator">+</span><span class="token operator">=</span> _f<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="EK求费用流"><a href="#EK求费用流" class="headerlink" title="EK求费用流"></a>EK求费用流</h3><p><a href="https://vjudge.net/solution/16971149" target="_blank" rel="noopener">使用示例</a>，定义一条边的费用为流量*边长，求总费用最小的最大流。BellmanFord算法找增广路，可能被卡但是可以跑负费用流（最大费用流）。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> EdmondKarp <span class="token operator">:</span> Graph<span class="token punctuation">{</span>    ll flow<span class="token punctuation">,</span> cost<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> f<span class="token punctuation">;</span>    <span class="token function">EdmondKarp</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Graph</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Edge ed<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Graph<span class="token operator">::</span><span class="token function">add</span><span class="token punctuation">(</span>ed<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">swap</span><span class="token punctuation">(</span>ed<span class="token punctuation">.</span>first<span class="token punctuation">,</span> ed<span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">,</span> ed<span class="token punctuation">.</span>cap <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> ed<span class="token punctuation">.</span>len <span class="token operator">*</span><span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        Graph<span class="token operator">::</span><span class="token function">add</span><span class="token punctuation">(</span>ed<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">p</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> flow <span class="token operator">=</span> cost <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token function">d</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> INF<span class="token punctuation">)</span><span class="token punctuation">;</span>            vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">flag</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>deque<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">q</span><span class="token punctuation">(</span>flag<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> q<span class="token punctuation">.</span><span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> i <span class="token operator">=</span> flag<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> to<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> to <span class="token operator">=</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span>                        e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>cap <span class="token operator">></span> f<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> d<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">></span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>len<span class="token punctuation">)</span>                    <span class="token punctuation">{</span>                        d<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>len<span class="token punctuation">,</span> p<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> k<span class="token punctuation">;</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span>                            q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span><span class="token punctuation">,</span> flag<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">==</span> INF<span class="token punctuation">)</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            ll _f <span class="token operator">=</span> INF<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> t<span class="token punctuation">;</span> u <span class="token operator">!=</span> s<span class="token punctuation">;</span> u <span class="token operator">=</span> e<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">)</span>                _f <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>_f<span class="token punctuation">,</span> e<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cap <span class="token operator">-</span> f<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> t<span class="token punctuation">;</span> u <span class="token operator">!=</span> s<span class="token punctuation">;</span> u <span class="token operator">=</span> e<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">)</span>                cost <span class="token operator">+</span><span class="token operator">=</span> _f <span class="token operator">*</span> e<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>len<span class="token punctuation">,</span> f<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> _f<span class="token punctuation">,</span> f<span class="token punctuation">[</span>p<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> _f<span class="token punctuation">;</span>            flow <span class="token operator">+</span><span class="token operator">=</span> _f<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="ZKW求费用流"><a href="#ZKW求费用流" class="headerlink" title="ZKW求费用流"></a>ZKW求费用流</h3><p><a href="https://vjudge.net/solution/16971099" target="_blank" rel="noopener">使用示例</a>，定义一条边的费用为流量*边长，求总费用最小的最大流。</p><p>对于最终流量较大，而费用取值范围不大的图，或者是增广路径比较短的图（如二分图），zkw算法都会比较快，原因是充分发挥优势。比如流多说明可以同一费用反复增广，费用窄说明不用改太多距离标号就会有新增广路，增广路径短可以显著改善最坏情况，因为即使每次就只增加一条边也可以很快凑成最短路。如果恰恰相反，流量不大，费用不小，增广路还较长，就不适合 zkw 算法了。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> ZKW <span class="token operator">:</span> Graph<span class="token punctuation">{</span>    ll flow<span class="token punctuation">,</span> cost<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> h<span class="token punctuation">,</span> f<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> vis<span class="token punctuation">;</span>    <span class="token function">ZKW</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Graph</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span>Edge ed<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Graph<span class="token operator">::</span><span class="token function">add</span><span class="token punctuation">(</span>ed<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">swap</span><span class="token punctuation">(</span>ed<span class="token punctuation">.</span>first<span class="token punctuation">,</span> ed<span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">,</span> ed<span class="token punctuation">.</span>cap <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> ed<span class="token punctuation">.</span>len <span class="token operator">*</span><span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        Graph<span class="token operator">::</span><span class="token function">add</span><span class="token punctuation">(</span>ed<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    ll <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">,</span> ll r<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> u <span class="token operator">==</span> t<span class="token punctuation">)</span>            <span class="token keyword">return</span> r<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>vis<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        ll _f <span class="token operator">=</span> vis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> _r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">;</span> r <span class="token operator">></span> _r <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> h<span class="token punctuation">[</span>e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">]</span> <span class="token operator">+</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">==</span> h<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>                _f <span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span> t<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>r <span class="token operator">-</span> _r<span class="token punctuation">,</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>cap <span class="token operator">-</span> f<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> _f<span class="token punctuation">,</span> f<span class="token punctuation">[</span>k <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> _f<span class="token punctuation">,</span> _r <span class="token operator">+</span><span class="token operator">=</span> _f<span class="token punctuation">;</span>        <span class="token keyword">return</span> _r<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">,</span> <span class="token keyword">int</span> t<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        h<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        vis<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> flow <span class="token operator">=</span> cost <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            ll _f <span class="token operator">=</span> <span class="token function">dfs</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> t<span class="token punctuation">,</span> INF<span class="token punctuation">)</span><span class="token punctuation">,</span> d <span class="token operator">=</span> INF<span class="token punctuation">;</span>            flow <span class="token operator">+</span><span class="token operator">=</span> _f<span class="token punctuation">,</span> cost <span class="token operator">+</span><span class="token operator">=</span> _f <span class="token operator">*</span> h<span class="token punctuation">[</span>s<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> u <span class="token operator">&lt;</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>u<span class="token punctuation">)</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">;</span> vis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">!</span>vis<span class="token punctuation">[</span>e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>cap <span class="token operator">></span> f<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>                        d <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">+</span> h<span class="token punctuation">[</span>e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">]</span> <span class="token operator">-</span> h<span class="token punctuation">[</span>e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>d <span class="token operator">==</span> INF<span class="token punctuation">)</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>vis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                    h<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> d<span class="token punctuation">,</span> vis<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="上下界有源汇网络流"><a href="#上下界有源汇网络流" class="headerlink" title="上下界有源汇网络流"></a>上下界有源汇网络流</h3><p>T向S连容量正无穷的边，将有源汇转化为无源汇。每条边容量减去下界，设$in[i]$表示流入i的下界之和减去流出i的下界之和。新建超级源汇SS,TT，对于$in[i]&gt;0$的点，SS向i连容量为$in[i]$的边。对于$in[i]&lt;0$的点，i向TT连容量为$−in[i]$的边。</p><p>求出以 SS,TT 为源汇的最大流，如果等于$\sum in[i](in[i] &gt; 0)$则存在可行流。再求出以S,T为源汇的最大流即为最大流。</p><p>费用流：建完图后等价于求以SS,TT为源汇的的费用流。</p><p>上下界费用流：先把下界的费用加入答案。</p><h3 id="判断边是否属于某一割集"><a href="#判断边是否属于某一割集" class="headerlink" title="判断边是否属于某一割集"></a>判断边是否属于某一割集</h3><p>在残余网络 (还有流量的边) 中求强连通分量，顶点不在同一 SCC 且满流的边。</p><p>判断边是否为全部最小割集的边： 在上一条的基础上，还要满足起点与 S 在同一 SCC，且终点与T在同一SCC。</p><h3 id="线性规划转费用流"><a href="#线性规划转费用流" class="headerlink" title="线性规划转费用流"></a>线性规划转费用流</h3><p>首先添加松弛变量，将不等号都变为等号。分别用下一个式子减去上一个式子，如果每个变量只出现了两次且符号一正一负，那么可以转化为费用流。对于每个式子建立一个点，那么每个变量对应一条边，从一个点流出，向另一个点流入。这样，对于等式右边的常数，如果是正的，对应从源点向该点连一条流量C，费用0的边；如果是负的对应从该点向汇点连一条流量−C，费用0的边。对于每个变量，从它系数为正的式子向系数为负的式子连一条容量为 inf，费用为它在目标函数里系数的边。这样网络流模型就构造完毕了。</p><h2 id="欧拉路"><a href="#欧拉路" class="headerlink" title="欧拉路"></a>欧拉路</h2><p><a href="https://vjudge.net/solution/16970884" target="_blank" rel="noopener">使用示例</a>，给定无孤立结点图G，若存在一条路，经过图中每边一次且仅一次，该条路称为欧拉路。</p><ul><li>无向图：当仅当该图所有顶点的度数为偶数（此时为回路），或除两个度数为奇数外（作为路径的起点和终点）、其余全为偶数。</li><li>有向图：当仅当该图所有顶点出度=入度（此时为回路），或一个顶点出度=入度+1（作为起点）、另一个顶点入度=出度+1（作为终点）、其他顶点出度=入度。</li></ul><p>混合图欧拉回路判定：首先给无向边随便定一个方向，设$\deg x$为x连出去的边数−连入x的边数。若存在$\deg x$为奇数，或者图不连通，则无解。否则建立源点S，汇点T。对于一个点x，若$\deg x&gt;0$，则S向x连边，容量$\frac{\deg x}{2}$；若$\deg x&lt;0$，则x向T连边，容量$-\frac{\deg x}{2}$。 对于一条定了向的无向边$x\to y$，x向y连边，容量1，求出最大流，若与 S 和T连的每条边都满流，则有解。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Fleury <span class="token operator">:</span> Graph<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> vis<span class="token punctuation">,</span> cur<span class="token punctuation">,</span> p<span class="token punctuation">;</span>    <span class="token function">Fleury</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Graph</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">&amp;</span>i <span class="token operator">=</span> cur<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>i<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//遍历原图的反向图，这里加了一个“当前弧”优化</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>i<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">!</span>vis<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>vis<span class="token punctuation">[</span>k <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment" spellcheck="true">//无向图需要同时检查反向边未被访问过</span>            <span class="token punctuation">{</span>                vis<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token function">dfs</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>                p<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//查询欧拉回路，路径上边的序号按顺序存在p中</span>    <span class="token punctuation">{</span>        vis<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cur<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>i<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="连通性"><a href="#连通性" class="headerlink" title="连通性"></a>连通性</h2><h3 id="无向图求割和双连通分量"><a href="#无向图求割和双连通分量" class="headerlink" title="无向图求割和双连通分量"></a>无向图求割和双连通分量</h3><p><a href="https://vjudge.net/solution/16971337" target="_blank" rel="noopener">使用示例</a><br>割边：在连通图中，删除了连通图的某条边后，图不再连通。这样的边被称为割边，也叫做桥。</p><p>割点：在连通图中，删除了连通图的某个点以及与这个点相连的边后，图不再连通。这样的点被称为割点。<br>构造dfs搜索树，在树上有两类节点可以成为割点：</p><ul><li>对根节点u，若其有两棵或两棵以上的子树，则该根结点u为割点；</li><li>对非根非叶节点u，若其中的某棵子树的节点均没有指向u的祖先节点的回边，说明删除u之后，根结点与该棵子树的节点不再连通；则节点u为割点。</li></ul><p>对于一个无向图的子图，当删除其中任意一条边后，不改变图内点的连通性，这样的子图叫做边的双连通子图。而当子图的边数达到最大时，叫做边的双连通分量。原理是图中所有割边再求一次SCC，可<strong>直接</strong>使用求SCC的代码。</p><p>对于一个无向图的子图，当删除其中任意一个点后，不改变图内点的连通性，这样的子图叫做点的双连通子图。而当子图的边数达到最大时，叫做点的双连通分量。下面给出求点双连通分量的代码。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> BCC <span class="token operator">:</span> Graph <span class="token comment" spellcheck="true">//Biconnected Connected Componenet</span><span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> low<span class="token punctuation">,</span> bid<span class="token punctuation">,</span> stak<span class="token punctuation">,</span> cutPoint<span class="token punctuation">,</span> cutEdge<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//连通块最早dfs序，边的端点所属双连通块</span>    <span class="token keyword">int</span> bcc_siz<span class="token punctuation">;</span>    <span class="token function">BCC</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Graph</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        low<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">;</span>        bid<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">;</span>        cutPoint<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        cutEdge<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> bcc_siz <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>low<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS<span class="token punctuation">)</span>                <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> NPOS<span class="token punctuation">,</span> cnt<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> fa<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>cnt<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        low<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn <span class="token operator">=</span> <span class="token operator">++</span>cnt<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> to<span class="token punctuation">,</span> ch <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> to <span class="token operator">=</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span> to <span class="token operator">!=</span> fa<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>low<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS<span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    <span class="token operator">++</span>ch<span class="token punctuation">;</span>                    stak<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token function">dfs</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> u<span class="token punctuation">,</span> cnt<span class="token punctuation">)</span><span class="token punctuation">;</span>                    low<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>low<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span> low<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>low<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">>=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn<span class="token punctuation">)</span>                        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token operator">++</span>bcc_siz<span class="token punctuation">,</span> cutPoint<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> fa <span class="token operator">!=</span> NPOS <span class="token operator">||</span> ch <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>                        <span class="token punctuation">{</span>                            <span class="token keyword">int</span> x <span class="token operator">=</span> stak<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                            stak<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                            bid<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> bid<span class="token punctuation">[</span>x <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> bcc_siz <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>                            <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> k<span class="token punctuation">)</span>                                <span class="token keyword">break</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>low<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">></span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn<span class="token punctuation">)</span>                        cutEdge<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> cutEdge<span class="token punctuation">[</span>k <span class="token operator">^</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn<span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    stak<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>                    low<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>low<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span> v<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4 id="双连通图的构造"><a href="#双连通图的构造" class="headerlink" title="双连通图的构造"></a>双连通图的构造</h4><p>先求出所有的桥，然后删除这些桥边，剩下的每个连通块都是一个双连通子图。把每个双连通子图收缩为一个顶点，再把桥边加回来，最后的这个图一定是一棵树，边连通度为1。统计出树中度为1的节点的个数，即为叶节点的个数，记为<code>leaf</code>。至少在树上添加<code>(leaf+1)/2</code>条边，就能使树达到边双连通：先把两个最近公共祖先最远的两个叶节点之间连接一条边，这样可以把这两个点到祖先的路径上所有点收缩到一起，因为一个形成的环一定是双连通的；然后再找两个最近公共祖先最远的两个叶节点，这样一对一对找完，恰好是<code>(leaf+1)/2</code>次，把所有点收缩到了一起。</p><h3 id="有向图求强连通分量"><a href="#有向图求强连通分量" class="headerlink" title="有向图求强连通分量"></a>有向图求强连通分量</h3><p><a href="https://vjudge.net/solution/16971480" target="_blank" rel="noopener">使用示例</a>，如果是无向图，求出来的还是边双连通分量。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> SCC <span class="token operator">:</span> Graph <span class="token comment" spellcheck="true">//Strongly Connected Componenet</span><span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> low<span class="token punctuation">,</span> sid<span class="token punctuation">,</span> stak<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//连通块最早dfs序，点所属连通块</span>    <span class="token keyword">int</span> scc_siz<span class="token punctuation">;</span>    <span class="token function">SCC</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Graph</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        low<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">;</span>        sid<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> scc_siz <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>low<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS<span class="token punctuation">)</span>                <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> NPOS<span class="token punctuation">,</span> cnt<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> fa<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>cnt<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        low<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn <span class="token operator">=</span> <span class="token operator">++</span>cnt<span class="token punctuation">;</span>        stak<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> to<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> to <span class="token operator">=</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span> to <span class="token operator">!=</span> fa<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//求边双连通分量把",1"注释掉，即不许走回边</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>low<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS<span class="token punctuation">)</span>                    <span class="token function">dfs</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> u<span class="token punctuation">,</span> cnt<span class="token punctuation">)</span><span class="token punctuation">,</span> low<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>low<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span> low<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>sid<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS<span class="token punctuation">)</span>                    low<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>low<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">,</span> v<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>low<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">==</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn<span class="token punctuation">)</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token operator">++</span>scc_siz<span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">int</span> x <span class="token operator">=</span> stak<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                stak<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                sid<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> scc_siz <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> u<span class="token punctuation">)</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h4 id="2-SAT"><a href="#2-SAT" class="headerlink" title="2-SAT"></a>2-SAT</h4><p><a href="https://vjudge.net/solution/16971480" target="_blank" rel="noopener">使用示例</a>，n个布尔变量$x_0\ldots x_{n-1}$，逻辑表达式$Y=(A_0+B_0)(A_1+B_1)\ldots(A_{m-1}+B_{m-1})$，其中$A_i,B_i\in{x_j,\overline{x_j}}$，判断是否存在$x_0\ldots x_{n-1}$的取值使得Y值为1。因为$A+B=(\overline A\to B)(\overline B\to A)$，所以对于一个要求$A+B$，我们连$\overline A\to B,\overline B\to A$两条边。如果有一条边$A\to B$，意味着如果A成立那么B必然成立。若$\exists i,x_i,\overline{x_i}\in$同一SCC，则不存在。</p><h2 id="二分图"><a href="#二分图" class="headerlink" title="二分图"></a>二分图</h2><p>二分图的一个等价定义是：不含有含奇数条边的环的图。</p><p>完美匹配图中所有的顶点都是匹配点。</p><p>二分图的最小点覆盖（最小割）是指最少的顶点数使得二分图G中的每条边都至少与其中一个点相关联。二分图中，最小割=最大匹配。</p><p>二分图的最小边覆盖（最大独立集）是指用尽量少的不相交简单路径覆盖二分图中的所有顶点。二分图中，最小点覆盖+最小边覆盖=总点数。</p><p>Hall定理：二分图中的两部分顶点组成的集合分别为 X,Y ，则有一组无公共点的边，一端恰好为组成 X 的点的充分必要条件是：X 中的任意 k 个点至少与 Y 中的 k 个点相邻。对于区间图只需要考虑极端情况，线段树维护。</p><p>关键点：一定在最大匹配中的点。 求出任意一个最大匹配，那么只需要考虑哪些匹配点不一定在。 假设是考虑左侧的点，右侧类似： 将匹配边从右往左，非匹配边从左到右，从左侧每个未匹配点开始DFS到的匹配点都不是关键点。</p><p>关键边：求出任意一个最大匹配，将匹配边从右到左，剩余边从左到右，求出 SCC。 对于一条边：若它位于当前匹配中，那么若两端点位于同一SCC，则是可能在，否则必定在；若它不位于当前匹配中，那么若两端点位于同一 SCC，则是可能在，否则必定不在。</p><h3 id="Hungary求最大匹配"><a href="#Hungary求最大匹配" class="headerlink" title="Hungary求最大匹配"></a>Hungary求最大匹配</h3><p><a href="https://vjudge.net/solution/16101365" target="_blank" rel="noopener">使用示例</a></p><p>左边nl个点$0\ldots nl-1$，右边nr个点$0\ldots nr-1$，取<code>n=max(nl,nr)</code>，左i右j间代价<code>a[x][y]</code>。</p><p>生成<code>fl[i]</code>表示左边第i个匹配右边第<code>fl[i]</code>个（对应权<code>a[i][fl[i]]</code>），fr同理。时间复杂度$O(n^3)$。</p><p><a href="https://vjudge.net/solution/15736357" target="_blank" rel="noopener">稀疏图</a>的时候考虑用邻接表代替邻接矩阵，并且找完全匹配的时候有问题可直接return。</p><p>匹配是一个边集，其中任意两条边都没有公共顶点；扫一遍<code>fl</code>或<code>fr</code>判断有多少不等于<code>NPOS</code>即为最大匹配数。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Hungary <span class="token operator">:</span> Matrix<span class="token punctuation">{</span>    <span class="token keyword">int</span> fl<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> fr<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> vr<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">bool</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> rt<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> y <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>y<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> vr<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">!=</span> rt<span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>vr<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> rt<span class="token punctuation">,</span> fr<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS <span class="token operator">||</span> <span class="token function">dfs</span><span class="token punctuation">(</span>fr<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">,</span> rt<span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token keyword">return</span> fl<span class="token punctuation">[</span>fr<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">fill</span><span class="token punctuation">(</span>fl<span class="token punctuation">,</span> fl <span class="token operator">+</span> n<span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">fill</span><span class="token punctuation">(</span>fr<span class="token punctuation">,</span> fr <span class="token operator">+</span> n<span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">fill</span><span class="token punctuation">(</span>vr<span class="token punctuation">,</span> vr <span class="token operator">+</span> n<span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>fl<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS<span class="token punctuation">)</span>                <span class="token function">dfs</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="HopcroftKarp求最大匹配"><a href="#HopcroftKarp求最大匹配" class="headerlink" title="HopcroftKarp求最大匹配"></a>HopcroftKarp求最大匹配</h3><p><a href="https://vjudge.net/solution/16101256" target="_blank" rel="noopener">使用示例</a>，时间复杂度$O(\sqrt{|V|}|E|)$，稀疏图上效果明显。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> HopcroftKarp<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> g<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> fl<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> fr<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> hl<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> hr<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> q<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">bool</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> c <span class="token operator">=</span> hl<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> y <span class="token operator">=</span> hl<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> NPOS<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>hr<span class="token punctuation">[</span>y <span class="token operator">=</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> c<span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>hr<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> NPOS<span class="token punctuation">,</span> fr<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS <span class="token operator">||</span> <span class="token function">dfs</span><span class="token punctuation">(</span>fr<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token keyword">return</span> fl<span class="token punctuation">[</span>fr<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">fill</span><span class="token punctuation">(</span>fl<span class="token punctuation">,</span> fl <span class="token operator">+</span> n<span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">fill</span><span class="token punctuation">(</span>fr<span class="token punctuation">,</span> fr <span class="token operator">+</span> n<span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>x<span class="token punctuation">)</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>fr<span class="token punctuation">[</span>y <span class="token operator">=</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> NPOS<span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    fl<span class="token punctuation">[</span>fr<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> ql<span class="token punctuation">,</span> qr<span class="token punctuation">,</span> ok<span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token function">fill</span><span class="token punctuation">(</span>hl<span class="token punctuation">,</span> hl <span class="token operator">+</span> n<span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">fill</span><span class="token punctuation">(</span>hr<span class="token punctuation">,</span> hr <span class="token operator">+</span> n<span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> ql <span class="token operator">=</span> qr <span class="token operator">=</span> ok <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>x<span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>fl<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS<span class="token punctuation">)</span>                    hl<span class="token punctuation">[</span>q<span class="token punctuation">[</span>qr<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>ql <span class="token operator">&lt;</span> qr<span class="token punctuation">)</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> x <span class="token operator">=</span> q<span class="token punctuation">[</span>ql<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>hr<span class="token punctuation">[</span>y <span class="token operator">=</span> g<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> NPOS<span class="token punctuation">)</span>                    <span class="token punctuation">{</span>                        hr<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> hl<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>fr<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS<span class="token punctuation">)</span>                            ok <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>hl<span class="token punctuation">[</span>fr<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> NPOS<span class="token punctuation">)</span>                            hl<span class="token punctuation">[</span>q<span class="token punctuation">[</span>qr<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> fr<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> hr<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>                    <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ok<span class="token punctuation">)</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> x <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>x<span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>fl<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS<span class="token punctuation">)</span>                    <span class="token function">dfs</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="KuhnMunkres求最优完备匹配"><a href="#KuhnMunkres求最优完备匹配" class="headerlink" title="KuhnMunkres求最优完备匹配"></a>KuhnMunkres求最优完备匹配</h3><p><a href="https://vjudge.net/solution/15299760" target="_blank" rel="noopener">使用示例</a>，最大费用流时，a初始化0；最大费用最大流时，a初始化<code>-N*INF</code>。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> KuhnMunkres <span class="token operator">:</span> Matrix<span class="token punctuation">{</span>    ll hl<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> hr<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> slk<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> fl<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> fr<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> vl<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> vr<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> pre<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> q<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span> ql<span class="token punctuation">,</span> qr<span class="token punctuation">;</span>    <span class="token keyword">int</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>vl<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> fl<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> NPOS<span class="token punctuation">)</span>            <span class="token keyword">return</span> vr<span class="token punctuation">[</span>q<span class="token punctuation">[</span>qr<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token operator">=</span> fl<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> NPOS<span class="token punctuation">)</span>            <span class="token function">swap</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> fr<span class="token punctuation">[</span>fl<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> pre<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">bfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> s<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">fill</span><span class="token punctuation">(</span>slk<span class="token punctuation">,</span> slk <span class="token operator">+</span> n<span class="token punctuation">,</span> INF<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">fill</span><span class="token punctuation">(</span>vl<span class="token punctuation">,</span> vl <span class="token operator">+</span> n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">fill</span><span class="token punctuation">(</span>vr<span class="token punctuation">,</span> vr <span class="token operator">+</span> n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>vr<span class="token punctuation">[</span>q<span class="token punctuation">[</span>ql <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> s<span class="token punctuation">]</span> <span class="token operator">=</span> qr <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>ll d<span class="token punctuation">;</span> ql <span class="token operator">&lt;</span> qr<span class="token punctuation">;</span><span class="token punctuation">)</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> q<span class="token punctuation">[</span>ql<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>vl<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> slk<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>=</span> <span class="token punctuation">(</span>d <span class="token operator">=</span> hl<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> hr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>pre<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> j<span class="token punctuation">,</span> d<span class="token punctuation">)</span>                            slk<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> d<span class="token punctuation">;</span>                        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">check</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>                            <span class="token keyword">return</span><span class="token punctuation">;</span>            ll d <span class="token operator">=</span> INF<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>vl<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> d <span class="token operator">></span> slk<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                    d <span class="token operator">=</span> slk<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>vl<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                    hl<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> d<span class="token punctuation">;</span>                <span class="token keyword">else</span>                    slk<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> d<span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>vr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                    hr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> d<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>vl<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>slk<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">check</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">fill</span><span class="token punctuation">(</span>fl<span class="token punctuation">,</span> fl <span class="token operator">+</span> n<span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">fill</span><span class="token punctuation">(</span>fr<span class="token punctuation">,</span> fr <span class="token operator">+</span> n<span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">fill</span><span class="token punctuation">(</span>hr<span class="token punctuation">,</span> hr <span class="token operator">+</span> n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            hl<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">*</span><span class="token function">max_element</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>            <span class="token function">bfs</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="带花树"><a href="#带花树" class="headerlink" title="带花树"></a>带花树</h2><h3 id="一般图最大匹配"><a href="#一般图最大匹配" class="headerlink" title="一般图最大匹配"></a>一般图最大匹配</h3><p><a href="http://uoj.ac/submission/299160" target="_blank" rel="noopener">使用示例</a></p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Blossom <span class="token operator">:</span> Graph<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> f<span class="token punctuation">;</span>    <span class="token function">Blossom</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Graph</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">vis</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">;</span>        f <span class="token operator">=</span> vis<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> s <span class="token operator">&lt;</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>s<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                UnionfindSet <span class="token function">ufs</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">pre</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">flag</span><span class="token punctuation">(</span>pre<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span>deque<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">q</span><span class="token punctuation">(</span>flag<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span> f<span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> q<span class="token punctuation">.</span><span class="token function">pop_front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> x <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> y<span class="token punctuation">,</span> a<span class="token punctuation">,</span> b<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span>y <span class="token operator">=</span> e<span class="token punctuation">[</span>v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span> y <span class="token operator">!=</span> f<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> flag<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> ufs<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">!=</span> ufs<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token punctuation">{</span>                            <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>                            <span class="token punctuation">{</span>                                <span class="token keyword">for</span> <span class="token punctuation">(</span>a <span class="token operator">=</span> x<span class="token punctuation">,</span> b <span class="token operator">=</span> y<span class="token punctuation">,</span> <span class="token operator">++</span>t<span class="token punctuation">;</span><span class="token punctuation">;</span> <span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span>                                    <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">!=</span> NPOS<span class="token punctuation">)</span>                                    <span class="token punctuation">{</span>                                        <span class="token keyword">if</span> <span class="token punctuation">(</span>vis<span class="token punctuation">[</span>a <span class="token operator">=</span> ufs<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">==</span> t<span class="token punctuation">)</span>                                            <span class="token keyword">break</span><span class="token punctuation">;</span>                                        vis<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">,</span> a <span class="token operator">=</span> f<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">!=</span> NPOS <span class="token operator">?</span> pre<span class="token punctuation">[</span>f<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">:</span> NPOS<span class="token punctuation">;</span>                                    <span class="token punctuation">}</span>                                <span class="token keyword">if</span> <span class="token punctuation">(</span>ufs<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">!=</span> a<span class="token punctuation">)</span>                                    pre<span class="token punctuation">[</span>x<span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">;</span>                                <span class="token keyword">if</span> <span class="token punctuation">(</span>ufs<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token operator">!=</span> a<span class="token punctuation">)</span>                                    pre<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span>                                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> p<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>                                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> x <span class="token operator">=</span> p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">;</span> x <span class="token operator">!=</span> a<span class="token punctuation">;</span> ufs<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">,</span> ufs<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>x <span class="token operator">=</span> z<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span>                                    <span class="token punctuation">{</span>                                        <span class="token keyword">if</span> <span class="token punctuation">(</span>ufs<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span>z <span class="token operator">=</span> pre<span class="token punctuation">[</span>y <span class="token operator">=</span> f<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> a<span class="token punctuation">)</span>                                            pre<span class="token punctuation">[</span>z<span class="token punctuation">]</span> <span class="token operator">=</span> y<span class="token punctuation">;</span>                                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span>                                            flag<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>                                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">[</span>z<span class="token punctuation">]</span><span class="token punctuation">)</span>                                            flag<span class="token punctuation">[</span>z<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>                                    <span class="token punctuation">}</span>                            <span class="token punctuation">}</span>                            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS<span class="token punctuation">)</span>                            <span class="token punctuation">{</span>                                <span class="token keyword">for</span> <span class="token punctuation">(</span>pre<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">;</span> y <span class="token operator">!=</span> NPOS<span class="token punctuation">;</span><span class="token punctuation">)</span>                                    <span class="token function">swap</span><span class="token punctuation">(</span>y<span class="token punctuation">,</span> f<span class="token punctuation">[</span>f<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> pre<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                                <span class="token keyword">break</span><span class="token punctuation">;</span>                            <span class="token punctuation">}</span>                            <span class="token keyword">else</span>                                pre<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> flag<span class="token punctuation">[</span>f<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> flag<span class="token punctuation">[</span>y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                        <span class="token punctuation">}</span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="树形图"><a href="#树形图" class="headerlink" title="树形图"></a>树形图</h2><h3 id="最小生成树"><a href="#最小生成树" class="headerlink" title="最小生成树"></a>最小生成树</h3><h4 id="无向图"><a href="#无向图" class="headerlink" title="无向图"></a>无向图</h4><p>同时给出Prim算法（生成新树）、Kruskal算法（消耗小）。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Prim <span class="token operator">:</span> Graph<span class="token punctuation">{</span>    <span class="token keyword">struct</span> DisGreater    <span class="token punctuation">{</span>        <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> Edge <span class="token operator">&amp;</span>e1<span class="token punctuation">,</span> <span class="token keyword">const</span> Edge <span class="token operator">&amp;</span>e2<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">return</span> e1<span class="token punctuation">.</span>len <span class="token operator">></span> e2<span class="token punctuation">.</span>len<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    ll ans<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> vis<span class="token punctuation">;</span>    priority_queue<span class="token operator">&lt;</span>Edge<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>Edge<span class="token operator">></span><span class="token punctuation">,</span> DisGreater<span class="token operator">></span> q<span class="token punctuation">;</span>    <span class="token function">Prim</span><span class="token punctuation">(</span><span class="token keyword">const</span> Graph <span class="token operator">&amp;</span>g<span class="token punctuation">,</span> <span class="token keyword">int</span> root<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Tree</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ans</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">vis</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//生成新树，每条边都要有等长反向边</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token function">insert</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> g<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Edge ed <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">!</span>vis<span class="token punctuation">[</span>ed<span class="token punctuation">.</span>second<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token function">insert</span><span class="token punctuation">(</span>ed<span class="token punctuation">.</span>second<span class="token punctuation">,</span> g<span class="token punctuation">)</span><span class="token punctuation">,</span> ans <span class="token operator">+</span><span class="token operator">=</span> ed<span class="token punctuation">.</span>len<span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span>ed<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">const</span> Graph <span class="token operator">&amp;</span>g<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//把点和对应的相连的边加入集合</span>    <span class="token punctuation">{</span>        vis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> g<span class="token punctuation">.</span>v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> g<span class="token punctuation">.</span>v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">!</span>vis<span class="token punctuation">[</span>g<span class="token punctuation">.</span>e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">]</span><span class="token punctuation">)</span>                q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span>e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>ll <span class="token function">kruskal</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Edge<span class="token operator">></span> <span class="token operator">&amp;</span>e<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//会清空边集e，每条边被认作无向边</span><span class="token punctuation">{</span>    ll ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    UnionFindSet <span class="token function">ufs</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token function">sort</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">DisGreater</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">!</span>e<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> e<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>ufs<span class="token punctuation">.</span><span class="token function">fa</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>from<span class="token punctuation">)</span> <span class="token operator">!=</span> ufs<span class="token punctuation">.</span><span class="token function">fa</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            ufs<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>from<span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span>            ret <span class="token operator">+</span><span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>len<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token comment" spellcheck="true">/*ufs.siz>1?INF:*/</span> ret<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//视情况选择去注释</span><span class="token punctuation">}</span></code></pre><h4 id="有向图"><a href="#有向图" class="headerlink" title="有向图"></a>有向图</h4><p><a href="https://vjudge.net/solution/16971789" target="_blank" rel="noopener">使用示例</a></p><p>指定以root为根，如果没有限定根那么新建一个虚拟点作为根，向所有边连边长<strong>最大边长+1</strong>的边，在最后生成的图中去掉此边。时间复杂度$O(VE)$。</p><pre class=" language-cpp"><code class="language-cpp">ll <span class="token function">zhuLiu</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Edge<span class="token operator">></span> <span class="token operator">&amp;</span>e<span class="token punctuation">,</span> <span class="token keyword">int</span> root<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//不存在返回INF</span><span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>ll ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token function">in</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> INF<span class="token punctuation">)</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">pre</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> to<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> e<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">==</span> <span class="token punctuation">(</span>to <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token function">swap</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>i<span class="token operator">--</span><span class="token punctuation">]</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>in<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">></span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>len<span class="token punctuation">)</span>                in<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>len<span class="token punctuation">,</span> pre<span class="token punctuation">[</span>to<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> in <span class="token punctuation">[</span>root<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>in<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> INF<span class="token punctuation">)</span>                <span class="token keyword">return</span> INF<span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">id</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">vis</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> NPOS<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> tn <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> v<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>ret <span class="token operator">+</span><span class="token operator">=</span> in <span class="token punctuation">[</span>v <span class="token operator">=</span> i<span class="token punctuation">]</span><span class="token punctuation">;</span> vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">!=</span> i <span class="token operator">&amp;&amp;</span> id<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS <span class="token operator">&amp;&amp;</span> v <span class="token operator">!=</span> root<span class="token punctuation">;</span> v <span class="token operator">=</span> pre<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>                vis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">!=</span> root <span class="token operator">&amp;&amp;</span> id<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> pre<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span> u <span class="token operator">!=</span> v<span class="token punctuation">;</span> u <span class="token operator">=</span> pre<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>                    id<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> tn<span class="token punctuation">;</span>                id<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> tn<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>tn<span class="token punctuation">)</span>            <span class="token keyword">return</span> ret<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>id<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> NPOS<span class="token punctuation">)</span>                id<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> tn<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> v<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> e<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">=</span> id<span class="token punctuation">[</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token punctuation">(</span>e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>second <span class="token operator">=</span> id<span class="token punctuation">[</span>v <span class="token operator">=</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                e<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>len <span class="token operator">-</span><span class="token operator">=</span> in<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>        n <span class="token operator">=</span> tn<span class="token punctuation">,</span> root <span class="token operator">=</span> id<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="树链剖分与LCA"><a href="#树链剖分与LCA" class="headerlink" title="树链剖分与LCA"></a>树链剖分与LCA</h3><p><a href="https://vjudge.net/solution/16971586" target="_blank" rel="noopener">使用示例</a></p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Diagram <span class="token operator">:</span> Graph<span class="token punctuation">{</span>    Fenwick data<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//暂用树状数组作为默认数据结构</span>    <span class="token function">Diagram</span><span class="token punctuation">(</span><span class="token keyword">const</span> Graph <span class="token operator">&amp;</span>g<span class="token punctuation">,</span> <span class="token keyword">int</span> root<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Graph</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">data</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span>v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">build</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> g<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">int</span> cnt <span class="token operator">=</span> v<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn <span class="token operator">=</span> v<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">.</span>dep <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token function">dfs</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>root<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">=</span> root<span class="token punctuation">,</span> cnt<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">const</span> Graph <span class="token operator">&amp;</span>g<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//无向图dfs建树，且重边在最前，u为根节点</span>    <span class="token punctuation">{</span>        v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>siz <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> to<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> g<span class="token punctuation">.</span>v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> g<span class="token punctuation">.</span>v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> to <span class="token operator">=</span> g<span class="token punctuation">.</span>e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span> <span class="token operator">!</span>v<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">.</span>siz<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//没访问过的点siz默认0</span>            <span class="token punctuation">{</span>                <span class="token function">build</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> g<span class="token punctuation">)</span><span class="token punctuation">;</span>                v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>siz <span class="token operator">+</span><span class="token operator">=</span> v<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">.</span>siz<span class="token punctuation">;</span>                Graph<span class="token operator">::</span><span class="token function">add</span><span class="token punctuation">(</span>g<span class="token punctuation">.</span>e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">[</span><span class="token function">ch</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>siz <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">.</span>siz<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//重边移到最前</span>                    <span class="token function">swap</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token operator">&amp;</span>cnt<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> to<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            v<span class="token punctuation">[</span>to <span class="token operator">=</span> <span class="token function">ch</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dfn <span class="token operator">=</span> <span class="token operator">++</span>cnt<span class="token punctuation">;</span>            v<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">=</span> i <span class="token operator">?</span> to <span class="token operator">:</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">;</span>            v<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">.</span>dep <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>dep <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token function">dfs</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> cnt<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">lca</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">!=</span> v<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">;</span> x <span class="token operator">=</span> <span class="token function">fa</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">[</span>v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">]</span><span class="token punctuation">.</span>dep <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>v<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">]</span><span class="token punctuation">.</span>dep<span class="token punctuation">)</span>                <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>dep <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>dep<span class="token punctuation">)</span>            <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> y<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    ll <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        ll ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">!=</span> v<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">;</span> x <span class="token operator">=</span> <span class="token function">fa</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">[</span>v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">]</span><span class="token punctuation">.</span>dep <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>v<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">]</span><span class="token punctuation">.</span>dep<span class="token punctuation">)</span>                <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>            ans <span class="token operator">+</span><span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn<span class="token punctuation">,</span> v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>dep <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>dep<span class="token punctuation">)</span>            <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> ans <span class="token operator">+</span><span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">ask</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn<span class="token punctuation">,</span> v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span> <span class="token keyword">int</span> y<span class="token punctuation">,</span> ll pv<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>top <span class="token operator">!=</span> v<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">;</span> x <span class="token operator">=</span> <span class="token function">fa</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">[</span>v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">]</span><span class="token punctuation">.</span>dep <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>v<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">]</span><span class="token punctuation">.</span>dep<span class="token punctuation">)</span>                <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>            data<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>top<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn<span class="token punctuation">,</span> v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn<span class="token punctuation">,</span> pv<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>dep <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>dep<span class="token punctuation">)</span>            <span class="token function">swap</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        data<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn<span class="token punctuation">,</span> v<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>dfn<span class="token punctuation">,</span> pv<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="点剖（点分治）"><a href="#点剖（点分治）" class="headerlink" title="点剖（点分治）"></a>点剖（点分治）</h3><p><a href="https://vjudge.net/solution/16971666" target="_blank" rel="noopener">使用示例</a>，零号点为虚节点。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> TreeDiv <span class="token operator">:</span> Graph<span class="token punctuation">{</span>    <span class="token keyword">int</span> root<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> mx<span class="token punctuation">,</span> siz<span class="token punctuation">,</span> vis<span class="token punctuation">;</span>    <span class="token function">TreeDiv</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Graph</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">mx</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">siz</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">vis</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">dfsRoot</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> fa<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> mx<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> siz<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> to<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> to <span class="token operator">=</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span> to <span class="token operator">!=</span> fa <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>vis<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">dfsRoot</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">,</span> siz<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> siz<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">,</span> mx<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">&lt;</span> siz<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span>                    mx<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> siz<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>mx<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">&lt;</span> mx<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token operator">++</span>siz<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>            mx<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> mx<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> siz<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>mx<span class="token punctuation">[</span>root<span class="token punctuation">]</span> <span class="token operator">>=</span> mx<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">)</span>            root <span class="token operator">=</span> u<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">dfsDis</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> <span class="token keyword">int</span> fa<span class="token punctuation">,</span> ll d<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">//用d更新答案</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> to<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> to <span class="token operator">=</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span> to <span class="token operator">!=</span> fa <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>vis<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token function">dfsDis</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> u<span class="token punctuation">,</span> d <span class="token operator">+</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">cal</span><span class="token punctuation">(</span><span class="token keyword">int</span> u<span class="token punctuation">,</span> ll d<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//返回符合要求的点对数</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">dfsDis</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">/*得到答案*/</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> u <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token function">dfsRoot</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> root <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ans <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">cal</span><span class="token punctuation">(</span>u <span class="token operator">=</span> root<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> vis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> to<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> v<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">.</span>o<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> to <span class="token operator">=</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span> <span class="token operator">!</span>vis<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">)</span>                ans <span class="token operator">-</span><span class="token operator">=</span> <span class="token function">cal</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> e<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">.</span>len<span class="token punctuation">)</span><span class="token punctuation">,</span> mx<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> siz<span class="token punctuation">[</span>to<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">dfs</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> Template </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ICPC模板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数论</title>
      <link href="/2019/02/03/2019-02-03-shu-lun/"/>
      <url>/2019/02/03/2019-02-03-shu-lun/</url>
      
        <content type="html"><![CDATA[<h2 id="辗转相除法"><a href="#辗转相除法" class="headerlink" title="辗转相除法"></a>辗转相除法</h2><pre class=" language-cpp"><code class="language-cpp">ll <span class="token function">gcd</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span> ll b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> b <span class="token operator">?</span> <span class="token function">gcd</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> a <span class="token operator">%</span> b<span class="token punctuation">)</span> <span class="token operator">:</span> a<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//a、b的最大公约数</span>ll <span class="token function">lcm</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span> ll b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">/</span> <span class="token function">gcd</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">*</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span>     <span class="token comment" spellcheck="true">//a、b的最小公倍数</span>ll <span class="token function">gcd</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span> ll b<span class="token punctuation">,</span> ll <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> ll <span class="token operator">&amp;</span>y<span class="token punctuation">)</span>                     <span class="token comment" spellcheck="true">//扩展欧几里得，引用返回a*x+b*y=gcd(a,b)绝对值之和最小的解</span><span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>a<span class="token punctuation">)</span>        <span class="token keyword">return</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">;</span>    ll d <span class="token operator">=</span> <span class="token function">gcd</span><span class="token punctuation">(</span>b <span class="token operator">%</span> a<span class="token punctuation">,</span> a<span class="token punctuation">,</span> y<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> x <span class="token operator">-</span><span class="token operator">=</span> b <span class="token operator">/</span> a <span class="token operator">*</span> y<span class="token punctuation">,</span> d<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="裴蜀定理"><a href="#裴蜀定理" class="headerlink" title="裴蜀定理"></a>裴蜀定理</h3><p>对任何$a,b\in Z$和它们的最大公约数$d$，关于未知数$x,y$的线性不定方程（称为裴蜀等式）：$ax+by=c$当仅当$d|c$，可知有无穷多解。特别地，$ax+by=d$一定有解。</p><h4 id="推论"><a href="#推论" class="headerlink" title="推论"></a>推论</h4><p>$a,b$互质的充要条件是$ax+by=1$有整数解。</p><h2 id="同余系运算"><a href="#同余系运算" class="headerlink" title="同余系运算"></a>同余系运算</h2><p>求乘法逆元的另外一种方法是用欧拉定理$x^{\phi(m)}\equiv1\pmod m$，x的逆是$x^{\phi(m)-1}$。特别地，m为素数时$\phi(m)=m-1$，此时x的逆就是<code>pow(x,m-2,m)</code>。</p><p>log函数：m为素数时<a href="https://vjudge.net/solution/18274234" target="_blank" rel="noopener">求解模方程</a>$a^x\equiv b\pmod m$。设P为质数，G为P的原根，则$x^y\equiv b\pmod P$等价于$y\ ind\ x\equiv b\pmod{P-1}$，其中$G\ ind\ x\equiv x\pmod P$。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Mod<span class="token punctuation">{</span>    <span class="token keyword">const</span> ll M<span class="token punctuation">;</span>    <span class="token function">Mod</span><span class="token punctuation">(</span>ll M<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">M</span><span class="token punctuation">(</span>M<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    ll <span class="token function">add</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span> ll b<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span> <span class="token operator">%</span> M <span class="token operator">+</span> M<span class="token punctuation">)</span> <span class="token operator">%</span> M<span class="token punctuation">;</span> <span class="token punctuation">}</span>    ll <span class="token function">sub</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span> ll b<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> M <span class="token operator">-</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    ll <span class="token function">mul</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span> ll b<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">*</span> b <span class="token operator">%</span> M<span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">/*//根据a*b是否爆ll替换a*b%m    ll mul(ll a, ll b) const    {        ll r = 0;        for (a %= M; b; b >>= 1, a = add(a, a))            if (b &amp; 1)                r = add(r, a);        return r;    }    */</span>    ll <span class="token function">pow</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span> ll b<span class="token punctuation">)</span> <span class="token keyword">const</span>    <span class="token punctuation">{</span>        ll r <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>a <span class="token operator">%</span><span class="token operator">=</span> M<span class="token punctuation">;</span> b<span class="token punctuation">;</span> b <span class="token operator">>>=</span> <span class="token number">1</span><span class="token punctuation">,</span> a <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span>                r <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> r<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    ll <span class="token function">inv</span><span class="token punctuation">(</span>ll a<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">pow</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> M <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//return pow(a, phi(m) - 1, m);</span>    <span class="token comment" spellcheck="true">/*//模m下a的乘法逆元，不存在返回-1（m为素数时a不为0必有逆元）    ll inv(ll a) const    {        ll x, y, d = gcd(a, m, x, y);        return d == 1 ? (x + m) % m : -1;    }    */</span>    ll <span class="token function">div</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span> ll b<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">mul</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token function">inv</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    ll <span class="token function">log</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span> ll b<span class="token punctuation">)</span> <span class="token keyword">const</span>    <span class="token punctuation">{</span>        ll n <span class="token operator">=</span> <span class="token function">ceil</span><span class="token punctuation">(</span><span class="token function">sqrt</span><span class="token punctuation">(</span>M <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        map<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">></span> x<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>ll i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> e <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> e <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>x<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span>                x<span class="token punctuation">[</span>e<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>ll i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> v <span class="token operator">=</span> <span class="token function">inv</span><span class="token punctuation">(</span><span class="token function">pow</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> i <span class="token operator">*</span> n <span class="token operator">+</span> x<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token function">sol</span><span class="token punctuation">(</span>ll a<span class="token punctuation">,</span> ll b<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//解同余方程，返回ax=b(mod M)循环节内所有解</span>    <span class="token punctuation">{</span>        vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> ans<span class="token punctuation">;</span>        ll x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">gcd</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> M<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">%</span> d<span class="token punctuation">)</span>            <span class="token keyword">return</span> ans<span class="token punctuation">;</span>        ans<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">(</span>b <span class="token operator">/</span> d<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token punctuation">(</span>M <span class="token operator">/</span> d<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">%</span> M <span class="token operator">+</span> M<span class="token punctuation">)</span> <span class="token operator">%</span> M<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> d<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            ans<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ans<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> i <span class="token operator">*</span> M <span class="token operator">/</span> d<span class="token punctuation">)</span> <span class="token operator">%</span> M<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="中国剩余定理解同余方程组"><a href="#中国剩余定理解同余方程组" class="headerlink" title="中国剩余定理解同余方程组"></a>中国剩余定理解同余方程组</h3><p><a href="https://vjudge.net/solution/14375815" target="_blank" rel="noopener">使用示例</a></p><pre class=" language-cpp"><code class="language-cpp">ll <span class="token function">crt</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span>ll<span class="token punctuation">,</span> ll<span class="token operator">>></span> <span class="token operator">&amp;</span>v<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//同余方程组，x%v[i].first==v[i].second，不存在返回-1</span><span class="token punctuation">{</span>    ll m <span class="token operator">=</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">,</span> r <span class="token operator">=</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>c <span class="token operator">=</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>second <span class="token operator">-</span> r<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token function">gcd</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> c <span class="token operator">%</span> d<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token function">gcd</span><span class="token punctuation">(</span>m <span class="token operator">/</span> d<span class="token punctuation">,</span> z <span class="token operator">=</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>first <span class="token operator">/</span> d<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> r <span class="token operator">+</span><span class="token operator">=</span> c <span class="token operator">/</span> d <span class="token operator">*</span> x <span class="token operator">%</span> z <span class="token operator">*</span> m<span class="token punctuation">,</span> r <span class="token operator">%</span><span class="token operator">=</span> m <span class="token operator">*</span><span class="token operator">=</span> z<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> r <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> r <span class="token operator">+</span> m <span class="token operator">:</span> r<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="欧拉筛"><a href="#欧拉筛" class="headerlink" title="欧拉筛"></a>欧拉筛</h2><p>欧拉函数$\phi(n)$是小于n的正整数中与n互素的数的数目。特别地，规定$\phi(1)=1$，易知n&gt;2时都为偶数。</p><p>欧拉函数是积性函数，即对任意素数$p,q$满足下列关系：$\phi(pq)=\phi(p)\phi(q)=(p-1)(q-1)$对任何两个互质的正整数$x, m(m\geq2)$有欧拉定理：$x^{\phi(m)}\equiv1\pmod m$当m为素数p时，此式变为费马小定理：$x^{p-1}\equiv1\pmod p$利用欧拉函数和它本身不同质因数的关系，用筛法$O(N)$预处理某个范围内所有数的欧拉函数值，并求出素数表。同时，利用计算欧拉函数过程中求出的最小素因子m，可以实现$O(log N)$的素因数分解。</p><p>同时求莫比乌斯函数$\mu(n)$，存在<code>mu</code>中。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> EulerSieve<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> p<span class="token punctuation">,</span> m<span class="token punctuation">,</span> phi<span class="token punctuation">,</span> mu<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//素数序列，最小素因子，欧拉函数，莫比乌斯函数</span>    <span class="token function">EulerSieve</span><span class="token punctuation">(</span><span class="token keyword">int</span> N<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">m</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">phi</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">mu</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        phi<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> mu<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                     <span class="token comment" spellcheck="true">//m[1]=0,m[i]==i可判断i是素数</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> k<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//防i*p[j]爆int</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                p<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> phi<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> mu<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//i是素数</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>k <span class="token operator">=</span> i <span class="token operator">*</span> p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                phi<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> phi<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>m<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> m<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    mu<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                phi<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> phi<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                mu<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>mu<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="常见数论函数变换"><a href="#常见数论函数变换" class="headerlink" title="常见数论函数变换"></a>常见数论函数变换</h3><p>$\sum_{d|n}\mu(d)=[n=1]$</p><p>$\phi(n)=\sum_{i=1}^n[\gcd(i,n)=1]=\sum_{i=1}^n\sum_{k\mid i,k\mid n}\mu(k)=\sum_{k\mid n}\frac nk\mu(k)$</p><h4 id="前缀和"><a href="#前缀和" class="headerlink" title="前缀和"></a>前缀和</h4><p>欧拉函数前缀和$S_\phi(n)=\frac{(n+1)n}2-\sum_{d=1}^nS_\phi(\frac{n}{d})$</p><p>莫比乌斯函数前缀和$S_\mu(n)=1-\sum_{d=1}^nS_\mu(\frac{n}{d})$</p><h4 id="莫比乌斯反演"><a href="#莫比乌斯反演" class="headerlink" title="莫比乌斯反演"></a>莫比乌斯反演</h4><p>若$f(n)=\sum_{d|n}g(d)$，则$g(n)=\sum_{d|n}\mu(d)f(\frac{n}{d})$</p><p>若$f(n)=\sum_{i=1}^nt(i)g(\frac{n}{i})$，则$g(n)=\sum_{i=1}^n\mu(i)t(i)f(\frac{n}{i})$（此时代$t(i)=[gcd(n,i)&gt;1]$可得上式）</p><p>举例（其中$T=kd$）：</p><p>$\sum_{i=1}^n\sum_{j=1}^m\gcd(i,j)$</p><p>$=\sum_d d\sum_{i=1}^n\sum_{j=1}^m[\gcd (i,j)=d]$</p><p>$=\sum_{d}d\sum_{i=1}^{\lfloor\frac nd\rfloor}\sum_{j=1}^{\lfloor\frac md\rfloor}[\gcd (i,j)=1]$</p><p>$=\sum_{d}d\sum_{i=1}^{\lfloor\frac nd\rfloor}\sum_{j=1}^{\lfloor\frac md\rfloor}\sum_{k\mid i,k\mid j}\mu(k)$</p><p>$=\sum_d d\sum_k\mu(k)\sum_{k\mid i}^{\lfloor\frac nd\rfloor}\sum_{k\mid j}^{\lfloor\frac md\rfloor}$</p><p>$=\sum_{d}d\sum_k\mu(k)\lfloor\frac n{kd}\rfloor\lfloor\frac m{kd}\rfloor$</p><p>$=\sum_{T}\lfloor\frac nT\rfloor\lfloor\frac mT\rfloor\sum_{k\mid T}\frac Tk\mu(k)$</p><p>$=\sum_{T}\lfloor\frac nT\rfloor\lfloor\frac mT\rfloor\varphi(T)$</p><p>$\varphi(T)$可以使用线性筛预处理处理，我们就可以枚举$T$求上式了，时间复杂度$O(n)$。多组数据$n,m$询问上式，时间复杂度就变成了$O(Tn)$。事实上，$\lfloor\frac{n}{T}\rfloor$是不会轻易变化的，是过了连续的一段后才发生变化的，那么我们就可以计算出这一段的结束位置，对$\varphi$函数作前缀和，就可以直接分块了，这样的时间复杂度是$O(T\sqrt{n})$的。</p><h2 id="PollardRho大数素因子分解"><a href="#PollardRho大数素因子分解" class="headerlink" title="PollardRho大数素因子分解"></a>PollardRho大数素因子分解</h2><p>时间复杂度$O(N^{1/4})$，数据多的时候可考虑欧拉筛优化。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> PollardRho<span class="token punctuation">{</span>    <span class="token keyword">bool</span> <span class="token function">isPrime</span><span class="token punctuation">(</span>ll n<span class="token punctuation">,</span> <span class="token keyword">int</span> S <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//MillerRabin素数测试，S为测试次数，用前S个素数测一遍，S=12可保证unsigned long long范围内无错；n&lt;2请特判</span>    <span class="token punctuation">{</span>        ll d<span class="token punctuation">,</span> u<span class="token punctuation">,</span> t<span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token number">37</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>d <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">!</span><span class="token punctuation">(</span>d <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span>            d <span class="token operator">>>=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//未对0，1做特判！</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> S<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">%</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> n <span class="token operator">==</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>u <span class="token operator">=</span> d<span class="token punctuation">,</span> t <span class="token operator">=</span> <span class="token function">pow</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> u<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span> u <span class="token operator">!=</span> n <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> t <span class="token operator">!=</span> n <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> t <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">;</span> u <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>                t <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> t<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>t <span class="token operator">!=</span> n <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>u <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">void</span> <span class="token function">fac</span><span class="token punctuation">(</span>ll n<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token operator">&amp;</span>factor<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isPrime</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> factor<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>ll c <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">;</span> <span class="token operator">++</span>c<span class="token punctuation">)</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>ll i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> x <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> y<span class="token punctuation">,</span> p<span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>i <span class="token operator">==</span> k<span class="token punctuation">)</span>                    y <span class="token operator">=</span> x<span class="token punctuation">,</span> k <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">mul</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> x<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">+</span> c<span class="token punctuation">)</span> <span class="token operator">%</span> n<span class="token punctuation">,</span> p <span class="token operator">=</span> <span class="token function">gcd</span><span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>x <span class="token operator">-</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">,</span> p <span class="token operator">==</span> n<span class="token punctuation">)</span>                    <span class="token keyword">break</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span>                    <span class="token keyword">return</span> <span class="token function">fac</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> factor<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">fac</span><span class="token punctuation">(</span>n <span class="token operator">/</span> p<span class="token punctuation">,</span> factor<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="快速变换"><a href="#快速变换" class="headerlink" title="快速变换"></a>快速变换</h2><h3 id="蝴蝶变换（雷德变换）"><a href="#蝴蝶变换（雷德变换）" class="headerlink" title="蝴蝶变换（雷德变换）"></a>蝴蝶变换（雷德变换）</h3><p>保存FTT和FNTT时交换的对应位置（即保存的是置换）。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Rader <span class="token operator">:</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token function">Rader</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token function">log2</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">at</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">at</span><span class="token punctuation">(</span>i <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">,</span> i <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token function">at</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">>></span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="快速傅里叶变换"><a href="#快速傅里叶变换" class="headerlink" title="快速傅里叶变换"></a>快速傅里叶变换</h3><p><a href="https://vjudge.net/solution/16891011" target="_blank" rel="noopener">使用示例</a>，高精度乘法。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> FFT <span class="token operator">:</span> Rader<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>complex<span class="token operator">&lt;</span>lf<span class="token operator">>></span> w<span class="token punctuation">;</span>    <span class="token function">FFT</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Rader</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">w</span><span class="token punctuation">(</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">polar</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> PI <span class="token operator">/</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        w<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            w<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span><span class="token operator">=</span> w<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    vector<span class="token operator">&lt;</span>complex<span class="token operator">&lt;</span>lf<span class="token operator">>></span> <span class="token function">fft</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>complex<span class="token operator">&lt;</span>lf<span class="token operator">>></span> <span class="token operator">&amp;</span>a<span class="token punctuation">)</span> <span class="token keyword">const</span>    <span class="token punctuation">{</span>        vector<span class="token operator">&lt;</span>complex<span class="token operator">&lt;</span>lf<span class="token operator">>></span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            x<span class="token punctuation">[</span><span class="token function">at</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> j<span class="token punctuation">;</span> k <span class="token operator">&lt;</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> k <span class="token operator">+</span><span class="token operator">=</span> i <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    complex<span class="token operator">&lt;</span>lf<span class="token operator">></span> <span class="token operator">&amp;</span>l <span class="token operator">=</span> x<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>r <span class="token operator">=</span> x<span class="token punctuation">[</span>k <span class="token operator">+</span> i<span class="token punctuation">]</span><span class="token punctuation">,</span> t <span class="token operator">=</span> w<span class="token punctuation">[</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> j<span class="token punctuation">]</span> <span class="token operator">*</span> r<span class="token punctuation">;</span>                    r <span class="token operator">=</span> l <span class="token operator">-</span> t<span class="token punctuation">,</span> l <span class="token operator">+</span><span class="token operator">=</span> t<span class="token punctuation">;</span>                <span class="token punctuation">}</span>        <span class="token keyword">return</span> x<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token operator">&amp;</span>b<span class="token punctuation">)</span> <span class="token keyword">const</span>    <span class="token punctuation">{</span>        vector<span class="token operator">&lt;</span>complex<span class="token operator">&lt;</span>lf<span class="token operator">>></span> <span class="token function">xa</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">xb</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        xa <span class="token operator">=</span> <span class="token function">fft</span><span class="token punctuation">(</span>xa<span class="token punctuation">)</span><span class="token punctuation">,</span> xb <span class="token operator">=</span> <span class="token function">fft</span><span class="token punctuation">(</span>xb<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            xa<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span><span class="token operator">=</span> xb<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token function">ans</span><span class="token punctuation">(</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        xa <span class="token operator">=</span> <span class="token function">fft</span><span class="token punctuation">(</span>xa<span class="token punctuation">)</span><span class="token punctuation">,</span> ans<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> xa<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">real</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> xa<span class="token punctuation">[</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">real</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">0.5</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="快速数论变换"><a href="#快速数论变换" class="headerlink" title="快速数论变换"></a>快速数论变换</h3><p>原理和FFT相同，解决特殊情况下FFT的浮点误差，并且可以在同余系进行变换。</p><p>对于形如$m=2^nc+1$的费马素数，记其原根为g，则旋转因子为$g^{(m-1)/n}$，满足$g^{m-1}=1$且$2^n\mid m-1$。</p><p><a href="https://blog.csdn.net/hnust_xx/article/details/76572828" target="_blank" rel="noopener">常见素数的原根</a>。</p><p><a href="https://vjudge.net/solution/18274507" target="_blank" rel="noopener">使用示例</a></p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> FNTT <span class="token operator">:</span> Rader<span class="token punctuation">,</span> Mod<span class="token punctuation">{</span>    ll G<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> w<span class="token punctuation">;</span>    <span class="token function">FNTT</span><span class="token punctuation">(</span><span class="token keyword">int</span> N<span class="token punctuation">,</span> ll M<span class="token punctuation">,</span> ll G<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Rader</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Mod</span><span class="token punctuation">(</span>M<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">G</span><span class="token punctuation">(</span>G<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">w</span><span class="token punctuation">(</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">pow</span><span class="token punctuation">(</span>G<span class="token punctuation">,</span> <span class="token punctuation">(</span>M <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> w<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            w<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> w<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token function">fntt</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token operator">&amp;</span>a<span class="token punctuation">)</span> <span class="token keyword">const</span>    <span class="token punctuation">{</span>        vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token function">x</span><span class="token punctuation">(</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            x<span class="token punctuation">[</span><span class="token function">at</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> j<span class="token punctuation">;</span> k <span class="token operator">&lt;</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> k <span class="token operator">+</span><span class="token operator">=</span> i <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    ll t <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>w<span class="token punctuation">[</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> j<span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token punctuation">[</span>k <span class="token operator">+</span> i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span>k <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">-</span> t<span class="token punctuation">,</span> x<span class="token punctuation">[</span>k <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>                        x<span class="token punctuation">[</span>k <span class="token operator">+</span> i<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> M<span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> t<span class="token punctuation">,</span> x<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">>=</span> M<span class="token punctuation">)</span>                        x<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> M<span class="token punctuation">;</span>                <span class="token punctuation">}</span>        <span class="token keyword">return</span> x<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token function">ask</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> a<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> b<span class="token punctuation">)</span> <span class="token keyword">const</span>    <span class="token punctuation">{</span>        a <span class="token operator">=</span> <span class="token function">fntt</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token function">fntt</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a <span class="token operator">=</span> <span class="token function">fntt</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">reverse</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ll u <span class="token operator">=</span> <span class="token function">inv</span><span class="token punctuation">(</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> u<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> a<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="快速沃尔什变换"><a href="#快速沃尔什变换" class="headerlink" title="快速沃尔什变换"></a>快速沃尔什变换</h3><p>如果要在同余系中进行运算，则下面代码需要修改。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">fwt</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>ll <span class="token operator">&amp;</span>l<span class="token punctuation">,</span> ll <span class="token operator">&amp;</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> x<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">&lt;&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> j<span class="token punctuation">;</span> k <span class="token operator">&lt;</span> x<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> k <span class="token operator">+</span><span class="token operator">=</span> i <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token function">f</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> x<span class="token punctuation">[</span>k <span class="token operator">+</span> i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">fwt</span><span class="token punctuation">(</span>ll <span class="token operator">*</span>b<span class="token punctuation">,</span> ll <span class="token operator">*</span>e<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token function">f</span><span class="token punctuation">(</span>ll <span class="token operator">&amp;</span>l<span class="token punctuation">,</span> ll <span class="token operator">&amp;</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//再给一个递归二分的代码便于理解</span><span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">-</span> b <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    ll <span class="token operator">*</span>m <span class="token operator">=</span> b <span class="token operator">+</span> <span class="token punctuation">(</span>e <span class="token operator">-</span> b<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token function">fwt</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> m<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">fwt</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> e<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>m <span class="token operator">&lt;</span> e<span class="token punctuation">)</span>        <span class="token function">f</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span>b<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>m<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h4 id="AND"><a href="#AND" class="headerlink" title="AND"></a>AND</h4><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">tf</span><span class="token punctuation">(</span>ll <span class="token operator">&amp;</span>l<span class="token punctuation">,</span> ll <span class="token operator">&amp;</span>r<span class="token punctuation">)</span> <span class="token punctuation">{</span> l <span class="token operator">+</span><span class="token operator">=</span> r<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">utf</span><span class="token punctuation">(</span>ll <span class="token operator">&amp;</span>l<span class="token punctuation">,</span> ll <span class="token operator">&amp;</span>r<span class="token punctuation">)</span> <span class="token punctuation">{</span> l <span class="token operator">-</span><span class="token operator">=</span> r<span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre><h4 id="OR"><a href="#OR" class="headerlink" title="OR"></a>OR</h4><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">tf</span><span class="token punctuation">(</span>ll <span class="token operator">&amp;</span>l<span class="token punctuation">,</span> ll <span class="token operator">&amp;</span>r<span class="token punctuation">)</span> <span class="token punctuation">{</span> r <span class="token operator">+</span><span class="token operator">=</span> l<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">utf</span><span class="token punctuation">(</span>ll <span class="token operator">&amp;</span>l<span class="token punctuation">,</span> ll <span class="token operator">&amp;</span>r<span class="token punctuation">)</span> <span class="token punctuation">{</span> r <span class="token operator">-</span><span class="token operator">=</span> l<span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre><h4 id="XOR"><a href="#XOR" class="headerlink" title="XOR"></a>XOR</h4><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token function">tf</span><span class="token punctuation">(</span>ll <span class="token operator">&amp;</span>l<span class="token punctuation">,</span> ll <span class="token operator">&amp;</span>r<span class="token punctuation">)</span><span class="token punctuation">{</span>    ll tl <span class="token operator">=</span> l <span class="token operator">+</span> r<span class="token punctuation">,</span> tr <span class="token operator">=</span> l <span class="token operator">-</span> r<span class="token punctuation">;</span>    l <span class="token operator">=</span> tl<span class="token punctuation">,</span> r <span class="token operator">=</span> tr<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token function">utf</span><span class="token punctuation">(</span>ll <span class="token operator">&amp;</span>l<span class="token punctuation">,</span> ll <span class="token operator">&amp;</span>r<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">tf</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">,</span> l <span class="token operator">>>=</span> <span class="token number">1</span><span class="token punctuation">,</span> r <span class="token operator">>>=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre><h4 id="XNOR、NAND、NOR"><a href="#XNOR、NAND、NOR" class="headerlink" title="XNOR、NAND、NOR"></a>XNOR、NAND、NOR</h4><p>直接用异或运算、与运算、或运算的方法求出来，然后将互反的两位交换即可。</p><h2 id="Pell方程"><a href="#Pell方程" class="headerlink" title="Pell方程"></a>Pell方程</h2><p>形如$x^2-Dy^2=1$（D为任意正整数）的方程称为佩尔方程，必有最小正整数解$(x_0,y_0)$，用$x_n=x_0x_{n-1}+Dy_0y_{n-1},y_n=y_0x_{n-1}+x_0y_{n-1}$可递推方程的第n小整数解（可用矩阵快速幂求），同时还有</p><p>$2x_0x_n=x_{n-1}+x_{n+1},2x_0y_n=y_{n-1}+y_{n+1}$</p><h2 id="Bertrand猜想"><a href="#Bertrand猜想" class="headerlink" title="Bertrand猜想"></a>Bertrand猜想</h2><p>$\forall n&gt;3,\exist n&lt;p&lt;n\times 2$其中n为整数，p为质数。</p><h2 id="威尔逊定理"><a href="#威尔逊定理" class="headerlink" title="威尔逊定理"></a>威尔逊定理</h2><p>当且仅当p为素数时：$(p-1)!\equiv -1\pmod p$，</p><h2 id="Jacobi’s-Four-Square-Theorem"><a href="#Jacobi’s-Four-Square-Theorem" class="headerlink" title="Jacobi’s Four Square Theorem"></a>Jacobi’s Four Square Theorem</h2><p>设$a^2+b^2+c^2+d^2=n$的自然数解个数为$r4(n)$，$d(n)$为$n$的约数和，由Jacobi’s Four Square Theorem可知，若$n$是奇数，则$r4(n)=8d(n)$，否则$r4(n)=24d(k)$，$k$是$n$去除所有$2$后的结果。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> Template </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ICPC模板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>组合数学</title>
      <link href="/2019/02/03/2019-02-03-zu-he-shu-xue/"/>
      <url>/2019/02/03/2019-02-03-zu-he-shu-xue/</url>
      
        <content type="html"><![CDATA[<h2 id="组合数取模"><a href="#组合数取模" class="headerlink" title="组合数取模"></a>组合数取模</h2><p><a href="https://vjudge.net/solution/18275045" target="_blank" rel="noopener">使用示例</a></p><p>为方便，记$C(n,m)=C_n^m=\binom{n}{m}$。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Factorial <span class="token operator">:</span> Mod<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> fac<span class="token punctuation">,</span> ifac<span class="token punctuation">;</span>    <span class="token function">Factorial</span><span class="token punctuation">(</span><span class="token keyword">int</span> N<span class="token punctuation">,</span> ll M<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">fac</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ifac</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Mod</span><span class="token punctuation">(</span>M<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            fac<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>fac<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> ifac<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>M <span class="token operator">-</span> M <span class="token operator">/</span> i<span class="token punctuation">,</span> ifac<span class="token punctuation">[</span>M <span class="token operator">%</span> i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            ifac<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>ifac<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> ifac<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    ll <span class="token function">c</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token function">mul</span><span class="token punctuation">(</span>fac<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">,</span> ifac<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ifac<span class="token punctuation">[</span>n <span class="token operator">-</span> m<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    ll <span class="token function">lucas</span><span class="token punctuation">(</span>ll n<span class="token punctuation">,</span> ll m<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//卢卡斯定理求C(n,m)%M，适用于模数M小于N的情况，或者m较小的时候也可以暴力求</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>m<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> m <span class="token operator">||</span> n <span class="token operator">%</span> M <span class="token operator">&lt;</span> m <span class="token operator">%</span> M<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> M <span class="token operator">&amp;&amp;</span> m <span class="token operator">&lt;</span> M<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token function">c</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token function">lucas</span><span class="token punctuation">(</span>n <span class="token operator">/</span> M<span class="token punctuation">,</span> m <span class="token operator">/</span> M<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">lucas</span><span class="token punctuation">(</span>n <span class="token operator">%</span> M<span class="token punctuation">,</span> m <span class="token operator">%</span> M<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="组合数LCM"><a href="#组合数LCM" class="headerlink" title="组合数LCM"></a>组合数LCM</h2><p>$(n + 1)lcm(C(n,0),C(n,1),\ldots,C(n,k))=lcm(n+1,n,n−1,n−2,\ldots,n−k+1)$</p><p>区间lcm的维护：对于一个数，将其分解质因数，若有因子$p^k$，那么拆分出k个数 $p^1,p^2,\ldots,p^k$，权值都为p，那么区间$[l,r]$内所有数的lcm的答案=所有在该区间中出现过的数的权值之积，可持久化线段树维护之。</p><h2 id="Stirling数"><a href="#Stirling数" class="headerlink" title="Stirling数"></a>Stirling数</h2><h3 id="第一类斯特林数"><a href="#第一类斯特林数" class="headerlink" title="第一类斯特林数"></a>第一类斯特林数</h3><p>第一类斯特林数$S(p,k)$的一个的组合学解释是：将p个物体排成k个非空循环排列的方法数。</p><p>递推公式：$S(p,k)=(p−1)S(p−1,k)+S(p−1,k−1),1\leq k\leq p−1;S(p,0)=0,p\ge1;S(p,p)=1,p\ge0$</p><h3 id="第二类斯特林数"><a href="#第二类斯特林数" class="headerlink" title="第二类斯特林数"></a>第二类斯特林数</h3><p>第二类斯特林数$S(p,k)$的一个的组合学解释是：将p个物体划分成k个非空不可辨别的（可以理解为盒子没有编号）集合的方法数。</p><p>递推公式：$S(p,k)=kS(p−1,k)+S(p−1,k−1),1\leq k\leq p−1;S(p,0)=0,p\ge 1;S(p,p)=1,p\ge0$</p><p>卷积形式：$S(n,m)=\frac{1}{m!}\sum_{k=0}^m(-1)^kC(m,k)(m-k)^n=\sum_{k=0}^m\frac{(-1)^k}{k!}\frac{(m-k)^n}{(m-k)!}$</p><p>同时有转化：$x^k=\sum_{i=1}^ki!C(x,i)S(k,i)$</p><h3 id="斯特林近似公式"><a href="#斯特林近似公式" class="headerlink" title="斯特林近似公式"></a>斯特林近似公式</h3><p>$n!\approx\sqrt{2\pi n}(\frac{n}{e})^n$</p><h2 id="小球入盒模型通解"><a href="#小球入盒模型通解" class="headerlink" title="小球入盒模型通解"></a>小球入盒模型通解</h2><table><thead><tr><th>k个球</th><th>m个盒子</th><th>空盒子</th><th>方案数</th></tr></thead><tbody><tr><td>各不相同</td><td>各不相同</td><td>允许</td><td>$m^k$</td></tr><tr><td>各不相同</td><td>各不相同</td><td>无</td><td>$m!Stirling2(k,m)$</td></tr><tr><td>各不相同</td><td>完全相同</td><td>允许</td><td>$\sum_{i=1}^mStirling2(k,i)$</td></tr><tr><td>各不相同</td><td>完全相同</td><td>无</td><td>$Stirling2(k,m)$</td></tr><tr><td>完全相同</td><td>各不相同</td><td>允许</td><td>$C(m+k−1,k)$</td></tr><tr><td>完全相同</td><td>各不相同</td><td>无</td><td>$C(k−1,m−1)$</td></tr><tr><td>完全相同</td><td>完全相同</td><td>允许</td><td>$\frac{1}{(1−x)(1−x^2)…(1−x^m)}的x^k项的系数$</td></tr><tr><td>完全相同</td><td>完全相同</td><td>无</td><td>$\frac{x^m}{(1−x)(1−x^2)…(1−x^m)}的x^k项的系数$</td></tr></tbody></table><h2 id="置换"><a href="#置换" class="headerlink" title="置换"></a>置换</h2><p><a href="https://vjudge.net/solution/18445975" target="_blank" rel="noopener">使用示例</a></p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Permutation <span class="token operator">:</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token function">Permutation</span><span class="token punctuation">(</span><span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">friend</span> Permutation <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">const</span> Permutation <span class="token operator">&amp;</span>f<span class="token punctuation">,</span> <span class="token keyword">const</span> Permutation <span class="token operator">&amp;</span>g<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Permutation <span class="token function">ans</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> f<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            ans<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> g<span class="token punctuation">[</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Permutation <span class="token function">inv</span><span class="token punctuation">(</span><span class="token keyword">const</span> Permutation <span class="token operator">&amp;</span>f<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Permutation <span class="token function">ans</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> f<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            ans<span class="token punctuation">[</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">cycle</span><span class="token punctuation">(</span><span class="token keyword">const</span> Permutation <span class="token operator">&amp;</span>f<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">vis</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> ans<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> f<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>vis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                ans<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> <span class="token operator">!</span>vis<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">=</span> f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>                    vis<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> ans<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="生成字典序"><a href="#生成字典序" class="headerlink" title="生成字典序"></a>生成字典序</h2><h3 id="下一排列"><a href="#下一排列" class="headerlink" title="下一排列"></a>下一排列</h3><p>对给定的排列$a_1a_2\ldots a_n$，找到$a_j$使得$a_j&lt;a_{j+1},a_{j+1}&gt;a_{j+2}&gt;\ldots&gt;a_n$即这列数中最后一个相邻递增数对，然后把$a_{j+1},a_{j+2},\ldots,a_n$中大于$a_j$的最小数放到位置j，然后$a_j\ldots a_n$中剩余的数从小到大排序放到$[j+1,n]$中。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">bool</span> <span class="token function">nextPermutation</span><span class="token punctuation">(</span>ll <span class="token operator">*</span>b<span class="token punctuation">,</span> ll <span class="token operator">*</span>e<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//标准库有这个函数next_permutation</span><span class="token punctuation">{</span>    ll <span class="token operator">*</span>i <span class="token operator">=</span> e <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">*</span>j <span class="token operator">=</span> e <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>j <span class="token operator">>=</span> b <span class="token operator">&amp;&amp;</span> <span class="token operator">*</span>j <span class="token operator">>=</span> <span class="token operator">*</span><span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token operator">--</span>j<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;</span> b<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">*</span>i <span class="token operator">&lt;=</span> <span class="token operator">*</span>j<span class="token punctuation">)</span>        <span class="token operator">--</span>i<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">swap</span><span class="token punctuation">(</span><span class="token operator">*</span>i<span class="token punctuation">,</span> <span class="token operator">*</span>j<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">reverse</span><span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="二项式反演"><a href="#二项式反演" class="headerlink" title="二项式反演"></a>二项式反演</h2><p>$f(n)=\sum_{k=0}^nC(n,k)g(k),g(n)=\sum_{k=0}^n(−1)^{n−k}C(n,k)f(k)$</p><h2 id="第k小期望"><a href="#第k小期望" class="headerlink" title="第k小期望"></a>第k小期望</h2><p>$f(n,k)$表示有n个变量，和为1，第k小的期望。</p><p>$f(n,k)=\frac{1}{n^2}+(1-\frac{1}{n})f(n-1,k-1),f(n,0)=0$</p><h2 id="错排数"><a href="#错排数" class="headerlink" title="错排数"></a>错排数</h2><p>考虑一个有n个元素的排列，若一个排列中所有的元素都不在自己原来的位置上，那么这样的排列就称为原排列的一个错排。</p><p>n个元素的错排数$D_n$满足递推公式：$D_1=0,D_2=1,D_n=(n−1)(D_{n−2}+D_{n−1})$</p><p>通项：$D(n)=n![\frac{(-1)^2}{2!}+\ldots+\frac{(-1)^{n-1} }{(n-1)!}+\frac{(-1)^n}{n!}]=\lfloor\frac{n!}{e}+\frac{1}{2}\rfloor$</p><h2 id="Bonuli数"><a href="#Bonuli数" class="headerlink" title="Bonuli数"></a>Bonuli数</h2><p><a href="https://vjudge.net/solution/15566962" target="_blank" rel="noopener">使用示例</a></p><p>$B_n = -\frac{1}{C(n+1,n)}(C(n+1,0)B_0+C(n+1,1)B_1+\ldots+C(n+1,n-1)B_{n-1})=-\frac{1}{n+1}(C(n+1,0)B_0+C(n+1,1)B_1+\ldots+C(n+1,n-1)B_{n-1})$</p><p>可用于计算任意<strong>正整数</strong>次数的幂和：$\sum_{i=1}^ni^k=\frac{1}{k+1}\sum_{j=0}^kC(k+1,j)B_jn^{k+1-j}$</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Bonuli <span class="token operator">:</span> Factorial<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> b<span class="token punctuation">;</span>    <span class="token function">Bonuli</span><span class="token punctuation">(</span><span class="token keyword">int</span> N<span class="token punctuation">,</span> ll M<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">Factorial</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> M<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">b</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>                b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token function">mul</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">c</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">,</span> M<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> M<span class="token punctuation">;</span>            b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>M <span class="token operator">-</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token function">mul</span><span class="token punctuation">(</span>fac<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> ifac<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> M<span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> M<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> M<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    ll <span class="token function">ask</span><span class="token punctuation">(</span>ll n<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//return $\sum_{i=1}^ni^k\mod M$</span>    <span class="token punctuation">{</span>        ll r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> w <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> u <span class="token operator">=</span> <span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> M<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            r <span class="token operator">=</span> <span class="token punctuation">(</span>r <span class="token operator">+</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token function">mul</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span>k <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">c</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> M<span class="token punctuation">)</span><span class="token punctuation">,</span> w <span class="token operator">=</span> <span class="token function">mul</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> u<span class="token punctuation">,</span> M<span class="token punctuation">)</span><span class="token punctuation">,</span> M<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span> M<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">mul</span><span class="token punctuation">(</span><span class="token function">mul</span><span class="token punctuation">(</span>fac<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> ifac<span class="token punctuation">[</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> M<span class="token punctuation">)</span><span class="token punctuation">,</span> r<span class="token punctuation">,</span> M<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="Catalan数"><a href="#Catalan数" class="headerlink" title="Catalan数"></a>Catalan数</h2><p>$h_1=1,h_n=\frac{4n−2}{n+1}h_{n−1}=\frac{C(2n,n)}{n+1}=C(2n,n)−C(2n,n−1)$。</p><p>在一个格点阵列中，从$(0,0)$点走到$(n,m)$点且不经过对角线$x=y$的方法数：$C(n+m−1,m)−C(n+m−1,m−1),x&gt;y;C(n+m,m)−C(n+m,m−1),x\ge y$。</p><p>常见的Catalan数：括号序的个数、凸多边形三角剖分的方案数等。</p><h2 id="Bell数"><a href="#Bell数" class="headerlink" title="Bell数"></a>Bell数</h2><p>把n个带标号的物品划分为若干不相交集合的方案数称为贝尔数，其递推公式：$B_n=\sum_{i=0}^{N-1}C_{n-1}^iB_i$</p><p>前几项贝尔数：</p><pre><code>1,2,5,15,52,203,877,4140,21147,115975,678570,4213597,27644437,190899322,1382958545,...</code></pre><p>下为$O(P^2\log P)$求$B_n$对P取模。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Bell<span class="token punctuation">{</span>    <span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">int</span> P<span class="token operator">=</span><span class="token number">999999598</span><span class="token punctuation">,</span>N<span class="token operator">=</span><span class="token number">7284</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>f<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>s<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span>j<span class="token punctuation">,</span>x<span class="token punctuation">;</span>    <span class="token function">Bell</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>        a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">13</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">5281</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">7283</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//P的质因数分解</span>        f<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>f<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>x<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">,</span>x<span class="token operator">^</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token keyword">for</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>s<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>s<span class="token punctuation">[</span>x<span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">&lt;=</span>i<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>                s<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>x<span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span><span class="token operator">+</span>s<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">%</span>P<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">int</span> <span class="token function">cal</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">,</span>ll n<span class="token punctuation">)</span>        <span class="token punctuation">{</span>        <span class="token keyword">int</span> i<span class="token punctuation">,</span>j<span class="token punctuation">,</span>k<span class="token punctuation">,</span>m<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>b<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>c<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">,</span>d<span class="token punctuation">[</span><span class="token number">70</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span>x<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">%</span>x<span class="token punctuation">;</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>d<span class="token punctuation">[</span>m<span class="token operator">++</span><span class="token punctuation">]</span><span class="token operator">=</span>n<span class="token operator">%</span>x<span class="token punctuation">,</span>n<span class="token operator">/</span><span class="token operator">=</span>x<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">&lt;=</span>d<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">for</span><span class="token punctuation">(</span>k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> k<span class="token operator">&lt;</span>x<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>c<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span>b<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">*</span>i<span class="token operator">+</span>b<span class="token punctuation">[</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">%</span>x<span class="token punctuation">;</span>                c<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span>c<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span>c<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">%</span>x<span class="token punctuation">;</span>                <span class="token keyword">for</span><span class="token punctuation">(</span>k<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> k<span class="token operator">&lt;=</span>x<span class="token punctuation">;</span> k<span class="token operator">++</span><span class="token punctuation">)</span>b<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span>c<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token keyword">return</span> c<span class="token punctuation">[</span>d<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    ll <span class="token function">ask</span><span class="token punctuation">(</span>ll n<span class="token punctuation">)</span>        <span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">&lt;</span>N<span class="token punctuation">)</span><span class="token keyword">return</span> f<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>        ll t<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>t<span class="token operator">=</span><span class="token punctuation">(</span>t<span class="token operator">+</span><span class="token punctuation">(</span>P<span class="token operator">/</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">pow</span><span class="token punctuation">(</span>P<span class="token operator">/</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">%</span>P<span class="token operator">*</span><span class="token function">cal</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token operator">%</span>P<span class="token punctuation">)</span><span class="token operator">%</span>P<span class="token punctuation">;</span>        <span class="token keyword">return</span> t<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="等价类容斥"><a href="#等价类容斥" class="headerlink" title="等价类容斥"></a>等价类容斥</h3><p>考虑容斥，Bell(p)枚举所有等价情况。对于一种情况，强制了一个等价类里面的数都要相同，其它的可以相同也可以不同。</p><p>容斥系数为：$(−1)^{p−等价类个数}(每个等价类大小−1)!之积$。</p><h2 id="Grey码"><a href="#Grey码" class="headerlink" title="Grey码"></a>Grey码</h2><p>格雷序列第i个是<code>i^(i&gt;&gt;1)</code>。长为n的01序列共$2^n$个，下标从$0\ldots 2^n-1$。</p><h2 id="扩展Cayley公式"><a href="#扩展Cayley公式" class="headerlink" title="扩展Cayley公式"></a>扩展Cayley公式</h2><p>对于n个点，m个连通块的图，假设每个连通块有a[i]个点，那么用s−1条边把它连通的方案数为$n^{s−2}a[1]a[2]\ldots a[m]$。</p><h2 id="超立方体"><a href="#超立方体" class="headerlink" title="超立方体"></a>超立方体</h2><p>n维超立方体有$2^{n−i}C(n,i)$个i维元素。</p><h2 id="枚举位集I的非空子集J"><a href="#枚举位集I的非空子集J" class="headerlink" title="枚举位集I的非空子集J"></a>枚举位集I的非空子集J</h2><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">for</span><span class="token punctuation">(</span>J<span class="token operator">=</span>I<span class="token punctuation">;</span> J<span class="token punctuation">;</span> J<span class="token operator">=</span>I<span class="token operator">&amp;</span>J−<span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> Template </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ICPC模板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>线性代数</title>
      <link href="/2019/02/03/2019-02-03-xian-xing-dai-shu/"/>
      <url>/2019/02/03/2019-02-03-xian-xing-dai-shu/</url>
      
        <content type="html"><![CDATA[<h2 id="矩阵"><a href="#矩阵" class="headerlink" title="矩阵"></a>矩阵</h2><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Matrix<span class="token punctuation">{</span>    <span class="token keyword">static</span> <span class="token keyword">int</span> n<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//方阵代替矩阵</span>    ll a<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token function">Matrix</span><span class="token punctuation">(</span>ll k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token function">fill</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> k<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Matrix <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token keyword">const</span> Matrix <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> Matrix <span class="token operator">&amp;</span>b<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Matrix <span class="token function">r</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> r<span class="token punctuation">.</span>n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> r<span class="token punctuation">.</span>n<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> r<span class="token punctuation">.</span>n<span class="token punctuation">;</span> <span class="token operator">++</span>k<span class="token punctuation">)</span>                    r<span class="token punctuation">.</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> M<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> M<span class="token punctuation">.</span><span class="token function">mul</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> b<span class="token punctuation">.</span>a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> r<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Matrix <span class="token function">pow</span><span class="token punctuation">(</span>Matrix a<span class="token punctuation">,</span> ll b<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Matrix <span class="token function">r</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> b<span class="token punctuation">;</span> b <span class="token operator">>>=</span> <span class="token number">1</span><span class="token punctuation">,</span> a <span class="token operator">=</span> a <span class="token operator">*</span> a<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span>                r <span class="token operator">=</span> r <span class="token operator">*</span> a<span class="token punctuation">;</span>        <span class="token keyword">return</span> r<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> ll <span class="token function">det</span><span class="token punctuation">(</span>Matrix a<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//矩阵a的n阶行列式</span>    <span class="token punctuation">{</span>        ll ans <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> a<span class="token punctuation">.</span>n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> a<span class="token punctuation">.</span>n<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>                <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">fabs</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">></span> EPS<span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    ll t <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">/</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> i<span class="token punctuation">;</span> k <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>k<span class="token punctuation">)</span>                        a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> t <span class="token operator">*</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">fabs</span><span class="token punctuation">(</span>ans <span class="token operator">*</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> EPS<span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//int Matrix::n=N;</span></code></pre><h3 id="高斯消元"><a href="#高斯消元" class="headerlink" title="高斯消元"></a>高斯消元</h3><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> GaussElimination <span class="token operator">:</span> Matrix<span class="token punctuation">{</span>    <span class="token keyword">void</span> <span class="token function">ask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//a为增广矩阵，要求n*n的系数矩阵可逆，运行结束后a[i][n]为第i个未知数的值</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> r<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> r <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">fabs</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">fabs</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                    r <span class="token operator">=</span> j<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token operator">!=</span> i<span class="token punctuation">)</span>                <span class="token function">swap_ranges</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>r<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>r<span class="token punctuation">]</span> <span class="token operator">+</span> n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> n<span class="token punctuation">;</span> j <span class="token operator">>=</span> i<span class="token punctuation">;</span> <span class="token operator">--</span>j<span class="token punctuation">)</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>k<span class="token punctuation">)</span>                    a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> a<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">/</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">~</span>i<span class="token punctuation">;</span> <span class="token operator">--</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>                a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">*</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">/</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="线性基"><a href="#线性基" class="headerlink" title="线性基"></a>线性基</h2><h3 id="向量线性基"><a href="#向量线性基" class="headerlink" title="向量线性基"></a>向量线性基</h3><p>add返回要插入的向量z是否与已插入的线性无关。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Base<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">>></span> v<span class="token punctuation">;</span>    <span class="token function">Base</span><span class="token punctuation">(</span><span class="token keyword">int</span> N<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">v</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">></span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//R^N的子空间</span>    <span class="token keyword">bool</span> <span class="token function">add</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">></span> x<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> x<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">fabs</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">></span> EPS<span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">fabs</span><span class="token punctuation">(</span>v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> EPS<span class="token punctuation">)</span>                    <span class="token keyword">return</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">;</span>                <span class="token keyword">double</span> t <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">/</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> x<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>                    x<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">=</span> t <span class="token operator">*</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h3 id="异或线性基"><a href="#异或线性基" class="headerlink" title="异或线性基"></a>异或线性基</h3><p>若要查询第k小子集异或和，则把k写成二进制，对于是1的第i位，把从低位到高位第i个不为0的数异或进答案。若要判断是否有非空子集的异或和为0，如果不存在自由基，那么说明只有空集的异或值为0，需要高斯消元来判断。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> BaseXOR<span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> a<span class="token punctuation">;</span>    <span class="token function">BaseXOR</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    ll <span class="token function">ask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//查询最大子集异或和</span>    <span class="token punctuation">{</span>        ll t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">~</span>i<span class="token punctuation">;</span> <span class="token operator">--</span>i<span class="token punctuation">)</span>            t <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> t <span class="token operator">^</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> t<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">bool</span> <span class="token function">add</span><span class="token punctuation">(</span>ll x<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">~</span>i<span class="token punctuation">;</span> <span class="token operator">--</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">>></span> i <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token punctuation">{</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                    x <span class="token operator">^</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">else</span>                    <span class="token keyword">return</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">bool</span> <span class="token function">check</span><span class="token punctuation">(</span>ll x<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//判断一个数是否能够被异或出，0根据需要特判</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token operator">~</span>i<span class="token punctuation">;</span> <span class="token operator">--</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">>></span> i <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">^</span><span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">!</span>x<span class="token punctuation">)</span>                    <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> Template </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ICPC模板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>离散数学</title>
      <link href="/2019/02/03/2019-02-03-chi-san-shu-xue/"/>
      <url>/2019/02/03/2019-02-03-chi-san-shu-xue/</url>
      
        <content type="html"><![CDATA[<h2 id="归并排序求逆序对"><a href="#归并排序求逆序对" class="headerlink" title="归并排序求逆序对"></a>归并排序求逆序对</h2><pre class=" language-cpp"><code class="language-cpp">ll <span class="token function">merge_sort</span><span class="token punctuation">(</span>ll <span class="token operator">*</span>b<span class="token punctuation">,</span> ll <span class="token operator">*</span>e<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//int存答案可能会爆</span><span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">-</span> b <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    ll i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">*</span>m <span class="token operator">=</span> b <span class="token operator">+</span> <span class="token punctuation">(</span>e <span class="token operator">-</span> b<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> ans <span class="token operator">=</span> <span class="token function">merge_sort</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> m<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">merge_sort</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>ll<span class="token operator">></span> <span class="token function">l</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> m<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">r</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> l<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span> r<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>r<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> l<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token operator">*</span><span class="token punctuation">(</span>b<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">=</span> r<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ans <span class="token operator">+</span><span class="token operator">=</span> l<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> i<span class="token punctuation">;</span>        <span class="token keyword">else</span>            <span class="token operator">*</span><span class="token punctuation">(</span>b<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">=</span> l<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> l<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token operator">*</span><span class="token punctuation">(</span>b<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">=</span> l<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;</span> r<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token operator">*</span><span class="token punctuation">(</span>b<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">=</span> r<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="约瑟夫问题"><a href="#约瑟夫问题" class="headerlink" title="约瑟夫问题"></a>约瑟夫问题</h2><pre class=" language-cpp"><code class="language-cpp">ll <span class="token function">josephus</span><span class="token punctuation">(</span>ll n<span class="token punctuation">,</span> ll k<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//编号0~n-1，每k个出列，时间复杂度O(min(n,k))</span><span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> k <span class="token operator">%</span> n<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> k<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">Josephus</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> k<span class="token punctuation">)</span> <span class="token operator">+</span> k<span class="token punctuation">)</span> <span class="token operator">%</span> n<span class="token punctuation">;</span>    ll ret <span class="token operator">=</span> <span class="token function">Josephus</span><span class="token punctuation">(</span>n <span class="token operator">-</span> n <span class="token operator">/</span> k<span class="token punctuation">,</span> k<span class="token punctuation">)</span> <span class="token operator">-</span> n <span class="token operator">%</span> k<span class="token punctuation">;</span>    <span class="token keyword">return</span> ret <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> ret <span class="token operator">+</span> n <span class="token operator">:</span> ret <span class="token operator">+</span> ret <span class="token operator">/</span> <span class="token punctuation">(</span>k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="蔡勒公式"><a href="#蔡勒公式" class="headerlink" title="蔡勒公式"></a>蔡勒公式</h2><p>$w=(\lfloor\frac{c}{4}\rfloor-2c+y+\lfloor\frac{y}{4}\rfloor+\lfloor\frac{13(m+1)}{5}\rfloor+d-1)\mod7$</p><p>w：$0,1,\ldots,6$对应周日，周一，$\ldots$，周六</p><p>c：世纪减1（即年份前两位数）。</p><p>y：年份后两位数。</p><p>m：月（$3\leq m\leq14$，即在蔡勒公式中，1、2月要看作上一年的13、14 月来计算）。</p><p>d：日。</p><h2 id="曼哈顿距离的变换"><a href="#曼哈顿距离的变换" class="headerlink" title="曼哈顿距离的变换"></a>曼哈顿距离的变换</h2><p>$\mid x_1−x_2\mid +\mid y_1−y_2\mid=\max (\mid (x_1 + y_1)−(x_2 + y_2)\mid ,\mid (x_1 −y_1)−(x_2 −y_2)\mid )$</p><h2 id="皮克定理"><a href="#皮克定理" class="headerlink" title="皮克定理"></a>皮克定理</h2><p>顶点坐标均是整点（或说正方形格点）的简单多边形中，面积S和内部格点数目n、边上格点数目m的满足关系$S=n+\frac{m}{2}-1$。</p><h2 id="矩形面积并、矩形面积交、矩形周长并（线段树、扫描线总结）"><a href="#矩形面积并、矩形面积交、矩形周长并（线段树、扫描线总结）" class="headerlink" title="矩形面积并、矩形面积交、矩形周长并（线段树、扫描线总结）"></a>矩形面积并、矩形面积交、矩形周长并（线段树、扫描线总结）</h2><p>详见<a href="https://wu-kan.github.io/posts/acm/矩形面积并-矩形面积交-矩形周长并-线段树-扫描线总结" target="_blank" rel="noopener">这篇博文</a>。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> Template </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ICPC模板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数学分析</title>
      <link href="/2019/02/03/2019-02-03-shu-xue-fen-xi/"/>
      <url>/2019/02/03/2019-02-03-shu-xue-fen-xi/</url>
      
        <content type="html"><![CDATA[<h2 id="增长趋势"><a href="#增长趋势" class="headerlink" title="增长趋势"></a>增长趋势</h2><p>$n\to+\infty,\forall p,q&gt;0,a&gt;1,{(\ln n)}^q\ll n^p\ll a^n\ll n!\ll n^n$</p><h2 id="积分表"><a href="#积分表" class="headerlink" title="积分表"></a>积分表</h2><p>反读可得导数表，此处略。</p><p>$\int k,\mathrm{d}x=kx+C$</p><p>$\int x^a,dx=\frac{x^{a+1}}{a+1}+C$</p><p>$\int\frac{1}{x},dx=\ln\mid x\mid +C$</p><p>$\int e^x,dx=e^x + C$</p><p>$\int a^x,dx=\frac{a^x}{\ln a}+C$</p><p>$\int\cos x,dx=\sin x+C$</p><p>$\int\sin x,dx=-\cos x+C$</p><p>$\int\frac{1}{cos^2x},dx=\int\sec^2 x,dx=\tan x+C$</p><p>$\int\frac{1}{sin^2x},dx=\int\csc^2 x,dx=-\cot x+C$</p><p>$\int\frac{1}{\sqrt{1-x^2}},dx=\arcsin x+C=-\arccos x+C$</p><p>$\int\frac{1}{1+x^2},dx=\arctan x+C=-arccot,x+C$</p><p>$\int\sec x\tan x,dx=\sec x+C$</p><p>$\int\csc x\cot x,dx=-\csc x+C$</p><p>$\int\tan x,dx=-\ln\mid \cos x\mid +C$</p><p>$\int\cot x,dx=\ln\mid \sin x\mid +C$</p><p>$\int\sec x,dx=\ln\mid \sec x+\tan x\mid +C$</p><p>$\int\csc x,dx=\ln\mid \csc x-\cot x\mid +C$</p><p>$\int sh,x,dx=ch,x+C$</p><p>$\int ch,x,dx=sh,x+C$</p><p>$\int\frac{1}{x^2+a^2},dx=\frac{1}{a}\arctan\frac{x}{a}+C$</p><p>$\int\frac{1}{x^2-a^2},dx=\frac{1}{2a}\ln\mid \frac{x-a}{x+a}\mid +C$</p><p>$\int\frac{1}{\sqrt{a^2-x^2}},dx=\arcsin\frac{x}{a}+C$</p><p>$\int\frac{1}{\sqrt{x^2-a^2}},dx=\ln\mid x+\sqrt{x^2-a^2}\mid +C$</p><p>$\int\frac{1}{\sqrt{x^2+a^2}},dx=\ln\mid x+\sqrt{x^2+a^2}\mid +C$</p><h2 id="积分求几何量"><a href="#积分求几何量" class="headerlink" title="积分求几何量"></a>积分求几何量</h2><h3 id="弧长"><a href="#弧长" class="headerlink" title="弧长"></a>弧长</h3><p>若简单闭曲线</p><p>$\begin{cases}x=x(t),\ y=y(t),\end{cases}t\in[\alpha,\beta]$</p><p>端点处重合（$x(\alpha)=x(\beta),y(\alpha)=y(\beta)$）且其他地方不自交，$x(t),y(t)$连续且满足</p><p>$[x’(t)]^2+[y’(t)]^2\ne0,\forall t\in[\alpha,\beta]$</p><p>此时称曲线光滑，其长度</p><p>$s=\int_\alpha^\beta\sqrt{[x’(t)]^2+[y’(t)]^2},dt$</p><p>此式可对称推广到高维空间曲线。<br>极坐标下，</p><p>$r=r(\theta),\theta\in[\alpha,\beta]$</p><p>的长度为</p><p>$s=\int_\alpha^\beta\sqrt{[r(\theta)]^2+[r’(\theta)]^2},d\theta$</p><h3 id="面积"><a href="#面积" class="headerlink" title="面积"></a>面积</h3><p>若简单闭曲线</p><p>$\begin{cases}x=x(t),\ y=y(t),\end{cases}t\in[\alpha,\beta]$</p><p>端点处连续（$x(\alpha)=x(\beta),y(\alpha)=y(\beta)$）且其他地方不自交，$x(t),y(t)$都逐段有连续微商，则此闭合曲线围起来的有界区域面积</p><p>$S=-\int_\alpha^\beta x’(t)y(t),dt=-\int_\alpha^\beta y(t),dx(t)=-\oint_\Gamma y,dx=\oint_\Gamma x,dy$</p><p>等式右边称为曲线$\Gamma$上的积分，其计算方法是带入参数方程到定积分计算式中，积分上下限为始点与终点对应的参数值。下限并不总是小于上限，参数从下限到上限变化时对应曲线的正向（沿正向观察时，曲线所围的区域永远在左侧）。<br>极坐标下，连续非负曲线$r=r(\theta)$与向径$\theta=\alpha,\theta=\beta$，其中</p><p>$0\leq\beta-\alpha\leq2\pi$所围成的平面图形面积$S=\frac{1}{2}\int_\alpha^\beta r^2(\theta),d\theta$</p><h3 id="体积"><a href="#体积" class="headerlink" title="体积"></a>体积</h3><p>记立体过x点且垂直于x轴的截面面积为$S(x)$，则其体积$V=\int_a^bS(x),dx$连续曲线$y=f(x)\ge 0,x\in[a,b]$绕x轴旋转一周产生的旋转体体积$V=\pi\int_a^by^2,dx$</p><h3 id="旋转体侧面积"><a href="#旋转体侧面积" class="headerlink" title="旋转体侧面积"></a>旋转体侧面积</h3><p>若曲线由参数方程</p><p>$\begin{cases}x=x(t),\ y=y(t),\end{cases}t\in[\alpha,\beta]$</p><p>给出，则其绕x轴旋转体的侧面积</p><p>$s=2\pi\int_\alpha^\beta y(t)\sqrt{[x’(t)]^2+[y’(t)]^2},dt$</p><h3 id="方向导数"><a href="#方向导数" class="headerlink" title="方向导数"></a>方向导数</h3><p>设三元函数$u=f(x,y,z)$在点$P_0(x_0,y_0,z_0)$的某邻域内有定义，任意给定始于点$P_0$的射线$l$，$P(x,y,z)$为l上且含于定义域内的点。若极限</p><p>$\lim_{r(p,p_0)\to0^+}\frac{f(P)-f(P_0)}{r(P,P_0)}=\lim_{r(p,p_0)\to0^+}\frac{\Delta_lf(P_0)}{r(P,P_0)}$</p><p>存在，则称该极限值为函数$f$在点$P_0$沿方向$l$的方向导数，记为<br>$\frac{\partial f}{\partial l}\mid _{P_0}$<br>或<br>$\frac{\partial f(P_0)}{\partial l}$，$\frac{\Delta_lf(P_0)}{r(P,P_0)}$称为函数在$P_0$点沿$l$方向的增量。</p><p>特别地，$\frac{\partial f(P_0)}{\partial x}$就是函数在$P_0$点沿$x$轴正向的方向导数，$y,z$轴上的方向导数同理。若函数在$P_0$点可微，则其在$P_0$沿任何方向$l$的方向导数都存在，则有以下公式</p><p>$\frac{\partial f(P_0)}{\partial l}=(\frac{\partial f}{\partial x},\frac{\partial f}{\partial y},\frac{\partial f}{\partial z})\mid _{P_0}\cdot\vec{l_0}$</p><p>其中$\vec{l_0}=(\cos\alpha,\cos\beta,cos\gamma)=\frac{1}{\rho}(\Delta x,\Delta y,\Delta z)$为$l$的方向余弦。</p><h3 id="曲率"><a href="#曲率" class="headerlink" title="曲率"></a>曲率</h3><p>若曲线由参数方程</p><p>$\begin{cases}x=x(t),\ y=y(t),\end{cases}t\in[\alpha,\beta]$</p><p>给出且有二阶微商，则其在一点的曲率</p><p>$K=\frac{\mid y’’x’-y’x’’\mid }{[x’^2+y’^2]^{\frac{3}{2}}}$</p><p>若$y=f(x)$，则</p><p>$K=\frac{\mid y’’\mid }{(1+y’^2)^\frac{3}{2}}$</p><p>同时记$\frac{1}{K}$为曲率半径。</p><h3 id="空间曲线的切线与法平面"><a href="#空间曲线的切线与法平面" class="headerlink" title="空间曲线的切线与法平面"></a>空间曲线的切线与法平面</h3><p>若已知曲线上一点$P(x_0,y_0,z_0)$处的切向量为$\tau(x_0,y_0,z_0)=(A,B,C)$则曲线在该点的切线方程为</p><p>$\frac{x-x_0}A=\frac{y-y_0}B=\frac{z-z_0}C$</p><p>法平面方程为</p><p>$A(x-x_0)+B(y-y_0)+C(z-z_0)=0$</p><p>当曲线由参数方程</p><p>$\begin{cases}x=x(t),\ y=y(t),\ z=z(t),\end{cases}t\in[\alpha,\beta]$</p><p>给出时，曲线在P点的切向量为</p><p>$\tau=\pm(x’(t_0),y’(t_0),z’(t_0))$</p><p>更一般地，若曲线用两曲面的交线给出</p><p>$\begin{cases}F(x,y,z)=0,\ G(x,y,z)=0,\end{cases}$</p><p>且在P点的某邻域能确定函数组$y=y(x),z=z(x)$满足$y_0=y(x_0),z_0=z(x_0)$，且$y’(x),z’(x)$存在，则曲线在P点的切向量</p><p>$\tau=\pm(\frac{\partial(F,G)}{\partial(y,z)},\frac{\partial(F,G)}{\partial(z,x)},\frac{\partial(F,G)}{\partial(x,y)})$</p><h3 id="空间曲面的切平面与法线"><a href="#空间曲面的切平面与法线" class="headerlink" title="空间曲面的切平面与法线"></a>空间曲面的切平面与法线</h3><p>若已知曲面上一点$P(x_0,y_0,z_0)$处的切平面的法向量为$\vec n=(A’,B’,C’)$则曲线在该点的法线方程为</p><p>$\frac{x-x_0}{A’}=\frac{y-y_0}{B’}=\frac{z-z_0}{C’}$</p><p>切平面方程为</p><p>$A’(x-x_0)+B’(y-y_0)+C’(z-z_0)=0$</p><p>当曲面方程为$\pi:F(x,y,z)=0$在曲面上任取一条过P的曲线，设其方程为</p><p>$\begin{cases}x=x(t),\ y=y(t),\ z=z(t),\end{cases}t\in[\alpha,\beta]$</p><p>此时有$F(x(t),y(t),z(t))=0$令$t=t_0$两边对t求导，并写成向量的内积式，得</p><p>$(F_x,F_y,F_z)_P\cdot(x’(t_0),y’(t_0),z’(t_0))=0$</p><p>则曲线在P点的法向量为$\vec{n}=\pm(F_x,F_y,F_z)_P$</p><p>若曲线由参数方程给出</p><p>$\begin{cases}x=x(u,v),\ y=y(u,v),\ z=z(u,v),\end{cases}$</p><p>则曲线在P点的法向量</p><p>$\vec{n}=\pm(\frac{\partial(y,z)}{\partial(u,v)},\frac{\partial(z,x)}{\partial(u,v)},\frac{\partial(x,y)}{\partial(u,v)})$</p><h2 id="高阶导数与泰勒公式"><a href="#高阶导数与泰勒公式" class="headerlink" title="高阶导数与泰勒公式"></a>高阶导数与泰勒公式</h2><p>用$f^{(n)}(x)$表示f(x)的n阶导数，只要让<code>余项&lt;EPS</code>即可计算指定函数到任意精确度，特别取a=0时称为麦克劳林公式。</p><p>$f(x)=f(a)+f^{(1)}(a)(x-a)+\frac{f^{(2)}(a)}{2!}(x-a)^2+\ldots+\frac{f^{(n)}(a)}{n!}(x-a)^n+R_n(x)$</p><p>$R_n(x)=o((x-a)^n)$，佩亚诺余项</p><p>$R_n(x)=\frac{1}{n!}\int_a^x(x-t)^nf^{(n+1)}(t),dt$，积分余项</p><p>$R_n(x)=\frac{f^{(n+1)}(\xi)}{(n+1)!}(x-a)^{n+1},a&lt;\xi&lt;x$，拉格朗日余项</p><p>$R_n(x)=\frac{(x-a)^{n+1}}{n!}(1-\theta)^nf^{(n+1)}(a+\theta(x-a)),0&lt;\theta&lt;1$，柯西余项</p><h3 id="对数函数"><a href="#对数函数" class="headerlink" title="对数函数"></a>对数函数</h3><p>$[\ln(1+x)]^{(n)}=(-1)^{n-1}(n-1)!(1+x)^{-n}$</p><p>$\ln(1+x)=x-\frac{x^2}{2}+\frac{x^3}{3}-\frac{x^4}{4}+\ldots+(-1)^{n-1}\frac{x^n}{n}+R_n(x)$</p><h3 id="幂函数"><a href="#幂函数" class="headerlink" title="幂函数"></a>幂函数</h3><p>$[(1+x)^a]^{(n)}=a(a-1)\ldots(a-n+1)(1+x)^{a-n}$</p><p>$(1+x)^a=1+ax+\frac{a(a-1)}{2!}x^2+\dots+\frac{a(a-1)\ldots(a-n+1)}{n!}x^n+R_n(x)$</p><h3 id="三角函数"><a href="#三角函数" class="headerlink" title="三角函数"></a>三角函数</h3><p>$(\sin x)^{(n)}=\sin(x+\frac{n\pi}{2})$</p><p>$\sin x=x-\frac{x^3}{3!}+\frac{x^5}{5!}-\frac{x^7}{7!}+\ldots+(-1)^{k-1}\frac{x^{2k-1}}{(2k-1)!}+R_{2k}(x)$</p><p>$R_{2k}(x)=(-1)^k\frac{\cos\theta x}{(2k+1)!}x^{2k+1}$</p><p>$(\cos x)^{(n)}=\cos(x+\frac{n\pi}{2})$</p><p>$\cos x=1-\frac{x^2}{2!}+\frac{x^4}{4!}-\frac{x^6}{6!}+\ldots+(-1)^{k-1}\frac{x^{2k-2}}{(2k-2)!}+R_{2k-1}(x)$</p><p>$R_{2k-1}(x)=(-1)^k\frac{\cos\theta x}{(2k)!}x^{2k}$</p><h3 id="指数函数"><a href="#指数函数" class="headerlink" title="指数函数"></a>指数函数</h3><p>$(e^x)^{(n)}=e^x$</p><p>$e^x=1+x+\frac{x^2}{2!}+\frac{x^3}{3!}+\ldots+\frac{x^n}{n!}+R_n(x)$</p><p>$R_n(x)=\frac{e^{\theta x}}{(n+1)!}x^{n+1},\xi=\theta x,0&lt;\theta&lt;1$</p><h3 id="二元函数"><a href="#二元函数" class="headerlink" title="二元函数"></a>二元函数</h3><p>设$f(x,y)$在$P_0(x_0,y_0)$的某邻域$O(P_0)$内有直到$n+1$阶连续偏导数，则对$O(P_0)$内$\forall(x_0+\Delta x,y_0+\Delta y),\exists\theta\in(0,1)$，使得</p><p>$f(x_0+\Delta x,y_0+\Delta y)=\sum_{k=0}^n\frac{1}{k!}(\frac{\partial}{\partial x}\Delta x+\frac{\partial}{\partial y}\Delta y)^kf(x_0,y_0)+R_n$</p><p>其中</p><p>$R_n=\frac{1}{(n+1)!}(\frac{\partial}{\partial x}\Delta x+\frac{\partial}{\partial y}\Delta y)^{n+1}f(x_0+\theta\Delta x,y_0+\theta\Delta y)$</p><h2 id="级数部分和"><a href="#级数部分和" class="headerlink" title="级数部分和"></a>级数部分和</h2><h3 id="幂级数"><a href="#幂级数" class="headerlink" title="幂级数"></a>幂级数</h3><p>快速计算幂级数的部分和$\sum_{i=1}^ni^k\mod M$可借助伯努利数，详见组合数学模板。</p><p>$\sum_{i=1}^ni^1=\frac 1 2n(n+1)$</p><p>$\sum_{i=1}^ni^2=\frac 1 6n(n+1)(2n+1)$</p><p>$\sum_{i=1}^ni^3=\frac 1 4[n(n+1)]^2$</p><p>$\sum_{i=1}^ni^4=\frac 1{30}n(n+1)(2n+1)(3n^2+3n-1)$</p><p>$\sum_{i=1}^ni^5=\frac 1{12}[n(n+1)]^2(2n^2+2n-1)$</p><p>$\sum_{i=1}^ni^6=\frac 1{42}n(n+1)(2n+1)(3n^4+6n^3-3n+1)$</p><h3 id="调和级数"><a href="#调和级数" class="headerlink" title="调和级数"></a>调和级数</h3><p>$n\to\infty,\sum_{i=1}^n\frac 1 i\to\ln n+r,r\approx0.5772156649015328\ldots$</p><h2 id="二分求零点、三分求极值点"><a href="#二分求零点、三分求极值点" class="headerlink" title="二分求零点、三分求极值点"></a>二分求零点、三分求极值点</h2><p>需要$f(x)$在区间$[l,r]$上单调/凹凸性唯一。</p><pre class=" language-cpp"><code class="language-cpp">lf <span class="token function">bs</span><span class="token punctuation">(</span>lf l<span class="token punctuation">,</span> lf r<span class="token punctuation">,</span> lf <span class="token function">f</span><span class="token punctuation">(</span>lf x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l <span class="token operator">&lt;</span> EPS<span class="token punctuation">)</span>        <span class="token keyword">return</span> l<span class="token punctuation">;</span>    lf m <span class="token operator">=</span> <span class="token punctuation">(</span>l <span class="token operator">+</span> r<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">f</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token function">bs</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> m<span class="token punctuation">,</span> f<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">ts</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> r<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>lf <span class="token function">ts</span><span class="token punctuation">(</span>lf l<span class="token punctuation">,</span> lf r<span class="token punctuation">,</span> lf <span class="token function">f</span><span class="token punctuation">(</span>lf x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l <span class="token operator">&lt;</span> EPS<span class="token punctuation">)</span>        <span class="token keyword">return</span> l<span class="token punctuation">;</span>    lf d <span class="token operator">=</span> <span class="token punctuation">(</span>r <span class="token operator">-</span> l<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">,</span> lm <span class="token operator">=</span> l <span class="token operator">+</span> d<span class="token punctuation">,</span> rm <span class="token operator">=</span> r <span class="token operator">-</span> d<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>lm<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">f</span><span class="token punctuation">(</span>rm<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">ts</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> rm<span class="token punctuation">,</span> f<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">ts</span><span class="token punctuation">(</span>lm<span class="token punctuation">,</span> r<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//极小值</span><span class="token punctuation">}</span></code></pre><h2 id="自适应辛普森求积分"><a href="#自适应辛普森求积分" class="headerlink" title="自适应辛普森求积分"></a>自适应辛普森求积分</h2><p><a href="https://vjudge.net/solution/18698789" target="_blank" rel="noopener">使用示例</a></p><p><a href="http://www2.math.umd.edu/~mariakc/teaching/adaptive.pdf" target="_blank" rel="noopener">这篇论文</a>论证了加一个十五分之一的偏移收敛会比较快…</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Simpson<span class="token punctuation">{</span>    lf <span class="token function">simpson</span><span class="token punctuation">(</span>lf a<span class="token punctuation">,</span> lf b<span class="token punctuation">,</span> lf <span class="token function">f</span><span class="token punctuation">(</span>lf x<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">f</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>b <span class="token operator">-</span> a<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    lf <span class="token function">ask</span><span class="token punctuation">(</span>lf a<span class="token punctuation">,</span> lf b<span class="token punctuation">,</span> lf <span class="token function">f</span><span class="token punctuation">(</span>lf x<span class="token punctuation">)</span><span class="token punctuation">,</span> lf e <span class="token operator">=</span> EPS<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        lf c <span class="token operator">=</span> <span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> L <span class="token operator">=</span> <span class="token function">simpson</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> c<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">,</span> R <span class="token operator">=</span> <span class="token function">simpson</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> b<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">,</span> delta <span class="token operator">=</span> <span class="token punctuation">(</span>L <span class="token operator">+</span> R <span class="token operator">-</span> <span class="token function">simpson</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">15</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">fabs</span><span class="token punctuation">(</span>delta<span class="token punctuation">)</span> <span class="token operator">&lt;</span> e <span class="token operator">?</span> L <span class="token operator">+</span> R <span class="token operator">+</span> delta <span class="token operator">:</span> <span class="token function">ask</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> c<span class="token punctuation">,</span> f<span class="token punctuation">,</span> e <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">ask</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> b<span class="token punctuation">,</span> f<span class="token punctuation">,</span> e <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="插值法"><a href="#插值法" class="headerlink" title="插值法"></a>插值法</h2><p>拉格朗日插值法：插值多项式和插值基函数的形式对称，容易编程。但是，增加节点时，需要重新计算每一个插值基函数。要在$\pmod p$意义下进行的话，那么p只能是质数。<br>牛顿插值法：当插值节点增加时，之前已计算的结果仍然能用，每增加一个节点，只要再增加一项即可，从而避免了重复性计算。如果要mod非质数的话，那么就要用牛顿插值法。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">typedef</span> complex<span class="token operator">&lt;</span>lf<span class="token operator">></span> Coord<span class="token punctuation">;</span><span class="token macro property">#<span class="token directive keyword">define</span> X real()</span><span class="token macro property">#<span class="token directive keyword">define</span> Y imag()</span><span class="token keyword">struct</span> Lagrange<span class="token punctuation">{</span>    lf <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token operator">&amp;</span>p<span class="token punctuation">,</span> lf x<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//返回p确定的多项式函数在x处的值</span>    <span class="token punctuation">{</span>        lf ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            lf tmp <span class="token operator">=</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>Y<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> j<span class="token punctuation">)</span>                    tmp <span class="token operator">*</span><span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">-</span> p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>X<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>X <span class="token operator">-</span> p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>X<span class="token punctuation">)</span><span class="token punctuation">;</span>            ret <span class="token operator">+</span><span class="token operator">=</span> tmp<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    vector<span class="token operator">&lt;</span>lf<span class="token operator">></span> <span class="token function">ask</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> p<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//返回p确定的多项式系数向量</span>    <span class="token punctuation">{</span>        vector<span class="token operator">&lt;</span>lf<span class="token operator">></span> <span class="token function">ret</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ret<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Y<span class="token punctuation">,</span> sum<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">>=</span> i<span class="token punctuation">;</span> <span class="token operator">--</span>j<span class="token punctuation">)</span>                p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>Y <span class="token operator">=</span> <span class="token punctuation">(</span>p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>Y <span class="token operator">-</span> p<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Y<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>X <span class="token operator">-</span> p<span class="token punctuation">[</span>j <span class="token operator">-</span> i<span class="token punctuation">]</span><span class="token punctuation">.</span>X<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> <span class="token operator">~</span>j<span class="token punctuation">;</span> <span class="token operator">--</span>j<span class="token punctuation">)</span>                sum<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>j <span class="token operator">?</span> sum<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">-</span> sum<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">*</span> p<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>X<span class="token punctuation">,</span>                ret<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> sum<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">*</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>Y<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">struct</span> Newton<span class="token punctuation">{</span>    lf <span class="token function">differenceQuotient</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token operator">&amp;</span>p<span class="token punctuation">,</span> <span class="token keyword">int</span> k<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//计算差商</span>    <span class="token punctuation">{</span>        lf ret <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> k<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            lf tmp <span class="token operator">=</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>Y<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> k<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> j<span class="token punctuation">)</span>                    tmp <span class="token operator">/</span><span class="token operator">=</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>X <span class="token operator">-</span> p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>X<span class="token punctuation">;</span>            ret <span class="token operator">+</span><span class="token operator">=</span> tmp<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    lf <span class="token function">ask</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token operator">&amp;</span>p<span class="token punctuation">,</span> lf x<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        lf ret <span class="token operator">=</span> p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Y<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            lf tmp <span class="token operator">=</span> <span class="token function">differenceQuotient</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//多次求，可O(n^3)预处理优化</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>                tmp <span class="token operator">*</span><span class="token operator">=</span> x <span class="token operator">-</span> p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>X<span class="token punctuation">;</span>            ret <span class="token operator">+</span><span class="token operator">=</span> tmp<span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> Template </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ICPC模板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算几何</title>
      <link href="/2019/02/03/2019-02-03-ji-suan-ji-he/"/>
      <url>/2019/02/03/2019-02-03-ji-suan-ji-he/</url>
      
        <content type="html"><![CDATA[<h2 id="二维"><a href="#二维" class="headerlink" title="二维"></a>二维</h2><p>点和向量化为坐标Coord进行运算，使用stl中的complex实现。</p><p>复数相乘的几何意义为长度相乘，极角相加。</p><p>用直线上的一点p和方向向量v表示一条经过p的直线，直线上的所有点q满足q=p+t*v，其中t是参数；当限制t≥0时，该参数方程表示射线；限制0≤t≤1时，该参数方程表示线段。</p><p>此外，如果已知线段端点a1和a2，可以通过Line(a1,a2-a1)来得到对应的参数形式。</p><p>Morley定理：三角形每个内角的三等分线相交成等边三角形。</p><p>欧拉定理：平面图的点数V、边数E和面数F满足V+F-E=2。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">double</span> lf<span class="token punctuation">;</span><span class="token keyword">typedef</span> complex<span class="token operator">&lt;</span>lf<span class="token operator">></span> Coord<span class="token punctuation">;</span><span class="token keyword">const</span> lf EPS <span class="token operator">=</span> <span class="token number">1e-9</span><span class="token punctuation">,</span> PI <span class="token operator">=</span> <span class="token function">acos</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token macro property">#<span class="token directive keyword">define</span> X real()</span><span class="token macro property">#<span class="token directive keyword">define</span> Y imag()</span><span class="token keyword">struct</span> Line<span class="token punctuation">{</span>    Coord p<span class="token punctuation">,</span> v<span class="token punctuation">;</span>    <span class="token function">Line</span><span class="token punctuation">(</span>Coord p <span class="token operator">=</span> <span class="token function">Coord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Coord v <span class="token operator">=</span> <span class="token function">Coord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">p</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">v</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    Coord <span class="token function">point</span><span class="token punctuation">(</span>lf t<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> p <span class="token operator">+</span> v <span class="token operator">*</span> t<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">struct</span> Circle<span class="token punctuation">{</span>    Coord c<span class="token punctuation">;</span>    lf r<span class="token punctuation">;</span>    <span class="token function">Circle</span><span class="token punctuation">(</span>Coord c <span class="token operator">=</span> <span class="token function">Coord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lf r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">c</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">r</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    Coord <span class="token function">point</span><span class="token punctuation">(</span>lf t<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> c <span class="token operator">+</span> <span class="token function">polar</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//t为参数，幅角</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*Coord(lf x=0,lf y=0);//构造函数lf real(Coord a);//a的实部（复平面的横坐标）,也可写作a.real()lf imag(Coord a);//a的虚部（复平面的纵坐标）,也可写作a.imag()lf abs(Coord a);//向量a的模长，或是点a到原点的距离lf norm(Coord a);//abs的平方，比abs快，但是要注意浮点数精度溢出lf arg(Coord a);//a的幅角，与atan2(a.real(),a.imag())等价Coord polar(lf r,lf t);//极坐标生成方式，r为幅值，t为幅角//运算符重载+、-、*、/（以及对应的赋值运算，但是赋值运算不能写在表达式中，详见参考地址）、&lt;&lt;、>>（输出括号形式的坐标）*/</span><span class="token keyword">int</span> <span class="token function">sgn</span><span class="token punctuation">(</span>lf d<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span>d <span class="token operator">></span> EPS<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>d <span class="token operator">&lt;</span> <span class="token operator">-</span>EPS<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">sgn</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span>X <span class="token operator">-</span> B<span class="token punctuation">.</span>X<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">sgn</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span>Y <span class="token operator">-</span> B<span class="token punctuation">.</span>Y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//不等运算符，涉及到浮点数比较要重写</span><span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span>A <span class="token operator">!=</span> B<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">cmpCoord</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">sgn</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span>X <span class="token operator">-</span> B<span class="token punctuation">.</span>X<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">sgn</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span>X <span class="token operator">-</span> B<span class="token punctuation">.</span>X<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token function">sgn</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span>Y <span class="token operator">-</span> B<span class="token punctuation">.</span>Y<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//复数没有小于运算，只能这样定义一个比较函数</span><span class="token keyword">bool</span> <span class="token function">cmpLine</span><span class="token punctuation">(</span><span class="token keyword">const</span> Line <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">const</span> Line <span class="token operator">&amp;</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">arg</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span>v<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">arg</span><span class="token punctuation">(</span>B<span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//按极角排序，求凸包中使用</span>lf <span class="token function">Dot</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> A<span class="token punctuation">.</span>X <span class="token operator">*</span> B<span class="token punctuation">.</span>X <span class="token operator">+</span> A<span class="token punctuation">.</span>Y <span class="token operator">*</span> B<span class="token punctuation">.</span>Y<span class="token punctuation">;</span> <span class="token punctuation">}</span>lf <span class="token function">Cross</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> A<span class="token punctuation">.</span>X <span class="token operator">*</span> B<span class="token punctuation">.</span>Y <span class="token operator">-</span> B<span class="token punctuation">.</span>X <span class="token operator">*</span> A<span class="token punctuation">.</span>Y<span class="token punctuation">;</span> <span class="token punctuation">}</span>lf <span class="token function">Angle</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">acos</span><span class="token punctuation">(</span><span class="token function">Dot</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">abs</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">abs</span><span class="token punctuation">(</span>B<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>lf <span class="token function">Area2</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>B<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>C<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">Cross</span><span class="token punctuation">(</span>B <span class="token operator">-</span> A<span class="token punctuation">,</span> C <span class="token operator">-</span> A<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//三角形ABC有向面积的两倍</span>Coord <span class="token function">Rotate</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> lf rad<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> A <span class="token operator">*</span> <span class="token function">polar</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> rad<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//向量A逆时针旋转rad弧度</span>Coord <span class="token function">Normal</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//A的法向量，把A逆时针旋转九十度并长度化为1</span><span class="token punctuation">{</span>    lf L <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">Coord</span><span class="token punctuation">(</span><span class="token operator">-</span>A<span class="token punctuation">.</span>Y <span class="token operator">/</span> L<span class="token punctuation">,</span> A<span class="token punctuation">.</span>X <span class="token operator">/</span> L<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">onLeft</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>P<span class="token punctuation">,</span> <span class="token keyword">const</span> Line <span class="token operator">&amp;</span>L<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">Cross</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span>v<span class="token punctuation">,</span> P <span class="token operator">-</span> L<span class="token punctuation">.</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//p是否在有向直线L左侧，不含线上</span>lf <span class="token function">DistanceToLine</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>P<span class="token punctuation">,</span> <span class="token keyword">const</span> Line <span class="token operator">&amp;</span>L<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">Cross</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span>v<span class="token punctuation">,</span> P <span class="token operator">-</span> L<span class="token punctuation">.</span>p<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">abs</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//点到直线距离（有向）</span>lf <span class="token function">DistanceToLine</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>P<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">DistanceToLine</span><span class="token punctuation">(</span>P<span class="token punctuation">,</span> <span class="token function">Line</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B <span class="token operator">-</span> A<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>lf <span class="token function">DistanceToSegment</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>P<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>B<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//点到线段的距离（无向）</span><span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>A <span class="token operator">==</span> B<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token function">abs</span><span class="token punctuation">(</span>P <span class="token operator">-</span> A<span class="token punctuation">)</span><span class="token punctuation">;</span>    Coord v1 <span class="token operator">=</span> B <span class="token operator">-</span> A<span class="token punctuation">,</span> v2 <span class="token operator">=</span> P <span class="token operator">-</span> A<span class="token punctuation">,</span> v3 <span class="token operator">=</span> P <span class="token operator">-</span> B<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">Dot</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token function">abs</span><span class="token punctuation">(</span>v2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">Dot</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token function">abs</span><span class="token punctuation">(</span>v3<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">fabs</span><span class="token punctuation">(</span><span class="token function">DistanceToLine</span><span class="token punctuation">(</span>P<span class="token punctuation">,</span> <span class="token function">Line</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B <span class="token operator">-</span> A<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>Coord <span class="token function">getLineProjection</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>P<span class="token punctuation">,</span> <span class="token keyword">const</span> Line <span class="token operator">&amp;</span>L<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> L<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span><span class="token function">Dot</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span>v<span class="token punctuation">,</span> P <span class="token operator">-</span> L<span class="token punctuation">.</span>p<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">norm</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//点在直线上的投影</span>Coord <span class="token function">getLineProjection</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>P<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">getLineProjection</span><span class="token punctuation">(</span>P<span class="token punctuation">,</span> <span class="token function">Line</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B <span class="token operator">-</span> A<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>Coord <span class="token function">getSymmetry</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>P<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>O<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> O <span class="token operator">+</span> O <span class="token operator">-</span> P<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//P关于O的对称点</span>Coord <span class="token function">getSymmetry</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>P<span class="token punctuation">,</span> <span class="token keyword">const</span> Line <span class="token operator">&amp;</span>L<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">getSymmetry</span><span class="token punctuation">(</span>P<span class="token punctuation">,</span> <span class="token function">getLineProjection</span><span class="token punctuation">(</span>P<span class="token punctuation">,</span> L<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//P关于L的对称点</span>Coord <span class="token function">getLineIntersection</span><span class="token punctuation">(</span><span class="token keyword">const</span> Line <span class="token operator">&amp;</span>L1<span class="token punctuation">,</span> <span class="token keyword">const</span> Line <span class="token operator">&amp;</span>L2<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> L1<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span><span class="token function">Cross</span><span class="token punctuation">(</span>L2<span class="token punctuation">.</span>v<span class="token punctuation">,</span> L1<span class="token punctuation">.</span>p <span class="token operator">-</span> L2<span class="token punctuation">.</span>p<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">Cross</span><span class="token punctuation">(</span>L1<span class="token punctuation">.</span>v<span class="token punctuation">,</span> L2<span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//直线交点,须确保两直线相交</span>Coord <span class="token function">getLineIntersection</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A1<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A2<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>B1<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>B2<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">getLineIntersection</span><span class="token punctuation">(</span><span class="token function">Line</span><span class="token punctuation">(</span>A1<span class="token punctuation">,</span> A2 <span class="token operator">-</span> A1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Line</span><span class="token punctuation">(</span>B1<span class="token punctuation">,</span> B2 <span class="token operator">-</span> B1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">SegmentProperIntersection</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A1<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A2<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>B1<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>B2<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//线段相交判定，交点不在一条线段的端点</span><span class="token punctuation">{</span>    lf C1 <span class="token operator">=</span> <span class="token function">Cross</span><span class="token punctuation">(</span>A2 <span class="token operator">-</span> A1<span class="token punctuation">,</span> B1 <span class="token operator">-</span> A1<span class="token punctuation">)</span><span class="token punctuation">,</span> C2 <span class="token operator">=</span> <span class="token function">Cross</span><span class="token punctuation">(</span>A2 <span class="token operator">-</span> A1<span class="token punctuation">,</span> B2 <span class="token operator">-</span> A1<span class="token punctuation">)</span><span class="token punctuation">,</span>       C3 <span class="token operator">=</span> <span class="token function">Cross</span><span class="token punctuation">(</span>B2 <span class="token operator">-</span> B1<span class="token punctuation">,</span> A1 <span class="token operator">-</span> B1<span class="token punctuation">)</span><span class="token punctuation">,</span> C4 <span class="token operator">=</span> <span class="token function">Cross</span><span class="token punctuation">(</span>B2 <span class="token operator">-</span> B1<span class="token punctuation">,</span> A2 <span class="token operator">-</span> B1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">sgn</span><span class="token punctuation">(</span>C1<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">sgn</span><span class="token punctuation">(</span>C2<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">sgn</span><span class="token punctuation">(</span>C3<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">sgn</span><span class="token punctuation">(</span>C4<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">bool</span> <span class="token function">onSegment</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>P<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A1<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A2<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">Dot</span><span class="token punctuation">(</span>A1 <span class="token operator">-</span> P<span class="token punctuation">,</span> A2 <span class="token operator">-</span> P<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">Cross</span><span class="token punctuation">(</span>A1 <span class="token operator">-</span> P<span class="token punctuation">,</span> A2 <span class="token operator">-</span> P<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//判断点是否在线段上，不包含端点</span>lf <span class="token function">PolygonArea</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token operator">&amp;</span>p<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//计算多边形的有向面积，凸多边形即为面积</span><span class="token punctuation">{</span>    lf s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        s <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">Area2</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> s <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">inPolygon</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>p<span class="token punctuation">,</span> <span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token operator">&amp;</span>poly<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//点在多边形内的判定，转角法，正值为内部，0为外部，-1在边界上</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> d1<span class="token punctuation">,</span> d2<span class="token punctuation">,</span> n <span class="token operator">=</span> poly<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">onSegment</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> poly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> poly<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//在边界上</span>        k <span class="token operator">=</span> <span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">Cross</span><span class="token punctuation">(</span>poly<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> n<span class="token punctuation">]</span> <span class="token operator">-</span> poly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> p <span class="token operator">-</span> poly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        d1 <span class="token operator">=</span> <span class="token function">sgn</span><span class="token punctuation">(</span>poly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>Y <span class="token operator">-</span> p<span class="token punctuation">.</span>Y<span class="token punctuation">)</span><span class="token punctuation">;</span>        d2 <span class="token operator">=</span> <span class="token function">sgn</span><span class="token punctuation">(</span>poly<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> n<span class="token punctuation">]</span><span class="token punctuation">.</span>Y <span class="token operator">-</span> p<span class="token punctuation">.</span>Y<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> d1 <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> d2 <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token operator">++</span>ans<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>k <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> d2 <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> d1 <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token operator">--</span>ans<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span>vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token function">ConvexHull</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> p<span class="token punctuation">,</span> <span class="token keyword">int</span> collineation <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//获得凸包，不希望凸包的边上有输入点第二个参数传0</span><span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> ans<span class="token punctuation">;</span>    <span class="token function">sort</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cmpCoord<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//先比横坐标再比纵坐标</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">//求出下凸包</span>    <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>ans<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">Area2</span><span class="token punctuation">(</span>ans<span class="token punctuation">[</span>ans<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ans<span class="token punctuation">[</span>ans<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> collineation<span class="token punctuation">)</span>            ans<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ans<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">,</span> k <span class="token operator">=</span> ans<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">--</span>i<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//求出上凸包</span>    <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>ans<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> k <span class="token operator">&amp;&amp;</span> <span class="token operator">-</span><span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">Area2</span><span class="token punctuation">(</span>ans<span class="token punctuation">[</span>ans<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> ans<span class="token punctuation">[</span>ans<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> collineation<span class="token punctuation">)</span>            ans<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ans<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span>        ans<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> ans<span class="token punctuation">;</span><span class="token punctuation">}</span>vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token function">cutPolygon</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token operator">&amp;</span>poly<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>B<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//用有向直线A->B切割多边形poly， 返回“左侧”。 如果退化，可能会返回一个单点或者线段，复杂度O(n^2)</span><span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> newpoly<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">=</span> poly<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Coord C <span class="token operator">=</span> poly<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> D <span class="token operator">=</span> poly<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> n<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">Cross</span><span class="token punctuation">(</span>B <span class="token operator">-</span> A<span class="token punctuation">,</span> C <span class="token operator">-</span> A<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span>            newpoly<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>C<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">Cross</span><span class="token punctuation">(</span>B <span class="token operator">-</span> A<span class="token punctuation">,</span> C <span class="token operator">-</span> D<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Coord ip <span class="token operator">=</span> <span class="token function">getLineIntersection</span><span class="token punctuation">(</span><span class="token function">Line</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B <span class="token operator">-</span> A<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Line</span><span class="token punctuation">(</span>C<span class="token punctuation">,</span> D <span class="token operator">-</span> C<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">onSegment</span><span class="token punctuation">(</span>ip<span class="token punctuation">,</span> C<span class="token punctuation">,</span> D<span class="token punctuation">)</span><span class="token punctuation">)</span>                newpoly<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> newpoly<span class="token punctuation">;</span><span class="token punctuation">}</span>vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token function">getHalfPlaneIntersection</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Line<span class="token operator">></span> L<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//半平面交</span><span class="token punctuation">{</span>    <span class="token function">sort</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> L<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cmpLine<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//按极角排序</span>    vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token function">p</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Coord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//p[i]为q[i]和q[i+1]的交点</span>    <span class="token keyword">int</span> first <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> last <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//双端队列的第一个元素和最后一个元素</span>    vector<span class="token operator">&lt;</span>Line<span class="token operator">></span> <span class="token function">q</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Line</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//双端队列</span>    q<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> L<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">//队列初始化为只有一个半平面L[0]</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">=</span> L<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">!=</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>first <span class="token operator">&lt;</span> last <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">onLeft</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>last <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> L<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token operator">--</span>last<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>first <span class="token operator">&lt;</span> last <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">onLeft</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>first<span class="token punctuation">]</span><span class="token punctuation">,</span> L<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token operator">++</span>first<span class="token punctuation">;</span>        q<span class="token punctuation">[</span><span class="token operator">++</span>last<span class="token punctuation">]</span> <span class="token operator">=</span> L<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">Cross</span><span class="token punctuation">(</span>q<span class="token punctuation">[</span>last<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">,</span> q<span class="token punctuation">[</span>last <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token operator">--</span>last<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">onLeft</span><span class="token punctuation">(</span>L<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>p<span class="token punctuation">,</span> q<span class="token punctuation">[</span>last<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                q<span class="token punctuation">[</span>last<span class="token punctuation">]</span> <span class="token operator">=</span> L<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>first <span class="token operator">&lt;</span> last<span class="token punctuation">)</span>            p<span class="token punctuation">[</span>last <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getLineIntersection</span><span class="token punctuation">(</span>q<span class="token punctuation">[</span>last <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> q<span class="token punctuation">[</span>last<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>first <span class="token operator">&lt;</span> last <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">onLeft</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>last <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> q<span class="token punctuation">[</span>first<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token operator">--</span>last<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//删除无用平面</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>last <span class="token operator">-</span> first <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//空集</span>    p<span class="token punctuation">[</span>last<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">getLineIntersection</span><span class="token punctuation">(</span>q<span class="token punctuation">[</span>last<span class="token punctuation">]</span><span class="token punctuation">,</span> q<span class="token punctuation">[</span>first<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> first<span class="token punctuation">,</span> p<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> last <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//从deque复制到输出中</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">getLineCircleIntersection</span><span class="token punctuation">(</span><span class="token keyword">const</span> Line <span class="token operator">&amp;</span>L<span class="token punctuation">,</span> <span class="token keyword">const</span> Circle <span class="token operator">&amp;</span>C<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token operator">&amp;</span>sol<span class="token punctuation">)</span><span class="token punctuation">{</span>    lf a <span class="token operator">=</span> L<span class="token punctuation">.</span>v<span class="token punctuation">.</span>X<span class="token punctuation">,</span>       b <span class="token operator">=</span> L<span class="token punctuation">.</span>p<span class="token punctuation">.</span>X <span class="token operator">-</span> C<span class="token punctuation">.</span>c<span class="token punctuation">.</span>X<span class="token punctuation">,</span>       c <span class="token operator">=</span> L<span class="token punctuation">.</span>v<span class="token punctuation">.</span>Y<span class="token punctuation">,</span>       d <span class="token operator">=</span> L<span class="token punctuation">.</span>p<span class="token punctuation">.</span>Y <span class="token operator">-</span> C<span class="token punctuation">.</span>c<span class="token punctuation">.</span>Y<span class="token punctuation">,</span>       e <span class="token operator">=</span> a <span class="token operator">*</span> a <span class="token operator">+</span> c <span class="token operator">*</span> c<span class="token punctuation">,</span>       f <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span>a <span class="token operator">*</span> b <span class="token operator">+</span> c <span class="token operator">*</span> d<span class="token punctuation">)</span><span class="token punctuation">,</span>       g <span class="token operator">=</span> b <span class="token operator">*</span> b <span class="token operator">+</span> d <span class="token operator">*</span> d <span class="token operator">-</span> C<span class="token punctuation">.</span>r <span class="token operator">*</span> C<span class="token punctuation">.</span>r<span class="token punctuation">,</span>       delta <span class="token operator">=</span> f <span class="token operator">*</span> f <span class="token operator">-</span> <span class="token number">4</span> <span class="token operator">*</span> e <span class="token operator">*</span> g<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sgn</span><span class="token punctuation">(</span>delta<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">sgn</span><span class="token punctuation">(</span>delta<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> sol<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span><span class="token operator">-</span>f <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">;</span>    sol<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span>f <span class="token operator">-</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>delta<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    sol<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>L<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span>f <span class="token operator">+</span> <span class="token function">sqrt</span><span class="token punctuation">(</span>delta<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">getCircleIntersection</span><span class="token punctuation">(</span><span class="token keyword">const</span> Circle <span class="token operator">&amp;</span>C1<span class="token punctuation">,</span> <span class="token keyword">const</span> Circle <span class="token operator">&amp;</span>C2<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token operator">&amp;</span>sol<span class="token punctuation">)</span><span class="token punctuation">{</span>    lf d <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>C1<span class="token punctuation">.</span>c <span class="token operator">-</span> C2<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">sgn</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token function">sgn</span><span class="token punctuation">(</span>C1<span class="token punctuation">.</span>r <span class="token operator">-</span> C2<span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//重合返回-1</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sgn</span><span class="token punctuation">(</span>C1<span class="token punctuation">.</span>r <span class="token operator">+</span> C2<span class="token punctuation">.</span>r <span class="token operator">-</span> d<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">fabs</span><span class="token punctuation">(</span>C1<span class="token punctuation">.</span>r <span class="token operator">-</span> C2<span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token operator">-</span> d<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//外离或内含</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    lf a <span class="token operator">=</span> <span class="token function">arg</span><span class="token punctuation">(</span>C2<span class="token punctuation">.</span>c <span class="token operator">-</span> C1<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span>       da <span class="token operator">=</span> <span class="token function">acos</span><span class="token punctuation">(</span><span class="token punctuation">(</span>C1<span class="token punctuation">.</span>r <span class="token operator">*</span> C1<span class="token punctuation">.</span>r <span class="token operator">+</span> d <span class="token operator">*</span> d <span class="token operator">-</span> C2<span class="token punctuation">.</span>r <span class="token operator">*</span> C2<span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> C1<span class="token punctuation">.</span>r <span class="token operator">*</span> d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    Coord p1 <span class="token operator">=</span> C1<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>a <span class="token operator">-</span> da<span class="token punctuation">)</span><span class="token punctuation">,</span> p2 <span class="token operator">=</span> C1<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>a <span class="token operator">+</span> da<span class="token punctuation">)</span><span class="token punctuation">;</span>    sol<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>p1 <span class="token operator">==</span> p2<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//相切</span>    <span class="token keyword">return</span> sol<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token punctuation">}</span>Line <span class="token function">getTangent</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>C<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>P<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">Line</span><span class="token punctuation">(</span>P<span class="token punctuation">,</span> <span class="token function">Normal</span><span class="token punctuation">(</span>C <span class="token operator">-</span> P<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//圆心C，圆上一点P处切线</span><span class="token keyword">int</span> <span class="token function">getTangents</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord <span class="token operator">&amp;</span>p<span class="token punctuation">,</span> <span class="token keyword">const</span> Circle <span class="token operator">&amp;</span>C<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token operator">&amp;</span>sol<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//点到圆的切点，返回个数</span><span class="token punctuation">{</span>    Coord u <span class="token operator">=</span> p <span class="token operator">-</span> C<span class="token punctuation">.</span>c<span class="token punctuation">;</span>    lf d <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>d <span class="token operator">&lt;</span> C<span class="token punctuation">.</span>r<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//点在圆内</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">sgn</span><span class="token punctuation">(</span>d <span class="token operator">-</span> C<span class="token punctuation">.</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//点在圆上</span>        <span class="token keyword">return</span> sol<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">;</span>    lf base <span class="token operator">=</span> <span class="token function">arg</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span><span class="token punctuation">,</span> ang <span class="token operator">=</span> <span class="token function">acos</span><span class="token punctuation">(</span>C<span class="token punctuation">.</span>r <span class="token operator">/</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>    sol<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>C<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>base <span class="token operator">+</span> ang<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    sol<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>C<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>base <span class="token operator">-</span> ang<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">getTangents</span><span class="token punctuation">(</span>Circle A<span class="token punctuation">,</span> Circle <span class="token operator">&amp;</span>B<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token operator">&amp;</span>b<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//公共切线的切点</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>A<span class="token punctuation">.</span>r <span class="token operator">&lt;</span> B<span class="token punctuation">.</span>r<span class="token punctuation">)</span>        <span class="token function">swap</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">swap</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//有时需标记交换</span>    lf d <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span>c <span class="token operator">-</span> B<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span>       rdiff <span class="token operator">=</span> A<span class="token punctuation">.</span>r <span class="token operator">-</span> B<span class="token punctuation">.</span>r<span class="token punctuation">,</span>       rsum <span class="token operator">=</span> A<span class="token punctuation">.</span>r <span class="token operator">+</span> B<span class="token punctuation">.</span>r<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sgn</span><span class="token punctuation">(</span>d <span class="token operator">-</span> rdiff<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//内含</span>    lf base <span class="token operator">=</span> <span class="token function">arg</span><span class="token punctuation">(</span>B<span class="token punctuation">.</span>c <span class="token operator">-</span> A<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">sgn</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">sgn</span><span class="token punctuation">(</span>rdiff<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//重合，无穷多条切线</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">sgn</span><span class="token punctuation">(</span>d <span class="token operator">-</span> rdiff<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//内切，外公切线</span>    <span class="token punctuation">{</span>        a<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>base<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        b<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>B<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>base<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">//有外公切线的情形</span>    lf ang <span class="token operator">=</span> <span class="token function">acos</span><span class="token punctuation">(</span>rdiff <span class="token operator">/</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>    a<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>base <span class="token operator">+</span> ang<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    b<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>B<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>base <span class="token operator">+</span> ang<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    a<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>base <span class="token operator">-</span> ang<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    b<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>B<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>base <span class="token operator">-</span> ang<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    cnt <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">sgn</span><span class="token punctuation">(</span>d <span class="token operator">-</span> rsum<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        a<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>base<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        b<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>B<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>base <span class="token operator">+</span> PI<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token operator">++</span>cnt<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sgn</span><span class="token punctuation">(</span>d <span class="token operator">-</span> rsum<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        lf ang_in <span class="token operator">=</span> <span class="token function">acos</span><span class="token punctuation">(</span>rsum <span class="token operator">/</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>base <span class="token operator">+</span> ang_in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        b<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>B<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>base <span class="token operator">+</span> ang_in <span class="token operator">+</span> PI<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>A<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>base <span class="token operator">-</span> ang_in<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        b<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>B<span class="token punctuation">.</span><span class="token function">point</span><span class="token punctuation">(</span>base <span class="token operator">-</span> ang_in <span class="token operator">+</span> PI<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        cnt <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> cnt<span class="token punctuation">;</span><span class="token punctuation">}</span>lf <span class="token function">AreaCircleWithTriangle</span><span class="token punctuation">(</span><span class="token keyword">const</span> Circle <span class="token operator">&amp;</span>C<span class="token punctuation">,</span> Coord A<span class="token punctuation">,</span> Coord B<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//C和三角形OAB的相交面积，如果三角形顶点不在O上则把圆和三角形同时平移，直到有一个顶点在O上</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> sg <span class="token operator">=</span> <span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">Cross</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>sg <span class="token operator">||</span> A <span class="token operator">==</span> C<span class="token punctuation">.</span>c <span class="token operator">||</span> B <span class="token operator">==</span> C<span class="token punctuation">.</span>c<span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    lf OA <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>A <span class="token operator">-</span> C<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span> OB <span class="token operator">=</span> <span class="token function">abs</span><span class="token punctuation">(</span>B <span class="token operator">-</span> C<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">,</span> angle <span class="token operator">=</span> <span class="token function">Angle</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">,</span>       d <span class="token operator">=</span> <span class="token function">DistanceToLine</span><span class="token punctuation">(</span><span class="token function">Coord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> A<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sgn</span><span class="token punctuation">(</span>OA <span class="token operator">-</span> C<span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">sgn</span><span class="token punctuation">(</span>OB <span class="token operator">-</span> C<span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> <span class="token function">Cross</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sgn</span><span class="token punctuation">(</span>OA <span class="token operator">-</span> C<span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">sgn</span><span class="token punctuation">(</span>OB <span class="token operator">-</span> C<span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">sgn</span><span class="token punctuation">(</span>d <span class="token operator">-</span> C<span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> sg <span class="token operator">*</span> C<span class="token punctuation">.</span>r <span class="token operator">*</span> C<span class="token punctuation">.</span>r <span class="token operator">*</span> angle <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sgn</span><span class="token punctuation">(</span>OA <span class="token operator">-</span> C<span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">sgn</span><span class="token punctuation">(</span>OB <span class="token operator">-</span> C<span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> <span class="token function">sgn</span><span class="token punctuation">(</span>d <span class="token operator">-</span> C<span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        Coord prj <span class="token operator">=</span> <span class="token function">getLineProjection</span><span class="token punctuation">(</span><span class="token function">Coord</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> A<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">onSegment</span><span class="token punctuation">(</span>prj<span class="token punctuation">,</span> A<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> sg <span class="token operator">*</span> C<span class="token punctuation">.</span>r <span class="token operator">*</span> C<span class="token punctuation">.</span>r <span class="token operator">*</span> angle <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> p<span class="token punctuation">;</span>        Line L <span class="token operator">=</span> <span class="token function">Line</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B <span class="token operator">-</span> A<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">getLineCircleIntersection</span><span class="token punctuation">(</span>L<span class="token punctuation">,</span> C<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>        lf s1 <span class="token operator">=</span> C<span class="token punctuation">.</span>r <span class="token operator">*</span> C<span class="token punctuation">.</span>r <span class="token operator">*</span> angle <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>           s2 <span class="token operator">=</span> C<span class="token punctuation">.</span>r <span class="token operator">*</span> C<span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token function">Angle</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>        s2 <span class="token operator">-</span><span class="token operator">=</span> <span class="token function">fabs</span><span class="token punctuation">(</span><span class="token function">Cross</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        s1 <span class="token operator">=</span> s1 <span class="token operator">-</span> s2<span class="token punctuation">;</span>        <span class="token keyword">return</span> sg <span class="token operator">*</span> s1<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sgn</span><span class="token punctuation">(</span>OB <span class="token operator">-</span> C<span class="token punctuation">.</span>r<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token function">swap</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">;</span>    Line L <span class="token operator">=</span> <span class="token function">Line</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B <span class="token operator">-</span> A<span class="token punctuation">)</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> inter<span class="token punctuation">;</span>    <span class="token function">getLineCircleIntersection</span><span class="token punctuation">(</span>L<span class="token punctuation">,</span> C<span class="token punctuation">,</span> inter<span class="token punctuation">)</span><span class="token punctuation">;</span>    Coord inter_point <span class="token operator">=</span> inter<span class="token punctuation">[</span><span class="token operator">!</span><span class="token function">onSegment</span><span class="token punctuation">(</span>inter<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> A<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    lf s <span class="token operator">=</span> <span class="token function">fabs</span><span class="token punctuation">(</span><span class="token function">Cross</span><span class="token punctuation">(</span>inter_point<span class="token punctuation">,</span> A<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    s <span class="token operator">+</span><span class="token operator">=</span> C<span class="token punctuation">.</span>r <span class="token operator">*</span> C<span class="token punctuation">.</span>r <span class="token operator">*</span> <span class="token function">Angle</span><span class="token punctuation">(</span>inter_point<span class="token punctuation">,</span> B<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> s <span class="token operator">*</span> sg<span class="token punctuation">;</span><span class="token punctuation">}</span>lf <span class="token function">AreaCircleWithPolygon</span><span class="token punctuation">(</span><span class="token keyword">const</span> Circle <span class="token operator">&amp;</span>C<span class="token punctuation">,</span> <span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token operator">&amp;</span>p<span class="token punctuation">)</span><span class="token punctuation">{</span>    lf ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        ans <span class="token operator">+</span><span class="token operator">=</span> <span class="token function">AreaCircleWithTriangle</span><span class="token punctuation">(</span>C<span class="token punctuation">,</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">fabs</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>Coord <span class="token function">getGravityCenter</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token operator">&amp;</span>p<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//多边形重心</span><span class="token punctuation">{</span>    Coord <span class="token function">a</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    lf am <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> mj<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        mj <span class="token operator">=</span> <span class="token function">Cross</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> p<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        a <span class="token operator">+</span><span class="token operator">=</span> mj <span class="token operator">*</span> <span class="token punctuation">(</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> p<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        am <span class="token operator">+</span><span class="token operator">=</span> mj<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> a <span class="token operator">/</span> am <span class="token operator">/</span> <span class="token number">3.0</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="三维"><a href="#三维" class="headerlink" title="三维"></a>三维</h2><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">typedef</span> <span class="token keyword">double</span> lf<span class="token punctuation">;</span><span class="token keyword">const</span> lf EPS <span class="token operator">=</span> <span class="token number">1e-9</span><span class="token punctuation">,</span> INF <span class="token operator">=</span> <span class="token number">1e9</span><span class="token punctuation">,</span> PI <span class="token operator">=</span> <span class="token function">acos</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">sgn</span><span class="token punctuation">(</span>lf d<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span>d <span class="token operator">></span> EPS<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token punctuation">(</span>d <span class="token operator">&lt;</span> <span class="token operator">-</span>EPS<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">struct</span> Coord3<span class="token punctuation">{</span>    lf X<span class="token punctuation">,</span> Y<span class="token punctuation">,</span> Z<span class="token punctuation">;</span>    <span class="token keyword">friend</span> <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">sgn</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>X <span class="token operator">-</span> b<span class="token punctuation">.</span>X<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">sgn</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>Y <span class="token operator">-</span> b<span class="token punctuation">.</span>Y<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">sgn</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>Z <span class="token operator">-</span> b<span class="token punctuation">.</span>Z<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">friend</span> <span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">==</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>a<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span>a <span class="token operator">!=</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    Coord3 <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">+</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> X <span class="token operator">+</span><span class="token operator">=</span> b<span class="token punctuation">.</span>X<span class="token punctuation">,</span> Y <span class="token operator">+</span><span class="token operator">=</span> b<span class="token punctuation">.</span>Y<span class="token punctuation">,</span> Z <span class="token operator">+</span><span class="token operator">=</span> b<span class="token punctuation">.</span>Z<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Coord3 <span class="token keyword">operator</span><span class="token operator">+</span><span class="token punctuation">(</span>Coord3 a<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">+</span><span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span>    Coord3 <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">-</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> X <span class="token operator">-</span><span class="token operator">=</span> b<span class="token punctuation">.</span>X<span class="token punctuation">,</span> Y <span class="token operator">-</span><span class="token operator">=</span> b<span class="token punctuation">.</span>Y<span class="token punctuation">,</span> Z <span class="token operator">-</span><span class="token operator">=</span> b<span class="token punctuation">.</span>Z<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Coord3 <span class="token keyword">operator</span><span class="token operator">-</span><span class="token punctuation">(</span>Coord3 a<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">-</span><span class="token operator">=</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span>    Coord3 <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">*</span><span class="token operator">=</span><span class="token punctuation">(</span>lf d<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> X <span class="token operator">*</span><span class="token operator">=</span> d<span class="token punctuation">,</span> Y <span class="token operator">*</span><span class="token operator">=</span> d<span class="token punctuation">,</span> Z <span class="token operator">*</span><span class="token operator">=</span> d<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Coord3 <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span>Coord3 a<span class="token punctuation">,</span> lf d<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">*</span><span class="token operator">=</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Coord3 <span class="token keyword">operator</span><span class="token operator">*</span><span class="token punctuation">(</span>lf d<span class="token punctuation">,</span> Coord3 a<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">*</span><span class="token operator">=</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span>    Coord3 <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">/</span><span class="token operator">=</span><span class="token punctuation">(</span>lf d<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> X <span class="token operator">/</span><span class="token operator">=</span> d<span class="token punctuation">,</span> Y <span class="token operator">/</span><span class="token operator">=</span> d<span class="token punctuation">,</span> Z <span class="token operator">/</span><span class="token operator">=</span> d<span class="token punctuation">,</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Coord3 <span class="token keyword">operator</span><span class="token operator">/</span><span class="token punctuation">(</span>Coord3 a<span class="token punctuation">,</span> lf d<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">/</span><span class="token operator">=</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">friend</span> lf <span class="token function">Dot</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> A<span class="token punctuation">.</span>X <span class="token operator">*</span> B<span class="token punctuation">.</span>X <span class="token operator">+</span> A<span class="token punctuation">.</span>Y <span class="token operator">*</span> B<span class="token punctuation">.</span>Y <span class="token operator">+</span> A<span class="token punctuation">.</span>Z <span class="token operator">*</span> B<span class="token punctuation">.</span>Z<span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">friend</span> Coord3 <span class="token function">Cross</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">{</span>A<span class="token punctuation">.</span>Y <span class="token operator">*</span> B<span class="token punctuation">.</span>Z <span class="token operator">-</span> A<span class="token punctuation">.</span>Z <span class="token operator">*</span> B<span class="token punctuation">.</span>Y<span class="token punctuation">,</span> A<span class="token punctuation">.</span>Z <span class="token operator">*</span> B<span class="token punctuation">.</span>X <span class="token operator">-</span> A<span class="token punctuation">.</span>X <span class="token operator">*</span> B<span class="token punctuation">.</span>Z<span class="token punctuation">,</span> A<span class="token punctuation">.</span>X <span class="token operator">*</span> B<span class="token punctuation">.</span>Y <span class="token operator">-</span> A<span class="token punctuation">.</span>Y <span class="token operator">*</span> B<span class="token punctuation">.</span>X<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">friend</span> lf <span class="token function">norm</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>A<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">Dot</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> A<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">friend</span> lf <span class="token function">abs</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>A<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">sqrt</span><span class="token punctuation">(</span><span class="token function">norm</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">friend</span> lf <span class="token function">Angle</span><span class="token punctuation">(</span><span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>A<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">acos</span><span class="token punctuation">(</span><span class="token function">Dot</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">abs</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">abs</span><span class="token punctuation">(</span>B<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">friend</span> lf <span class="token function">Area2</span><span class="token punctuation">(</span>Coord3 A<span class="token punctuation">,</span> Coord3 B<span class="token punctuation">,</span> Coord3 C<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">abs</span><span class="token punctuation">(</span><span class="token function">Cross</span><span class="token punctuation">(</span>B <span class="token operator">-</span> A<span class="token punctuation">,</span> C <span class="token operator">-</span> A<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">friend</span> lf <span class="token function">Volume6</span><span class="token punctuation">(</span>Coord3 A<span class="token punctuation">,</span> Coord3 B<span class="token punctuation">,</span> Coord3 C<span class="token punctuation">,</span> Coord3 D<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">Dot</span><span class="token punctuation">(</span>D <span class="token operator">-</span> A<span class="token punctuation">,</span> <span class="token function">Cross</span><span class="token punctuation">(</span>B <span class="token operator">-</span> A<span class="token punctuation">,</span> C <span class="token operator">-</span> A<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>     <span class="token comment" spellcheck="true">//四面体体积</span>    <span class="token keyword">friend</span> Coord3 <span class="token function">Centroid</span><span class="token punctuation">(</span>Coord3 A<span class="token punctuation">,</span> Coord3 B<span class="token punctuation">,</span> Coord3 C<span class="token punctuation">,</span> Coord3 D<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span>A <span class="token operator">+</span> B <span class="token operator">+</span> C <span class="token operator">+</span> D<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">4.0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>          <span class="token comment" spellcheck="true">//四面体的重心</span>    <span class="token keyword">friend</span> lf <span class="token function">DistanceToPlane</span><span class="token punctuation">(</span>Coord3 p<span class="token punctuation">,</span> Coord3 p0<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">Dot</span><span class="token punctuation">(</span>p <span class="token operator">-</span> p0<span class="token punctuation">,</span> n<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">abs</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>          <span class="token comment" spellcheck="true">//点p到平面p0-n的有向距离</span>    <span class="token keyword">friend</span> Coord3 <span class="token function">getPlaneProjection</span><span class="token punctuation">(</span>Coord3 p<span class="token punctuation">,</span> Coord3 p0<span class="token punctuation">,</span> <span class="token keyword">const</span> Coord3 <span class="token operator">&amp;</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> p <span class="token operator">-</span> n <span class="token operator">*</span> <span class="token function">Dot</span><span class="token punctuation">(</span>p <span class="token operator">-</span> p0<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//点p在平面p0-n上的投影。n必须为单位向量</span>    <span class="token keyword">friend</span> Coord3 <span class="token function">LinePlaneIntersection</span><span class="token punctuation">(</span>Coord3 p1<span class="token punctuation">,</span> Coord3 p2<span class="token punctuation">,</span> Coord3 p0<span class="token punctuation">,</span> Coord3 n<span class="token punctuation">)</span>                              <span class="token comment" spellcheck="true">//直线p1-p2 与平面p0-n的交点，假设交点唯一存在</span>    <span class="token punctuation">{</span>        Coord3 v <span class="token operator">=</span> p2 <span class="token operator">-</span> p1<span class="token punctuation">;</span>        lf t <span class="token operator">=</span> <span class="token function">Dot</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> p0 <span class="token operator">-</span> p1<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">Dot</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> p2 <span class="token operator">-</span> p1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//分母为0，直线与平面平行或在平面上</span>        <span class="token keyword">return</span> p1 <span class="token operator">+</span> v <span class="token operator">*</span> t<span class="token punctuation">;</span>                          <span class="token comment" spellcheck="true">//如果是线段 判断t是否在0~1之间</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> lf <span class="token function">DistanceToLine</span><span class="token punctuation">(</span>Coord3 P<span class="token punctuation">,</span> Coord3 A<span class="token punctuation">,</span> Coord3 B<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//点P到直线AB的距离</span>    <span class="token punctuation">{</span>        Coord3 v1 <span class="token operator">=</span> B <span class="token operator">-</span> A<span class="token punctuation">,</span> v2 <span class="token operator">=</span> P <span class="token operator">-</span> A<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">abs</span><span class="token punctuation">(</span><span class="token function">Cross</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">abs</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> lf <span class="token function">DistanceToSeg</span><span class="token punctuation">(</span>Coord3 P<span class="token punctuation">,</span> Coord3 A<span class="token punctuation">,</span> Coord3 B<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//点到线段的距离</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>A <span class="token operator">==</span> B<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token function">abs</span><span class="token punctuation">(</span>P <span class="token operator">-</span> A<span class="token punctuation">)</span><span class="token punctuation">;</span>        Coord3 v1 <span class="token operator">=</span> B <span class="token operator">-</span> A<span class="token punctuation">,</span> v2 <span class="token operator">=</span> P <span class="token operator">-</span> A<span class="token punctuation">,</span> v3 <span class="token operator">=</span> P <span class="token operator">-</span> B<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">Dot</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token function">abs</span><span class="token punctuation">(</span>v2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">Dot</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token function">abs</span><span class="token punctuation">(</span>v3<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">fabs</span><span class="token punctuation">(</span><span class="token function">DistanceToLine</span><span class="token punctuation">(</span>P<span class="token punctuation">,</span> A<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> <span class="token keyword">bool</span> <span class="token function">LineDistance3D</span><span class="token punctuation">(</span>Coord3 p1<span class="token punctuation">,</span> Coord3 u<span class="token punctuation">,</span> Coord3 p2<span class="token punctuation">,</span> Coord3 v<span class="token punctuation">,</span> lf <span class="token operator">&amp;</span>s<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//求异面直线 p1+s*u与p2+t*v的公垂线对应的s，如果平行|重合，返回0</span>    <span class="token punctuation">{</span>        lf b <span class="token operator">=</span> <span class="token function">Dot</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> u<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">Dot</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">Dot</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">Dot</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">sgn</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>        lf a <span class="token operator">=</span> <span class="token function">Dot</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">Dot</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> p1 <span class="token operator">-</span> p2<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">Dot</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">Dot</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> p1 <span class="token operator">-</span> p2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> s <span class="token operator">=</span> a <span class="token operator">/</span> b<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> <span class="token keyword">bool</span> <span class="token function">SameSide</span><span class="token punctuation">(</span>Coord3 p1<span class="token punctuation">,</span> Coord3 p2<span class="token punctuation">,</span> Coord3 a<span class="token punctuation">,</span> Coord3 b<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">Dot</span><span class="token punctuation">(</span><span class="token function">Cross</span><span class="token punctuation">(</span>b <span class="token operator">-</span> a<span class="token punctuation">,</span> p1 <span class="token operator">-</span> a<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Cross</span><span class="token punctuation">(</span>b <span class="token operator">-</span> a<span class="token punctuation">,</span> p2 <span class="token operator">-</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//p1和p2是否在线段a-b的同侧</span>    <span class="token keyword">friend</span> <span class="token keyword">bool</span> <span class="token function">PointInTri</span><span class="token punctuation">(</span>Coord3 PP<span class="token punctuation">,</span> Coord3 P<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>                                                                                         <span class="token comment" spellcheck="true">//点P在三角形P0,P1,p中</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">SameSide</span><span class="token punctuation">(</span>PP<span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>               <span class="token function">SameSide</span><span class="token punctuation">(</span>PP<span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>               <span class="token function">SameSide</span><span class="token punctuation">(</span>PP<span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> <span class="token keyword">bool</span> <span class="token function">TriSegIntersection</span><span class="token punctuation">(</span>Coord3 P<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Coord3 A<span class="token punctuation">,</span> Coord3 B<span class="token punctuation">,</span> Coord3 <span class="token operator">&amp;</span>PP<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//三角形P0P1p是否和线段AB相交，如有则为PP</span>    <span class="token punctuation">{</span>        Coord3 n <span class="token operator">=</span> <span class="token function">Cross</span><span class="token punctuation">(</span>P<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> P<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> P<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">Dot</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> B <span class="token operator">-</span> A<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>                         <span class="token comment" spellcheck="true">//线段A-B和平面P0P1p平行或共面</span>        lf t <span class="token operator">=</span> <span class="token function">Dot</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> A<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">Dot</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> B <span class="token operator">-</span> A<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//平面A和直线P1-p有惟一交点</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sgn</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token function">sgn</span><span class="token punctuation">(</span>t <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//不在线段AB上</span>        <span class="token keyword">return</span> <span class="token function">PointInTri</span><span class="token punctuation">(</span>PP <span class="token operator">=</span> A <span class="token operator">+</span> <span class="token punctuation">(</span>B <span class="token operator">-</span> A<span class="token punctuation">)</span> <span class="token operator">*</span> t<span class="token punctuation">,</span> P<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> <span class="token keyword">bool</span> <span class="token function">TriTriIntersection</span><span class="token punctuation">(</span>Coord3 T1<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> Coord3 T2<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//空间两三角形是否相交</span>    <span class="token punctuation">{</span>        Coord3 P<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">TriSegIntersection</span><span class="token punctuation">(</span>T1<span class="token punctuation">,</span> T2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> T2<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> P<span class="token punctuation">)</span> <span class="token operator">||</span>                <span class="token function">TriSegIntersection</span><span class="token punctuation">(</span>T2<span class="token punctuation">,</span> T1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> T1<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> P<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> lf <span class="token function">SegSegDistance</span><span class="token punctuation">(</span>Coord3 a1<span class="token punctuation">,</span> Coord3 b1<span class="token punctuation">,</span> Coord3 a2<span class="token punctuation">,</span> Coord3 b2<span class="token punctuation">,</span> Coord3 <span class="token operator">&amp;</span>ans1<span class="token punctuation">,</span> Coord3 <span class="token operator">&amp;</span>ans2<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//空间两直线上最近点对 返回最近距离 点对保存在ans1 ans2中</span>    <span class="token punctuation">{</span>        Coord3 v1 <span class="token operator">=</span> <span class="token punctuation">(</span>a1 <span class="token operator">-</span> b1<span class="token punctuation">)</span><span class="token punctuation">,</span> v2 <span class="token operator">=</span> <span class="token punctuation">(</span>a2 <span class="token operator">-</span> b2<span class="token punctuation">)</span><span class="token punctuation">;</span>        Coord3 N <span class="token operator">=</span> <span class="token function">Cross</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span><span class="token punctuation">;</span>        Coord3 ab <span class="token operator">=</span> <span class="token punctuation">(</span>a1 <span class="token operator">-</span> a2<span class="token punctuation">)</span><span class="token punctuation">;</span>        lf ans <span class="token operator">=</span> <span class="token function">Dot</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> ab<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">abs</span><span class="token punctuation">(</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>        Coord3 d1 <span class="token operator">=</span> b1 <span class="token operator">-</span> a1<span class="token punctuation">,</span> d2 <span class="token operator">=</span> b2 <span class="token operator">-</span> a2<span class="token punctuation">,</span> cd <span class="token operator">=</span> <span class="token function">Cross</span><span class="token punctuation">(</span>d1<span class="token punctuation">,</span> d2<span class="token punctuation">)</span><span class="token punctuation">;</span>        lf nd <span class="token operator">=</span> <span class="token function">norm</span><span class="token punctuation">(</span>cd<span class="token punctuation">)</span><span class="token punctuation">,</span> t1 <span class="token operator">=</span> <span class="token function">Dot</span><span class="token punctuation">(</span><span class="token function">Cross</span><span class="token punctuation">(</span>a2 <span class="token operator">-</span> a1<span class="token punctuation">,</span> d2<span class="token punctuation">)</span><span class="token punctuation">,</span> cd<span class="token punctuation">)</span> <span class="token operator">/</span> nd<span class="token punctuation">,</span> t2 <span class="token operator">=</span> <span class="token function">Dot</span><span class="token punctuation">(</span><span class="token function">Cross</span><span class="token punctuation">(</span>a2 <span class="token operator">-</span> a1<span class="token punctuation">,</span> d1<span class="token punctuation">)</span><span class="token punctuation">,</span> cd<span class="token punctuation">)</span> <span class="token operator">/</span> nd<span class="token punctuation">;</span>        <span class="token keyword">return</span> ans1 <span class="token operator">=</span> a1 <span class="token operator">+</span> <span class="token punctuation">(</span>b1 <span class="token operator">-</span> a1<span class="token punctuation">)</span> <span class="token operator">*</span> t1<span class="token punctuation">,</span> ans2 <span class="token operator">=</span> a2 <span class="token operator">+</span> <span class="token punctuation">(</span>b2 <span class="token operator">-</span> a2<span class="token punctuation">)</span> <span class="token operator">*</span> t2<span class="token punctuation">,</span> <span class="token function">fabs</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">friend</span> <span class="token keyword">bool</span> <span class="token function">InsideWithMinDistance</span><span class="token punctuation">(</span>Coord3 PP<span class="token punctuation">,</span> Coord3 <span class="token operator">*</span>P<span class="token punctuation">,</span> lf dist<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//判断PP是否在三角形P中，并且到三条边的距离都至少为dist。保证P,A,B,C共面</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">PointInTri</span><span class="token punctuation">(</span>PP<span class="token punctuation">,</span> P<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>                   <span class="token function">DistanceToLine</span><span class="token punctuation">(</span>PP<span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">>=</span> dist <span class="token operator">||</span>               <span class="token function">DistanceToLine</span><span class="token punctuation">(</span>PP<span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">>=</span> dist <span class="token operator">||</span>               <span class="token function">DistanceToLine</span><span class="token punctuation">(</span>PP<span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> P<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">>=</span> dist<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">struct</span> Sphere<span class="token punctuation">{</span>    Coord3 o<span class="token punctuation">;</span>    lf r<span class="token punctuation">;</span>    Coord3 <span class="token function">point</span><span class="token punctuation">(</span>lf lat<span class="token punctuation">,</span> lf lng<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token comment" spellcheck="true">//经纬度确定球面上一点</span>    <span class="token punctuation">{</span>        lat <span class="token operator">*</span><span class="token operator">=</span> PI <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span>        lng <span class="token operator">*</span><span class="token operator">=</span> PI <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> o <span class="token operator">+</span> r <span class="token operator">*</span> Coord3<span class="token punctuation">{</span><span class="token function">cos</span><span class="token punctuation">(</span>lat<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">cos</span><span class="token punctuation">(</span>lng<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cos</span><span class="token punctuation">(</span>lat<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">sin</span><span class="token punctuation">(</span>lng<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sin</span><span class="token punctuation">(</span>lat<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">struct</span> ConvexPolyhedron <span class="token comment" spellcheck="true">//空间多边形和凸包问题</span><span class="token punctuation">{</span>    <span class="token keyword">struct</span> Face    <span class="token punctuation">{</span>        <span class="token keyword">int</span> v<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token function">Face</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">,</span> <span class="token keyword">int</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span> v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">,</span> v<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> b<span class="token punctuation">,</span> v<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">;</span> <span class="token punctuation">}</span>        Coord3 <span class="token function">Normal</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Coord3<span class="token operator">></span> <span class="token operator">&amp;</span>P<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">Cross</span><span class="token punctuation">(</span>P<span class="token punctuation">[</span>v<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">-</span> P<span class="token punctuation">[</span>v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> P<span class="token punctuation">[</span>v<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">-</span> P<span class="token punctuation">[</span>v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>        <span class="token keyword">bool</span> <span class="token function">CanSee</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Coord3<span class="token operator">></span> <span class="token operator">&amp;</span>P<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token function">Dot</span><span class="token punctuation">(</span>P<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> P<span class="token punctuation">[</span>v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">Normal</span><span class="token punctuation">(</span>P<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment" spellcheck="true">//f是否能看见P[i]</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>Face<span class="token operator">></span> faces<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span>Coord3<span class="token operator">></span> p<span class="token punctuation">;</span>    <span class="token function">ConvexPolyhedron</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Coord3<span class="token operator">></span> P<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">p</span><span class="token punctuation">(</span>P<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            P<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> Coord3<span class="token punctuation">{</span><span class="token function">randEPS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">randEPS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">randEPS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">vis</span><span class="token punctuation">(</span>P<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span><span class="token punctuation">(</span>P<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        faces<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">Face</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//由于已经进行扰动，前三个点不共线</span>        faces<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">Face</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> P<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            vector<span class="token operator">&lt;</span>Face<span class="token operator">></span> next<span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> faces<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//计算每条边的“左面”的可见性</span>            <span class="token punctuation">{</span>                Face <span class="token operator">&amp;</span>f <span class="token operator">=</span> faces<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">int</span> res <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">CanSee</span><span class="token punctuation">(</span>P<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">)</span>                    next<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token operator">++</span>k<span class="token punctuation">)</span>                    vis<span class="token punctuation">[</span>f<span class="token punctuation">.</span>v<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">[</span>f<span class="token punctuation">.</span>v<span class="token punctuation">[</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> res<span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> faces<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> k <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token operator">++</span>k<span class="token punctuation">)</span>                <span class="token punctuation">{</span>                    <span class="token keyword">int</span> a <span class="token operator">=</span> faces<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> b <span class="token operator">=</span> faces<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">[</span><span class="token punctuation">(</span>k <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>vis<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">!=</span> vis<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> vis<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//(a,b)是分界线，左边对P[i]可见</span>                        next<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">Face</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token function">swap</span><span class="token punctuation">(</span>faces<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    lf <span class="token function">randEPS</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">lf</span><span class="token punctuation">(</span>RAND_MAX<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> EPS<span class="token punctuation">;</span> <span class="token punctuation">}</span>    Coord3 <span class="token function">centroid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//三维凸包重心</span>    <span class="token punctuation">{</span>        Coord3 C <span class="token operator">=</span> p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> tot<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        lf totv <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> faces<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Coord3 p1 <span class="token operator">=</span> p<span class="token punctuation">[</span>faces<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p2 <span class="token operator">=</span> p<span class="token punctuation">[</span>faces<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p3 <span class="token operator">=</span> p<span class="token punctuation">[</span>faces<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            lf v <span class="token operator">=</span> <span class="token operator">-</span><span class="token function">Volume6</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">,</span> C<span class="token punctuation">)</span><span class="token punctuation">;</span>            totv <span class="token operator">+</span><span class="token operator">=</span> v<span class="token punctuation">;</span>            tot <span class="token operator">+</span><span class="token operator">=</span> v <span class="token operator">*</span> <span class="token function">Centroid</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">,</span> C<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> tot <span class="token operator">/</span> totv<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    lf <span class="token function">dist</span><span class="token punctuation">(</span>Coord3 C<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//凸包内一点到表面最近距离</span>    <span class="token punctuation">{</span>        lf ans <span class="token operator">=</span> INF<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> faces<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token punctuation">{</span>            Coord3 p1 <span class="token operator">=</span> p<span class="token punctuation">[</span>faces<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p2 <span class="token operator">=</span> p<span class="token punctuation">[</span>faces<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p3 <span class="token operator">=</span> p<span class="token punctuation">[</span>faces<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>v<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            ans <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>ans<span class="token punctuation">,</span> <span class="token function">fabs</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token function">Volume6</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">,</span> C<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">Area2</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> ans<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> Template </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ICPC模板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>高精度</title>
      <link href="/2019/02/03/2019-02-03-gao-jing-du/"/>
      <url>/2019/02/03/2019-02-03-gao-jing-du/</url>
      
        <content type="html"><![CDATA[## 无符号整数[使用范例](https://vjudge.net/solution/16907599)vector自带大小比较为字典序比较， `!=` 、 `==` 运算，其余需要时一定记得重载！减法，当被减数小于减数时减为0。```cppstruct Wint : vector<int> //继承vector{static const int width = 9, base = 1e9;Wint(unsigned long long n = 0) //普通初始化，当整型数和Wint同时运算时会提升至Wint{for (; n; n /= base)push_back(n % base);}explicit Wint(const string &amp;s) //字符串初始化函数，未判断字符串合法情况{for (int len = int(s.size() - 1) / width + 1, b, e, i = 0; i &lt; len; ++i)for (e = s.size() - i * width, b = max(0, e - width), push_back(0); b != e; ++b)back() = back() * 10 + s[b] - '0';trim(0);}Wint &amp;trim(bool up = 1) //去前导0，是否需要进位，很常用的小函数，为方便返回自身{for (int i = 1; up &amp;&amp; i &lt; size(); ++i){if ((*this)[i - 1] &lt; 0)--(*this)[i], (*this)[i - 1] += base;if ((*this)[i - 1] &gt;= base)(*this)[i] += (*this)[i - 1] / base, (*this)[i - 1] %= base;}while (!empty() &amp;&amp; back() &lt;= 0) pop_back(); for (; up &amp;&amp; !empty() back()&gt;= base; (*this)[size() - 2] %= base)push_back(back() / base);return *this;}friend istream &amp;operator&gt;&gt;(istream &amp;is, Wint &amp;n){string s; //懒return is &gt;&gt; s, n = Wint(s), is;}friend ostream &amp;operator&lt;&lt;(ostream &amp;os, const wint &amp;n) { if (n.empty()) return os.put('0'); os &lt;&lt; n.back(); char ch="os.fill('0');" for (int i="n.size()" - 2; ~i; --i) os.width(n.width), n[i]; os.fill(ch), os; } friend bool operator&lt;(const &amp;a, &amp;b) (a.size() !="b.size())" a.size() &lt; b.size(); 1; (a[i] a[i] b[i]; 0; operator&gt;(const Wint &amp;a, const Wint &amp;b) { return b &lt; a; }friend bool operator&lt;=(const wint &amp;a, const &amp;b) { return !(a&gt; b); }friend bool operator&gt;=(const Wint &amp;a, const Wint &amp;b) { return !(a &lt; b); }Wint &amp;operator+=(const Wint &amp;b){if (size() &lt; b.size())resize(b.size()); //保证有足够的位数for (int i = 0; i &lt; b.size(); ++i)(*this)[i] += b[i];return trim(); //单独进位防自运算}friend Wint operator+(Wint a, const Wint &amp;b) { return a += b; }Wint &amp;operator++() { return *this += 1; } //前置版本，懒Wint operator++(int)  //后置版本{Wint b(*this);return ++*this, b;}Wint &amp;operator-=(const Wint &amp;b) //a<b会使a变为0 {="" if="" (size()="" <="" b.size())="" resize(b.size());="" 保证有足够的位数="" for="" (int="" i="0;" b.size();="" ++i)="" (*this)[i]="" -="b[i];" return="" trim();="" 单独进位防自运算="" }="" friend="" wint="" operator-(wint="" a,="" const="" &b)="" a="" &operator--()="" *this="" 前置版本，懒="" operator--(int)="" 后置版本="" b(*this);="" --*this,="" b;="" &operator*="(const" 高精度乘法，常规写法="" c;="" c.assign(size()="" +="" b.size(),="" 0);="" j="0," k,="" l;="" ++j)="" (b[j])="" 稀疏优化，特殊情况很有效="" size();="" unsigned="" long="" n="(*this)[i];" (n="" *="b[j]," k="i" j;="" n;="base)" c[k++]="" %="" base;="" (l="i" c[l]="">= base || l + 1 &lt; k; c[l++] %= base)c[l + 1] += c[l] / base;}return swap(c), trim(0);}/*Wint&amp; operator*=(const Wint &amp;b)//一种效率略高但对位宽有限制的写法{vector<unsigned long=""> n(size()+b.size(),0);//防爆int//乘法算完后统一进位效率高，防止乘法溢出（unsigned long long范围0~1.8e19）//位宽为9时size()不能超过18（十进制162位），位宽为8时size()不能超过1800（十进制14400位）等等。for(int j=0; j!=b.size(); ++j)if(b[j])//稀疏优化，特殊情况很有效for(int i=0; i!=size(); ++i)n[i+j]+=(unsigned long long)(*this)[i]*b[j];for(int i=1; i<n.size(); ++i)="" 这里用<防止位数0，单独进位防自运算="" n[i]+="n[i-1]/base,n[i-1]%=base;" return="" assign(n.begin(),n.end()),trim(0);="" }="" wint&="" operator*="(const" wint="" &b)="" fft优化乘法，注意double仅15位有效数字，调小wint::width不超过2，计算自2*log2(base)+2*log2(len)<53="" {="" vector<ll=""> ax(begin(),end()),bx(b.begin(),b.end());    ax=FFT(size()+b.size()).ask(ax,bx);    for(int i=1; i<ax.size(); ++i)="" ax[i]+="ax[i-1]/base,ax[i-1]%=base;" return="" assign(ax.begin(),ax.end()),trim(0);="" }="" wint&="" operator*="(const" wint="" &b)="" ntt优化，wint::width不超过2="" {="" vector<ll=""> ax(begin(),end()),bx(b.begin(),b.end());    ax=FNTT(size()+b.size(),(7&lt;&lt;26)+1,3).ask(ax,bx); 1 for(int i="1;" i<ax.size(); ++i)="" ax[i]+="ax[i-1]/base,ax[i-1]%=base;" return="" assign(ax.begin(),ax.end()),trim(0);="" }="" *="" friend="" wint="" operator*(wint="" a,="" const="" &b)="" {="" a="" &operator="(wint" b)="" r,="" c,="" d="b.base" (b.back()="" +="" 1);="" *this="" b="" c.assign(size(),="" 0);="" for="" (int="" -="" 1;="" ~i;="" --i)="" r.insert(r.begin(),="" (*this)[i]);="" unsigned="" long="" s="0;" j="b.size();">= b.size(); --j) //b.size()==0肯定第一行就出问题的s = s * b.base + (j &lt; r.size() ? r[j] : 0);for (d = c[i] = s / b.back(), d *= b; r &lt; d; r += b)--c[i];r -= d;}return swap(c), trim(0); //r为加倍后的余数，可通过高精度除低精度得到真正余数，此处略}friend Wint operator/(Wint a, const Wint &amp;b) { return a /= b; }Wint &amp;operator%=(const Wint &amp;b) { return *this -= *this / b * b; }friend Wint operator%(Wint a, const Wint &amp;b) { return a %= b; }//开平方，改自ZJU模板bool cmp(long long c, int d, const Wint &amp;b) const{if ((int)b.size() - (int)size() &lt; d + 1 &amp;&amp; c)return 1;long long t = 0;for (int i = b.size() - 1, lo = -(base &lt;&lt; 1); lo &lt;= 0 1 t &amp;&amp; &lt;="0" ~i; --i) if (t="t" * base - b[i], d i size()) +="(*this)[i" 1] c; return&gt; 0;}Wint &amp;sub(const Wint &amp;b, long long k, int d){int l = b.size() + d;for (int i = d + 1; i &lt;= 1 l; ++i) { long tmp="(*this)[i]" - k * b[i d 1]; if (tmp &lt; 0) (*this)[i + 1] base 1) base; (*this)[i]="tmp" } else for (int i="l" 1; size() &amp;&amp; 0; return trim(0); friend wint sqrt(wint a) n; n.assign(a.size()&gt;&gt; 1, 0);for (int i = n.size() - 1, l, r; ~i; --i){for (l = 0, r = a.base, n[i] = l + r &gt;&gt; 1; r - l &gt; 1; n[i] = l + r &gt;&gt; 1){if (n.cmp(n[i], i - 1, a))r = n[i];elsel = n[i];}a.sub(n, n[i], i - 1), n[i] += l + r &gt;&gt; 1;}for (int i = 0; i &lt; n.size(); ++i)n[i] &gt;&gt;= 1;return n.trim(0);}/*friend Wint sqrt(const Wint &amp;a)//常规牛顿迭代实现的开平方算法，慢但是好敲{    Wint b=a,c=(b+1)/2;    while(b!=c)swap(b,c),c=(b+a/b)/2;    return c;}friend Wint sqrt(const Wint &amp;a){    Wint ret,t;    ret.assign((a.size()+1)&gt;&gt;1,0);    for(int i=ret.size()-1,l,r; ~i; --i)    {        for(l=0,r=a.base; r-l&gt;1;)        {            ret[i]=l+(r-l)/2;            t=ret*ret;            if(a<t)r=ret[i]; else="" l="ret[i];" }="" if(!l&&i="=ret.size()-1)ret.pop_back();" ret[i]="l;" return="" ret;="" *="" };="" ```="" ##="" 分数="" [使用示范](https:="" vjudge.net="" solution="" 16733633)。="" ```cpp="" struct="" fraction="" {="" ll="" num,="" den;="" fraction(ll="" n="0," d="1)" :="" num(n),="" den(d)="" den),="" num="d," den="" d;="" if="" (den="" <="" 0)="" friend="" operator+(const="" &a,="" const="" &b)="" b.den);="" fraction(b.den="" a.num="" +="" a.den="" b.num,="" &operator+="(const" &c)="" *this="*this" c;="" operator-()="" r(*this);="" r.num="-r.num," r;="" operator-(const="" -c="" a;="" &operator-="(const" -="" operator*(const="" fraction(a.num="" &operator*="(const" operator="" (const="" b.den,="" b.num);="" &operator="(const" operator%(const="" c.den="" %="" (c.num="" a.den),="" c.den);="" &operator%="(const" bool="" b.den="=" b.num;="" operator!="(const" !(a="=" b);="" operator<(const="">(const Fraction &amp;a, const Fraction &amp;b) { return b &lt; a; }friend bool operator&lt;=(const fraction &amp;a, const &amp;b) { return !(a&gt; b); }friend bool operator&gt;=(const Fraction &amp;a, const Fraction &amp;b) { return !(a &lt; b); }friend Fraction abs(Fraction f){if (f.num &lt; 0)f.num = -f.num;return f;}friend ostream &amp;operator&lt;&lt;(ostream 0 1 &amp;os, const fraction &amp;f) { return !f.num ? os &lt;&lt; : f.den="=" f.num ' f.den; } }; ``` ## bitset高精度 代替整型进行位运算，更方便并且可以处理超过最大整形范围大小的位集合。 你可以把bitset看作可以位运算的bool数组，换言之，bitset的大小是固定的。因此，用bitset做状态压缩是很方便的，也可以方便的实现集合的交并补操作。 bitset仅重载了相等不等和位运算符，原生不支持四则运算和大小比较，所以很少代替高精度数。 ```cpp typedef bitset&lt;127&gt; Bint;/*Bint b(unsigned long long u=0);//用u的低N位初始化b，N是一个可转成ULL类型的常量表达式，高位补0Bint bs(string s,int pos,int m=string::npos,char zero='0',char one='1');//用s从pos位开始的m位初始化b，s中只含zero和oneb.size();//b的大小，即Nb.count();//b中1的个数b[pos];//b中pos位的引用b.set();//b全赋1b.reset();//b全赋0b.flip();//b全反转b.to_ull();//b转成unsigned long long，b.size()&gt;64时出错b.to_string(char zero='0',char one='1');//按参数输出字符串os&lt;<b; 按'0'和'1'打印b="" is="">&gt;b;//按'0'和'1'读入b，当下一个字符不是'0'或'1'或读到b.size()个数后停止==、!=、&lt;&lt;、&gt;&gt;、&amp;、|、^//保持它们在整型运算中的含义*///大小比较，其他运算符类似bool operator&lt;(const bint &amp;a, const &amp;b) { for (int i="a.size()" - 1; ~i; --i) if (a[i] !="b[i])" return a[i] &lt; b[i]; 0; } bool operator!="(const" 加法 operator+(const b.any() ? (a ^ b) + ((a &amp; &lt;&lt; 1) : a; &amp;operator+="(Bint" a="a" b; 减法 operator-(const &amp;a) bint(1) ~a; &amp;operator-="(Bint" operator-(bint a, 乘法 operator*(bint r(0); (; b.any(); b&gt;&gt;= 1, a += a)if (b[0])r += a;return r;}Bint &amp;operator*=(Bint &amp;a, const Bint &amp;b) { return a = a * b; }//整除，取模Bint operator%=(Bint ÷nd, const Bint &amp;divisor){if (dividend &lt; divisor || divisor.none())return dividend;Bint c, res = 0;for (int k; divisor &lt; dividend;){for (k = 0, c = divisor; !(dividend &lt; c); c &lt;&lt;= 1, ++k) if (dividend &lt; divisor + c) { res &lt;&lt; k; break; } (k - 1); dividend&gt;&gt; 1;}return dividend; //res是商}//输入输出，bitset已经原生重载了输入输出运算符，避免歧义。istream &amp;getb(istream &amp;is, Bint &amp;val){int sign = 1, ch = is.get();for (; !isdigit(ch) &amp;&amp; ch != EOF; ch = is.get())if (ch == '-')sign = -sign;for (val = 0; isdigit(ch); ch = is.get())val = (val &lt;&lt; 3) + (val &lt;&lt; 1) + (ch ^ '0');if (sign == -1)val = -val;return is.putback(ch);}ostream &amp;putb(ostream &amp;os, const Bint &amp;val){if (Bint(9) &lt; val)putb(os, val / 10);return os.put(val.to_ulong() % 10 + '0');}```<!--=--><!--(const--><!--、--></b;><!--(ostream--><!--=(const--></t)r=ret[i];><!--=--><!--=--><!--26)+1,3).ask(ax,bx);--></ax.size();></ax.size();></n.size();></unsigned></b会使a变为0><!--=(const--><!--(ostream--><!--=--></int><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> Template </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ICPC模板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++语言相关</title>
      <link href="/2019/02/03/2019-02-03-c-yu-yan-xiang-guan/"/>
      <url>/2019/02/03/2019-02-03-c-yu-yan-xiang-guan/</url>
      
        <content type="html"><![CDATA[<h2 id="GCC内置位运算"><a href="#GCC内置位运算" class="headerlink" title="GCC内置位运算"></a>GCC内置位运算</h2><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">__builtin_clz</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//求前缀0的个数</span><span class="token keyword">int</span> <span class="token function">__builtin_ctz</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//求后缀0的个数</span><span class="token keyword">int</span> <span class="token function">__builtin_ffs</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//x的二进制末尾最后一个1的位置，从1开始</span><span class="token keyword">int</span> <span class="token function">__builtin_popcount</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//x二进制中1的个数，相当于bitset::count()</span><span class="token keyword">int</span> <span class="token function">__builtin_parity</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//判断x的二进制中1的个数的奇（1）偶（0）性，这些函数都有相应的usigned long和usigned long long版本，只需要在函数名后面加上l或ll就可以了，比如__builtin_clzll</span></code></pre><h2 id="开栈"><a href="#开栈" class="headerlink" title="开栈"></a>开栈</h2><h3 id="For-C"><a href="#For-C" class="headerlink" title="For C++"></a>For C++</h3><pre class=" language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">pragma</span> comment(linker, "/STACK:102400000,102400000") </span><span class="token comment" spellcheck="true">//For C++</span></code></pre><h3 id="For-G"><a href="#For-G" class="headerlink" title="For G++"></a>For G++</h3><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//For G++</span><span class="token punctuation">{</span>    <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">256</span> <span class="token operator">&lt;&lt;</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//256MB</span>    <span class="token keyword">char</span> <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span> <span class="token operator">+</span> size<span class="token punctuation">;</span>    __asm__ <span class="token function">__volatile__</span><span class="token punctuation">(</span><span class="token string">"movq %0, %%rsp\n"</span> <span class="token operator">::</span><span class="token string">"r"</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//64bit，一定要最后写一句`exit(0);`退出程序，否则会得到非零退出的错误，可能RE。</span><span class="token punctuation">}</span></code></pre><h2 id="读入优化"><a href="#读入优化" class="headerlink" title="读入优化"></a>读入优化</h2><h3 id="C文件指针版"><a href="#C文件指针版" class="headerlink" title="C文件指针版"></a>C文件指针版</h3><pre class=" language-cpp"><code class="language-cpp">ll <span class="token function">getll</span><span class="token punctuation">(</span>FILE <span class="token operator">*</span>in <span class="token operator">=</span> <span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    ll val <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> sgn <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> ch <span class="token operator">=</span> <span class="token function">getc</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> <span class="token operator">!</span><span class="token function">isdigit</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> ch <span class="token operator">!=</span> <span class="token constant">EOF</span><span class="token punctuation">;</span> ch <span class="token operator">=</span> <span class="token function">getc</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token string">'-'</span><span class="token punctuation">)</span>            sgn <span class="token operator">=</span> <span class="token operator">-</span>sgn<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> <span class="token function">isdigit</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span> ch <span class="token operator">=</span> <span class="token function">getc</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span>        val <span class="token operator">=</span> val <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> ch <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">ungetc</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span> in<span class="token punctuation">)</span><span class="token punctuation">,</span> sgn <span class="token operator">*</span> val<span class="token punctuation">;</span><span class="token punctuation">}</span>lf <span class="token function">getlf</span><span class="token punctuation">(</span>FILE <span class="token operator">*</span>in <span class="token operator">=</span> <span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    lf val <span class="token operator">=</span> <span class="token function">getll</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">,</span> p <span class="token operator">=</span> val <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>    ll ch <span class="token operator">=</span> <span class="token function">getc</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token string">'.'</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>ch <span class="token operator">=</span> <span class="token function">getc</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">isdigit</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span> ch <span class="token operator">=</span> <span class="token function">getc</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">)</span>            val <span class="token operator">+</span><span class="token operator">=</span> <span class="token punctuation">(</span>p <span class="token operator">/</span><span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>ch <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">ungetc</span><span class="token punctuation">(</span>ch<span class="token punctuation">,</span> in<span class="token punctuation">)</span><span class="token punctuation">,</span> val<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h3 id="仿C-IO流沙雕版"><a href="#仿C-IO流沙雕版" class="headerlink" title="仿C++IO流沙雕版"></a>仿C++IO流沙雕版</h3><p><a href="https://vjudge.net/solution/14388745" target="_blank" rel="noopener">使用前</a></p><p><a href="https://vjudge.net/solution/14388713" target="_blank" rel="noopener">使用后</a></p><pre class=" language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">define</span> cin kin</span><span class="token keyword">struct</span> Istream<span class="token punctuation">{</span>    <span class="token keyword">char</span> b<span class="token punctuation">[</span><span class="token number">20</span> <span class="token operator">&lt;&lt;</span> <span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">*</span>i<span class="token punctuation">,</span> <span class="token operator">*</span>e<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//20MB</span>    <span class="token function">Istream</span><span class="token punctuation">(</span>FILE <span class="token operator">*</span>in<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">i</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">e</span><span class="token punctuation">(</span>b <span class="token operator">+</span> <span class="token function">fread</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token operator">*</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> in<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">bool</span> <span class="token function">eof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> i <span class="token operator">==</span> e<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Istream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">>></span><span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token operator">&amp;</span>val<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> val <span class="token operator">=</span> <span class="token function">strtoll</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token operator">&amp;</span>i<span class="token punctuation">,</span> <span class="token number">10</span> <span class="token comment" spellcheck="true">/*进制，取值2~36*/</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Istream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">>></span><span class="token punctuation">(</span>ll <span class="token operator">&amp;</span>val<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//极限快</span>    <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">*</span>i <span class="token operator">&lt;</span> <span class="token string">'0'</span><span class="token punctuation">)</span>            <span class="token operator">++</span>i<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//无符号</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>val <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token operator">*</span>i <span class="token operator">>=</span> <span class="token string">'0'</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            val <span class="token operator">=</span> <span class="token punctuation">(</span>val <span class="token operator">&lt;&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>val <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token operator">*</span>i <span class="token operator">-</span> <span class="token string">'0'</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Istream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">>></span><span class="token punctuation">(</span><span class="token keyword">double</span> <span class="token operator">&amp;</span>val<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> val <span class="token operator">=</span> <span class="token function">strtod</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    Istream <span class="token operator">&amp;</span><span class="token keyword">operator</span><span class="token operator">>></span><span class="token punctuation">(</span>string <span class="token operator">&amp;</span>s<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">eof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isspace</span><span class="token punctuation">(</span><span class="token operator">*</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token operator">++</span>i<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">!</span><span class="token function">eof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">isspace</span><span class="token punctuation">(</span><span class="token operator">*</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>            s <span class="token operator">+</span><span class="token operator">=</span> <span class="token operator">*</span>i<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">*</span><span class="token keyword">this</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token function">kin</span><span class="token punctuation">(</span><span class="token constant">stdin</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ACM </category>
          
          <category> Template </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ICPC模板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>函数程序设计实验十二：带变量的布尔表达式</title>
      <link href="/2018/12/11/2018-12-11-dai-bian-liang-de-bu-er-biao-da-shi/"/>
      <url>/2018/12/11/2018-12-11-dai-bian-liang-de-bu-er-biao-da-shi/</url>
      
        <content type="html"><![CDATA[<pre class=" language-haskell"><code class="language-haskell"><span class="token keyword">module</span> <span class="token constant">Lab3</span> <span class="token keyword">where</span><span class="token import_statement"><span class="token keyword">import</span> Data.List</span><span class="token comment" spellcheck="true">{-一个布尔表达式就像一个算术表达式，只是这里的值都是布尔值True和False，其中的变量也只能代入布尔值，各种运算用运算表给出。布尔表达式的另一种解读是表示命题，如文件lab3.pdf所讲。如果不理解命题，就看作布尔表达式好了。本作业要求判断一个布尔表达式是不是永真式：即无论将变量代入什么值，其结果总是True。一、定义命题类型及其Show特例命题的集合可以如下定义-真命题(记作T)和假命题(记作F)是命题；-由一个字母表示的命题变元是一个命题；-如果P是命题,则它的否定是一个命题,记作~P；"~"称为否定联结词；-如果p,q是命题,则它们的合取是一个命题,记作p&amp;&amp;q; "&amp;&amp;"称为合取联结词；-如果p,q是命题,则它们的析取是一个命题,记作p||q; "||"称为析取联结词；-如果p,q是命题,则它们的蕴含是一个命题,记作p=>q; "=>"称为蕴含联结词；-所有的命题由以上规则经过有限步生成。所以,命题的集合是一个归纳定义的集合,可以用代数类型描述：-}</span><span class="token keyword">data</span> <span class="token constant">Prop</span><span class="token operator">=</span><span class="token constant">Const</span> <span class="token constant">Bool</span>    <span class="token operator">|</span> <span class="token constant">Var</span> <span class="token constant">Char</span>    <span class="token operator">|</span> <span class="token constant">Not</span> <span class="token constant">Prop</span>    <span class="token operator">|</span> <span class="token constant">And</span> <span class="token constant">Prop</span> <span class="token constant">Prop</span>    <span class="token operator">|</span> <span class="token constant">Or</span> <span class="token constant">Prop</span> <span class="token constant">Prop</span>    <span class="token operator">|</span> <span class="token constant">Imply</span> <span class="token constant">Prop</span> <span class="token constant">Prop</span>    <span class="token keyword">deriving</span> <span class="token constant">Eq</span><span class="token comment" spellcheck="true">{-习题1试将类型Prop定义成类Show的特例,使得Prop中元素能够显示成定义中我们习惯的表示。例如,Var 'A',And (Var 'P') (Var 'Q')分别显示成A和P&amp;&amp;Q等。-}</span><span class="token keyword">instance</span> <span class="token constant">Show</span> <span class="token constant">Prop</span> <span class="token keyword">where</span>    <span class="token builtin">show</span> <span class="token punctuation">(</span><span class="token constant">Const</span> <span class="token constant">True</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">"True"</span>    <span class="token builtin">show</span> <span class="token punctuation">(</span><span class="token constant">Const</span> <span class="token constant">False</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">"False"</span>    <span class="token builtin">show</span> <span class="token punctuation">(</span><span class="token constant">Var</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span>    <span class="token builtin">show</span> <span class="token punctuation">(</span><span class="token constant">Not</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">"~"</span><span class="token operator">++</span><span class="token builtin">show</span> <span class="token hvariable">x</span>    <span class="token builtin">show</span> <span class="token punctuation">(</span><span class="token constant">And</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token builtin">show</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token operator">++</span><span class="token string">"&amp;&amp;"</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token builtin">show</span> <span class="token hvariable">y</span><span class="token punctuation">)</span>    <span class="token builtin">show</span> <span class="token punctuation">(</span><span class="token constant">Or</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token builtin">show</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token operator">++</span><span class="token string">"||"</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token builtin">show</span> <span class="token hvariable">y</span><span class="token punctuation">)</span>    <span class="token builtin">show</span> <span class="token punctuation">(</span><span class="token constant">Imply</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token builtin">show</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token operator">++</span><span class="token string">"=>"</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token builtin">show</span> <span class="token hvariable">y</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">{-习题2定义下列值p1,p2,p3::Prop使得它们个表示下列命题:A&amp;&amp;~AA||~AA=>(A&amp;&amp;B)-}</span><span class="token hvariable">p1</span><span class="token operator">=</span><span class="token constant">And</span> <span class="token punctuation">(</span><span class="token constant">Var</span> <span class="token char">'A'</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">Not</span> <span class="token punctuation">(</span><span class="token constant">Var</span> <span class="token char">'A'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token hvariable">p2</span><span class="token operator">=</span><span class="token constant">Or</span> <span class="token punctuation">(</span><span class="token constant">Var</span> <span class="token char">'A'</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">Not</span> <span class="token punctuation">(</span><span class="token constant">Var</span> <span class="token char">'A'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token hvariable">p3</span><span class="token operator">=</span><span class="token constant">Imply</span> <span class="token punctuation">(</span><span class="token constant">Var</span> <span class="token char">'A'</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">And</span> <span class="token punctuation">(</span><span class="token constant">Var</span> <span class="token char">'A'</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token constant">Var</span> <span class="token char">'B'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">{-二、命题真值表一个命题或者真,或者假。例如,不包含变元的命题T表示真命题,命 题F表示假命题。包含变元的命题的真假依赖于变元表示命题的真假,所以,一个命题可以看作它包含的变元的函数,称为真值函数,其中每个变元的取 值为真或者假,分别用TVue和False表示。每个命题的取值和其中变元的关系可以用一个表来表示,称之为命题函数的真值表。以下是命题联结词的真值表：对应任意的命题函数，给定变元的一个代换，根据上述真值表可计算相应的真值。例如,命题p3:A=>(A &amp;&amp; B)在代换[('A',True),('B',False)]的真值是False。我们可以用下列类型表示代换：-}</span><span class="token keyword">type</span> <span class="token constant">Subst</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token constant">Char</span><span class="token punctuation">,</span><span class="token constant">Bool</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true">{-习题3试根据以上解释定义函数:-}</span><span class="token hvariable">eval</span><span class="token operator">::</span><span class="token constant">Subst</span><span class="token operator">-></span><span class="token constant">Prop</span><span class="token operator">-></span><span class="token constant">Bool</span><span class="token comment" spellcheck="true">{-例如>eval [('A',True),('B',False)] p3False-}</span><span class="token hvariable">eval</span> <span class="token hvariable">sub</span> <span class="token punctuation">(</span><span class="token constant">Const</span> <span class="token hvariable">p</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token hvariable">p</span><span class="token hvariable">eval</span> <span class="token hvariable">sub</span> <span class="token punctuation">(</span><span class="token constant">Var</span> <span class="token hvariable">p</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token hvariable">getBool</span> <span class="token hvariable">sub</span> <span class="token hvariable">p</span><span class="token punctuation">)</span> <span class="token keyword">where</span>    <span class="token hvariable">getBool</span> <span class="token hvariable">sub</span> <span class="token hvariable">x</span><span class="token operator">=</span>        <span class="token keyword">if</span> <span class="token builtin">length</span> <span class="token hvariable">xs</span> <span class="token operator">></span><span class="token number">1</span>            <span class="token keyword">then</span> <span class="token builtin">error</span> <span class="token string">"Variable has more than 2 values."</span>            <span class="token keyword">else</span> <span class="token builtin">head</span> <span class="token hvariable">xs</span>        <span class="token keyword">where</span> <span class="token hvariable">xs</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token hvariable">k</span><span class="token operator">|</span><span class="token punctuation">(</span><span class="token hvariable">y</span><span class="token punctuation">,</span><span class="token hvariable">k</span><span class="token punctuation">)</span><span class="token operator">&lt;-</span><span class="token hvariable">sub</span><span class="token punctuation">,</span><span class="token hvariable">x</span><span class="token operator">==</span><span class="token hvariable">y</span><span class="token punctuation">]</span><span class="token hvariable">eval</span> <span class="token hvariable">sub</span> <span class="token punctuation">(</span><span class="token constant">Not</span> <span class="token hvariable">p</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token builtin">not</span> <span class="token punctuation">(</span><span class="token hvariable">eval</span> <span class="token hvariable">sub</span> <span class="token hvariable">p</span><span class="token punctuation">)</span><span class="token hvariable">eval</span> <span class="token hvariable">sub</span> <span class="token punctuation">(</span><span class="token constant">And</span> <span class="token hvariable">p</span> <span class="token hvariable">q</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token hvariable">eval</span> <span class="token hvariable">sub</span> <span class="token hvariable">p</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token hvariable">eval</span> <span class="token hvariable">sub</span> <span class="token hvariable">q</span><span class="token punctuation">)</span><span class="token hvariable">eval</span> <span class="token hvariable">sub</span> <span class="token punctuation">(</span><span class="token constant">Or</span> <span class="token hvariable">p</span> <span class="token hvariable">q</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token hvariable">eval</span> <span class="token hvariable">sub</span> <span class="token hvariable">p</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span><span class="token hvariable">eval</span> <span class="token hvariable">sub</span> <span class="token hvariable">q</span><span class="token punctuation">)</span><span class="token hvariable">eval</span> <span class="token hvariable">sub</span> <span class="token punctuation">(</span><span class="token constant">Imply</span> <span class="token hvariable">p</span> <span class="token hvariable">q</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token hvariable">eval</span> <span class="token hvariable">sub</span> <span class="token hvariable">p</span><span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span><span class="token hvariable">eval</span> <span class="token hvariable">sub</span> <span class="token hvariable">q</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span><span class="token builtin">not</span> <span class="token punctuation">(</span><span class="token hvariable">eval</span> <span class="token hvariable">sub</span> <span class="token hvariable">p</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">{-习题4试定义下列函数：-}</span><span class="token hvariable">vars</span><span class="token operator">::</span><span class="token constant">Prop</span><span class="token operator">-></span><span class="token punctuation">[</span><span class="token constant">Char</span><span class="token punctuation">]</span><span class="token hvariable">substs</span><span class="token operator">::</span><span class="token constant">Prop</span><span class="token operator">-></span><span class="token punctuation">[</span><span class="token constant">Subst</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true">{-其中vars p给出命题p中出现的所有不同变元,substs p给出命题p中变元的所有可能代换。例如vars p3=['A','B']substs p3=    [        [('A',True),('B',True)],        [('A',True),('B',False)],        [('A',False),('B',True)],        [('A',False),('B',False)]    ]-}</span><span class="token hvariable">vars</span> <span class="token punctuation">(</span><span class="token constant">Const</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token hvariable">vars</span> <span class="token punctuation">(</span><span class="token constant">Var</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span><span class="token hvariable">vars</span> <span class="token punctuation">(</span><span class="token constant">Not</span> <span class="token hvariable">p</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token hvariable">vars</span> <span class="token hvariable">p</span><span class="token hvariable">vars</span> <span class="token punctuation">(</span><span class="token constant">And</span> <span class="token hvariable">p</span> <span class="token hvariable">q</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token hvariable">nub</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token hvariable">vars</span> <span class="token hvariable">p</span><span class="token punctuation">)</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token hvariable">vars</span> <span class="token hvariable">q</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token hvariable">vars</span> <span class="token punctuation">(</span><span class="token constant">Or</span> <span class="token hvariable">p</span> <span class="token hvariable">q</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token hvariable">nub</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token hvariable">vars</span> <span class="token hvariable">p</span><span class="token punctuation">)</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token hvariable">vars</span> <span class="token hvariable">q</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token hvariable">vars</span> <span class="token punctuation">(</span><span class="token constant">Imply</span> <span class="token hvariable">p</span> <span class="token hvariable">q</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token hvariable">nub</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token hvariable">vars</span> <span class="token hvariable">p</span><span class="token punctuation">)</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token hvariable">vars</span> <span class="token hvariable">q</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token hvariable">substs</span> <span class="token hvariable">p</span><span class="token operator">=</span><span class="token hvariable">getsub</span> <span class="token punctuation">(</span><span class="token hvariable">vars</span> <span class="token hvariable">p</span><span class="token punctuation">)</span> <span class="token keyword">where</span>    <span class="token hvariable">getsub</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token hvariable">getsub</span> <span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span><span class="token constant">True</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span><span class="token constant">False</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span>    <span class="token hvariable">getsub</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span><span class="token constant">True</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token hvariable">a</span><span class="token operator">|</span><span class="token hvariable">a</span><span class="token operator">&lt;-</span><span class="token hvariable">getsub</span><span class="token punctuation">(</span><span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span><span class="token constant">False</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token hvariable">a</span><span class="token operator">|</span><span class="token hvariable">a</span><span class="token operator">&lt;-</span><span class="token hvariable">getsub</span><span class="token punctuation">(</span><span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true">{-三、定义一个判断命题是否永真的函数如果一个命题函数在变元的任意代换下真值是True,则称之为永真式。例如,命题p2是永真式。试定义判定一个命题是否永真式的函数,并说明你的函 数定义的正确性：习题5-}</span><span class="token hvariable">isTaut</span><span class="token operator">::</span><span class="token constant">Prop</span><span class="token operator">-></span><span class="token constant">Bool</span><span class="token comment" spellcheck="true">{-例如>isTaut p1False>isTaut p2True-}</span><span class="token hvariable">isTaut</span> <span class="token hvariable">p</span><span class="token operator">=</span><span class="token hvariable">testisTaut</span> <span class="token hvariable">p</span> <span class="token punctuation">(</span><span class="token hvariable">substs</span> <span class="token hvariable">p</span><span class="token punctuation">)</span> <span class="token keyword">where</span>    <span class="token hvariable">testisTaut</span> <span class="token hvariable">p</span> <span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token hvariable">eval</span> <span class="token hvariable">x</span> <span class="token hvariable">p</span><span class="token punctuation">)</span>    <span class="token hvariable">testisTaut</span> <span class="token hvariable">p</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token hvariable">eval</span> <span class="token hvariable">x</span> <span class="token hvariable">p</span><span class="token punctuation">)</span> <span class="token keyword">then</span> <span class="token hvariable">testisTaut</span> <span class="token hvariable">p</span> <span class="token hvariable">xs</span> <span class="token keyword">else</span> <span class="token constant">False</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 函数程序设计实验 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>函数程序设计实验十一：词频统计</title>
      <link href="/2018/12/03/2018-12-03-ci-pin-tong-ji/"/>
      <url>/2018/12/03/2018-12-03-ci-pin-tong-ji/</url>
      
        <content type="html"><![CDATA[<pre class=" language-haskell"><code class="language-haskell"><span class="token comment" spellcheck="true">{-给定一个文本文件，构建文件中所有单词及其出现次数的词频表，并将词频表按照格式要求写到一个文件中。词频表按照单词出现次数从高到低次序排列，出现次数相同的按照字典序排列。第十四周上课提交。输入文件样例（见text0.txt ）：Mind-controlled MouseThe three study participants are part of a clinical trial to test a brain-computer interface (BCI) called BrainGate. BrainGate translates participant’s brain activity into commands that a computer can understand. In the new study, researchers first implanted microelectrode arrays into the area of the brain that governs hand movement. The participants trained the system by thinking about moving their hands, something the BCI learned to translate into actions on the screen.输出文件样例（见text0Fre.txt ）：the:8a:3into:3bci:2brain:2braingate:2of:2participants:2study:2that:2to:2about:1actions:1activity:1are:1area:1arrays:1brain-computer:1by:1called:1can:1clinical:1commands:1computer:1first:1governs:1hand:1hands:1implanted:1in:1interface:1learned:1microelectrode:1mind-controlled:1mouse:1movement:1moving:1new:1on:1part:1participant:1researchers:1screen:1something:1system:1test:1their:1thinking:1three:1trained:1translate:1translates:1trial:1understand:1建议：main ::IO main = do   ls &lt;- readFile inputfile   let result = string2listofpairs ls   let formatedResult = formatting result   writeFile formatedResult其中string2listofpairs :: String ->[(String, Int)]  -- 计算输入串中所有单词及其频率，并排序formatting :: [(String, Int)] ->String  -- 按照要求将词频列表转换为输出格式串几点注意事项：1. 大小写不敏感，所有结果用小写字母；2. It's 视为单词 it；3. brain-computer 视为一个单词。-}</span><span class="token import_statement"><span class="token keyword">import</span> System.IO</span><span class="token import_statement"><span class="token keyword">import</span> Text.Printf</span><span class="token import_statement"><span class="token keyword">import</span> Data.Char</span><span class="token hvariable">inputfile</span><span class="token operator">=</span><span class="token string">"text0.txt"</span><span class="token hvariable">outputfile</span><span class="token operator">=</span><span class="token string">"text0Fre.txt"</span><span class="token hvariable">main</span><span class="token operator">::</span><span class="token constant">IO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token hvariable">main</span><span class="token operator">=</span><span class="token keyword">do</span>   <span class="token hvariable">ls</span><span class="token operator">&lt;-</span><span class="token builtin">readFile</span> <span class="token hvariable">inputfile</span>   <span class="token keyword">let</span> <span class="token hvariable">result</span> <span class="token operator">=</span> <span class="token hvariable">string2listofpairs</span> <span class="token hvariable">ls</span>   <span class="token keyword">let</span> <span class="token hvariable">formatedResult</span><span class="token operator">=</span><span class="token hvariable">formatting</span> <span class="token hvariable">result</span>   <span class="token builtin">writeFile</span> <span class="token hvariable">outputfile</span> <span class="token hvariable">formatedResult</span><span class="token hvariable">string2listofpairs</span><span class="token operator">::</span><span class="token constant">String</span><span class="token operator">-></span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token constant">String</span><span class="token punctuation">,</span><span class="token constant">Int</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token hvariable">string2listofpairs</span> <span class="token hvariable">s</span><span class="token operator">=</span><span class="token hvariable">sortG</span><span class="token punctuation">(</span><span class="token hvariable">cal</span><span class="token punctuation">(</span><span class="token builtin">group</span><span class="token punctuation">(</span><span class="token hvariable">sortS</span><span class="token punctuation">(</span><span class="token builtin">words</span><span class="token punctuation">(</span><span class="token hvariable">tolow</span> <span class="token hvariable">s</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token hvariable">sortS</span><span class="token operator">::</span><span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span><span class="token hvariable">sortS</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token hvariable">sortS</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token hvariable">sortS</span><span class="token punctuation">[</span><span class="token hvariable">y</span><span class="token operator">|</span><span class="token hvariable">y</span><span class="token operator">&lt;-</span><span class="token hvariable">xs</span><span class="token punctuation">,</span><span class="token hvariable">y</span><span class="token operator">&lt;</span><span class="token hvariable">x</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">++</span><span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token hvariable">sortS</span><span class="token punctuation">[</span><span class="token hvariable">y</span><span class="token operator">|</span><span class="token hvariable">y</span><span class="token operator">&lt;-</span><span class="token hvariable">xs</span><span class="token punctuation">,</span><span class="token hvariable">x</span><span class="token operator">&lt;=</span><span class="token hvariable">y</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token hvariable">cmp</span><span class="token operator">::</span><span class="token punctuation">(</span><span class="token constant">String</span><span class="token punctuation">,</span><span class="token constant">Int</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token punctuation">(</span><span class="token constant">String</span><span class="token punctuation">,</span><span class="token constant">Int</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token constant">Bool</span><span class="token hvariable">cmp</span> <span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token operator">=</span>    <span class="token keyword">if</span> <span class="token hvariable">b</span><span class="token operator">/=</span><span class="token hvariable">d</span>        <span class="token keyword">then</span> <span class="token hvariable">b</span><span class="token operator">></span><span class="token hvariable">d</span>        <span class="token keyword">else</span> <span class="token hvariable">a</span><span class="token operator">&lt;</span><span class="token hvariable">c</span><span class="token hvariable">sortG</span><span class="token operator">::</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token constant">String</span><span class="token punctuation">,</span><span class="token constant">Int</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token constant">String</span><span class="token punctuation">,</span><span class="token constant">Int</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token hvariable">sortG</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token hvariable">sortG</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token hvariable">sortG</span><span class="token punctuation">[</span><span class="token hvariable">y</span><span class="token operator">|</span><span class="token hvariable">y</span><span class="token operator">&lt;-</span><span class="token hvariable">xs</span><span class="token punctuation">,</span><span class="token hvariable">cmp</span> <span class="token hvariable">y</span> <span class="token hvariable">x</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">++</span><span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token hvariable">sortG</span><span class="token punctuation">[</span><span class="token hvariable">y</span><span class="token operator">|</span><span class="token hvariable">y</span><span class="token operator">&lt;-</span><span class="token hvariable">xs</span><span class="token punctuation">,</span><span class="token hvariable">cmp</span> <span class="token hvariable">y</span> <span class="token hvariable">x</span><span class="token operator">==</span><span class="token constant">False</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token builtin">group</span><span class="token operator">::</span><span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token builtin">group</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">group</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">[</span><span class="token hvariable">y</span><span class="token operator">|</span><span class="token hvariable">y</span><span class="token operator">&lt;-</span><span class="token hvariable">xs</span><span class="token punctuation">,</span><span class="token hvariable">y</span><span class="token operator">==</span><span class="token hvariable">x</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token builtin">group</span><span class="token punctuation">[</span><span class="token hvariable">y</span><span class="token operator">|</span><span class="token hvariable">y</span><span class="token operator">&lt;-</span><span class="token hvariable">xs</span><span class="token punctuation">,</span><span class="token hvariable">y</span><span class="token operator">/=</span><span class="token hvariable">x</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token hvariable">tolow</span><span class="token operator">::</span><span class="token constant">String</span><span class="token operator">-></span><span class="token constant">String</span><span class="token hvariable">tolow</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token hvariable">tolow</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">=</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token builtin">isSpace</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span><span class="token builtin">isAlphaNum</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">==</span><span class="token char">'-'</span><span class="token punctuation">)</span>        <span class="token keyword">then</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">toLower</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token hvariable">tolow</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">else</span> <span class="token hvariable">tolow</span> <span class="token hvariable">xs</span><span class="token hvariable">cal</span><span class="token operator">::</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token constant">String</span><span class="token punctuation">,</span><span class="token constant">Int</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token hvariable">cal</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token hvariable">cal</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">!!</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token builtin">length</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token hvariable">cal</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token hvariable">formatting</span> <span class="token operator">::</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token constant">String</span><span class="token punctuation">,</span> <span class="token constant">Int</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">-></span><span class="token constant">String</span>  <span class="token comment" spellcheck="true">-- 按照要求将词频列表转换为输出格式串</span><span class="token hvariable">formatting</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token hvariable">formatting</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token hvariable">printf</span> <span class="token string">"%s:%d\n"</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token hvariable">formatting</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 函数程序设计实验 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>概率论与数理统计</title>
      <link href="/2018/12/03/2018-12-03-gai-lu-lun-yu-shu-li-tong-ji/"/>
      <url>/2018/12/03/2018-12-03-gai-lu-lun-yu-shu-li-tong-ji/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>参考</strong><a href="https://github.com/fengdu78/Coursera-ML-AndrewNg-Notes" target="_blank" rel="noopener">斯坦福大学2014（吴恩达）机器学习教程中文笔记</a>，感谢编者黄海广博士。</p></blockquote><h1 id="概率论的基本概念"><a href="#概率论的基本概念" class="headerlink" title="概率论的基本概念"></a>概率论的基本概念</h1><h2 id="随机试验"><a href="#随机试验" class="headerlink" title="随机试验"></a>随机试验</h2><p>在概率论中，将具有以下三个特点的事件称为<strong>随机试验</strong>：</p><ul><li>可以在相同的条件下重复进行</li><li>每次试验的可能结果不止一个，并且事先能够明确事件的所有可能结果</li><li>进行一次试验前不能确定哪个结果会出现</li></ul><h2 id="样本空间、随机事件"><a href="#样本空间、随机事件" class="headerlink" title="样本空间、随机事件"></a>样本空间、随机事件</h2><h3 id="样本空间"><a href="#样本空间" class="headerlink" title="样本空间"></a>样本空间</h3><p>随机事件$E$的所有基本结果组成的集合为$E$的<strong>样本空间</strong>，记为$S$。样本空间的元素，即$E$的每个结果，称为样本点或基本事件，有时记为$\omega$。</p><h3 id="随机事件"><a href="#随机事件" class="headerlink" title="随机事件"></a>随机事件</h3><p>称试验$E$的样本空间$S$的子集为$E$的<strong>随机事件</strong>，简称<strong>事件</strong>。在每次试验中，当且仅当这一子集中的一个样本点出现时，称这一<strong>事件发生</strong>。<br>特别地，由一个样本点组成的单点集，称为<strong>基本事件</strong>；样本空间$S$包含所有的基本点，每次试验中总是发生，称为<strong>必然事件</strong>，记为$\Omega$；空集$\varnothing$每次都不可能发生，称为<strong>不可能事件</strong>。</p><h3 id="事件间的关系与事件的运算"><a href="#事件间的关系与事件的运算" class="headerlink" title="事件间的关系与事件的运算"></a>事件间的关系与事件的运算</h3><h4 id="子事件"><a href="#子事件" class="headerlink" title="子事件"></a>子事件</h4><p>$A \subset B$，若$A$发生，则$B$发生。</p><h4 id="相等事件"><a href="#相等事件" class="headerlink" title="相等事件"></a>相等事件</h4><p>$A = B$，即$A \subset B$，且$B \subset A$ 。</p><h4 id="和事件"><a href="#和事件" class="headerlink" title="和事件"></a>和事件</h4><p>$A\bigcup B$（或$A + B$），$A$与$B$中至少有一个发生。</p><h4 id="差事件"><a href="#差事件" class="headerlink" title="差事件"></a>差事件</h4><p>$A - B={x|x\in A,x\not\in B}$，$A$发生但$B$不发生。</p><h4 id="积事件"><a href="#积事件" class="headerlink" title="积事件"></a>积事件</h4><p>$A\bigcap B$（或${AB}$），$A$与$B$同时发生。</p><h4 id="互斥事件（互不相容）"><a href="#互斥事件（互不相容）" class="headerlink" title="互斥事件（互不相容）"></a>互斥事件（互不相容）</h4><p>$A\bigcap B$=$\varnothing$。基本事件是两两互斥的。</p><h4 id="互逆事件（对立事件）"><a href="#互逆事件（对立事件）" class="headerlink" title="互逆事件（对立事件）"></a>互逆事件（对立事件）</h4><p>$A\bigcap B=\varnothing ,A\bigcup B=\Omega ,A=\overline{B},B=\overline{A}$</p><h4 id="完全事件组"><a href="#完全事件组" class="headerlink" title="完全事件组"></a>完全事件组</h4><p>${ {A}<em>{1} }{ {A}</em>{2} }\cdots { {A}<em>{n} }$两两互斥，且和事件为必然事件，即$A_i\bigcap A_j=\varnothing,i\ne j,\bigcap</em>{i=1}^n=\Omega$</p><h4 id="交换律"><a href="#交换律" class="headerlink" title="交换律"></a>交换律</h4><p>$A\bigcup B=B\bigcup A,A\bigcap B=B\bigcap A$</p><h4 id="结合律"><a href="#结合律" class="headerlink" title="结合律"></a>结合律</h4><p>$(A\bigcup B)\bigcup C=A\bigcup (B\bigcup C)$</p><h4 id="分配律"><a href="#分配律" class="headerlink" title="分配律"></a>分配律</h4><p>$(A\bigcap B)\bigcap C=A\bigcap (B\bigcap C)$</p><h4 id="德·摩根律"><a href="#德·摩根律" class="headerlink" title="德·摩根律"></a>德·摩根律</h4><p>$\overline{A\bigcup B}=\overline{A}\bigcap \overline{B}$<br>$\overline{A\bigcap B}=\overline{A}\bigcup \overline{B}$</p><h2 id="频率与概率"><a href="#频率与概率" class="headerlink" title="频率与概率"></a>频率与概率</h2><h3 id="频率"><a href="#频率" class="headerlink" title="频率"></a>频率</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><p>相同条件下进行了n次试验，在这n次试验当中，事件A发生的频率$n_A$称为事件A的频数，比值$f_n(A)=\frac{n_A}{n}$称为事件A发生的频率。</p><h4 id="性质"><a href="#性质" class="headerlink" title="性质"></a>性质</h4><ul><li>$0\leq f_n(A)\leq 1$</li><li>$f_n(S)=1$</li><li>有限可加性：若$A_1,A_2,\ldots,a_k$是两两互不相容的事件，则$f_n(A_1\bigcup A_2\bigcup\ldots\bigcup A_k)=f_n(A_1)+f_n(A_2)+\ldots+f_n(A_k)$</li></ul><h3 id="概率"><a href="#概率" class="headerlink" title="概率"></a>概率</h3><h4 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h4><p>设E是随机试验，S是它的样本空间，对于E的每一事件A赋予一个实数$P(A)$，称为事件A的概率，如果集合函数$P(\cdot)$满足下列条件：</p><h5 id="非负性"><a href="#非负性" class="headerlink" title="非负性"></a>非负性</h5><p>对于每一事件A，有$P(A)\ge 0$</p><h5 id="规范性"><a href="#规范性" class="headerlink" title="规范性"></a>规范性</h5><p>对于必然事件S，有$P(S)=1$</p><h5 id="可列可加性"><a href="#可列可加性" class="headerlink" title="可列可加性"></a>可列可加性</h5><p>设$A_1,A_2,\ldots$是两两互不相容的事件，则$P(A_1\bigcup A_2\bigcup\ldots)=P(A_1)+P(A_2)+\ldots$</p><h4 id="性质-1"><a href="#性质-1" class="headerlink" title="性质"></a>性质</h4><ul><li>$P(\varnothing)=0$</li><li>有限可加性：$P(A_1\bigcup A_2\bigcup\ldots\bigcup A_n)=P(A_1)+P(A_2)+\ldots+P(A_n)$，可由上一条性质和可列可加性推出。</li><li>若$A\subset B$，则$P(B-A)=P(B)-P(A)\ge 0$</li><li>$P(A)\le 1$</li><li>逆事件的概率：$P(\overline{A})=1-P(A)$</li><li>加法公式：$P(A\bigcup B)=P(A)+P(B)-P(AB)$，推广到三元：$P(A\bigcup B\bigcup C)=P(A)+P(B)+P(C)-P(AB)-P(BC)-P(AC)+P(ABC)$</li><li>$P(A-B)=P(A)-P(AB)$</li><li>$P(A\overline{B})=P(A)-P(AB)$</li><li>$P(A)=P(AB)+P(A\overline{B})$</li><li>$P(A\bigcup B)=P(A)+P(\overline{A}B)=P(AB)+P(A\overline{B})+P(\overline{A}B)$</li></ul><h2 id="等可能概型（古典概型）"><a href="#等可能概型（古典概型）" class="headerlink" title="等可能概型（古典概型）"></a>等可能概型（古典概型）</h2><p>具备以下两个特点的试验被称作等可能概型（古典概型）：</p><ul><li>试验的样本空间只包含有限个元素</li><li>试验中每个基本事件发生的可能性相同</li></ul><h3 id="古典概型计算公式"><a href="#古典概型计算公式" class="headerlink" title="古典概型计算公式"></a>古典概型计算公式</h3><p>$P(A)=\frac{A包含的基本事件数}{S包含的事件数}$</p><h3 id="实际推断原理"><a href="#实际推断原理" class="headerlink" title="实际推断原理"></a>实际推断原理</h3><p>概率很小的事件在一次试验中实际上几乎是不发生的。</p><h2 id="条件概率"><a href="#条件概率" class="headerlink" title="条件概率"></a>条件概率</h2><h3 id="条件概率-1"><a href="#条件概率-1" class="headerlink" title="条件概率"></a>条件概率</h3><p>$P(B|A)=\frac{P(AB)}{P(A)}$,表示$A$发生的条件下，$B$发生的概率。<br>条件概率$P(\centerdot |B)$满足概率的所有性质，例如：</p><ul><li>$P({ {\overline{A} }<em>{1} }|B)=1-P({ {A}</em>{1} }|B)$</li><li>$P({ {A}<em>{1} }\bigcup { {A}</em>{2} }|B)=P({ {A}<em>{1} }|B)+P({ {A}</em>{2} }|B)-P({ {A}<em>{1} }{ {A}</em>{2} }|B)$</li><li>$P({ {A}<em>{1} }{ {A}</em>{2} }|B)=P({ {A}<em>{1} }|B)P({ {A}</em>{2} }|{ {A}_{1} }B)$</li></ul><h4 id="非负性-1"><a href="#非负性-1" class="headerlink" title="非负性"></a>非负性</h4><p>对于每一事件$B$，有$P(B|A)\ge 0$</p><h4 id="规范性-1"><a href="#规范性-1" class="headerlink" title="规范性"></a>规范性</h4><p>对于必然事件$S$，有$P(S|A)=1$</p><h4 id="可列可加性-1"><a href="#可列可加性-1" class="headerlink" title="可列可加性"></a>可列可加性</h4><p>$P(\underset{i=1}{\overset{\infty}{\mathop{\bigcup } } },{ {B}<em>{i} }|A)=\sum</em>{i=1}^\infty P(B_i|A)$</p><h3 id="乘法定理"><a href="#乘法定理" class="headerlink" title="乘法定理"></a>乘法定理</h3><p>$P({ {A}<em>{1} }{ {A}</em>{2} })=P({ {A}<em>{1} })P({ {A}</em>{2} }|{ {A}<em>{1} })=P({ {A}</em>{2} })P({ {A}<em>{1} }|{ {A}</em>{2} })$<br>$P({ {A}<em>{1} }{ {A}</em>{2} }\cdots { {A}<em>{n} })=P({ {A}</em>{1} })P({ {A}<em>{2} }|{ {A}</em>{1} })P({ {A}<em>{3} }|{ {A}</em>{1} }{ {A}<em>{2} })\cdots P({ {A}</em>{n} }|{ {A}<em>{1} }{ {A}</em>{2} }\cdots { {A}_{n-1} })$</p><h3 id="全概率公式和贝叶斯公式"><a href="#全概率公式和贝叶斯公式" class="headerlink" title="全概率公式和贝叶斯公式"></a>全概率公式和贝叶斯公式</h3><h4 id="全概率公式"><a href="#全概率公式" class="headerlink" title="全概率公式"></a>全概率公式</h4><p>$P(A)=\sum\limits_{i=1}^{n}{P(A|{ {B}<em>{i} })P({ {B}</em>{i} }),{ {B}<em>{i} }{ {B}</em>{j} } }=\varnothing ,i\ne j,\underset{i=1}{\overset{n}{\mathop{\bigcup } } },{ {B}_{i} }=\Omega$</p><h4 id="Bayes（贝叶斯）公式"><a href="#Bayes（贝叶斯）公式" class="headerlink" title="Bayes（贝叶斯）公式"></a>Bayes（贝叶斯）公式</h4><p>$P({ {B}<em>{j} }|A)=\frac{P(A|{ {B}</em>{j} })P({ {B}<em>{j} })}{\sum\limits</em>{i=1}^{n}{P(A|{ {B}<em>{i} })P({ {B}</em>{i} })} },j=1,2,\cdots ,n$<br>上述公式中事件${ {B}_{i} }$的个数可为可列个。</p><h2 id="独立性"><a href="#独立性" class="headerlink" title="独立性"></a>独立性</h2><p>若干个事件，如果对于其中任意个事件，它们的积事件的概率都等于各事件概率的积，则称这几个事件相互独立。</p><ul><li>$A$与$B$相互独立$\Leftrightarrow P(AB)=P(A)P(B)$</li><li>$A$，$B$，$C$两两独立$\Leftrightarrow P(AB)=P(A)P(B)$;$P(BC)=P(B)P(C)$;$P(AC)=P(A)P(C)$;</li><li>$A$，$B$，$C$相互独立$\Leftrightarrow P(AB)=P(A)P(B)$;$P(BC)=P(B)P(C)$;$P(AC)=P(A)P(C)$;$P(ABC)=P(A)P(B)P(C)$</li></ul><h3 id="独立重复试验"><a href="#独立重复试验" class="headerlink" title="独立重复试验"></a>独立重复试验</h3><p>将某试验独立重复$n$次，若每次试验中事件A发生的概率为$p$，则$n$次试验中$A$发生$k$次的概率为：$P{X=k}=C_{n}^{k}{ {p}^{k} }{ {(1-p)}^{n-k} }$</p><h3 id="性质-2"><a href="#性质-2" class="headerlink" title="性质"></a>性质</h3><ul><li>若${ {A}<em>{1} },{ {A}</em>{2} },\cdots ,{ {A}<em>{n} }$相互独立，则$P(\bigcap\limits</em>{i=1}^{n}{ { {A}<em>{i} } })=\prod\limits</em>{i=1}^{n}{P({ {A}<em>{i} })},$<br>$P(\bigcup\limits</em>{i=1}^{n}{ { {A}<em>{i} } })=\prod\limits</em>{i=1}^{n}{(1-P({ {A}_{i} }))}$</li><li>若${ {A}<em>{1} },{ {A}</em>{2} },\cdots ,{ {A}<em>{m} },{ {B}</em>{1} },{ {B}<em>{2} },\cdots ,{ {B}</em>{n} }$相互独立，则$f({ {A}<em>{1} },{ {A}</em>{2} },\cdots ,{ {A}<em>{m} })$与$g({ {B}</em>{1} },{ {B}<em>{2} },\cdots ,{ {B}</em>{n} })$也相互独立，其中$f(\centerdot ),g(\centerdot )$分别表示对相应事件做任意事件运算后所得的事件，另外，概率为1（或0）的事件与任何事件相互独立。</li></ul><h3 id="互斥、互逆与独立性之间的关系"><a href="#互斥、互逆与独立性之间的关系" class="headerlink" title="互斥、互逆与独立性之间的关系"></a>互斥、互逆与独立性之间的关系</h3><p>$A$与$B$互逆$\Rightarrow$ $A$与$B$互斥，但反之不成立，$A$与$B$互斥（或互逆）且均非零概率事件$\Rightarrow$ $A$与$B$不独立。</p><h1 id="随机变量及其分布"><a href="#随机变量及其分布" class="headerlink" title="随机变量及其分布"></a>随机变量及其分布</h1><h2 id="随机变量"><a href="#随机变量" class="headerlink" title="随机变量"></a>随机变量</h2><p>设随机试验的样本空间为$S={e}$，称定义在样本空间$S$上的实值单值函数$X=X(e)$为随机变量。</p><h2 id="离散型随机变量及其分布律"><a href="#离散型随机变量及其分布律" class="headerlink" title="离散型随机变量及其分布律"></a>离散型随机变量及其分布律</h2><p>取值有限或可列无限的随机变量称为<strong>离散型随机变量</strong>。<br>设X的所有取值为$x_k(k=1,2,\ldots)$，称X取各个事件的概率$P{X=x_k}=p_k,k=1,2,\ldots$为离散型随机变量X的分布律，也可以写成表格形式：</p><table><thead><tr><th>$X$</th><th>$x_1$</th><th>$x_2$</th><th>$\ldots$</th><th>$x_n$</th><th>$\ldots$</th></tr></thead><tbody><tr><td>$p_k$</td><td>$p_1$</td><td>$p_2$</td><td>$\ldots$</td><td>$p_n$</td><td>$\ldots$</td></tr></tbody></table><p>其中，$p_k$满足：</p><ul><li>$p_k\ge 0,k=1,2,\ldots$</li><li>$\sum_{k=1}^\infty p_k=1$</li></ul><h3 id="0-1分布（两点分布）"><a href="#0-1分布（两点分布）" class="headerlink" title="0-1分布（两点分布）"></a>0-1分布（两点分布）</h3><p>$P{X=k} = p^{k}{(1 - p)}^{1 - k},k = 0,1$，则称X服从以p为参数的0-1分布（两点分布）</p><h3 id="伯努利试验、二项分布"><a href="#伯努利试验、二项分布" class="headerlink" title="伯努利试验、二项分布"></a>伯努利试验、二项分布</h3><h4 id="Binomial-Distribution（二项分布）"><a href="#Binomial-Distribution（二项分布）" class="headerlink" title="Binomial Distribution（二项分布）"></a>Binomial Distribution（二项分布）</h4><p>背景：n重Bernoulli 试验中，每次试验感兴趣的事件A 在 n 次试验中发生的次数 —— X是一离散型随机变量。<br>若$P(A)=p$,则$P_n(k)=P{X=k}=C_n^kp^k(1-p)^{n-k},k=0,1\ldots n$称X服从参数为$n, p$的二项分布，记作$X\sim B(n,p)$<br>特别地，$0 – 1$分布是$n=1$的二项分布.</p><h4 id="Poisson-（泊松）分布"><a href="#Poisson-（泊松）分布" class="headerlink" title="Poisson （泊松）分布"></a>Poisson （泊松）分布</h4><p>背景：已知某事发生速率为每单位时间b次，观察时间为T时间单位，X为该观察时间内发生该事的总次数$\lambda=bT$<br>设随机变量X的所有可能值是全体非负整数，若$P{X=k}=e^{-\lambda}\frac{\lambda^k}{k!},k=0,1,\ldots$其中$\lambda&gt;0$是常数，则称 X 服从参数为$\lambda$的Poisson 分布，记作$\pi(\lambda)$或$P(\lambda)$</p><h5 id="泊松定理"><a href="#泊松定理" class="headerlink" title="泊松定理"></a>泊松定理</h5><p>可用于泊松分布逼近二项分布。设随机变量X服从二项分布，其分布律为$P{X=K}=C_n^kp^k(1-p)^{n-k}$,又设$np=\lambda$是常数，则有$\lim_{n\to\infty}P{X=K}=e^{-\lambda}\frac{\lambda^k}{k!}$<br>在实际计算中,当$n\ge 20,p\leq 0.05$时，可用上述公式近似计算；而当$n\ge 100,np\leq 10$时，精度更好。</p><h4 id="几何分布"><a href="#几何分布" class="headerlink" title="几何分布"></a>几何分布</h4><p>在n次伯努利试验中，试验k次才得到第一次成功的机率。<br>$G(p):P{X=k} = {(1 - p)}^{k - 1}p,0 &lt; p &lt; 1,k = 1,2,\cdots,P{X = m + k|X &gt; m} = P{X=k}$</p><h4 id="超几何分布"><a href="#超几何分布" class="headerlink" title="超几何分布"></a>超几何分布</h4><p>设有产品N件，其中次品D件，其余为正品，从中随机地抽取n件。记X为抽到的的次品件数，求X的分布律.<br>此时抽到k件次品的概率为$H(N,M,n):P{X=k} = \frac{C_{M}^{k}C_{N - M}^{n -k} }{C_{N}^{n} },k =0,1,\cdots,min(n,M)$，称X服从超几何分布. 可以证明超几何分布的极限分布就是二项分布.</p><h4 id="负二项分布-Pascal分布"><a href="#负二项分布-Pascal分布" class="headerlink" title="负二项分布(Pascal分布)"></a>负二项分布(Pascal分布)</h4><h4 id="离散均匀分布"><a href="#离散均匀分布" class="headerlink" title="离散均匀分布"></a>离散均匀分布</h4><h2 id="随机变量的分布函数"><a href="#随机变量的分布函数" class="headerlink" title="随机变量的分布函数"></a>随机变量的分布函数</h2><h3 id="定义-2"><a href="#定义-2" class="headerlink" title="定义"></a>定义</h3><p>$F(x) = P(X \leq x), - \infty &lt; x &lt; + \infty$</p><h3 id="性质-3"><a href="#性质-3" class="headerlink" title="性质"></a>性质</h3><ul><li>$0 \leq F(x) \leq 1$</li><li>$F(x)$单调不减</li><li>右连续$F(x) = F(x+0)$</li><li>$F( - \infty) = 0,F( + \infty) = 1$</li></ul><h2 id="连续型随机变量及其概率密度"><a href="#连续型随机变量及其概率密度" class="headerlink" title="连续型随机变量及其概率密度"></a>连续型随机变量及其概率密度</h2><p>概率密度$f(x)$非负可积，且:</p><ul><li>$f(x) \geq 0$</li><li>$\int_{- \infty}^{+\infty}{f(x){dx} = 1}$</li><li>$x$为$f(x)$的连续点，则:<br>$f(x) = F’(x)$分布函数$F(x) = \int_{- \infty}^{x}{f(t){dt} }$</li></ul><h3 id="均匀分布"><a href="#均匀分布" class="headerlink" title="均匀分布"></a>均匀分布</h3><p>设连续型随机变量X具有概率密度<br>$p(x)=\begin{cases}\frac{1}{b-a},a\leq x\leq b,\0,其它\end{cases}$则称X在$(a,b)$上服从均匀分布，记作$X\sim U(a,b)$<br>分布函数$F(x)=\begin{cases}0,x&lt;a\ \frac{x-a}{b-a},a\leq x&lt; b\1,x\ge b\end{cases}$</p><h3 id="指数分布"><a href="#指数分布" class="headerlink" title="指数分布"></a>指数分布</h3><p>设连续型随机变量X具有概率密度<br>$p(X)=\begin{cases}\lambda e^{-\lambda x},x\ge 0,\0,x&lt;0\end{cases}$，其中$\lambda &gt;0$为常数，则称X在$(a,b)$上服从指数分布。<br>分布函数$F(x)=\begin{cases}1-e^{-\frac{x}{\theta}},x&gt;0\0,x\le 0\end{cases}$<br><strong>无记忆性</strong>：$\forall s,t&gt;0$，$P{x&gt;s+t|x&gt;s}=p{x&gt;t}$，即，如果T是某一元件的寿命，已知元件使用了s小时，它总共使用至少s+t小时的条件概率，与从开始使用时算起它使用至少t小时的概率相等。</p><h3 id="正态分布（高斯分布，Gauss）"><a href="#正态分布（高斯分布，Gauss）" class="headerlink" title="正态分布（高斯分布，Gauss）"></a>正态分布（高斯分布，Gauss）</h3><p>设连续型随机变量X具有概率密度<br>$p(X)=\frac{1}{\sqrt{2\pi}\sigma}e^{-\frac{(x-\mu)^2}{2\sigma^2} }$则称X服从参数为$\mu,\sigma$的正态分布或高斯分布，记作$X\sim N(\mu,\sigma^2)$<br>$\mu$是位置参数，即固定$\sigma$，对于不同的$\mu$，对应的f(x)的形状不变化，只是位置不同。<br>$\sigma$是形状参数，即固定$\mu$，对于不同的$\sigma$，对应f(x)位置不变化，只是$\sigma$越小，靠近$\mu$附近取值的概率越大，相应拐点越接近于ox轴。$\sigma$大小与曲线陡峭程度成反比（几何意义），与数据分散程度成正比（数据意义）。</p><h4 id="标准正态分布N-0-1"><a href="#标准正态分布N-0-1" class="headerlink" title="标准正态分布N(0,1)"></a>标准正态分布N(0,1)</h4><p>密度函数$\varphi(x)=\frac{1}{\sqrt{2\pi} }e^{-\frac{x^2}{2} }$是偶函数，其分布函数为$\Phi(x)=\frac{1}{\sqrt{2\pi} }\int_{-\infty}^xe^{-\frac{t^2}{2} },dt$，其值可查表。<br><img src="https://www.mianfeiwendang.com/pic/e18309c08f2600f948bb1837/1-1344-jpg_6_0_______-929-0-0-929.jpg" alt="正态分布表"><br>$\varphi(0) = \frac{1}{\sqrt{2\pi} },\Phi(0) =\frac{1}{2},$ $\Phi( - a) = P(X \leq - a) = 1 - \Phi(a)$<br>$X\sim N\left( \mu,\sigma^{2} \right) \Rightarrow \frac{X -\mu}{\sigma}\sim N\left( 0,1 \right),P(X \leq a) = \Phi(\frac{a -\mu}{\sigma})$</p><h2 id="随机变量的函数的分布"><a href="#随机变量的函数的分布" class="headerlink" title="随机变量的函数的分布"></a>随机变量的函数的分布</h2><ul><li>离散型：$P(X = x_{1}) = p_{i},Y = g(X)$，则: $P(Y = y_{j}) = \sum_{g(x_{i}) = y_{i} }^{}{P(X = x_{i})}$</li><li>连续型：$X\sim f_{X}(x),Y = g(x)$，则:$F_{y}(y) = P(Y \leq y) = P(g(X) \leq y) = \int_{g(x) \leq y}^{}{f_{x}(x)dx}$， $f_{Y}(y) = F’_{Y}(y)$</li><li>离散型随机变量的分布函数为阶梯间断函数；连续型随机变量的分布函数为连续函数，但不一定为处处可导函数。</li><li>存在既非离散也非连续型随机变量。</li></ul><h1 id="多维随机变量及其分布"><a href="#多维随机变量及其分布" class="headerlink" title="多维随机变量及其分布"></a>多维随机变量及其分布</h1><h2 id="二维随机变量"><a href="#二维随机变量" class="headerlink" title="二维随机变量"></a>二维随机变量</h2><p>由两个随机变量构成的随机向量$(X,Y)$， 联合分布为$F(x,y) = P{X \le x,Y \le y}$<br>$P{ X = x_{i},Y = y_{j}} = p_{ {ij} };i,j =1,2,\cdots$<br>$f(x,y) \geq 0$<br>$\int_{- \infty}^{+ \infty}{\int_{- \infty}^{+ \infty}{f(x,y)dxdy} } = 1$<br>$F(x,y) = \int_{- \infty}^{x}{\int_{- \infty}^{y}{f(u,v)dudv} }$</p><h2 id="边缘分布"><a href="#边缘分布" class="headerlink" title="边缘分布"></a>边缘分布</h2><p>$p_{i \cdot} = \sum_{j = 1}^{\infty}p_{ {ij} },i =1,2,\cdots$ $p_{\cdot j} = \sum_{i}^{\infty}p_{ {ij} },j = 1,2,\cdots$<br>$f_{X}\left( x \right) = \int_{- \infty}^{+ \infty}{f\left( x,y \right){dy} }$ $f_{Y}(y) = \int_{- \infty}^{+ \infty}{f(x,y)dx}$</p><h2 id="条件分布"><a href="#条件分布" class="headerlink" title="条件分布"></a>条件分布</h2><p>$P{ X = x_{i}|Y = y_{j}} = \frac{p_{ {ij} } }{p_{\cdot j} }$<br>$P{ Y = y_{j}|X = x_{i}} = \frac{p_{ {ij} } }{p_{i \cdot} }$<br>$f_{X|Y}\left( x \middle| y \right) = \frac{f\left( x,y \right)}{f_{Y}\left( y \right)}$<br>$f_{Y|X}(y|x) = \frac{f(x,y)}{f_{X}(x)}$</p><h2 id="相互独立的随机变量"><a href="#相互独立的随机变量" class="headerlink" title="相互独立的随机变量"></a>相互独立的随机变量</h2><p>若$P{X\le x,Y\le y}=P{X\le x}P{Y\le y}$，即$F(x,y)=F_X(x)F_Y(y)$，则称随机变量$X,Y$是相互独立的。<br>对于连续型随机变量，即$f(x,y)=f_X(x)f_Y(y)$在平面上几乎（除去面积为0的集合外）处处成立。<br>对于离散型随机变量，即$P{X=x_i,Y=y_i}=P{X=x_i}P{Y=y_i}$。<br>对于二维正态随机变量$(X,Y)$，$X,Y$相互独立的充要条件是参数$\rho=0$。</p><h2 id="两个随机变量的函数的分布"><a href="#两个随机变量的函数的分布" class="headerlink" title="两个随机变量的函数的分布"></a>两个随机变量的函数的分布</h2><h3 id="二维均匀分布"><a href="#二维均匀分布" class="headerlink" title="二维均匀分布"></a>二维均匀分布</h3><p>$(x,y) \sim U(D)$ ,$f(x,y) = \begin{cases} \frac{1}{S(D)},(x,y) \in D \   0,其他  \end{cases}$</p><h3 id="二维正态分布"><a href="#二维正态分布" class="headerlink" title="二维正态分布"></a>二维正态分布</h3><p>$(X,Y)\sim N(\mu_{1},\mu_{2},\sigma_{1}^{2},\sigma_{2}^{2},\rho)$,$(X,Y)\sim N(\mu_{1},\mu_{2},\sigma_{1}^{2},\sigma_{2}^{2},\rho)$<br>$f(x,y) = \frac{1}{2\pi\sigma_{1}\sigma_{2}\sqrt{1 - \rho^{2} } }.\exp\left{ \frac{- 1}{2(1 - \rho^{2})}\lbrack\frac{ {(x - \mu_{1})}^{2} }{\sigma_{1}^{2} } - 2\rho\frac{(x - \mu_{1})(y - \mu_{2})}{\sigma_{1}\sigma_{2} } + \frac{ {(y - \mu_{2})}^{2} }{\sigma_{2}^{2} }\rbrack \right}$</p><h2 id="随机变量的独立性和相关性"><a href="#随机变量的独立性和相关性" class="headerlink" title="随机变量的独立性和相关性"></a>随机变量的独立性和相关性</h2><p>$X$和$Y$的相互独立:$\Leftrightarrow F\left( x,y \right) = F_{X}\left( x \right)F_{Y}\left( y \right)$:<br>$\Leftrightarrow p_{ {ij} } = p_{i \cdot} \cdot p_{\cdot j}$（离散型）<br>$\Leftrightarrow f\left( x,y \right) = f_{X}\left( x \right)f_{Y}\left( y \right)$（连续型）<br>$X$和$Y$的相关性：</p><p>相关系数$\rho_{ {XY} } = 0$时，称$X$和$Y$不相关，<br>否则称$X$和$Y$相关</p><h2 id="两个随机变量的函数的分布-1"><a href="#两个随机变量的函数的分布-1" class="headerlink" title="两个随机变量的函数的分布"></a>两个随机变量的函数的分布</h2><h3 id="Z-X-Y-的分布"><a href="#Z-X-Y-的分布" class="headerlink" title="$Z=X+Y$的分布"></a>$Z=X+Y$的分布</h3><p>$f_{X+Y}(z)=\int_{-\infty}^\infty f(x,z-x)dx$</p><h3 id="Z-frac-Y-X-的分布、-Z-XY-的分布"><a href="#Z-frac-Y-X-的分布、-Z-XY-的分布" class="headerlink" title="$Z=\frac{Y}{X}$的分布、$Z=XY$的分布"></a>$Z=\frac{Y}{X}$的分布、$Z=XY$的分布</h3><p>$f_{Y/X}(z)=\int_{-\infty}^\infty |x|f(x,xz)dx$<br>$f_{XY}(z)=\int_{-\infty}^\infty \frac{1}{|x|}f(x,\frac{z}{x})dx$</p><h3 id="M-max-X-Y-的分布、-N-min-X-Y-的分布"><a href="#M-max-X-Y-的分布、-N-min-X-Y-的分布" class="headerlink" title="$M=\max{X,Y}$的分布、$N=\min{X,Y}$的分布"></a>$M=\max{X,Y}$的分布、$N=\min{X,Y}$的分布</h3><p>$F_{max}(z)=\Pi F_{x_i}(z)$<br>$F_{min}(z)=1-\Pi (1-F_{x_i}(z))$</p><h3 id="离散型"><a href="#离散型" class="headerlink" title="离散型"></a>离散型</h3><p>$P\left( X = x_{i},Y = y_{i} \right) = p_{ {ij} },Z = g\left( X,Y \right)$ 则：<br>$P(Z = z_{k}) = P\left{ g\left( X,Y \right) = z_{k} \right} = \sum_{g\left( x_{i},y_{i} \right) = z_{k} }^{}{P\left( X = x_{i},Y = y_{j} \right)}$</p><h3 id="连续型"><a href="#连续型" class="headerlink" title="连续型"></a>连续型</h3><p>$\left( X,Y \right) \sim f\left( x,y \right),Z = g\left( X,Y \right)$<br>则：<br>$F_{z}\left( z \right) = P\left{ g\left( X,Y \right) \leq z \right} = \iint_{g(x,y) \leq z}^{}{f(x,y)dxdy}$，$f_{z}(z) = F’_{z}(z)$</p><h3 id="重要公式与结论"><a href="#重要公式与结论" class="headerlink" title="重要公式与结论"></a>重要公式与结论</h3><p>$f_{X}(x) = \int_{- \infty}^{+ \infty}{f(x,y)dy,}$<br>$f_{Y}(y) = \int_{- \infty}^{+ \infty}{f(x,y)dx}$<br>$P\left{ \left( X,Y \right) \in D \right} = \iint_{D}^{}{f\left( x,y \right){dxdy} }$<br>若$(X,Y)$服从二维正态分布$N(\mu_{1},\mu_{2},\sigma_{1}^{2},\sigma_{2}^{2},\rho)$<br>则有：</p><ul><li>$X\sim N\left( \mu_{1},\sigma_{1}^{2} \right),Y\sim N(\mu_{2},\sigma_{2}^{2}).$</li><li>$X$与$Y$相互独立$\Leftrightarrow \rho = 0$，即$X$与$Y$不相关。</li><li>$C_{1}X + C_{2}Y\sim N(C_{1}\mu_{1} + C_{2}\mu_{2},C_{1}^{2}\sigma_{1}^{2} + C_{2}^{2}\sigma_{2}^{2} + 2C_{1}C_{2}\sigma_{1}\sigma_{2}\rho)$</li><li>${\ X}$关于$Y=y$的条件分布为： $N(\mu_{1} + \rho\frac{\sigma_{1} }{\sigma_{2} }(y - \mu_{2}),\sigma_{1}^{2}(1 - \rho^{2}))$</li><li>$Y$关于$X = x$的条件分布为： $N(\mu_{2} + \rho\frac{\sigma_{2} }{\sigma_{1} }(x - \mu_{1}),\sigma_{2}^{2}(1 - \rho^{2}))$</li></ul><p>若$X$与$Y$独立，且分别服从$N(\mu_{1},\sigma_{1}^{2}),N(\mu_{1},\sigma_{2}^{2}),$<br>则：$\left( X,Y \right)\sim N(\mu_{1},\mu_{2},\sigma_{1}^{2},\sigma_{2}^{2},0),$</p><p>$C_{1}X + C_{2}Y\sim{\ }N(C_{1}\mu_{1} + C_{2}\mu_{2},C_{1}^{2}\sigma_{1}^{2} C_{2}^{2}\sigma_{2}^{2}).$</p><p>若$X$与$Y$相互独立，$f\left( x \right)$和$g\left( x \right)$为连续函数， 则$f\left( X \right)$和$g(Y)$也相互独立。</p><h1 id="随机变量的数字特征"><a href="#随机变量的数字特征" class="headerlink" title="随机变量的数字特征"></a>随机变量的数字特征</h1><h2 id="数学期望"><a href="#数学期望" class="headerlink" title="数学期望"></a>数学期望</h2><p>数学期望简称期望，又称均值。数学期望完全由概率分布决定。</p><h3 id="离散型-1"><a href="#离散型-1" class="headerlink" title="离散型"></a>离散型</h3><p>若离散型随机变量$X$的分布律为$P\left{ X = x_{i} \right} = p_{i}$ ，且级数$E(X) = \sum_{i}^{}{x_{i}p_{i} }$绝对收敛，则称$E(x)$为随机变量$X$的数学期望。</p><h3 id="连续型-1"><a href="#连续型-1" class="headerlink" title="连续型"></a>连续型</h3><p>$X\sim f(x),E(X) = \int_{- \infty}^{+ \infty}{xf(x)dx}$</p><h3 id="性质-4"><a href="#性质-4" class="headerlink" title="性质"></a>性质</h3><ul><li>$E(C) = C,E\lbrack E(X)\rbrack = E(X)$</li><li>$E(C_{1}X + C_{2}Y) = C_{1}E(X) + C_{2}E(Y)$</li><li>若$X$和$Y$独立，则$E(XY) = E(X)E(Y)$</li><li>$\left\lbrack E(XY) \right\rbrack^{2} \leq E(X^{2})E(Y^{2})$</li></ul><h3 id="随机变量函数的数学期望"><a href="#随机变量函数的数学期望" class="headerlink" title="随机变量函数的数学期望"></a>随机变量函数的数学期望</h3><p>对于函数$Y = g(x)$</p><h4 id="X-为离散型"><a href="#X-为离散型" class="headerlink" title="$X$为离散型"></a>$X$为离散型</h4><p>$P{ X = x_{i}} = p_{i},E(Y) = \sum_{i}^{}{g(x_{i})p_{i} }$；</p><h4 id="X-为连续型"><a href="#X-为连续型" class="headerlink" title="$X$为连续型"></a>$X$为连续型</h4><p>$X\sim f(x),E(Y) = \int_{- \infty}^{+ \infty}{g(x)f(x)dx}$<br>扩展到多维函数：$Z = g(X,Y)$;$\left( X,Y \right)\sim P{ X = x_{i},Y = y_{j}} = p_{ {ij} }$;$E(Z) = \sum_{i}^{}{\sum_{j}^{}{g(x_{i},y_{j})p_{ {ij} } } }$ $\left( X,Y \right)\sim f(x,y)$;$E(Z) = \int_{- \infty}^{+ \infty}{\int_{- \infty}^{+ \infty}{g(x,y)f(x,y)dxdy} }$</p><h2 id="方差"><a href="#方差" class="headerlink" title="方差"></a>方差</h2><p>$D(X) = E\left\lbrack X - E(X) \right\rbrack^{2} = E(X^{2}) - \left\lbrack E(X) \right\rbrack^{2}$，有时也记作$Var(X)$。<br>同时引入标准差（均方差）$\sigma (x)=\sqrt{D(X)}$。</p><h3 id="离散型-2"><a href="#离散型-2" class="headerlink" title="离散型"></a>离散型</h3><p>$D(X) = \sum_{i}^{}{\left\lbrack x_{i} - E(X) \right\rbrack^{2}p_{i} }$</p><h3 id="连续型-2"><a href="#连续型-2" class="headerlink" title="连续型"></a>连续型</h3><p>$D(X) = {\int_{- \infty}^{+ \infty}\left\lbrack x - E(X) \right\rbrack}^{2}f(x)dx$</p><h3 id="性质-5"><a href="#性质-5" class="headerlink" title="性质"></a>性质</h3><ul><li>$\ D(X) = E(X^{2}) - E^{2}(X)$</li><li>$\ D(C) = 0,D\lbrack E(X)\rbrack = 0,D\lbrack D(X)\rbrack = 0$<ul><li>$\ D\left( C_{1}X + C_{2} \right) = C_{1}^{2}D\left( X \right)$</li></ul></li><li>$X$与$Y$相互独立，则$D(X \pm Y) = D(X) + D(Y)$</li><li>$\ D(X) = 0 \Leftrightarrow P\left{ X = C \right} = 1$</li><li>$\ D\left( X \right) &lt; E\left( X - C \right)^{2},C \neq E\left( X \right)$</li></ul><h3 id="Chebyshev（切比雪夫）不等式"><a href="#Chebyshev（切比雪夫）不等式" class="headerlink" title="Chebyshev（切比雪夫）不等式"></a>Chebyshev（切比雪夫）不等式</h3><p>若随机变量$X$满足$E(X)=\mu$，方差$D(x)=\sigma^2$，则对于任意正数$\varepsilon$，有切比雪夫不等式$P{|X-\mu|\ge\varepsilon}\leq\frac{\sigma^2}{\varepsilon^2}$成立。</p><h2 id="协方差及相关系数"><a href="#协方差及相关系数" class="headerlink" title="协方差及相关系数"></a>协方差及相关系数</h2><p>$Cov(X,Y) = E\left\lbrack (X - E(X)(Y - E(Y)) \right\rbrack$称为随机变量$X,Y$的协方差，$\rho_{ {XY} } = \frac{Cov(X,Y)}{\sqrt{D(X)}\sqrt{D(Y)} }$称为他们的相关系数。</p><h3 id="性质-6"><a href="#性质-6" class="headerlink" title="性质"></a>性质</h3><ul><li>$\ Cov(X,Y) = Cov(Y,X)$</li><li>$\ Cov(aX,bY) = abCov(Y,X)$</li><li>$\ Cov(X_{1} + X_{2},Y) = Cov(X_{1},Y) + Cov(X_{2},Y)$</li><li>$\ \left| \rho\left( X,Y \right) \right| \leq 1$</li><li>$\ \rho\left( X,Y \right) = 1 \Leftrightarrow P\left( Y = aX + b \right) = 1$ ，其中$a &gt; 0$</li><li>$\rho\left( X,Y \right) = - 1 \Leftrightarrow P\left( Y = aX + b \right) = 1$，其中$a &lt; 0$</li><li>一般有 $D(X \pm Y) = D(X) + D(Y) \pm 2Cov(X,Y) = D(X) + D(Y) \pm 2\rho\sqrt{D(X)}\sqrt{D(Y)}$</li></ul><h3 id="重要公式与结论-1"><a href="#重要公式与结论-1" class="headerlink" title="重要公式与结论"></a>重要公式与结论</h3><ul><li>$\ Cov(X,Y) = E(XY) - E(X)E(Y)$</li><li>$\left| \rho\left( X,Y \right) \right| \leq 1,$且 $\rho\left( X,Y \right) = 1 \Leftrightarrow P\left( Y = aX + b \right) = 1$，其中$a &gt; 0$</li><li>$\rho\left( X,Y \right) = - 1 \Leftrightarrow P\left( Y = aX + b \right) = 1$，其中$a &lt; 0$</li><li>下面5个条件互为充要条件：$\rho(X,Y) = 0$ $\Leftrightarrow Cov(X,Y) = 0$ $\Leftrightarrow E(X,Y) = E(X)E(Y)$ $\Leftrightarrow D(X + Y) = D(X) + D(Y)$ $\Leftrightarrow  D(X - Y) = D(X) + D(Y)$。注：$X$与$Y$独立为上述5个条件中任何一个成立的充分条件，但非必要条件。</li></ul><h2 id="矩、协方差矩阵（待补充）"><a href="#矩、协方差矩阵（待补充）" class="headerlink" title="矩、协方差矩阵（待补充）"></a>矩、协方差矩阵（待补充）</h2><p>$E(X^{k})$称为$X$的$k$阶原点矩，简称$k$阶矩。<br>$E\left{ {\lbrack X - E(X)\rbrack}^{k} \right},k=2,3,\ldots$称为$X$的$k$阶中心矩。<br>$E(X^{k}Y^{l})$称为$X,Y$的$k+l$阶混合矩。<br>$E\left{ {\lbrack X - E(X)\rbrack}^{k}  {\lbrack Y - E(Y)\rbrack}^{l}\right},k,l=2,3,\ldots$称为$X,Y$的$k+l$阶混合中心矩。<br>显然，$E(X)$是$X的一阶原点矩，$D(X)$是$X的二阶中心矩，$Cov(X,Y)$是$X,Y$的二阶混合中心矩。</p><h1 id="大数定律及中心极限定理"><a href="#大数定律及中心极限定理" class="headerlink" title="大数定律及中心极限定理"></a>大数定律及中心极限定理</h1><h2 id="大数定律"><a href="#大数定律" class="headerlink" title="大数定律"></a>大数定律</h2><h3 id="辛钦大数定理（弱大数定理）"><a href="#辛钦大数定理（弱大数定理）" class="headerlink" title="辛钦大数定理（弱大数定理）"></a>辛钦大数定理（弱大数定理）</h3><p>设随机变量$X_1,X_2,\ldots,X_n,\ldots$相互独立，服从同一分布且具有数学期望$E(X_k)=\mu,(k=1,2,\ldots)$，则序列$\overline{X}=\frac{1}{n}\sum_{k=1}^nX_k$依概率收敛于$\mu$。</p><h3 id="伯努利大数定理"><a href="#伯努利大数定理" class="headerlink" title="伯努利大数定理"></a>伯努利大数定理</h3><p>伯努利大数定理是辛钦大数定理的一个重要推论，它表明：试验次数很大时，可用事件的频率代替事件的概率。<br>设$f_A$是n次独立重复试验中事件A发生的次数，$p$是事件A在每次试验中发生的概率，则对于任意的正数$\varepsilon$，有$\lim_{n\to\infty}P{|\frac{f_A}{n}-p|&lt;\varepsilon}=1$，$\lim_{n\to\infty}P{|\frac{f_A}{n}-p|\ge\varepsilon}=0$。</p><h2 id="中心极限定理"><a href="#中心极限定理" class="headerlink" title="中心极限定理"></a>中心极限定理</h2><h3 id="独立同分布的中心极限定理"><a href="#独立同分布的中心极限定理" class="headerlink" title="独立同分布的中心极限定理"></a>独立同分布的中心极限定理</h3><p>设随机变量$X_1,X_2,\ldots,X_n,\ldots$相互独立，服从同一分布且具有数学期望和方差$E(X_k)=\mu,D(X_k)=\sigma^2&gt;0,(k=1,2,\ldots)$，则随机变量之和$\sum_{k=1}^nX_k$的标准化变量$Y_n=\frac{\sum_{k=1}^nX_k-n\mu}{\sqrt{n}\sigma}$的分布函数$F_n(x)$对任意x满足$\lim_{n\to\infty}F_n(x)=\Phi(x)$。<br>这就是说，n足够大的时候，近似地有$\frac{\sum_{k=1}^nX_k-n\mu}{\sqrt{n}\sigma}\sim N(0,1)$或$\overline{X}~N(\mu,\frac{\sigma^2}{n})$</p><h3 id="Lyapunov（李雅普诺夫）定理"><a href="#Lyapunov（李雅普诺夫）定理" class="headerlink" title="Lyapunov（李雅普诺夫）定理"></a>Lyapunov（李雅普诺夫）定理</h3><p>设随机变量$X_1,X_2,\ldots,X_n,\ldots$相互独立，具有数学期望和方差$E(X_k)=\mu_k,D(X_k)=\sigma_k^2&gt;0,(k=1,2,\ldots)$，记$B_n=\sum_{k=1}^n\sigma_k^2$，若存在正数$\delta$，使得当$n\to\infty$时，$\frac{1}{B_n^{2+\delta}}\sum_{k=1}^nE{|X_k-\mu_k|^{2+\delta}}\to 0$，则随机化变量之和$\sum_{k=1}^nX_k$的标准化变量$Z_n=\frac{\sum_{k=1}^nX_k-\sum_{k=1}^n\mu_k}{B_n}$的分布函数$F_n(x)$对于任意x满足$\lim_{n\to\infty}F_n(x)=\Phi(x)$。<br>该定理表明，n足够大的时候，近似地有$Z_n\sim N(0,1)$。</p><h3 id="De-Moivre-Laplace（棣莫弗-拉普拉斯）定理"><a href="#De-Moivre-Laplace（棣莫弗-拉普拉斯）定理" class="headerlink" title="De Moivre-Laplace（棣莫弗-拉普拉斯）定理"></a>De Moivre-Laplace（棣莫弗-拉普拉斯）定理</h3><p>独立同分布的中心极限定理的特殊情况，设随机变量$\eta_n(n=1,2,\ldots)$服从参数为$n,p(0 &lt; p &lt; 1) $的二项分布，则对于任意x，有$\lim_{n\to\infty}P{\frac{\eta_n-np}{\sqrt{np(1-p)}}\leq x}=\Phi(x)$。</p><h1 id="样本及抽样分布"><a href="#样本及抽样分布" class="headerlink" title="样本及抽样分布"></a>样本及抽样分布</h1><h2 id="随机样本"><a href="#随机样本" class="headerlink" title="随机样本"></a>随机样本</h2><h3 id="总体"><a href="#总体" class="headerlink" title="总体"></a>总体</h3><p>研究对象的全体，它是一个随机变量，用$X$表示。</p><h3 id="个体"><a href="#个体" class="headerlink" title="个体"></a>个体</h3><p>组成总体的每个基本元素。</p><h3 id="简单随机样本"><a href="#简单随机样本" class="headerlink" title="简单随机样本"></a>简单随机样本</h3><p>来自总体$X$的$n$个相互独立且与总体同分布的随机变量$X_{1},X_{2}\cdots,X_{n}$，称为容量为$n$的简单随机样本，简称样本。</p><h2 id="直方图和箱线图"><a href="#直方图和箱线图" class="headerlink" title="直方图和箱线图"></a>直方图和箱线图</h2><h3 id="直方图"><a href="#直方图" class="headerlink" title="直方图"></a>直方图</h3><h3 id="箱线图"><a href="#箱线图" class="headerlink" title="箱线图"></a>箱线图</h3><h4 id="样本分位数"><a href="#样本分位数" class="headerlink" title="样本分位数"></a>样本分位数</h4><p>若$P(X \leq x_{\alpha}) = \alpha,$则称$x_{\alpha}$为$X$的$\alpha$分位数</p><h2 id="抽样分布"><a href="#抽样分布" class="headerlink" title="抽样分布"></a>抽样分布</h2><h3 id="统计量"><a href="#统计量" class="headerlink" title="统计量"></a>统计量</h3><p>设$X_{1},X_{2}\cdots,X_{n},$是来自总体$X$的一个样本，$g(X_{1},X_{2}\cdots,X_{n})$）是样本的连续函数，且$g()$中不含任何未知参数，则称$g(X_{1},X_{2}\cdots,X_{n})$为统计量。</p><h4 id="样本均值"><a href="#样本均值" class="headerlink" title="样本均值"></a>样本均值</h4><p>$\overline{X} = \frac{1}{n}\sum_{i = 1}^{n}X_{i}$</p><h4 id="样本方差"><a href="#样本方差" class="headerlink" title="样本方差"></a>样本方差</h4><p>$S^{2} = \frac{1}{n - 1}\sum_{i = 1}^{n}{(X_{i} - \overline{X})}^{2}$</p><h4 id="样本矩"><a href="#样本矩" class="headerlink" title="样本矩"></a>样本矩</h4><p>样本$k$阶原点矩：$A_{k} = \frac{1}{n}\sum_{i = 1}^{n}X_{i}^{k},k = 1,2,\cdots$</p><h4 id="样本k阶中心矩"><a href="#样本k阶中心矩" class="headerlink" title="样本k阶中心矩"></a>样本k阶中心矩</h4><p>$B_{k} = \frac{1}{n}\sum_{i = 1}^{n}{(X_{i} - \overline{X})}^{k},k = 1,2,\cdots$</p><h3 id="常用统计量分布"><a href="#常用统计量分布" class="headerlink" title="常用统计量分布"></a>常用统计量分布</h3><h4 id="chi-2-分布"><a href="#chi-2-分布" class="headerlink" title="$\chi^{2}$分布"></a>$\chi^{2}$分布</h4><p>$\chi^{2} = X_{1}^{2} + X_{2}^{2} + \cdots + X_{n}^{2}\sim\chi^{2}(n)$，其中$X_{1},X_{2}\cdots,X_{n},$相互独立，且同服从$N(0,1)$</p><h4 id="t-分布"><a href="#t-分布" class="headerlink" title="$t$分布"></a>$t$分布</h4><p>$T = \frac{X}{\sqrt{Y/n} }\sim t(n)$ ，其中$X\sim N\left( 0,1 \right),Y\sim\chi^{2}(n),$且$X$，$Y$ 相互独立。</p><h4 id="F-分布"><a href="#F-分布" class="headerlink" title="$F$分布"></a>$F$分布</h4><p>$F = \frac{X/n_{1} }{Y/n_{2} }\sim F(n_{1},n_{2})$，其中$X\sim\chi^{2}\left( n_{1} \right),Y\sim\chi^{2}(n_{2}),$且$X$，$Y$相互独立。</p><h4 id="正态总体的常用样本分布"><a href="#正态总体的常用样本分布" class="headerlink" title="正态总体的常用样本分布"></a>正态总体的常用样本分布</h4><p>设$X_{1},X_{2}\cdots,X_{n}$为来自正态总体$N(\mu,\sigma^{2})$的样本，$\overline{X} = \frac{1}{n}\sum_{i = 1}^{n}X_{i},S^{2} = \frac{1}{n - 1}\sum_{i = 1}^{n}{ {(X_{i} - \overline{X})}^{2} }$，则：</p><ul><li>$\overline{X}\sim N\left( \mu,\frac{\sigma^{2} }{n} \right){\ \ }$或者$\frac{\overline{X} - \mu}{\frac{\sigma}{\sqrt{n} } }\sim N(0,1)$</li><li>$\frac{(n - 1)S^{2} }{\sigma^{2} } = \frac{1}{\sigma^{2} }\sum_{i = 1}^{n}{ {(X_{i} - \overline{X})}^{2}\sim\chi^{2}(n - 1)}$</li><li>$\frac{1}{\sigma^{2} }\sum_{i = 1}^{n}{ {(X_{i} - \mu)}^{2}\sim\chi^{2}(n)}$</li><li>${\ \ }\frac{\overline{X} - \mu}{S/\sqrt{n} }\sim t(n - 1)$</li></ul><h4 id="重要公式与结论-2"><a href="#重要公式与结论-2" class="headerlink" title="重要公式与结论"></a>重要公式与结论</h4><ul><li>对于$\chi^{2}\sim\chi^{2}(n)$，有$E(\chi^{2}(n)) = n,D(\chi^{2}(n)) = 2n$；</li><li>对于$T\sim t(n)$，有$E(T) = 0,D(T) = \frac{n}{n - 2}(n &gt; 2)$；</li><li>对于$F\sim{\ }F(m,n)$，有 $\frac{1}{F}\sim F(n,m),F_{a/2}(m,n) = \frac{1}{F_{1 - a/2}(n,m)}$；</li><li>对于任意总体$X$，有 $E(\overline{X}) = E(X),E(S^{2}) = D(X),D(\overline{X}) = \frac{D(X)}{n}$</li></ul><h1 id="参数估计"><a href="#参数估计" class="headerlink" title="参数估计"></a>参数估计</h1><h2 id="点估计"><a href="#点估计" class="headerlink" title="点估计"></a>点估计</h2><h3 id="矩估计法"><a href="#矩估计法" class="headerlink" title="矩估计法"></a>矩估计法</h3><h3 id="最大似然估计法"><a href="#最大似然估计法" class="headerlink" title="最大似然估计法"></a>最大似然估计法</h3><h2 id="基于截尾样本的最大似然估计"><a href="#基于截尾样本的最大似然估计" class="headerlink" title="基于截尾样本的最大似然估计"></a>基于截尾样本的最大似然估计</h2><h2 id="估计量的评选标准"><a href="#估计量的评选标准" class="headerlink" title="估计量的评选标准"></a>估计量的评选标准</h2><h3 id="无偏性"><a href="#无偏性" class="headerlink" title="无偏性"></a>无偏性</h3><h3 id="有效性"><a href="#有效性" class="headerlink" title="有效性"></a>有效性</h3><h3 id="相和性"><a href="#相和性" class="headerlink" title="相和性"></a>相和性</h3><h2 id="区间估计"><a href="#区间估计" class="headerlink" title="区间估计"></a>区间估计</h2><h2 id="正态总体均值与方差的区间估计"><a href="#正态总体均值与方差的区间估计" class="headerlink" title="正态总体均值与方差的区间估计"></a>正态总体均值与方差的区间估计</h2><h2 id="0-1-分布参数的区间估计"><a href="#0-1-分布参数的区间估计" class="headerlink" title="(0-1)分布参数的区间估计"></a>(0-1)分布参数的区间估计</h2><h2 id="单侧置信区间"><a href="#单侧置信区间" class="headerlink" title="单侧置信区间"></a>单侧置信区间</h2><h1 id="假设试验"><a href="#假设试验" class="headerlink" title="假设试验"></a>假设试验</h1><h2 id="假设检验"><a href="#假设检验" class="headerlink" title="假设检验"></a>假设检验</h2><h2 id="正态总体均值的假设检验"><a href="#正态总体均值的假设检验" class="headerlink" title="正态总体均值的假设检验"></a>正态总体均值的假设检验</h2><h3 id="单个总体-N-mu-sigma-2-均值-mu-的检验"><a href="#单个总体-N-mu-sigma-2-均值-mu-的检验" class="headerlink" title="单个总体$N(\mu,\sigma^2)$均值$\mu$的检验"></a>单个总体$N(\mu,\sigma^2)$均值$\mu$的检验</h3><h4 id="sigma-2-已知，关于-mu-的检验（Z检验）"><a href="#sigma-2-已知，关于-mu-的检验（Z检验）" class="headerlink" title="$\sigma^2$已知，关于$\mu$的检验（Z检验）"></a>$\sigma^2$已知，关于$\mu$的检验（Z检验）</h4><h4 id="mu-已知，关于-sigma-2-的检验（t检验）"><a href="#mu-已知，关于-sigma-2-的检验（t检验）" class="headerlink" title="$\mu$已知，关于$\sigma^2$的检验（t检验）"></a>$\mu$已知，关于$\sigma^2$的检验（t检验）</h4><h3 id="两个正态总体均值差的检验（t检验）"><a href="#两个正态总体均值差的检验（t检验）" class="headerlink" title="两个正态总体均值差的检验（t检验）"></a>两个正态总体均值差的检验（t检验）</h3><h3 id="基于成对数据的检验（t检验）"><a href="#基于成对数据的检验（t检验）" class="headerlink" title="基于成对数据的检验（t检验）"></a>基于成对数据的检验（t检验）</h3><h2 id="正态总体方差的假设检验"><a href="#正态总体方差的假设检验" class="headerlink" title="正态总体方差的假设检验"></a>正态总体方差的假设检验</h2><h3 id="单个总体的情况"><a href="#单个总体的情况" class="headerlink" title="单个总体的情况"></a>单个总体的情况</h3><h3 id="两个总体的情况"><a href="#两个总体的情况" class="headerlink" title="两个总体的情况"></a>两个总体的情况</h3><h2 id="置信区间与假设检验之间的关系"><a href="#置信区间与假设检验之间的关系" class="headerlink" title="置信区间与假设检验之间的关系"></a>置信区间与假设检验之间的关系</h2><h2 id="样本容量的选取"><a href="#样本容量的选取" class="headerlink" title="样本容量的选取"></a>样本容量的选取</h2><h2 id="分布拟合检验"><a href="#分布拟合检验" class="headerlink" title="分布拟合检验"></a>分布拟合检验</h2><h3 id="单个分布的-chi-2-拟合检验法"><a href="#单个分布的-chi-2-拟合检验法" class="headerlink" title="单个分布的$\chi^2$拟合检验法"></a>单个分布的$\chi^2$拟合检验法</h3><h3 id="分布族的-chi-2-拟合检验"><a href="#分布族的-chi-2-拟合检验" class="headerlink" title="分布族的$\chi^2$拟合检验"></a>分布族的$\chi^2$拟合检验</h3><h3 id="偏度、峰度检验"><a href="#偏度、峰度检验" class="headerlink" title="偏度、峰度检验"></a>偏度、峰度检验</h3><h2 id="秩和检验"><a href="#秩和检验" class="headerlink" title="秩和检验"></a>秩和检验</h2><h2 id="假设检验问题的p值检验法"><a href="#假设检验问题的p值检验法" class="headerlink" title="假设检验问题的p值检验法"></a>假设检验问题的p值检验法</h2><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>线性代数</title>
      <link href="/2018/12/03/2018-12-03-xian-xing-dai-shu-ji-chu/"/>
      <url>/2018/12/03/2018-12-03-xian-xing-dai-shu-ji-chu/</url>
      
        <content type="html"><![CDATA[<blockquote><p><strong>转载自</strong><a href="https://github.com/fengdu78/Coursera-ML-AndrewNg-Notes" target="_blank" rel="noopener">斯坦福大学2014（吴恩达）机器学习教程中文笔记</a>，感谢编者黄海广博士。</p></blockquote><h1 id="线性代数"><a href="#线性代数" class="headerlink" title="线性代数"></a>线性代数</h1><h2 id="行列式"><a href="#行列式" class="headerlink" title="行列式"></a>行列式</h2><p><strong>1.行列式按行（列）展开定理</strong></p><p>(1) 设$A = ( a_{ {ij} } )<em>{n \times n}$，则：$a</em>{i1}A_{j1} +a_{i2}A_{j2} + \cdots + a_{ {in} }A_{ {jn} } = \begin{cases}|A|,i=j\ 0,i \neq j\end{cases}$</p><p>或$a_{1i}A_{1j} + a_{2i}A_{2j} + \cdots + a_{ {ni} }A_{ {nj} } = \begin{cases}|A|,i=j\ 0,i \neq j\end{cases}$即 $AA^{<em>} = A^{</em>}A = \left| A \right|E,$其中：$A^{*} = \begin{pmatrix} A_{11} &amp; A_{12} &amp; \ldots &amp; A_{1n} \ A_{21} &amp; A_{22} &amp; \ldots &amp; A_{2n} \ \ldots &amp; \ldots &amp; \ldots &amp; \ldots \ A_{n1} &amp; A_{n2} &amp; \ldots &amp; A_{ {nn} } \ \end{pmatrix} = (A_{ {ji} }) = {(A_{ {ij} })}^{T}$</p><p>$D_{n} = \begin{vmatrix} 1 &amp; 1 &amp; \ldots &amp; 1 \ x_{1} &amp; x_{2} &amp; \ldots &amp; x_{n} \ \ldots &amp; \ldots &amp; \ldots &amp; \ldots \ x_{1}^{n - 1} &amp; x_{2}^{n - 1} &amp; \ldots &amp; x_{n}^{n - 1} \ \end{vmatrix} = \prod_{1 \leq j &lt; i \leq n}^{},(x_{i} - x_{j})$</p><p>(2) 设$A,B$为$n$阶方阵，则$\left| {AB} \right| = \left| A \right|\left| B \right| = \left| B \right|\left| A \right| = \left| {BA} \right|$，但$\left| A \pm B \right| = \left| A \right| \pm \left| B \right|$不一定成立。</p><p>(3) $\left| {kA} \right| = k^{n}\left| A \right|$,$A$为$n$阶方阵。</p><p>(4) 设$A$为$n$阶方阵，$|A^{T}| = |A|;|A^{- 1}| = |A|^{- 1}$（若$A$可逆），$|A^{*}| = |A|^{n - 1}$</p><p>$n \geq 2$</p><p>(5) $\left| \begin{matrix}  &amp; {A\quad O} \  &amp; {O\quad B} \ \end{matrix} \right| = \left| \begin{matrix}  &amp; {A\quad C} \  &amp; {O\quad B} \ \end{matrix} \right| = \left| \begin{matrix}  &amp; {A\quad O} \  &amp; {C\quad B} \ \end{matrix} \right| =| A||B|$<br>，$A,B$为方阵，但$\left| \begin{matrix} {O} &amp; A_{m \times m} \  B_{n \times n} &amp; { O} \ \end{matrix} \right| = ({- 1)}^{ {mn} }|A||B|$ 。</p><p>(6) 范德蒙行列式$D_{n} = \begin{vmatrix} 1 &amp; 1 &amp; \ldots &amp; 1 \ x_{1} &amp; x_{2} &amp; \ldots &amp; x_{n} \ \ldots &amp; \ldots &amp; \ldots &amp; \ldots \ x_{1}^{n - 1} &amp; x_{2}^{n 1} &amp; \ldots &amp; x_{n}^{n - 1} \ \end{vmatrix} =  \prod_{1 \leq j &lt; i \leq n}^{},(x_{i} - x_{j})$</p><p>设$A$是$n$阶方阵，$\lambda_{i}(i = 1,2\cdots,n)$是$A$的$n$个特征值，则<br>$|A| = \prod_{i = 1}^{n}\lambda_{i}​$</p><h2 id="矩阵"><a href="#矩阵" class="headerlink" title="矩阵"></a>矩阵</h2><p>矩阵：$m \times n$个数$a_{ {ij} }$排成$m$行$n$列的表格$\begin{bmatrix}  a_{11}\quad a_{12}\quad\cdots\quad a_{1n} \ a_{21}\quad a_{22}\quad\cdots\quad a_{2n} \ \quad\cdots\cdots\cdots\cdots\cdots \  a_{m1}\quad a_{m2}\quad\cdots\quad a_{ {mn} } \ \end{bmatrix}$ 称为矩阵，简记为$A$，或者$\left( a_{ {ij} } \right)_{m \times n}$ 。若$m = n$，则称$A$是$n$阶矩阵或$n$阶方阵。</p><p><strong>矩阵的线性运算</strong></p><p><strong>1.矩阵的加法</strong></p><p>设$A = (a_{ {ij} }),B = (b_{ {ij} })$是两个$m \times n$矩阵，则$m \times n$ 矩阵$C = c_{ {ij} }) = a_{ {ij} } + b_{ {ij} }$称为矩阵$A$与$B$的和，记为$A + B = C$ 。</p><p><strong>2.矩阵的数乘</strong></p><p>设$A = (a_{ {ij} })$是$m \times n$矩阵，$k$是一个常数，则$m \times n$矩阵$(ka_{ {ij} })$称为数$k$与矩阵$A$的数乘，记为${kA}$。</p><p><strong>3.矩阵的乘法</strong></p><p>设$A = (a_{ {ij} })$是$m \times n$矩阵，$B = (b_{ {ij} })$是$n \times s$矩阵，那么$m \times s$矩阵$C = (c_{ {ij} })$，其中$c_{ {ij} } = a_{i1}b_{1j} + a_{i2}b_{2j} + \cdots + a_{ {in} }b_{ {nj} } = \sum_{k =1}^{n}{a_{ {ik} }b_{ {kj} } }$称为${AB}$的乘积，记为$C = AB$ 。</p><p><strong>4.</strong> $\mathbf{A}^{\mathbf{T} }$<strong>、</strong>$\mathbf{A}^{\mathbf{-1} }$<strong>、</strong>$\mathbf{A}^{\mathbf{<em>} }$*</em>三者之间的关系**</p><p>(1) ${(A^{T})}^{T} = A,{(AB)}^{T} = B^{T}A^{T},{(kA)}^{T} = kA^{T},{(A \pm B)}^{T} = A^{T} \pm B^{T}$</p><p>(2) $\left( A^{- 1} \right)^{- 1} = A,\left( {AB} \right)^{- 1} = B^{- 1}A^{- 1},\left( {kA} \right)^{- 1} = \frac{1}{k}A^{- 1},$</p><p>但 ${(A \pm B)}^{- 1} = A^{- 1} \pm B^{- 1}$不一定成立。</p><p>(3) $\left( A^{<em>} \right)^{</em>} = |A|^{n - 2}\ A\ \ (n \geq 3)$，$\left({AB} \right)^{<em>} = B^{</em>}A^{<em>},$ $\left( {kA} \right)^{</em>} = k^{n -1}A^{*}{\ \ }\left( n \geq 2 \right)$</p><p>但$\left( A \pm B \right)^{<em>} = A^{</em>} \pm B^{*}$不一定成立。</p><p>(4) ${(A^{- 1})}^{T} = {(A^{T})}^{- 1},\ \left( A^{- 1} \right)^{<em>} ={(AA^{</em>})}^{- 1},{(A^{<em>})}^{T} = \left( A^{T} \right)^{</em>}$</p><p><strong>5.有关</strong>$\mathbf{A}^{\mathbf{<em>} }$*</em>的结论**</p><p>(1) $AA^{<em>} = A^{</em>}A = |A|E$</p><p>(2) $|A^{<em>}| = |A|^{n - 1}\ (n \geq 2),\ \ \ \ {(kA)}^{</em>} = k^{n -1}A^{<em>},{ {\ \ }\left( A^{</em>} \right)}^{*} = |A|^{n - 2}A(n \geq 3)$</p><p>(3) 若$A$可逆，则$A^{<em>} = |A|A^{- 1},{(A^{</em>})}^{*} = \frac{1}{|A|}A$</p><p>(4) 若$A​$为$n​$阶方阵，则：</p><p>$r(A^*)=\begin{cases}n,\quad r(A)=n\ 1,\quad r(A)=n-1\ 0,\quad r(A)&lt;n-1\end{cases}$</p><p><strong>6.有关</strong>$\mathbf{A}^{\mathbf{- 1} }$<strong>的结论</strong></p><p>$A$可逆$\Leftrightarrow AB = E; \Leftrightarrow |A| \neq 0; \Leftrightarrow r(A) = n;$</p><p>$\Leftrightarrow A$可以表示为初等矩阵的乘积；$\Leftrightarrow A;\Leftrightarrow Ax = 0$。</p><p><strong>7.有关矩阵秩的结论</strong></p><p>(1) 秩$r(A)$=行秩=列秩；</p><p>(2) $r(A_{m \times n}) \leq \min(m,n);$</p><p>(3) $A \neq 0 \Rightarrow r(A) \geq 1$；</p><p>(4) $r(A \pm B) \leq r(A) + r(B);$</p><p>(5) 初等变换不改变矩阵的秩</p><p>(6) $r(A) + r(B) - n \leq r(AB) \leq \min(r(A),r(B)),$特别若$AB = O$<br>则：$r(A) + r(B) \leq n$</p><p>(7) 若$A^{- 1}$存在$\Rightarrow r(AB) = r(B);$ 若$B^{- 1}$存在<br>$\Rightarrow r(AB) = r(A);$</p><p>若$r(A_{m \times n}) = n \Rightarrow r(AB) = r(B);$ 若$r(A_{m \times s}) = n\Rightarrow r(AB) = r\left( A \right)$。</p><p>(8) $r(A_{m \times s}) = n \Leftrightarrow Ax = 0$只有零解</p><p><strong>8.分块求逆公式</strong></p><p>$\begin{pmatrix} A &amp; O \ O &amp; B \ \end{pmatrix}^{- 1} = \begin{pmatrix} A^{-1} &amp; O \ O &amp; B^{- 1} \ \end{pmatrix}$； $\begin{pmatrix} A &amp; C \ O &amp; B \\end{pmatrix}^{- 1} = \begin{pmatrix} A^{- 1}&amp; - A^{- 1}CB^{- 1} \ O &amp; B^{- 1} \ \end{pmatrix}$；</p><p>$\begin{pmatrix} A &amp; O \ C &amp; B \ \end{pmatrix}^{- 1} = \begin{pmatrix}  A^{- 1}&amp;{O} \   - B^{- 1}CA^{- 1} &amp; B^{- 1} \\end{pmatrix}$； $\begin{pmatrix} O &amp; A \ B &amp; O \ \end{pmatrix}^{- 1} =\begin{pmatrix} O &amp; B^{- 1} \ A^{- 1} &amp; O \ \end{pmatrix}$</p><p>这里$A$，$B$均为可逆方阵。</p><h2 id="向量"><a href="#向量" class="headerlink" title="向量"></a>向量</h2><p><strong>1.有关向量组的线性表示</strong></p><p>(1)$\alpha_{1},\alpha_{2},\cdots,\alpha_{s}$线性相关$\Leftrightarrow$至少有一个向量可以用其余向量线性表示。</p><p>(2)$\alpha_{1},\alpha_{2},\cdots,\alpha_{s}$线性无关，$\alpha_{1},\alpha_{2},\cdots,\alpha_{s}$，$\beta$线性相关$\Leftrightarrow \beta$可以由$\alpha_{1},\alpha_{2},\cdots,\alpha_{s}$唯一线性表示。</p><p>(3) $\beta$可以由$\alpha_{1},\alpha_{2},\cdots,\alpha_{s}$线性表示<br>$\Leftrightarrow r(\alpha_{1},\alpha_{2},\cdots,\alpha_{s}) =r(\alpha_{1},\alpha_{2},\cdots,\alpha_{s},\beta)$ 。</p><p><strong>2.有关向量组的线性相关性</strong></p><p>(1)部分相关，整体相关；整体无关，部分无关.</p><p>(2) ① $n$个$n$维向量<br>$\alpha_{1},\alpha_{2}\cdots\alpha_{n}$线性无关$\Leftrightarrow \left|\left\lbrack \alpha_{1}\alpha_{2}\cdots\alpha_{n} \right\rbrack \right| \neq0$， $n$个$n$维向量$\alpha_{1},\alpha_{2}\cdots\alpha_{n}$线性相关<br>$\Leftrightarrow |\lbrack\alpha_{1},\alpha_{2},\cdots,\alpha_{n}\rbrack| = 0$<br>。</p><p>② $n + 1$个$n$维向量线性相关。</p><p>③ 若$\alpha_{1},\alpha_{2}\cdots\alpha_{S}$线性无关，则添加分量后仍线性无关；或一组向量线性相关，去掉某些分量后仍线性相关。</p><p><strong>3.有关向量组的线性表示</strong></p><p>(1) $\alpha_{1},\alpha_{2},\cdots,\alpha_{s}$线性相关$\Leftrightarrow$至少有一个向量可以用其余向量线性表示。</p><p>(2) $\alpha_{1},\alpha_{2},\cdots,\alpha_{s}$线性无关，$\alpha_{1},\alpha_{2},\cdots,\alpha_{s}$，$\beta$线性相关$\Leftrightarrow\beta$ 可以由$\alpha_{1},\alpha_{2},\cdots,\alpha_{s}$唯一线性表示。</p><p>(3) $\beta$可以由$\alpha_{1},\alpha_{2},\cdots,\alpha_{s}$线性表示<br>$\Leftrightarrow r(\alpha_{1},\alpha_{2},\cdots,\alpha_{s}) =r(\alpha_{1},\alpha_{2},\cdots,\alpha_{s},\beta)$</p><p><strong>4.向量组的秩与矩阵的秩之间的关系</strong></p><p>设$r(A_{m \times n}) =r$，则$A$的秩$r(A)$与$A$的行列向量组的线性相关性关系为：</p><p>(1) 若$r(A_{m \times n}) = r = m$，则$A$的行向量组线性无关。</p><p>(2) 若$r(A_{m \times n}) = r &lt; m$，则$A$的行向量组线性相关。</p><p>(3) 若$r(A_{m \times n}) = r = n$，则$A$的列向量组线性无关。</p><p>(4) 若$r(A_{m \times n}) = r &lt; n$，则$A$的列向量组线性相关。</p><p><strong>5.</strong>$\mathbf{n}$<strong>维向量空间的基变换公式及过渡矩阵</strong></p><p>若$\alpha_{1},\alpha_{2},\cdots,\alpha_{n}$与$\beta_{1},\beta_{2},\cdots,\beta_{n}$是向量空间$V$的两组基，则基变换公式为：</p><p>$(\beta_{1},\beta_{2},\cdots,\beta_{n}) = (\alpha_{1},\alpha_{2},\cdots,\alpha_{n})\begin{bmatrix}  c_{11}&amp; c_{12}&amp; \cdots &amp; c_{1n} \  c_{21}&amp; c_{22}&amp;\cdots &amp; c_{2n} \ \cdots &amp; \cdots &amp; \cdots &amp; \cdots \  c_{n1}&amp; c_{n2} &amp; \cdots &amp; c_{ {nn} } \\end{bmatrix} = (\alpha_{1},\alpha_{2},\cdots,\alpha_{n})C$</p><p>其中$C$是可逆矩阵，称为由基$\alpha_{1},\alpha_{2},\cdots,\alpha_{n}$到基$\beta_{1},\beta_{2},\cdots,\beta_{n}$的过渡矩阵。</p><p><strong>6.坐标变换公式</strong></p><p>若向量$\gamma$在基$\alpha_{1},\alpha_{2},\cdots,\alpha_{n}$与基$\beta_{1},\beta_{2},\cdots,\beta_{n}$的坐标分别是<br>$X = {(x_{1},x_{2},\cdots,x_{n})}^{T}$，</p><p>$Y = \left( y_{1},y_{2},\cdots,y_{n} \right)^{T}$ 即： $\gamma =x_{1}\alpha_{1} + x_{2}\alpha_{2} + \cdots + x_{n}\alpha_{n} = y_{1}\beta_{1} +y_{2}\beta_{2} + \cdots + y_{n}\beta_{n}$，则向量坐标变换公式为$X = CY$ 或$Y = C^{- 1}X$，其中$C$是从基$\alpha_{1},\alpha_{2},\cdots,\alpha_{n}$到基$\beta_{1},\beta_{2},\cdots,\beta_{n}$的过渡矩阵。</p><p><strong>7.向量的内积</strong></p><p>$(\alpha,\beta) = a_{1}b_{1} + a_{2}b_{2} + \cdots + a_{n}b_{n} = \alpha^{T}\beta = \beta^{T}\alpha$</p><p><strong>8.Schmidt正交化</strong></p><p>若$\alpha_{1},\alpha_{2},\cdots,\alpha_{s}$线性无关，则可构造$\beta_{1},\beta_{2},\cdots,\beta_{s}$使其两两正交，且$\beta_{i}$仅是$\alpha_{1},\alpha_{2},\cdots,\alpha_{i}$的线性组合$(i= 1,2,\cdots,n)$，再把$\beta_{i}$单位化，记$\gamma_{i} =\frac{\beta_{i} }{\left| \beta_{i}\right|}$，则$\gamma_{1},\gamma_{2},\cdots,\gamma_{i}$是规范正交向量组。其中<br>$\beta_{1} = \alpha_{1}$， $\beta_{2} = \alpha_{2} -\frac{(\alpha_{2},\beta_{1})}{(\beta_{1},\beta_{1})}\beta_{1}$ ， $\beta_{3} =\alpha_{3} - \frac{(\alpha_{3},\beta_{1})}{(\beta_{1},\beta_{1})}\beta_{1} -\frac{(\alpha_{3},\beta_{2})}{(\beta_{2},\beta_{2})}\beta_{2}$ ，</p><p>…………</p><p>$\beta_{s} = \alpha_{s} - \frac{(\alpha_{s},\beta_{1})}{(\beta_{1},\beta_{1})}\beta_{1} - \frac{(\alpha_{s},\beta_{2})}{(\beta_{2},\beta_{2})}\beta_{2} - \cdots - \frac{(\alpha_{s},\beta_{s - 1})}{(\beta_{s - 1},\beta_{s - 1})}\beta_{s - 1}$</p><p><strong>9.正交基及规范正交基</strong></p><p>向量空间一组基中的向量如果两两正交，就称为正交基；若正交基中每个向量都是单位向量，就称其为规范正交基。</p><h2 id="线性方程组"><a href="#线性方程组" class="headerlink" title="线性方程组"></a>线性方程组</h2><p><strong>1．克莱姆法则</strong></p><p>线性方程组$\begin{cases}  a_{11}x_{1} + a_{12}x_{2} + \cdots +a_{1n}x_{n} = b_{1} \   a_{21}x_{1} + a_{22}x_{2} + \cdots + a_{2n}x_{n} =b_{2} \   \quad\cdots\cdots\cdots\cdots\cdots\cdots\cdots\cdots\cdots \ a_{n1}x_{1} + a_{n2}x_{2} + \cdots + a_{ {nn} }x_{n} = b_{n} \ \end{cases}$，如果系数行列式$D = \left| A \right| \neq 0$，则方程组有唯一解，$x_{1} = \frac{D_{1} }{D},x_{2} = \frac{D_{2} }{D},\cdots,x_{n} =\frac{D_{n} }{D}$，其中$D_{j}$是把$D$中第$j$列元素换成方程组右端的常数列所得的行列式。</p><p><strong>2.</strong> $n$阶矩阵$A$可逆$\Leftrightarrow Ax = 0$只有零解。$\Leftrightarrow\forall b,Ax = b$总有唯一解，一般地，$r(A_{m \times n}) = n \Leftrightarrow Ax= 0$只有零解。</p><p><strong>3.非奇次线性方程组有解的充分必要条件，线性方程组解的性质和解的结构</strong></p><p>(1) 设$A$为$m \times n$矩阵，若$r(A_{m \times n}) = m$，则对$Ax =b$而言必有$r(A) = r(A \vdots b) = m$，从而$Ax = b$有解。</p><p>(2) 设$x_{1},x_{2},\cdots x_{s}$为$Ax = b$的解，则$k_{1}x_{1} + k_{2}x_{2}\cdots + k_{s}x_{s}$当$k_{1} + k_{2} + \cdots + k_{s} = 1$时仍为$Ax =b$的解；但当$k_{1} + k_{2} + \cdots + k_{s} = 0$时，则为$Ax =0$的解。特别$\frac{x_{1} + x_{2} }{2}$为$Ax = b$的解；$2x_{3} - (x_{1} +x_{2})$为$Ax = 0$的解。</p><p>(3) 非齐次线性方程组${Ax} = b$无解$\Leftrightarrow r(A) + 1 =r(\overline{A}) \Leftrightarrow b$不能由$A$的列向量$\alpha_{1},\alpha_{2},\cdots,\alpha_{n}$线性表示。</p><p><strong>4.奇次线性方程组的基础解系和通解，解空间，非奇次线性方程组的通解</strong></p><p>(1) 齐次方程组${Ax} = 0$恒有解(必有零解)。当有非零解时，由于解向量的任意线性组合仍是该齐次方程组的解向量，因此${Ax}= 0$的全体解向量构成一个向量空间，称为该方程组的解空间，解空间的维数是$n - r(A)$，解空间的一组基称为齐次方程组的基础解系。</p><p>(2) $\eta_{1},\eta_{2},\cdots,\eta_{t}$是${Ax} = 0$的基础解系，即：</p><p>1) $\eta_{1},\eta_{2},\cdots,\eta_{t}$是${Ax} = 0$的解；</p><p>2) $\eta_{1},\eta_{2},\cdots,\eta_{t}$线性无关；</p><p>3) ${Ax} = 0$的任一解都可以由$\eta_{1},\eta_{2},\cdots,\eta_{t}$线性表出.<br>$k_{1}\eta_{1} + k_{2}\eta_{2} + \cdots + k_{t}\eta_{t}$是${Ax} = 0$的通解，其中$k_{1},k_{2},\cdots,k_{t}$是任意常数。</p><h2 id="矩阵的特征值和特征向量"><a href="#矩阵的特征值和特征向量" class="headerlink" title="矩阵的特征值和特征向量"></a>矩阵的特征值和特征向量</h2><p><strong>1.矩阵的特征值和特征向量的概念及性质</strong></p><p>(1) 设$\lambda$是$A$的一个特征值，则 ${kA},{aA} + {bE},A^{2},A^{m},f(A),A^{T},A^{- 1},A^{*}$有一个特征值分别为<br>${kλ},{aλ} + b,\lambda^{2},\lambda^{m},f(\lambda),\lambda,\lambda^{- 1},\frac{|A|}{\lambda},$且对应特征向量相同（$A^{T}$ 例外）。</p><p>(2)若$\lambda_{1},\lambda_{2},\cdots,\lambda_{n}$为$A$的$n$个特征值，则$\sum_{i= 1}^{n}\lambda_{i} = \sum_{i = 1}^{n}a_{ {ii} },\prod_{i = 1}^{n}\lambda_{i}= |A|$ ,从而$|A| \neq 0 \Leftrightarrow A$没有特征值。</p><p>(3)设$\lambda_{1},\lambda_{2},\cdots,\lambda_{s}$为$A$的$s$个特征值，对应特征向量为$\alpha_{1},\alpha_{2},\cdots,\alpha_{s}$，</p><p>若: $\alpha = k_{1}\alpha_{1} + k_{2}\alpha_{2} + \cdots + k_{s}\alpha_{s}$ ,</p><p>则: $A^{n}\alpha = k_{1}A^{n}\alpha_{1} + k_{2}A^{n}\alpha_{2} + \cdots +k_{s}A^{n}\alpha_{s} = k_{1}\lambda_{1}^{n}\alpha_{1} +k_{2}\lambda_{2}^{n}\alpha_{2} + \cdots k_{s}\lambda_{s}^{n}\alpha_{s}$ 。</p><p><strong>2.相似变换、相似矩阵的概念及性质</strong></p><p>(1) 若$A \sim B$，则</p><p>1) $A^{T} \sim B^{T},A^{- 1} \sim B^{- 1},,A^{<em>} \sim B^{</em>}$</p><p>2) $|A| = |B|,\sum_{i = 1}^{n}A_{ {ii} } = \sum_{i =1}^{n}b_{ {ii} },r(A) = r(B)$</p><p>3) $|\lambda E - A| = |\lambda E - B|$，对$\forall\lambda$成立</p><p><strong>3.矩阵可相似对角化的充分必要条件</strong></p><p>(1)设$A$为$n$阶方阵，则$A$可对角化$\Leftrightarrow$对每个$k_{i}$重根特征值$\lambda_{i}$，有$n-r(\lambda_{i}E - A) = k_{i}$</p><p>(2) 设$A$可对角化，则由$P^{- 1}{AP} = \Lambda,$有$A = {PΛ}P^{-1}$，从而$A^{n} = P\Lambda^{n}P^{- 1}$</p><p>(3) 重要结论</p><p>1) 若$A \sim B,C \sim D​$，则$\begin{bmatrix}  A &amp; O \ O &amp; C \\end{bmatrix} \sim \begin{bmatrix} B &amp; O \  O &amp; D \\end{bmatrix}​$.</p><p>2) 若$A \sim B$，则$f(A) \sim f(B),\left| f(A) \right| \sim \left| f(B)\right|$，其中$f(A)$为关于$n$阶方阵$A$的多项式。</p><p>3) 若$A$为可对角化矩阵，则其非零特征值的个数(重根重复计算)＝秩($A$)</p><p><strong>4.实对称矩阵的特征值、特征向量及相似对角阵</strong></p><p>(1)相似矩阵：设$A,B$为两个$n$阶方阵，如果存在一个可逆矩阵$P$，使得$B =P^{- 1}{AP}$成立，则称矩阵$A$与$B$相似，记为$A \sim B$。</p><p>(2)相似矩阵的性质：如果$A \sim B$则有：</p><p>1) $A^{T} \sim B^{T}$</p><p>2) $A^{- 1} \sim B^{- 1}$ （若$A$，$B$均可逆）</p><p>3) $A^{k} \sim B^{k}$ （$k$为正整数）</p><p>4) $\left| {λE} - A \right| = \left| {λE} - B \right|$，从而$A,B$<br>有相同的特征值</p><p>5) $\left| A \right| = \left| B \right|$，从而$A,B$同时可逆或者不可逆</p><p>6) 秩$\left( A \right) =$秩$\left( B \right),\left| {λE} - A \right| =\left| {λE} - B \right|$，$A,B$不一定相似</p><h2 id="二次型"><a href="#二次型" class="headerlink" title="二次型"></a>二次型</h2><p><strong>1.</strong>$\mathbf{n}$<strong>个变量</strong>$\mathbf{x}<em>{\mathbf{1} }\mathbf{,}\mathbf{x}</em>{\mathbf{2} }\mathbf{,\cdots,}\mathbf{x}_{\mathbf{n} }$<strong>的二次齐次函数</strong></p><p>$f(x_{1},x_{2},\cdots,x_{n}) = \sum_{i = 1}^{n}{\sum_{j =1}^{n}{a_{ {ij} }x_{i}y_{j} } }$，其中$a_{ {ij} } = a_{ {ji} }(i,j =1,2,\cdots,n)$，称为$n$元二次型，简称二次型. 若令$x = \ \begin{bmatrix}x_{1} \ x_{1} \  \vdots \ x_{n} \ \end{bmatrix},A = \begin{bmatrix}  a_{11}&amp; a_{12}&amp; \cdots &amp; a_{1n} \  a_{21}&amp; a_{22}&amp; \cdots &amp; a_{2n} \ \cdots &amp;\cdots &amp;\cdots &amp;\cdots \  a_{n1}&amp; a_{n2} &amp; \cdots &amp; a_{ {nn} } \\end{bmatrix}$,这二次型$f$可改写成矩阵向量形式$f =x^{T}{Ax}$。其中$A$称为二次型矩阵，因为$a_{ {ij} } =a_{ {ji} }(i,j =1,2,\cdots,n)$，所以二次型矩阵均为对称矩阵，且二次型与对称矩阵一一对应，并把矩阵$A$的秩称为二次型的秩。</p><p><strong>2.惯性定理，二次型的标准形和规范形</strong></p><p>(1) 惯性定理</p><p>对于任一二次型，不论选取怎样的合同变换使它化为仅含平方项的标准型，其正负惯性指数与所选变换无关，这就是所谓的惯性定理。</p><p>(2) 标准形</p><p>二次型$f = \left( x_{1},x_{2},\cdots,x_{n} \right) =x^{T}{Ax}$经过合同变换$x = {Cy}$化为$f = x^{T}{Ax} =y^{T}C^{T}{AC}$</p><p>$y = \sum_{i = 1}^{r}{d_{i}y_{i}^{2} }$称为 $f(r \leq n)$的标准形。在一般的数域内，二次型的标准形不是唯一的，与所作的合同变换有关，但系数不为零的平方项的个数由$r(A)$唯一确定。</p><p>(3) 规范形</p><p>任一实二次型$f$都可经过合同变换化为规范形$f = z_{1}^{2} + z_{2}^{2} + \cdots z_{p}^{2} - z_{p + 1}^{2} - \cdots -z_{r}^{2}$，其中$r$为$A$的秩，$p$为正惯性指数，$r -p$为负惯性指数，且规范型唯一。</p><p><strong>3.用正交变换和配方法化二次型为标准形，二次型及其矩阵的正定性</strong></p><p>设$A$正定$\Rightarrow {kA}(k &gt; 0),A^{T},A^{- 1},A^{*}$正定；$|A| &gt;0$,$A$可逆；$a_{ {ii} } &gt; 0$，且$|A_{ {ii} }| &gt; 0$</p><p>$A$，$B$正定$\Rightarrow A +B$正定，但${AB}$，${BA}$不一定正定</p><p>$A$正定$\Leftrightarrow f(x) = x^{T}{Ax} &gt; 0,\forall x \neq 0$</p><p>$\Leftrightarrow A$的各阶顺序主子式全大于零</p><p>$\Leftrightarrow A$的所有特征值大于零</p><p>$\Leftrightarrow A$的正惯性指数为$n$</p><p>$\Leftrightarrow$存在可逆阵$P$使$A = P^{T}P$</p><p>$\Leftrightarrow$存在正交矩阵$Q$，使$Q^{T}{AQ} = Q^{- 1}{AQ} =\begin{pmatrix} \lambda_{1} &amp; &amp; \ \begin{matrix}  &amp; \  &amp; \ \end{matrix} &amp;\ddots &amp; \  &amp; &amp; \lambda_{n} \ \end{pmatrix},$</p><p>其中$\lambda_{i} &gt; 0,i = 1,2,\cdots,n.$正定$\Rightarrow {kA}(k &gt;0),A^{T},A^{- 1},A^{*}$正定； $|A| &gt; 0,A$可逆；$a_{ {ii} } &gt;0$，且$|A_{ {ii} }| &gt; 0$ 。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>数学分析</title>
      <link href="/2018/11/30/2018-11-30-shu-xue-fen-xi/"/>
      <url>/2018/11/30/2018-11-30-shu-xue-fen-xi/</url>
      
        <content type="html"><![CDATA[<h1 id="数学分析"><a href="#数学分析" class="headerlink" title="数学分析"></a>数学分析</h1><h2 id="增长趋势"><a href="#增长趋势" class="headerlink" title="增长趋势"></a>增长趋势</h2><p>$n\to+\infty,\forall p,q&gt;0,a&gt;1,{(\ln n)}^q\ll n^p\ll a^n\ll n!\ll n^n$</p><h2 id="积分表"><a href="#积分表" class="headerlink" title="积分表"></a>积分表</h2><p>反读可得导数表，此处略。<br>$\int k,\mathrm{d}x=kx+C$<br>$\int x^a,dx=\frac{x^{a+1} }{a+1}+C$<br>$\int\frac{1}{x},dx=\ln|x|+C$<br>$\int e^x,dx=e^x + C$<br>$\int a^x,dx=\frac{a^x}{\ln a}+C$<br>$\int\cos x,dx=\sin x+C$<br>$\int\sin x,dx=-\cos x+C$<br>$\int\frac{1}{cos^2x},dx=\int\sec^2 x,dx=\tan x+C$<br>$\int\frac{1}{sin^2x},dx=\int\csc^2 x,dx=-\cot x+C$<br>$\int\frac{1}{\sqrt{1-x^2} },dx=\arcsin x+C=-\arccos x + C$<br>$\int\frac{1}{1+x^2},dx=\arctan x+C=-arccot,x+C$<br>$\int\sec x\tan x,dx=\sec x+C$<br>$\int\csc x\cot x,dx=-\csc x+C$<br>$\int\tan x,dx=-\ln|\cos x|+C$<br>$\int\cot x,dx=\ln|\sin x|+C$<br>$\int\sec x,dx=\ln|\sec x+\tan x|+C$<br>$\int\csc x,dx=\ln|\csc x-\cot x|+C$<br>$\int sh,x,dx=ch,x+C$<br>$\int ch,x,dx=sh,x+C$<br>$\int\frac{1}{x^2+a^2},dx=\frac{1}{a}\arctan\frac{x}{a}+C$<br>$\int\frac{1}{x^2-a^2},dx=\frac{1}{2a}\ln|\frac{x-a}{x+a}| + C$<br>$\int\frac{1}{\sqrt{a^2-x^2} },dx=\arcsin\frac{x}{a}+C$<br>$\int\frac{1}{\sqrt{x^2-a^2} },dx=\ln|x+\sqrt{x^2-a^2}|+C$<br>$\int\frac{1}{\sqrt{x^2+a^2} },dx=\ln|x+\sqrt{x^2+a^2}|+C$</p><h2 id="积分求几何量"><a href="#积分求几何量" class="headerlink" title="积分求几何量"></a>积分求几何量</h2><h3 id="面积"><a href="#面积" class="headerlink" title="面积"></a>面积</h3><p>若简单闭曲线$\begin{cases}x=x(t),\y=y(t),\end{cases}t\in[\alpha,\beta]$端点处连续（$x(\alpha)=x(\beta),y(\alpha)=y(\beta)$）且其他地方不自交，$x(t),y(t)$都逐段有连续微商，则此闭合曲线围起来的有界区域面积$S=-\int_\alpha^\beta x’(t)y(t),dt=-\int_\alpha^\beta y(t),dx(t)=-\oint_\Gamma y,dx=\oint_\Gamma x,dy$等式右边称为曲线$\Gamma$上的积分，其计算方法是带入参数方程到定积分计算式中，积分上下限为始点与终点对应的参数值。下限并不总是小于上限，参数从下限到上限变化时对应曲线的正向（沿正向观察时，曲线所围的区域永远在左侧）。<br>极坐标下，连续非负曲线$r=r(\theta)$与向径$\theta=\alpha,\theta=\beta$，其中$0\leq\beta-\alpha\leq2\pi$所围成的平面图形面积$S=\frac{1}{2}\int_\alpha^\beta r^2(\theta),d\theta$</p><h3 id="体积"><a href="#体积" class="headerlink" title="体积"></a>体积</h3><p>记立体过x点且垂直于x轴的截面面积为$S(x)$，则其体积$V=\int_a^bS(x),dx$连续曲线$y=f(x)\ge 0,x\in[a,b]$绕x轴旋转一周产生的旋转体体积$V=\pi\int_a^by^2,dx$</p><h3 id="弧长"><a href="#弧长" class="headerlink" title="弧长"></a>弧长</h3><p>若简单闭曲线$\begin{cases}x=x(t),\y=y(t),\end{cases}t\in[\alpha,\beta]$端点处重合（$x(\alpha)=x(\beta),y(\alpha)=y(\beta)$）且其他地方不自交，$x(t),y(t)$连续且满足$[x’(t)]^2+[y’(t)]^2\ne0,\forall t\in[\alpha,\beta]$此时称曲线光滑，其长度$s=\int_\alpha^\beta\sqrt{[x’(t)]^2+[y’(t)]^2},dt$此式可对称推广到高维空间曲线。<br>极坐标下，$r=r(\theta),\theta\in[\alpha,\beta]$的长度为$s=\int_\alpha^\beta\sqrt{[r(\theta)]^2+[r’(\theta)]^2},d\theta$</p><h3 id="曲率"><a href="#曲率" class="headerlink" title="曲率"></a>曲率</h3><p>若曲线由参数方程$\begin{cases}x=x(t),\y=y(t),\end{cases}t\in[\alpha,\beta]$给出且有二阶微商，则其在一点的曲率$K=\frac{|y’’x’-y’x’’|}{[x’^2+y’^2]^{\frac{3}{2} } }$若$y=f(x)$，则$K=\frac{|y’’|}{(1+y’^2)^\frac{3}{2} }$同时记$\frac{1}{K}$为曲率半径。</p><h3 id="旋转体侧面积"><a href="#旋转体侧面积" class="headerlink" title="旋转体侧面积"></a>旋转体侧面积</h3><p>若曲线由参数方程$\begin{cases}x=x(t),\y=y(t),\end{cases}t\in[\alpha,\beta]$给出，则其绕x轴旋转体的侧面积$s=2\pi\int_\alpha^\beta y(t)\sqrt{[x’(t)]^2+[y’(t)]^2},dt$</p><h3 id="空间曲线的切线与法平面"><a href="#空间曲线的切线与法平面" class="headerlink" title="空间曲线的切线与法平面"></a>空间曲线的切线与法平面</h3><p>若已知曲线上一点$P(x_0,y_0,z_0)$处的切向量为$\tau(x_0,y_0,z_0)=(A,B,C)$则曲线在该点的切线方程为$\frac{x-x_0}A=\frac{y-y_0}B=\frac{z-z_0}C$法平面方程为$A(x-x_0)+B(y-y_0)+C(z-z_0)=0$当曲线由参数方程$\begin{cases}x=x(t),\y=y(t),\z=z(t),\end{cases}t\in[\alpha,\beta]$给出时，曲线在P点的切向量为$\tau=\pm(x’(t_0),y’(t_0),z’(t_0))$更一般地，若曲线用两曲面的交线给出$\begin{cases}F(x,y,z)=0,\G(x,y,z)=0,\end{cases}$且在P点的某邻域能确定函数组$y=y(x),z=z(x)$满足$y_0=y(x_0),z_0=z(x_0)$，且$y’(x),z’(x)$存在，则曲线在P点的切向量$\tau=\pm(\frac{\partial(F,G)}{\partial(y,z)},\frac{\partial(F,G)}{\partial(z,x)},\frac{\partial(F,G)}{\partial(x,y)})$</p><h3 id="空间曲面的切平面与法线"><a href="#空间曲面的切平面与法线" class="headerlink" title="空间曲面的切平面与法线"></a>空间曲面的切平面与法线</h3><p>若已知曲面上一点$P(x_0,y_0,z_0)$处的切平面的法向量为$\vec n=(A’,B’,C’)$则曲线在该点的法线方程为$\frac{x-x_0}{A’}=\frac{y-y_0}{B’}=\frac{z-z_0}{C’}$切平面方程为$A’(x-x_0)+B’(y-y_0)+C’(z-z_0)=0$当曲面方程为$\pi:F(x,y,z)=0$在曲面上任取一条过P的曲线，设其方程为$\begin{cases}x=x(t),\y=y(t),\z=z(t),\end{cases}t\in[\alpha,\beta]$此时有$F(x(t),y(t),z(t))=0$令$t=t_0$两边对t求导，并写成向量的内积式，得$(F_x,F_y,F_z)_P\cdot(x’(t_0),y’(t_0),z’(t_0))=0$则曲线在P点的法向量为$\vec{n}=\pm(F_x,F_y,F_z)_P$若曲线由参数方程给出$\begin{cases}x=x(u,v),\y=y(u,v),\z=z(u,v),\end{cases}$<br>则曲线在P点的法向量$\vec{n}=\pm(\frac{\partial(y,z)}{\partial(u,v)},\frac{\partial(z,x)}{\partial(u,v)},\frac{\partial(x,y)}{\partial(u,v)})$</p><h3 id="方向导数"><a href="#方向导数" class="headerlink" title="方向导数"></a>方向导数</h3><p>设三元函数$u=f(x,y,z)$在点$P_0(x_0,y_0,z_0)$的某邻域内有定义，任意给定始于点$P_0$的射线$l$，$P(x,y,z)$为l上且含于定义域内的点。若极限$\lim_{r(p,p_0)\to0^+}\frac{f(P)-f(P_0)}{r(P,P_0)}=\lim_{r(p,p_0)\to0^+}\frac{\Delta_lf(P_0)}{r(P,P_0)}$存在，则称该极限值为函数$f$在点$P_0$沿方向$l$的方向导数，记为$\frac{\partial f}{\partial l}|<em>{P_0}$或$\frac{\partial f(P_0)}{\partial l}$，$\frac{\Delta_lf(P_0)}{r(P,P_0)}$称为函数在$P_0$点沿$l$方向的增量。特别地，$\frac{\partial f(P_0)}{\partial x}$就是函数在$P_0$点沿$x$轴正向的方向导数，$y,z$轴上的方向导数同理。若函数在$P_0$点可微，则其在$P_0$沿任何方向$l$的方向导数都存在，则有以下公式$\frac{\partial f(P_0)}{\partial l}=(\frac{\partial f}{\partial x},\frac{\partial f}{\partial y},\frac{\partial f}{\partial z})|</em>{P_0}\cdot\vec{l_0}$其中$\vec{l_0}=(\cos\alpha,\cos\beta,cos\gamma)=\frac{1}{\rho}(\Delta x,\Delta y,\Delta z)$为$l$的方向余弦。</p><h2 id="泰勒公式"><a href="#泰勒公式" class="headerlink" title="泰勒公式"></a>泰勒公式</h2><p>用$f^{(n)}(x)$表示f(x)的n阶导数。<br>只要让<code>余项&lt;EPS</code>即可计算指定函数到任意精确度。<br>特别取a=0时称为麦克劳林公式。<br>$f(x)=f(a)+f^{(1)}(a)(x-a)+\frac{f^{(2)}(a)}{2!}(x-a)^2+\ldots+\frac{f^{(n)}(a)}{n!}(x-a)^n+R_n(x)$<br>$R_n(x)=o((x-a)^n)$，佩亚诺余项<br>$R_n(x)=\frac{1}{n!}\int_a^x(x-t)^nf^{(n+1)}(t),dt$，积分余项<br>$R_n(x)=\frac{f^{(n+1)}(\xi)}{(n+1)!}(x-a)^{n+1},a&lt;\xi&lt;x$，拉格朗日余项<br>$R_n(x)=\frac{(x-a)^{n+1} }{n!}(1-\theta)^nf^{(n+1)}(a+\theta(x-a)),0&lt;\theta&lt;1$，柯西余项</p><h3 id="指数函数"><a href="#指数函数" class="headerlink" title="指数函数"></a>指数函数</h3><p>$(e^x)^{(n)}=e^x$<br>$e^x=1+x+\frac{x^2}{2!}+\frac{x^3}{3!}+\ldots+\frac{x^n}{n!}+R_n(x)$<br>$R_n(x)=\frac{e^{\theta x} }{(n+1)!}x^{n+1},\xi=\theta x,0&lt;\theta&lt;1$</p><h3 id="三角函数"><a href="#三角函数" class="headerlink" title="三角函数"></a>三角函数</h3><p>$(\sin x)^{(n)}=\sin(x+\frac{n\pi}{2})$<br>$\sin x=x-\frac{x^3}{3!}+\frac{x^5}{5!}-\frac{x^7}{7!}+\ldots+(-1)^{k-1}\frac{x^{2k-1} }{(2k-1)!}+R_{2k}(x)$<br>$R_{2k}(x)=(-1)^k\frac{\cos\theta x}{(2k+1)!}x^{2k+1}$<br>$(\cos x)^{(n)}=\cos(x+\frac{n\pi}{2})$<br>$\cos x=1-\frac{x^2}{2!}+\frac{x^4}{4!}-\frac{x^6}{6!}+\ldots+(-1)^{k-1}\frac{x^{2k-2} }{(2k-2)!}+R_{2k-1}(x)$<br>$R_{2k-1}(x)=(-1)^k\frac{\cos\theta x}{(2k)!}x^{2k}$</p><h3 id="对数函数"><a href="#对数函数" class="headerlink" title="对数函数"></a>对数函数</h3><p>$[\ln(1+x)]^{(n)}=(-1)^{n-1}(n-1)!(1+x)^{-n}$<br>$\ln(1+x)=x-\frac{x^2}{2}+\frac{x^3}{3}-\frac{x^4}{4}+\ldots+(-1)^{n-1}\frac{x^n}{n}+R_n(x)$</p><h3 id="幂函数"><a href="#幂函数" class="headerlink" title="幂函数"></a>幂函数</h3><p>$[(1+x)^a]^{(n)}=a(a-1)\ldots(a-n+1)(1+x)^{a-n}$<br>$(1+x)^a=1+ax+\frac{a(a-1)}{2!}x^2+\dots+\frac{a(a-1)\ldots(a-n+1)}{n!}x^n+R_n(x)$</p><h3 id="二元函数"><a href="#二元函数" class="headerlink" title="二元函数"></a>二元函数</h3><p>设$f(x,y)$在$P_0(x_0,y_0)$的某邻域$O(P_0)$内有直到$n+1$阶连续偏导数，则对$O(P_0)$内$\forall(x_0+\Delta x,y_0+\Delta y),\exists\theta\in(0,1)$，使得$f(x_0+\Delta x,y_0+\Delta y)=\sum_{k=0}^n\frac{1}{k!}(\frac{\partial}{\partial x}\Delta x+\frac{\partial}{\partial y}\Delta y)^kf(x_0,y_0)+R_n$其中$R_n=\frac{1}{(n+1)!}(\frac{\partial}{\partial x}\Delta x+\frac{\partial}{\partial y}\Delta y)^{n+1}f(x_0+\theta\Delta x,y_0+\theta\Delta y)$</p><h2 id="级数部分和"><a href="#级数部分和" class="headerlink" title="级数部分和"></a>级数部分和</h2><h3 id="调和级数"><a href="#调和级数" class="headerlink" title="调和级数"></a>调和级数</h3><p>$n\to\infty,\sum_{i=1}^n\frac 1 i\to\ln n+r,r\approx0.5772156649015328\ldots$</p><h3 id="幂级数"><a href="#幂级数" class="headerlink" title="幂级数"></a>幂级数</h3><p>快速计算幂级数的部分和$\sum_{i=1}^ni^k\mod M$可借助伯努利数，详见<a href="https://blog.csdn.net/w_weilan/article/details/80500741" target="_blank" rel="noopener">模板·组合数学</a>。<br>$\sum_{i=1}^ni^1=\frac 1 2n(n+1)$<br>$\sum_{i=1}^ni^2=\frac 1 6n(n+1)(2n+1)$<br>$\sum_{i=1}^ni^3=\frac 1 4[n(n+1)]^2$<br>$\sum_{i=1}^ni^4=\frac 1{30}n(n+1)(2n+1)(3n^2+3n-1)$<br>$\sum_{i=1}^ni^5=\frac 1{12}[n(n+1)]^2(2n^2+2n-1)$<br>$\sum_{i=1}^ni^6=\frac 1{42}n(n+1)(2n+1)(3n^4+6n^3-3n+1)$</p><h2 id="二分求零点、三分求极值点"><a href="#二分求零点、三分求极值点" class="headerlink" title="二分求零点、三分求极值点"></a>二分求零点、三分求极值点</h2><p>需要$f(x)$在区间$[l,r]$上单调/凹凸性唯一。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">double</span> <span class="token function">bs</span><span class="token punctuation">(</span><span class="token keyword">double</span> l<span class="token punctuation">,</span><span class="token keyword">double</span> r<span class="token punctuation">,</span><span class="token keyword">double</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token operator">-</span>l<span class="token operator">&lt;</span>EPS<span class="token punctuation">)</span><span class="token keyword">return</span> l<span class="token punctuation">;</span> <span class="token keyword">double</span> m<span class="token operator">=</span><span class="token punctuation">(</span>l<span class="token operator">+</span>r<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token function">sgn</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token operator">*</span><span class="token function">f</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token operator">?</span><span class="token function">bs</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>m<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">ts</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span>r<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">double</span> <span class="token function">ts</span><span class="token punctuation">(</span><span class="token keyword">double</span> l<span class="token punctuation">,</span><span class="token keyword">double</span> r<span class="token punctuation">,</span><span class="token keyword">double</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token keyword">double</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">if</span><span class="token punctuation">(</span>r<span class="token operator">-</span>l<span class="token operator">&lt;</span>EPS<span class="token punctuation">)</span><span class="token keyword">return</span> l<span class="token punctuation">;</span> <span class="token keyword">double</span> d<span class="token operator">=</span><span class="token punctuation">(</span>r<span class="token operator">-</span>l<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">,</span>lm<span class="token operator">=</span>l<span class="token operator">+</span>d<span class="token punctuation">,</span>rm<span class="token operator">=</span>r<span class="token operator">-</span>d<span class="token punctuation">;</span> <span class="token keyword">return</span> <span class="token function">f</span><span class="token punctuation">(</span>lm<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token function">f</span><span class="token punctuation">(</span>rm<span class="token punctuation">)</span><span class="token operator">?</span><span class="token function">ts</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span>rm<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token operator">:</span><span class="token function">ts</span><span class="token punctuation">(</span>lm<span class="token punctuation">,</span>r<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//极小值</span><span class="token punctuation">}</span></code></pre><h2 id="自适应辛普森求函数积分"><a href="#自适应辛普森求函数积分" class="headerlink" title="自适应辛普森求函数积分"></a><a href="https://vjudge.net/solution/16740138" target="_blank" rel="noopener">自适应辛普森求函数积分</a></h2><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">struct</span> Simpson<span class="token punctuation">{</span>    lf <span class="token function">simpson</span><span class="token punctuation">(</span>lf a<span class="token punctuation">,</span>lf b<span class="token punctuation">,</span>lf <span class="token function">f</span><span class="token punctuation">(</span>lf x<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">4</span><span class="token operator">*</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token operator">+</span>b<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">f</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>b<span class="token operator">-</span>a<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">6</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    lf <span class="token function">ask</span><span class="token punctuation">(</span>lf a<span class="token punctuation">,</span>lf b<span class="token punctuation">,</span>lf <span class="token function">f</span><span class="token punctuation">(</span>lf x<span class="token punctuation">)</span><span class="token punctuation">,</span>lf e<span class="token operator">=</span>EPS<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        lf c<span class="token operator">=</span><span class="token punctuation">(</span>a<span class="token operator">+</span>b<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span>L<span class="token operator">=</span><span class="token function">simpson</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>c<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token punctuation">,</span>R<span class="token operator">=</span><span class="token function">simpson</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>b<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token punctuation">,</span>A<span class="token operator">=</span><span class="token function">simpson</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">fabs</span><span class="token punctuation">(</span>L<span class="token operator">+</span>R<span class="token operator">-</span>A<span class="token punctuation">)</span><span class="token operator">&lt;</span>EPS<span class="token operator">*</span><span class="token number">15</span><span class="token operator">?</span>L<span class="token operator">+</span>R<span class="token operator">+</span><span class="token punctuation">(</span>L<span class="token operator">+</span>R<span class="token operator">-</span>A<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">15</span><span class="token operator">:</span><span class="token function">ask</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>c<span class="token punctuation">,</span>f<span class="token punctuation">,</span>e<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">ask</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span>b<span class="token punctuation">,</span>f<span class="token punctuation">,</span>e<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id="插值法"><a href="#插值法" class="headerlink" title="插值法"></a>插值法</h2><p>拉格朗日插值法：插值多项式和插值基函数的形式对称，容易编程。但是，增加节点时，需要重新计算每一个插值基函数。要在$\pmod p$意义下进行的话，那么p只能是质数。<br>牛顿插值法：当插值节点增加时，之前已计算的结果仍然能用，每增加一个节点，只要再增加一项即可，从而避免了重复性计算。如果要mod非质数的话，那么就要用牛顿插值法。</p><pre class=" language-cpp"><code class="language-cpp"><span class="token keyword">typedef</span> complex<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">></span> Coord<span class="token punctuation">;</span><span class="token macro property">#<span class="token directive keyword">define</span> X real()</span><span class="token macro property">#<span class="token directive keyword">define</span> Y imag()</span><span class="token keyword">double</span> <span class="token function">lagrange</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token operator">&amp;</span>p<span class="token punctuation">,</span><span class="token keyword">double</span> x<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//返回p确定的多项式函数在x处的值</span><span class="token punctuation">{</span>    <span class="token keyword">double</span> ret<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">double</span> tmp<span class="token operator">=</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>Y<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">!=</span>j<span class="token punctuation">)</span>tmp<span class="token operator">*</span><span class="token operator">=</span><span class="token punctuation">(</span>x<span class="token operator">-</span>p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>X<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>X<span class="token operator">-</span>p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>X<span class="token punctuation">)</span><span class="token punctuation">;</span>        ret<span class="token operator">+</span><span class="token operator">=</span>tmp<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">}</span>vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">></span> <span class="token function">lagrange</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> p<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//返回p确定的多项式系数向量</span><span class="token punctuation">{</span>    vector<span class="token operator">&lt;</span><span class="token keyword">double</span><span class="token operator">></span> <span class="token function">ret</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ret<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Y<span class="token punctuation">,</span>sum<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">>=</span>i<span class="token punctuation">;</span> <span class="token operator">--</span>j<span class="token punctuation">)</span>            p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>Y<span class="token operator">=</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>Y<span class="token operator">-</span>p<span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Y<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>X<span class="token operator">-</span>p<span class="token punctuation">[</span>j<span class="token operator">-</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>X<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span>i<span class="token punctuation">;</span> <span class="token operator">~</span>j<span class="token punctuation">;</span> <span class="token operator">--</span>j<span class="token punctuation">)</span>            sum<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">(</span>j<span class="token operator">?</span>sum<span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">-</span>sum<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">*</span>p<span class="token punctuation">[</span>i<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>X<span class="token punctuation">,</span>                   ret<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span><span class="token operator">=</span>sum<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">*</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>Y<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">double</span> <span class="token function">differenceQuotient</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token operator">&amp;</span>p<span class="token punctuation">,</span><span class="token keyword">int</span> k<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//计算差商</span><span class="token punctuation">{</span>    <span class="token keyword">double</span> ret<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span>k<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">double</span> tmp<span class="token operator">=</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>Y<span class="token punctuation">;</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;=</span>k<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">!=</span>j<span class="token punctuation">)</span>tmp<span class="token operator">/</span><span class="token operator">=</span>p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>X<span class="token operator">-</span>p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>X<span class="token punctuation">;</span>        ret<span class="token operator">+</span><span class="token operator">=</span>tmp<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">double</span> <span class="token function">newton</span><span class="token punctuation">(</span><span class="token keyword">const</span> vector<span class="token operator">&lt;</span>Coord<span class="token operator">></span> <span class="token operator">&amp;</span>p<span class="token punctuation">,</span><span class="token keyword">double</span> x<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">double</span> ret<span class="token operator">=</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Y<span class="token punctuation">;</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>p<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">double</span> tmp<span class="token operator">=</span><span class="token function">differenceQuotient</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//多次求，可O(n^3)预处理优化</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span>i<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span>tmp<span class="token operator">*</span><span class="token operator">=</span>x<span class="token operator">-</span>p<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>X<span class="token punctuation">;</span>        ret<span class="token operator">+</span><span class="token operator">=</span>tmp<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h1 id="转载"><a href="#转载" class="headerlink" title="转载"></a>转载</h1><blockquote><p>以下<strong>转载自</strong><a href="https://github.com/fengdu78/Coursera-ML-AndrewNg-Notes" target="_blank" rel="noopener">斯坦福大学2014（吴恩达）机器学习教程中文笔记</a>，感谢编者黄海广博士。</p></blockquote><h2 id="导数定义"><a href="#导数定义" class="headerlink" title="导数定义"></a>导数定义</h2><p>导数和微分的概念</p><p>$f’({ {x}<em>{0} })=\underset{\Delta x\to 0}{\mathop{\lim } },\frac{f({ {x}</em>{0} }+\Delta x)-f({ {x}_{0} })}{\Delta x}$    （1）</p><p>或者：</p><p>$f’({ {x}<em>{0} })=\underset{x\to { {x}</em>{0} } }{\mathop{\lim } },\frac{f(x)-f({ {x}<em>{0} })}{x-{ {x}</em>{0} } }$           （2）</p><h2 id="左右导数导数的几何意义和物理意义"><a href="#左右导数导数的几何意义和物理意义" class="headerlink" title="左右导数导数的几何意义和物理意义"></a>左右导数导数的几何意义和物理意义</h2><p>函数$f(x)$在$x_0$处的左、右导数分别定义为：</p><p>左导数：${ { {f}’}<em>{-} }({ {x}</em>{0} })=\underset{\Delta x\to { {0}^{-} } }{\mathop{\lim } },\frac{f({ {x}<em>{0} }+\Delta x)-f({ {x}</em>{0} })}{\Delta x}=\underset{x\to x_{0}^{-} }{\mathop{\lim } },\frac{f(x)-f({ {x}<em>{0} })}{x-{ {x}</em>{0} } },(x={ {x}_{0} }+\Delta x)$</p><p>右导数：${ { {f}’}<em>{+} }({ {x}</em>{0} })=\underset{\Delta x\to { {0}^{+} } }{\mathop{\lim } },\frac{f({ {x}<em>{0} }+\Delta x)-f({ {x}</em>{0} })}{\Delta x}=\underset{x\to x_{0}^{+} }{\mathop{\lim } },\frac{f(x)-f({ {x}<em>{0} })}{x-{ {x}</em>{0} } }$</p><h2 id="函数的可导性与连续性之间的关系"><a href="#函数的可导性与连续性之间的关系" class="headerlink" title="函数的可导性与连续性之间的关系"></a>函数的可导性与连续性之间的关系</h2><h3 id="Th1"><a href="#Th1" class="headerlink" title="Th1"></a>Th1</h3><p>函数$f(x)$在$x_0$处可微$\Leftrightarrow f(x)$在$x_0$处可导</p><h3 id="Th2"><a href="#Th2" class="headerlink" title="Th2"></a>Th2</h3><p>若函数在点$x_0$处可导，则$y=f(x)$在点$x_0$处连续，反之则不成立。即函数连续不一定可导。</p><h3 id="Th3"><a href="#Th3" class="headerlink" title="Th3"></a>Th3</h3><p>${f}’({ {x}<em>{0} })$存在$\Leftrightarrow { { {f}’}</em>{-} }({ {x}<em>{0} })={ { {f}’}</em>{+} }({ {x}_{0} })$</p><h2 id="平面曲线的切线和法线"><a href="#平面曲线的切线和法线" class="headerlink" title="平面曲线的切线和法线"></a>平面曲线的切线和法线</h2><p>切线方程 : $y-{ {y}<em>{0} }=f’({ {x}</em>{0} })(x-{ {x}<em>{0} })$<br>法线方程：$y-{ {y}</em>{0} }=-\frac{1}{f’({ {x}<em>{0} })}(x-{ {x}</em>{0} }),f’({ {x}_{0} })\ne 0$</p><h2 id="四则运算法则"><a href="#四则运算法则" class="headerlink" title="四则运算法则"></a>四则运算法则</h2><p>设函数$u=u(x)，v=v(x)$]在点$x$可导则<br>(1) $(u\pm v{)}’={u}’\pm {v}’$       $d(u\pm v)=du\pm dv$<br>(2)$(uv{)}’=u{v}’+v{u}’$        $d(uv)=udv+vdu$<br>(3) $(\frac{u}{v}{)}’=\frac{v{u}’-u{v}’}{ { {v}^{2} } }(v\ne 0)$       $d(\frac{u}{v})=\frac{vdu-udv}{ { {v}^{2} } }$</p><h2 id="基本导数与微分表"><a href="#基本导数与微分表" class="headerlink" title="基本导数与微分表"></a>基本导数与微分表</h2><p>(1) $y=c$（常数）       ${y}’=0$          $dy=0$<br>(2) $y={ {x}^{\alpha } }$($\alpha $为实数)    ${y}’=\alpha { {x}^{\alpha -1} }$      $dy=\alpha { {x}^{\alpha -1} }dx$<br>(3) $y={ {a}^{x} }$      ${y}’={ {a}^{x} }\ln a$         $dy={ {a}^{x} }\ln adx$<br>  特例:   $({ { {e} }^{x} }{)}’={ { {e} }^{x} }$             $d({ { {e} }^{x} })={ { {e} }^{x} }dx$</p><p>(4) ${y}’=\frac{1}{x\ln a}$           </p><p>$dy=\frac{1}{x\ln a}dx$<br>  特例:$y=\ln x$                      $(\ln x{)}’=\frac{1}{x}$       $d(\ln x)=\frac{1}{x}dx$</p><p>(5) $y=\sin x$         </p><p>${y}’=\cos x$        $d(\sin x)=\cos xdx$</p><p>(6) $y=\cos x$      </p><p>${y}’=-\sin x$       $d(\cos x)=-\sin xdx$</p><p>(7) $y=\tan x$  </p><p>${y}’=\frac{1}{ { {\cos }^{2} }x}={ {\sec }^{2} }x$  $d(\tan x)={ {\sec }^{2} }xdx$<br>(8) $y=\cot x$ ${y}’=-\frac{1}{ { {\sin }^{2} }x}=-{ {\csc }^{2} }x$  $d(\cot x)=-{ {\csc }^{2} }xdx$<br>(9) $y=\sec x$ ${y}’=\sec x\tan x$     </p><p> $d(\sec x)=\sec x\tan xdx$<br>(10) $y=\csc x$ ${y}’=-\csc x\cot x$    </p><p>$d(\csc x)=-\csc x\cot xdx$<br>(11) $y=\arcsin x$  </p><p>${y}’=\frac{1}{\sqrt{1-{ {x}^{2} } } }$   </p><p>$d(\arcsin x)=\frac{1}{\sqrt{1-{ {x}^{2} } } }dx$<br>(12) $y=\arccos x$ </p><p>${y}’=-\frac{1}{\sqrt{1-{ {x}^{2} } } }$     $d(\arccos x)=-\frac{1}{\sqrt{1-{ {x}^{2} } } }dx$</p><p>(13) $y=\arctan x$ </p><p>${y}’=\frac{1}{1+{ {x}^{2} } }$     $d(\arctan x)=\frac{1}{1+{ {x}^{2} } }dx$</p><p>(14) $y=\operatorname{arc}\cot x$      </p><p>${y}’=-\frac{1}{1+{ {x}^{2} } }$   </p><p>$d(\operatorname{arc}\cot x)=-\frac{1}{1+{ {x}^{2} } }dx$<br>(15) $y=shx$    </p><p>${y}’=chx$       $d(shx)=chxdx$</p><p>(16) $y=chx$    </p><p>${y}’=shx$       $d(chx)=shxdx$</p><h2 id="复合函数，反函数，隐函数以及参数方程所确定的函数的微分法"><a href="#复合函数，反函数，隐函数以及参数方程所确定的函数的微分法" class="headerlink" title="复合函数，反函数，隐函数以及参数方程所确定的函数的微分法"></a>复合函数，反函数，隐函数以及参数方程所确定的函数的微分法</h2><p>(1) 反函数的运算法则: 设$y=f(x)$在点$x$的某邻域内单调连续，在点$x$处可导且${f}’(x)\ne 0$，则其反函数在点$x$所对应的$y$处可导，并且有$\frac{dy}{dx}=\frac{1}{\frac{dx}{dy} }$<br>(2) 复合函数的运算法则:若$\mu =\varphi (x)$在点$x$可导,而$y=f(\mu )$在对应点$\mu $($\mu =\varphi (x)$)可导,则复合函数$y=f(\varphi (x))$在点$x$可导,且${y}’={f}’(\mu )\cdot {\varphi }’(x)$<br>(3) 隐函数导数$\frac{dy}{dx}$的求法一般有三种方法：<br>1)方程两边对$x$求导，要记住$y$是$x$的函数，则$y$的函数是$x$的复合函数.例如$\frac{1}{y}$，${ {y}^{2} }$，$ln y$，${ { {e} }^{y} }$等均是$x$的复合函数.<br>对$x$求导应按复合函数连锁法则做.<br>2)公式法.由$F(x,y)=0$知 $\frac{dy}{dx}=-\frac{ { { { {F}’} }<em>{x} }(x,y)}{ { { { {F}’} }</em>{y} }(x,y)}$,其中，${ { {F}’}<em>{x} }(x,y)$，<br>${ { {F}’}</em>{y} }(x,y)$分别表示$F(x,y)$对$x$和$y$的偏导数<br>3)利用微分形式不变性</p><h2 id="常用高阶导数公式"><a href="#常用高阶导数公式" class="headerlink" title="常用高阶导数公式"></a>常用高阶导数公式</h2><p>（1）$({ {a}^{x} }){ {,}^{(n)} }={ {a}^{x} }{ {\ln }^{n} }a\quad (a&gt;{0})\quad \quad ({ { {e} }^{x} }){ {,}^{(n)} }={e}{ {,}^{x} }$<br>（2）$(\sin kx{)}{ {,}^{(n)} }={ {k}^{n} }\sin (kx+n\cdot \frac{\pi }{ {2} })$<br>（3）$(\cos kx{)}{ {,}^{(n)} }={ {k}^{n} }\cos (kx+n\cdot \frac{\pi }{ {2} })$<br>（4）$({ {x}^{m} }){ {,}^{(n)} }=m(m-1)\cdots (m-n+1){ {x}^{m-n} }$<br>（5）$(\ln x){ {,}^{(n)} }={ {(-{1})}^{(n-{1})} }\frac{(n-{1})!}{ { {x}^{n} } }$<br>（6）莱布尼兹公式：若$u(x),,v(x)$均$n$阶可导，则<br> ${ {(uv)}^{(n)} }=\sum\limits_{i={0} }^{n}{c_{n}^{i}{ {u}^{(i)} }{ {v}^{(n-i)} } }$，其中${ {u}^{({0})} }=u$，${ {v}^{({0})} }=v$</p><h2 id="微分中值定理，泰勒公式"><a href="#微分中值定理，泰勒公式" class="headerlink" title="微分中值定理，泰勒公式"></a>微分中值定理，泰勒公式</h2><h3 id="Th1-费马定理"><a href="#Th1-费马定理" class="headerlink" title="Th1(费马定理)"></a>Th1(费马定理)</h3><p>若函数$f(x)$满足条件：<br>(1)函数$f(x)$在${ {x}<em>{0} }$的某邻域内有定义，并且在此邻域内恒有<br>$f(x)\le f({ {x}</em>{0} })$或$f(x)\ge f({ {x}_{0} })$,</p><p>(2) $f(x)$在${ {x}<em>{0} }$处可导,则有 ${f}’({ {x}</em>{0} })=0$</p><h3 id="Th2-罗尔定理"><a href="#Th2-罗尔定理" class="headerlink" title="Th2(罗尔定理)"></a>Th2(罗尔定理)</h3><p>设函数$f(x)$满足条件：<br>(1)在闭区间$[a,b]$上连续；</p><p>(2)在$(a,b)$内可导；</p><p>(3)$f(a)=f(b)$；</p><p>则在$(a,b)$内一存在个$\xi $，使  ${f}’(\xi )=0$</p><h3 id="Th3-拉格朗日中值定理"><a href="#Th3-拉格朗日中值定理" class="headerlink" title="Th3(拉格朗日中值定理)"></a>Th3(拉格朗日中值定理)</h3><p>设函数$f(x)$满足条件：<br>(1)在$[a,b]$上连续；</p><p>(2)在$(a,b)$内可导；</p><p>则在$(a,b)$内一存在个$\xi $，使  $\frac{f(b)-f(a)}{b-a}={f}’(\xi )$</p><h3 id="Th4-柯西中值定理"><a href="#Th4-柯西中值定理" class="headerlink" title="Th4(柯西中值定理)"></a>Th4(柯西中值定理)</h3><p> 设函数$f(x)$，$g(x)$满足条件：<br>(1) 在$[a,b]$上连续；</p><p>(2) 在$(a,b)$内可导且${f}’(x)$，${g}’(x)$均存在，且${g}’(x)\ne 0$</p><p>则在$(a,b)$内存在一个$\xi $，使  $\frac{f(b)-f(a)}{g(b)-g(a)}=\frac{ {f}’(\xi )}{ {g}’(\xi )}$</p><h2 id="洛必达法则"><a href="#洛必达法则" class="headerlink" title="洛必达法则"></a>洛必达法则</h2><p>法则Ⅰ ($\frac{0}{0}$型)<br>设函数$f\left( x \right),g\left( x \right)$满足条件：<br> $\underset{x\to { {x}<em>{0} } }{\mathop{\lim } },f\left( x \right)=0,\underset{x\to { {x}</em>{0} } }{\mathop{\lim } },g\left( x \right)=0$; </p><p>$f\left( x \right),g\left( x \right)$在${ {x}<em>{0} }$的邻域内可导，(在${ {x}</em>{0} }$处可除外)且${g}’\left( x \right)\ne 0$;</p><p>$\underset{x\to { {x}_{0} } }{\mathop{\lim } },\frac{ {f}’\left( x \right)}{ {g}’\left( x \right)}$存在(或$\infty $)。</p><p>则:<br>$\underset{x\to { {x}<em>{0} } }{\mathop{\lim } },\frac{f\left( x \right)}{g\left( x \right)}=\underset{x\to { {x}</em>{0} } }{\mathop{\lim } },\frac{ {f}’\left( x \right)}{ {g}’\left( x \right)}$。<br>法则${ {I}’}$ ($\frac{0}{0}$型)设函数$f\left( x \right),g\left( x \right)$满足条件：<br>$\underset{x\to \infty }{\mathop{\lim } },f\left( x \right)=0,\underset{x\to \infty }{\mathop{\lim } },g\left( x \right)=0$;</p><p>存在一个$X&gt;0$,当$\left| x \right|&gt;X$时,$f\left( x \right),g\left( x \right)$可导,且${g}’\left( x \right)\ne 0$;$\underset{x\to { {x}_{0} } }{\mathop{\lim } },\frac{ {f}’\left( x \right)}{ {g}’\left( x \right)}$存在(或$\infty $)。</p><p>则:<br>$\underset{x\to { {x}<em>{0} } }{\mathop{\lim } },\frac{f\left( x \right)}{g\left( x \right)}=\underset{x\to { {x}</em>{0} } }{\mathop{\lim } },\frac{ {f}’\left( x \right)}{ {g}’\left( x \right)}$<br>法则Ⅱ($\frac{\infty }{\infty }$型) 设函数$f\left( x \right),g\left( x \right)$满足条件：<br>$\underset{x\to { {x}<em>{0} } }{\mathop{\lim } },f\left( x \right)=\infty ,\underset{x\to { {x}</em>{0} } }{\mathop{\lim } },g\left( x \right)=\infty $;   $f\left( x \right),g\left( x \right)$在${ {x}<em>{0} }$ 的邻域内可导(在${ {x}</em>{0} }$处可除外)且${g}’\left( x \right)\ne 0$;$\underset{x\to { {x}<em>{0} } }{\mathop{\lim } },\frac{ {f}’\left( x \right)}{ {g}’\left( x \right)}$存在(或$\infty $)。则<br>$\underset{x\to { {x}</em>{0} } }{\mathop{\lim } },\frac{f\left( x \right)}{g\left( x \right)}=\underset{x\to { {x}_{0} } }{\mathop{\lim } },\frac{ {f}’\left( x \right)}{ {g}’\left( x \right)}.$同理法则${I{I}’}$($\frac{\infty }{\infty }$型)仿法则${ {I}’}$可写出。</p><h2 id="泰勒公式-1"><a href="#泰勒公式-1" class="headerlink" title="泰勒公式"></a>泰勒公式</h2><p>设函数$f(x)$在点${ {x}<em>{0} }$处的某邻域内具有$n+1$阶导数，则对该邻域内异于${ {x}</em>{0} }$的任意点$x$，在${ {x}<em>{0} }$与$x$之间至少存在<br>一个$\xi $，使得：<br>$f(x)=f({ {x}</em>{0} })+{f}’({ {x}<em>{0} })(x-{ {x}</em>{0} })+\frac{1}{2!}{f}’’({ {x}<em>{0} }){ {(x-{ {x}</em>{0} })}^{2} }+\cdots $<br>$+\frac{ { {f}^{(n)} }({ {x}<em>{0} })}{n!}{ {(x-{ {x}</em>{0} })}^{n} }+{ {R}<em>{n} }(x)$<br> 其中 ${ {R}</em>{n} }(x)=\frac{ { {f}^{(n+1)} }(\xi )}{(n+1)!}{ {(x-{ {x}<em>{0} })}^{n+1} }$称为$f(x)$在点${ {x}</em>{0} }$处的$n$阶泰勒余项。</p><p>令${ {x}<em>{0} }=0$，则$n$阶泰勒公式<br>$f(x)=f(0)+{f}’(0)x+\frac{1}{2!}{f}’’(0){ {x}^{2} }+\cdots +\frac{ { {f}^{(n)} }(0)}{n!}{ {x}^{n} }+{ {R}</em>{n} }(x)$……(1)<br>其中 ${ {R}_{n} }(x)=\frac{ { {f}^{(n+1)} }(\xi )}{(n+1)!}{ {x}^{n+1} }$，$\xi $在0与$x$之间.(1)式称为麦克劳林公式</p><h2 id="常用五种函数在-x-0-0-处的泰勒公式"><a href="#常用五种函数在-x-0-0-处的泰勒公式" class="headerlink" title="常用五种函数在${ {x}_{0} }=0$处的泰勒公式"></a>常用五种函数在${ {x}_{0} }=0$处的泰勒公式</h2><p>(1) ${ { {e} }^{x} }=1+x+\frac{1}{2!}{ {x}^{2} }+\cdots +\frac{1}{n!}{ {x}^{n} }+\frac{ { {x}^{n+1} } }{(n+1)!}{ {e}^{\xi } }$ </p><p>或 $=1+x+\frac{1}{2!}{ {x}^{2} }+\cdots +\frac{1}{n!}{ {x}^{n} }+o({ {x}^{n} })$</p><p>(2) $\sin x=x-\frac{1}{3!}{ {x}^{3} }+\cdots +\frac{ { {x}^{n} } }{n!}\sin \frac{n\pi }{2}+\frac{ { {x}^{n+1} } }{(n+1)!}\sin (\xi +\frac{n+1}{2}\pi )$</p><p>或  $=x-\frac{1}{3!}{ {x}^{3} }+\cdots +\frac{ { {x}^{n} } }{n!}\sin \frac{n\pi }{2}+o({ {x}^{n} })$</p><p>(3) $\cos x=1-\frac{1}{2!}{ {x}^{2} }+\cdots +\frac{ { {x}^{n} } }{n!}\cos \frac{n\pi }{2}+\frac{ { {x}^{n+1} } }{(n+1)!}\cos (\xi +\frac{n+1}{2}\pi )$</p><p>或   $=1-\frac{1}{2!}{ {x}^{2} }+\cdots +\frac{ { {x}^{n} } }{n!}\cos \frac{n\pi }{2}+o({ {x}^{n} })$</p><p>(4) $\ln (1+x)=x-\frac{1}{2}{ {x}^{2} }+\frac{1}{3}{ {x}^{3} }-\cdots +{ {(-1)}^{n-1} }\frac{ { {x}^{n} } }{n}+\frac{ { {(-1)}^{n} }{ {x}^{n+1} } }{(n+1){ {(1+\xi )}^{n+1} } }$</p><p>或      $=x-\frac{1}{2}{ {x}^{2} }+\frac{1}{3}{ {x}^{3} }-\cdots +{ {(-1)}^{n-1} }\frac{ { {x}^{n} } }{n}+o({ {x}^{n} })$</p><p>(5) ${ {(1+x)}^{m} }=1+mx+\frac{m(m-1)}{2!}{ {x}^{2} }+\cdots +\frac{m(m-1)\cdots (m-n+1)}{n!}{ {x}^{n} }$<br>$+\frac{m(m-1)\cdots (m-n+1)}{(n+1)!}{ {x}^{n+1} }{ {(1+\xi )}^{m-n-1} }$ </p><p>或 ${ {(1+x)}^{m} }=1+mx+\frac{m(m-1)}{2!}{ {x}^{2} }+\cdots $ $+\frac{m(m-1)\cdots (m-n+1)}{n!}{ {x}^{n} }+o({ {x}^{n} })$</p><h2 id="函数单调性的判断"><a href="#函数单调性的判断" class="headerlink" title="函数单调性的判断"></a>函数单调性的判断</h2><p><strong>Th1:</strong>  设函数$f(x)$在$(a,b)$区间内可导，如果对$\forall x\in (a,b)$，都有$f,‘(x)&gt;0$（或$f,‘(x)&lt;0$），则函数$f(x)$在$(a,b)$内是单调增加的（或单调减少）</p><p><strong>Th2:</strong> （取极值的必要条件）设函数$f(x)$在${ {x}<em>{0} }$处可导，且在${ {x}</em>{0} }$处取极值，则$f,‘({ {x}_{0} })=0$。</p><p><strong>Th3:</strong> （取极值的第一充分条件）设函数$f(x)$在${ {x}<em>{0} }$的某一邻域内可微，且$f,‘({ {x}</em>{0} })=0$（或$f(x)$在${ {x}<em>{0} }$处连续，但$f,‘({ {x}</em>{0} })$不存在。）<br>(1)若当$x$经过${ {x}<em>{0} }$时，$f,‘(x)$由“+”变“-”，则$f({ {x}</em>{0} })$为极大值；<br>(2)若当$x​$经过${ {x}<em>{0} }​$时，$f,‘(x)$由“-”变“+”，则$f({ {x}</em>{0} })$为极小值；<br>(3)若$f,‘(x)$经过$x={ {x}<em>{0} }$的两侧不变号，则$f({ {x}</em>{0} })$不是极值。</p><p><strong>Th4:</strong> (取极值的第二充分条件)设$f(x)$在点${ {x}<em>{0} }$处有$f’’(x)\ne 0$，且$f,‘({ {x}</em>{0} })=0$，则 当$f’,‘({ {x}<em>{0} })&lt;0$时，$f({ {x}</em>{0} })$为极大值；<br>当$f’,‘({ {x}<em>{0} })&gt;0$时，$f({ {x}</em>{0} })$为极小值。<br>注：如果$f’,‘({ {x}_{0} })&lt;0$，此方法失效。</p><h2 id="渐近线的求法"><a href="#渐近线的求法" class="headerlink" title="渐近线的求法"></a>渐近线的求法</h2><p>(1)水平渐近线   若$\underset{x\to +\infty }{\mathop{\lim } },f(x)=b$，或$\underset{x\to -\infty }{\mathop{\lim } },f(x)=b$，则</p><p>$y=b$称为函数$y=f(x)$的水平渐近线。</p><p>(2)铅直渐近线   若$\underset{x\to x_{0}^{-} }{\mathop{\lim } },f(x)=\infty $，或$\underset{x\to x_{0}^{+} }{\mathop{\lim } },f(x)=\infty $，则</p><p>$x={ {x}_{0} }$称为$y=f(x)$的铅直渐近线。</p><p>(3)斜渐近线   若$a=\underset{x\to \infty }{\mathop{\lim } },\frac{f(x)}{x},\quad b=\underset{x\to \infty }{\mathop{\lim } },[f(x)-ax]$，则<br>$y=ax+b$称为$y=f(x)$的斜渐近线。</p><h2 id="函数凹凸性的判断"><a href="#函数凹凸性的判断" class="headerlink" title="函数凹凸性的判断"></a>函数凹凸性的判断</h2><p><strong>Th1:</strong> (凹凸性的判别定理）若在I上$f’’(x)&lt;0$（或$f’’(x)&gt;0$），则$f(x)$在I上是凸的（或凹的）。</p><p><strong>Th2:</strong> (拐点的判别定理1)若在${ {x}<em>{0} }$处$f’’(x)=0$，（或$f’’(x)$不存在），当$x$变动经过${ {x}</em>{0} }$时，$f’’(x)$变号，则$({ {x}<em>{0} },f({ {x}</em>{0} }))$为拐点。</p><p><strong>Th3:</strong> (拐点的判别定理2)设$f(x)$在${ {x}<em>{0} }$点的某邻域内有三阶导数，且$f’’(x)=0$，$f’’’(x)\ne 0$，则$({ {x}</em>{0} },f({ {x}_{0} }))$为拐点。</p><h2 id="弧微分"><a href="#弧微分" class="headerlink" title="弧微分"></a>弧微分</h2><p>$dS=\sqrt{1+y{ {‘}^{2} } }dx$</p><h2 id="曲率-1"><a href="#曲率-1" class="headerlink" title="曲率"></a>曲率</h2><p>若曲线由参数方程$\begin{cases}x=x(t),\y=y(t),\end{cases}t\in[\alpha,\beta]$给出且有二阶微商，则其在一点的曲率$K=\frac{|y’’x’-y’x’’|}{[x’^2+y’^2]^{\frac{3}{2} } }$若$y=f(x)$，则$K=\frac{|y’’|}{(1+y’^2)^\frac{3}{2} }$同时记$\frac{1}{K}$为曲率半径。</p><h2 id="曲率半径"><a href="#曲率半径" class="headerlink" title="曲率半径"></a>曲率半径</h2><p>曲线在点$M$处的曲率$k(k\ne 0)$与曲线在点$M$处的曲率半径$\rho $有如下关系：$\rho =\frac{1}{k}$。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>第三章：线性代数回顾(Linear Algebra Review)</title>
      <link href="/2018/11/30/2018-11-30-xian-xing-dai-shu-hui-gu/"/>
      <url>/2018/11/30/2018-11-30-xian-xing-dai-shu-hui-gu/</url>
      
        <content type="html"><![CDATA[<blockquote><p>参考了<a href="https://github.com/fengdu78/Coursera-ML-AndrewNg-Notes" target="_blank" rel="noopener">斯坦福大学2014（吴恩达）机器学习教程中文笔记</a>，感谢编者黄海广博士。</p></blockquote><h1 id="矩阵和向量"><a href="#矩阵和向量" class="headerlink" title="矩阵和向量"></a>矩阵和向量</h1><p>矩阵的维数即行数$\times$列数<br>矩阵元素（矩阵项）：$A=\left[ \begin{matrix}   1402 &amp; 191  \   1371 &amp; 821  \   949 &amp; 1437  \   147 &amp; 1448  \\end{matrix} \right]$<br>$A_{ij}$指第$i$行，第$j$列的元素。<br>向量是一种特殊的矩阵，讲义中的向量一般都是列向量，如：<br>$y=\left[ \begin{matrix}   {460}  \   {232}  \   {315}  \   {178}  \\end{matrix} \right]$<br>为四维列向量（$4\times 1$）。<br>如下图为1索引向量和0索引向量，左图为1索引向量，右图为0索引向量，一般我们用1索引向量。<br>$y=\left[ \begin{matrix}   { {y}<em>{1} }  \   { {y}</em>{2} }  \   { {y}<em>{3} }  \   { {y}</em>{4} }  \\end{matrix} \right]$，$y=\left[ \begin{matrix}   { {y}<em>{0} }  \   { {y}</em>{1} }  \   { {y}<em>{2} }  \   { {y}</em>{3} }  \\end{matrix} \right]$</p><h1 id="加法和标量乘法"><a href="#加法和标量乘法" class="headerlink" title="加法和标量乘法"></a>加法和标量乘法</h1><p>矩阵的加法：行列数相等的可以加。组合算法也类似。</p><h1 id="矩阵向量乘法"><a href="#矩阵向量乘法" class="headerlink" title="矩阵向量乘法"></a>矩阵向量乘法</h1><p>$m\times n$的矩阵乘以$n\times 1$的向量，得到的是$m\times 1$的向量。</p><h1 id="矩阵乘法"><a href="#矩阵乘法" class="headerlink" title="矩阵乘法"></a>矩阵乘法</h1><p>$m\times n$矩阵乘以$n\times o$矩阵，变成$m\times o$矩阵。</p><h1 id="矩阵乘法的性质"><a href="#矩阵乘法的性质" class="headerlink" title="矩阵乘法的性质"></a>矩阵乘法的性质</h1><p>矩阵的乘法不满足交换律：$A\times B≠B\times A$<br>矩阵的乘法满足结合律。即：$A\times (B\times C)=(A\times B)\times C$<br>单位矩阵：在矩阵的乘法中，有一种矩阵起着特殊的作用，如同数的乘法中的1,我们称这种矩阵为单位矩阵．它是个方阵，一般用 $I$ 或者 $E$ 表示，本讲义都用 $I$ 代表单位矩阵，从左上角到右下角的对角线（称为主对角线）上的元素均为1以外全都为0。如：<br>$A{ {A}^{-1} }={ {A}^{-1} }A=I$<br>对于单位矩阵，有$AI=IA=A$</p><h1 id="逆、转置"><a href="#逆、转置" class="headerlink" title="逆、转置"></a>逆、转置</h1><p>矩阵的逆：如矩阵$A$是一个$m\times m$矩阵（方阵），如果有逆矩阵，则：$A{ {A}^{-1} }={ {A}^{-1} }A=I$<br>我们一般在<strong>OCTAVE</strong>或者<strong>MATLAB</strong>中进行计算矩阵的逆矩阵。<br>矩阵的转置：设$A$为$m\times n$阶矩阵（即$m$行$n$列），第$i $行$j $列的元素是$a(i,j)$，即：$A=a(i,j)$<br>定义$A$的转置为这样一个$n\times m$阶矩阵$B$，满足$B=a(j,i)$，即 $b (i,j)=a(j,i)$（$B$的第$i$行第$j$列元素是$A$的第$j$行第$i$列元素），记${ {A}^{T} }=B$。(有些书记为A’=B）<br>直观来看，将$A$的所有元素绕着一条从第1行第1列元素出发的右下方45度的射线作镜面反转，即得到$A$的转置。<br>例：<br>${ {\left| \begin{matrix}   a&amp; b  \   c&amp; d  \   e&amp; f  \\end{matrix} \right|}^{T} }=\left|\begin{matrix}   a&amp; c &amp; e  \   b&amp; d &amp; f  \\end{matrix} \right|$<br>矩阵的转置基本性质:<br>$ { {\left( A\pm B \right)}^{T} }={ {A}^{T} }\pm { {B}^{T} } $<br>${ {\left( A\times B \right)}^{T} }={ {B}^{T} }\times { {A}^{T} }$<br>${ {\left( { {A}^{T} } \right)}^{T} }=A $<br>${ {\left( KA \right)}^{T} }=K{ {A}^{T} } $<br><strong>matlab</strong>中矩阵转置：直接打一撇，<code>x=y'</code>。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 吴恩达机器学习笔记 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>第二章：单变量线性回归(Linear Regression with One Variable)</title>
      <link href="/2018/11/29/2018-11-29-dan-bian-liang-xian-xing-hui-gui/"/>
      <url>/2018/11/29/2018-11-29-dan-bian-liang-xian-xing-hui-gui/</url>
      
        <content type="html"><![CDATA[<blockquote><p>参考了<a href="https://github.com/fengdu78/Coursera-ML-AndrewNg-Notes" target="_blank" rel="noopener">斯坦福大学2014（吴恩达）机器学习教程中文笔记</a>，感谢编者黄海广博士。</p></blockquote><h1 id="模型表示"><a href="#模型表示" class="headerlink" title="模型表示"></a>模型表示</h1><p>我们将要用来描述这个回归问题的标记如下:<br>$m$ 代表训练集中实例的数量<br>$x$ 代表特征/输入变量<br>$y$ 代表目标变量/输出变量<br>$(x,y)$ 代表训练集中的实例<br>$(x^{(i)},y^{(i)})$ 代表第 $i$ 个观察实例<br>$h$ 代表学习算法的解决方案或函数也称为假设（hypothesis）<br>一种可能的表达方式为：$h_\theta(x)=\theta_0+\theta_1x$，因为只含有一个特征/输入变量，因此这样的问题叫作单变量线性回归问题。</p><h1 id="代价函数"><a href="#代价函数" class="headerlink" title="代价函数"></a>代价函数</h1><p>引入一些术语我们现在要做的便是为我们的模型选择合适的参数（parameters）$\theta_{0}$ 和 $\theta_{1}$，在房价问题这个例子中便是直线的斜率和在$y$ 轴上的截距。<br>我们选择的参数决定了我们得到的直线相对于我们的训练集的准确程度，模型所预测的值与训练集中实际值之间的差距就是建模误差（modeling error）。<br>我们的目标便是选择出可以使得建模误差的平方和能够最小的模型参数。即使得代价函数 $J(\theta_0,\theta_1)=\frac{1}{2m}\sum\limits_{i=1}^m(h_{\theta}(x^{(i)})-y^{(i)})^2$最小。<br>则可以看出在三维空间中存在一个使得$J(\theta_0,\theta_1)$最小的点。<br>代价函数也被称作平方误差函数，有时也被称为平方误差代价函数。我们之所以要求出误差的平方和，是因为误差平方代价函数，对于大多数问题，特别是回归问题，都是一个合理的选择。还有其他的代价函数也能很好地发挥作用，但是平方误差代价函数可能是解决回归问题最常用的手段了。<br>在后续课程中，我们还会谈论其他的代价函数，但我们刚刚讲的选择是对于大多数线性回归问题非常合理的。</p><h1 id="代价函数的直观理解I"><a href="#代价函数的直观理解I" class="headerlink" title="代价函数的直观理解I"></a>代价函数的直观理解I</h1><p>总结上一节的内容：</p><table><thead><tr><th>Hypothesis</th><th>$h_\theta(x)=\theta_0+\theta_1x$</th></tr></thead><tbody><tr><td>Parameters</td><td>$\theta_0,\theta_1$</td></tr><tr><td>Cost Function</td><td>$J(\theta_0,\theta_1)=\frac{1}{2m}\sum\limits_{i=1}^m(h_{\theta}(x^{(i)})-y^{(i)})^2$</td></tr><tr><td>Goal</td><td>$minimize_{\theta_0,\theta_1}J(\theta_0,\theta_1)$</td></tr></tbody></table><h1 id="代价函数的直观理解II"><a href="#代价函数的直观理解II" class="headerlink" title="代价函数的直观理解II"></a>代价函数的直观理解II</h1><p>轮廓图：看起来比较像等高线图。</p><h1 id="梯度下降"><a href="#梯度下降" class="headerlink" title="梯度下降"></a>梯度下降</h1><p>${\theta_{j} }:={\theta_{j} }-\alpha \frac{\partial }{\partial {\theta_{j} } }J\left( \theta  \right)$</p><h1 id="梯度下降的直观理解"><a href="#梯度下降的直观理解" class="headerlink" title="梯度下降的直观理解"></a>梯度下降的直观理解</h1><p><strong>Repeat {</strong><br>${\theta_{0} }:={\theta_{0} }-a\frac{1}{m}\sum\limits_{i=1}^{m}{ \left({ {h}<em>{\theta } }({ {x}^{(i)} })-{ {y}^{(i)} } \right)}$<br>${\theta</em>{1} }:={\theta_{1} }-a\frac{1}{m}\sum\limits_{i=1}^{m}{\left( \left({ {h}_{\theta } }({ {x}^{(i)} })-{ {y}^{(i)} } \right)\cdot { {x}^{(i)} } \right)}$<br><strong>}</strong></p><h1 id="接下来的内容"><a href="#接下来的内容" class="headerlink" title="接下来的内容"></a>接下来的内容</h1><p>对线性代数进行一个快速的复习回顾。如果你从来没有接触过向量和矩阵，那么这课件上所有的一切对你来说都是新知识，或者你之前对线性代数有所了解，但由于隔得久了，对其有所遗忘，那就请学习接下来的一组视频，我会快速地回顾你将用到的线性代数知识。<br>通过它们，你可以实现和使用更强大的线性回归模型。事实上，线性代数不仅仅在线性回归中应用广泛，它其中的矩阵和向量将有助于帮助我们实现之后更多的机器学习模型，并在计算上更有效率。正是因为这些矩阵和向量提供了一种有效的方式来组织大量的数据，特别是当我们处理巨大的训练集时，如果你不熟悉线性代数，如果你觉得线性代数看上去是一个复杂、可怕的概念，特别是对于之前从未接触过它的人，不必担心，事实上，为了实现机器学习算法，我们只需要一些非常非常基础的线性代数知识。通过接下来几个视频，你可以很快地学会所有你需要了解的线性代数知识。具体来说，为了帮助你判断是否有需要学习接下来的一组视频，我会讨论什么是矩阵和向量，谈谈如何加、减 、乘矩阵和向量，讨论逆矩阵和转置矩阵的概念。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 吴恩达机器学习笔记 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>第一章：引言(Introduction)</title>
      <link href="/2018/11/29/2018-11-29-yin-yan/"/>
      <url>/2018/11/29/2018-11-29-yin-yan/</url>
      
        <content type="html"><![CDATA[<blockquote><p>参考了<a href="https://github.com/fengdu78/Coursera-ML-AndrewNg-Notes" target="_blank" rel="noopener">斯坦福大学2014（吴恩达）机器学习教程中文笔记</a>，感谢编者黄海广博士。</p></blockquote><h1 id="欢迎"><a href="#欢迎" class="headerlink" title="欢迎"></a>欢迎</h1><p>第一个视频主要讲了什么是机器学习，机器学习能做些什么事情。</p><h1 id="机器学习是什么"><a href="#机器学习是什么" class="headerlink" title="机器学习是什么"></a>机器学习是什么</h1><p>Arthur Samuel：他定义机器学习为，在进行特定编程的情况下，给予计算机学习能力的领域。<br>Tom Mitchell提出：一个程序被认为能从经验E中学习，解决任务T，达到性能度量值P，当且仅当，有了经验E后，经过P评判，程序在处理T时的性能有所提升。<br>目前存在几种不同类型的学习算法。主要的两种类型被我们称之为监督学习和无监督学习。<br>监督学习这个想法是指，我们将教计算机如何去完成任务，而在无监督学习中，我们打算让它自己进行学习。</p><h1 id="监督学习Supervised-Learning"><a href="#监督学习Supervised-Learning" class="headerlink" title="监督学习Supervised Learning"></a>监督学习Supervised Learning</h1><p>监督学习指的就是我们给学习算法一个数据集，并通过数据集做出预测。这个数据集由“正确答案”组成。</p><h2 id="回归问题"><a href="#回归问题" class="headerlink" title="回归问题"></a>回归问题</h2><p>术语“回归”，意味着要预测这一系列值的属性。</p><h2 id="分类问题"><a href="#分类问题" class="headerlink" title="分类问题"></a>分类问题</h2><p>目标是推出离散的结果。</p><h1 id="无监督学习Unsupervised-Learning"><a href="#无监督学习Unsupervised-Learning" class="headerlink" title="无监督学习Unsupervised Learning"></a>无监督学习Unsupervised Learning</h1><p>不同于监督学习的数据的样子，即无监督学习中没有任何的标签或者是有相同的标签或者就是没标签。所以我们已知数据集，却不知如何处理，也未告知每个数据点是什么。别的都不知道，就是一个数据集。我们没有提前告知算法一些信息。<br>要自动地聚类那些个体到各个类，我没法提前知道哪些是哪些。因为我们没有给算法正确答案来回应数据集中的数据，所以这就是无监督学习。<br>无监督学习算法可能会把这些数据分成两个不同的簇。所以叫做聚类算法。聚类只是无监督学习中的一种。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 吴恩达机器学习笔记 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>函数程序设计实验十：车牌竞价信息处理</title>
      <link href="/2018/11/26/2018-11-26-che-pai-jing-jie-xin-xi-chu-li/"/>
      <url>/2018/11/26/2018-11-26-che-pai-jing-jie-xin-xi-chu-li/</url>
      
        <content type="html"><![CDATA[<pre class=" language-haskell"><code class="language-haskell"><span class="token comment" spellcheck="true">{-文件bids_201711.txt 是广州市某月车牌竞价信息，包含若干行，每行形如“1234198004118085   29570”，表示一位竞价人的身份证号和出价。假设本月有10个车牌竞拍。你的任务是统计相关信息，包括最高成交价、最低成交价、平均成交价、按照出价从高到低列车前十位出价人身份证号和出价，并存入另一个文件bidResults.txt中。例如，统计结果可能如文件bidResults1.txt  所示。要求：1. 提交你的代码文件；2. 提交统计结果文件，或者将结果粘贴在提交窗口。提示：需要排序函数，请hoogle :: [a] -> [a]，或者自定义排序。-}</span><span class="token comment" spellcheck="true">--代码写的太丑了，以后重写吧……</span><span class="token import_statement"><span class="token keyword">import</span> Data.Char</span><span class="token import_statement"><span class="token keyword">import</span> System.IO</span><span class="token import_statement"><span class="token keyword">import</span> Text.Printf</span><span class="token hvariable">main</span><span class="token operator">::</span><span class="token constant">IO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token hvariable">main</span><span class="token operator">=</span> <span class="token keyword">do</span>    <span class="token hvariable">txt</span><span class="token operator">&lt;-</span><span class="token builtin">readFile</span> <span class="token string">"bids_201711.txt"</span>    <span class="token keyword">let</span> <span class="token hvariable">dat</span><span class="token operator">=</span><span class="token builtin">lines</span> <span class="token hvariable">txt</span>    <span class="token keyword">let</span> <span class="token hvariable">mi</span><span class="token operator">=</span><span class="token hvariable">getmin</span> <span class="token hvariable">dat</span>    <span class="token keyword">let</span> <span class="token hvariable">ma</span><span class="token operator">=</span><span class="token hvariable">getmax</span> <span class="token hvariable">dat</span>    <span class="token keyword">let</span> <span class="token builtin">sum</span><span class="token operator">=</span><span class="token hvariable">getsum</span> <span class="token hvariable">dat</span>    <span class="token keyword">let</span> <span class="token hvariable">len</span><span class="token operator">=</span><span class="token builtin">length</span> <span class="token hvariable">dat</span>    <span class="token keyword">let</span> <span class="token hvariable">aftersort</span><span class="token operator">=</span><span class="token hvariable">getsort</span> <span class="token hvariable">dat</span>    <span class="token builtin">writeFile</span> <span class="token string">"bidResults.txt"</span>         <span class="token punctuation">(</span><span class="token hvariable">printf</span> <span class="token string">"最高成交价：%d\n最低成交价：%d\n平均成交价：%d\n总共有%d参与竞价成交名单：\n%s"</span>            <span class="token hvariable">ma</span> <span class="token hvariable">mi</span> <span class="token punctuation">(</span><span class="token builtin">div</span> <span class="token builtin">sum</span> <span class="token hvariable">len</span><span class="token punctuation">)</span> <span class="token hvariable">len</span> <span class="token punctuation">(</span><span class="token builtin">unlines</span> <span class="token punctuation">(</span><span class="token builtin">take</span> <span class="token number">10</span> <span class="token hvariable">aftersort</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token hvariable">digit</span><span class="token operator">::</span><span class="token constant">String</span><span class="token operator">-></span><span class="token constant">Int</span><span class="token operator">-></span><span class="token constant">Int</span><span class="token hvariable">digit</span> <span class="token hvariable">s</span> <span class="token hvariable">n</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token builtin">ord</span> <span class="token punctuation">(</span><span class="token hvariable">s</span><span class="token operator">!!</span><span class="token hvariable">n</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token builtin">ord</span> <span class="token char">'0'</span><span class="token punctuation">)</span><span class="token hvariable">getval</span><span class="token operator">::</span><span class="token constant">String</span><span class="token operator">-></span><span class="token constant">Int</span><span class="token hvariable">getval</span> <span class="token hvariable">s</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token hvariable">digit</span> <span class="token hvariable">s</span> <span class="token number">23</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">10000</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token hvariable">digit</span> <span class="token hvariable">s</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">1000</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token hvariable">digit</span> <span class="token hvariable">s</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token hvariable">digit</span> <span class="token hvariable">s</span> <span class="token number">26</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">10</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token hvariable">digit</span> <span class="token hvariable">s</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token hvariable">getmin</span><span class="token operator">::</span><span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token constant">Int</span><span class="token hvariable">getmin</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token hvariable">getval</span> <span class="token hvariable">a</span><span class="token hvariable">getmin</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">if</span> <span class="token hvariable">a</span><span class="token operator">&lt;</span><span class="token hvariable">b</span> <span class="token keyword">then</span> <span class="token hvariable">a</span> <span class="token keyword">else</span> <span class="token hvariable">b</span>    <span class="token keyword">where</span>        <span class="token hvariable">a</span><span class="token operator">=</span><span class="token hvariable">getmin</span> <span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span>        <span class="token hvariable">b</span><span class="token operator">=</span><span class="token hvariable">getmin</span> <span class="token hvariable">xs</span><span class="token hvariable">getmax</span><span class="token operator">::</span><span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token constant">Int</span><span class="token hvariable">getmax</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token hvariable">getval</span> <span class="token hvariable">a</span><span class="token hvariable">getmax</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token keyword">if</span> <span class="token hvariable">a</span><span class="token operator">></span><span class="token hvariable">b</span> <span class="token keyword">then</span> <span class="token hvariable">a</span> <span class="token keyword">else</span> <span class="token hvariable">b</span>    <span class="token keyword">where</span>        <span class="token hvariable">a</span><span class="token operator">=</span><span class="token hvariable">getmax</span> <span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span>        <span class="token hvariable">b</span><span class="token operator">=</span><span class="token hvariable">getmax</span> <span class="token hvariable">xs</span><span class="token hvariable">getsum</span><span class="token operator">::</span><span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token constant">Int</span><span class="token hvariable">getsum</span> <span class="token punctuation">[</span><span class="token hvariable">a</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token hvariable">getval</span> <span class="token hvariable">a</span><span class="token hvariable">getsum</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token hvariable">getmax</span> <span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token hvariable">getmax</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token hvariable">getsort</span><span class="token operator">::</span><span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span><span class="token hvariable">getsort</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token hvariable">getsort</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token hvariable">getsort</span> <span class="token punctuation">[</span><span class="token hvariable">y</span><span class="token operator">|</span><span class="token hvariable">y</span><span class="token operator">&lt;-</span><span class="token hvariable">xs</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token hvariable">getval</span> <span class="token hvariable">y</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token hvariable">getval</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">++</span><span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">(</span><span class="token hvariable">getsort</span> <span class="token punctuation">[</span><span class="token hvariable">y</span><span class="token operator">|</span><span class="token hvariable">y</span><span class="token operator">&lt;-</span><span class="token hvariable">xs</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token hvariable">getval</span> <span class="token hvariable">y</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token hvariable">getval</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre><p>下面是<code>bidResults.txt</code>的内容。</p><pre><code>最高成交价：29995最低成交价：10008平均成交价：111总共有491参与竞价成交名单：1234198610248103       299951535198004062143       299481334197907229015       299221435198110019109       299161535198412072052       298221533198811246245       298201633197706227256       298151234198205229019       297991533198710186071       297771536198405206083       29727</code></pre><p>下面是<code>bids_201711.txt</code>的内容。</p><pre><code>1230197812061080       245961230197210049047       112931331197708184092       263871331198509014173       219911331198702174176       137781333197808181338       296861333197812025146       279551333198709276233       124951334197907229015       299221334197205049158       104161430198708181002       251861430197102201027       240901430197912121030       193671431198402182064       116821431197303143010       206601431197711224092       131961431197512184190       120691432197703132181       284241433197902071057       119851433198810041098       187541433198111221148       259941433197311121198       250651433197711041206       211151433197412131354       131461434199006226012       173991434198808016016       254301434198112246017       260061434197106257001       121931434199012017087       226981434198612107099       277051434197910097116       209441434198205257149       234451434197105058037       145071434197511068057       239531434197410198061       159661434199001168083       214561434197712158085       254481434198912018117       204201434198807048125       254691435198609050022       124471435198409016106       231011435198110019109       299161436198306186113       108061436197501287048       139041530198810111127       160781530199002261200       159931530198304086034       266301530198411268038       141591530197408019037       217501530199002079054       100571531198401270053       247361531198101252040       265141531198110182065       124181531197704223007       131751531198708234191       252751532198206021061       123521532197309044084       211311532198206094108       200761533198402091046       163921533197405231092       255071533197510141097       134821533199006061403       223901533197905261404       220591533198303111443       259061533198508036001       180091533197512086002       276271533197906156007       258811533197504206011       138981533198007276012       270951533198004256027       277611533197606026083       187851533197702066114       186181533197910176205       126491533198811246245       298201534198403103001       257021534198403183043       180331534197007193054       282381534199004133073       220041534198701103076       268111534198606093104       121591534199008033108       192851534197412013119       213021534198610178012       112101534198406018015       222461534198507278026       195471534198702279031       226791534198002219036       295971534198605189050       117961534198007209121       196541535198702061054       253421535198212101059       228191535197503131117       193771535198803255119       229371535197608028311       157101535197501128369       245911536197405270013       155261536198402134004       183261536197312034015       217551536197901275016       291581536198405206083       297271234199004029001       146201234198002169002       128311234198611199003       132831234198012199004       124021234198706219005       248861234197812129006       232301234197701239007       196111234197906209008       138971234197304129009       102311234197003259010       246071234198701079011       295181234198405169012       214161234198610119013       247901234198907069014       131581234198405109015       222601234198106179016       248181234198107099017       249401234197708199018       169611234198708199019       159291234198201239020       184821234198207069021       134671234197312119022       220461234198912069023       293571234198311129024       138161234198811099025       224641234197104079026       103511234197512268070       269061234197504178071       185041234197301168073       256731234198605098074       165611234198509118075       239561234197511198076       158311234198302028077       265721234198708238078       236111234197312088079       280831234197406148080       142681234197703048081       117231234198001208082       205411234198510168083       205431234197608078084       225971234199001118085       256431234198203158086       168791234197110178087       258501234199003188088       276791234197405268089       109671234197311178090       106461234198204058091       240141234198603198092       138001234199012078093       268131234197006098094       111381234197108058095       242781234198505268096       232811234197809078097       179681234198012038098       222951234198508078099       167721234197907098100       200251234197707098101       113141234198808118102       276581234198610248103       299951234197409128104       272861234197303158105       206181234198311088106       271551234198701048107       286561234198304078108       134941234198401198109       109781234197611088110       217601234198602148111       115631234198311048112       225741234197701268113       127251234198802128114       260761234197303028115       264011234197509058116       283881234198410288117       275581234199007158118       166831234197510248119       155521234197208068120       132561234197201068121       209771234197712098122       134041234197912258123       213811234197307058124       271651234197811128125       252321234197003078126       234241234197907048127       218591234197807218128       268431234197303148130       165501234198609288131       180641234198501128132       232141234197005068133       145211234197508028134       128301234198402278135       119771234197504218136       289621234197709228137       133771234198107108138       262201230197405203218       266981233197007050058       249421233198104060178       210901233198811040364       274341233197412030414       113191236198803025088       126971234197906138139       286171234198102238140       201041234198709218141       142661234198503118142       254581234198207178143       128791234197612018144       250471234197702038145       124431234197107148146       265261234198710258147       278441234198103128148       219731234197207278149       296731234197310038150       257351234197512218151       224711234197211258152       117521234199004238153       286431234198009078154       271581234198911248155       103111234198611138156       166541234197808048157       244941234197510278158       215391234197506208159       137431234197309158160       128021234198505258161       121261234198302098162       106941234197710248163       129441234198610148164       120651234197005198165       100081234197404238166       106341234198007278167       214251234197001168168       228611234197303168169       274181234197307178170       223621234197905168171       199471234197903208172       116901234198106068173       112651234198904278174       103891234198903268175       265151234197304078176       171381234197402198177       188441234197207068178       206391234198205098179       163271234198902268180       275631234198102138181       101791131198902092008       279361131197304108030       284461233198109040089       174611233198508200203       100121235197601273174       127511235198209173224       232751235198609203285       220811236197907235026       168041234198801289001       277861234199006189002       190191234197205039003       286721234198810089004       154171234197703039005       243181234197409279006       199741234199002139007       279191234197506069008       117591234197205049009       167361234198002269010       178381234198402049011       130501234199006149012       285971234198503069013       223841234199004229014       106731234198903089015       112291234198711169016       235581234197910059017       165951234198402219018       178321234198205229019       297991234197411019020       259891234198410169021       186881234197905169022       180171234198507059023       115641234198002149024       187231234198303269025       145151234199005239026       145591330198201289011       207171331198702114240       231121332198107013008       112281431198511154103       248901432198409062084       220221432197202204037       132561433198009085060       236351433198709255216       143481434197611098044       123961434197504148184       215701435197411122073       119901435198202033142       110091435198406073430       273991530197111248009       104331530199005108029       248671530197411288030       261991530198312158054       241541531198209102002       141231531197802104121       187701531197002204204       234001533198607241042       139041533197706121311       139041533198407216057       291641533197507106058       205371533198710186071       297771533198307256264       271221533199004286269       195161534197908203047       151041534199009228014       193711534198602109107       122431534197608149108       104781535198607190037       129041535198704112045       252961535197511282065       226321535197707192081       125371535197602022083       110641535198407222087       158851535198002172088       281721535198802082089       240581535198909192091       121711535199012282144       227351535199008232161       254741535198603242229       244081535198503042296       261621535197811082354       267631535198609192434       176751535198808143011       282011536198105154006       276901630197409082111       240521630198811038030       257831630198205108032       272121630198603098044       264891630199008068110       281121630197410128114       190991630198607238144       221381630199006139005       146121631198907150001       195961631197601170011       182181631198401250022       159891631199003230055       178741631198711140072       247811631198203040077       287171631197809172009       162021631198708074019       118211631197202127017       141731631199008057090       202101631198001288124       190471631197802238243       120791631198709038263       209991631198508158280       269141632198506218013       241261632198707018035       109311633198412267019       263851633198611277075       191481633198101057101       258441633197504057210       127731633197307177216       112461633197202067229       175801633197706227256       298151633198908247269       193641633197607047270       279941633197310259025       179671633198004039028       168541633198805169035       166061633198707129053       166451634197601010006       178061634197906140030       276741634198202280069       189671634197202120078       180591634197606150098       195781634197501180121       239821634197501210147       287221634198406230150       161011634197304190152       152671634198707190170       128561634197409120218       151951635197407271010       278691636198202023012       292851636198112105041       150661636198811265174       191741535198109102012       154111535199008052069       259311535197407192001       165981535198509162002       160511535198009242004       109391535199003172005       115521535197510072006       142081535197405222007       169811535198412282008       234461535197511042009       143071535198404182010       118771535197812232011       148991535198403162013       260551535197012092014       158001535197612022015       160391535197104142016       196421535198905182017       132931535197610112018       254281535197502022019       271111535198904032020       252131535198111102021       289991535198310102022       139161535198112272023       172171535197208162047       116131535198406272048       134501535197312272049       217791535197902132050       106351535197106262051       181081535198412072052       298221535197408102053       236181535198402212054       186871535199012262055       288321535197408082056       115691535198206132057       254211535198604132058       226431535198904032059       292291535198101022060       263791535197002222061       143901535197902082062       222431535198903102063       227341535198808062064       188471535197203162065       162161535198507172066       171101535197509042067       180211535198612162068       247461535198203182093       182661535198010192094       161641535197607212095       150461535198404092096       255561535198108172097       184031535198308012098       129401535197510222099       295601535197512162100       176831535198805042101       121121535198807282102       233891535198310102103       116221535198407272104       110651535197507192105       156751535198503152106       157691535198307062107       206251535198106262108       296491535197903262109       286891535198204132110       136391535198808202111       276141535197603152112       181661535198612242113       123611535197010172114       170721535198802232115       153971535198301082139       132141535198202242140       187281535199002222141       160271535197208212142       287021535198004062143       299481535197005102144       164071535197301202145       185381535198407192146       115671535198012082147       237551535198007192148       194941535197812202149       142651535198803082150       222511535197904252151       205121535197709052152       216231535197106102153       148121535198906052154       208071535198702182155       127711535198606092156       226961535198905172157       255931535197807262158       277201535197911262159       240901535197204142160       133281535198004112161       142771535197106272186       279981535197306042188       124921535198512242189       152351535198308152190       206901535198106072191       191631535198903072192       168721535198811022193       157601535198301262194       155361535198801212195       125841535198908052197       135971535198901142198       294181535199004132199       166501535197411172200       293931535198309082201       231861535197508192202       100211535198911232203       157741535197808032204       176271535197812152205       286731535197204162206       279911535198808112207       181161535197411142208       290561535197409232003       146561535197012152187       117781535198107162196       17291</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 函数程序设计实验 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>函数程序设计实验八：模拟随机事件</title>
      <link href="/2018/11/14/2018-11-14-han-shu-cheng-xu-she-ji-shi-yan-ba-mo-ni-sui-ji-shi-jian/"/>
      <url>/2018/11/14/2018-11-14-han-shu-cheng-xu-she-ji-shi-yan-ba-mo-ni-sui-ji-shi-jian/</url>
      
        <content type="html"><![CDATA[<pre class=" language-haskell"><code class="language-haskell"><span class="token comment" spellcheck="true">{-Newton–Pepys problemFrom Wikipedia, the free encyclopediaJump to navigationJump to searchThe Newton–Pepys problem is a probability problem concerning the probability of throwing sixes from a certain number of dice.[1]In 1693 Samuel Pepys and Isaac Newton corresponded over a problem posed by Pepys in relation to a wager he planned to make. The problem was:Which of the following three propositions has the greatest chance of success?A. Six fair dice are tossed independently and at least one “6” appears.B. Twelve fair dice are tossed independently and at least two “6”s appear.C. Eighteen fair dice are tossed independently and at least three “6”s appear.[2]Pepys initially thought that outcome C had the highest probability, but Newton correctly concluded that outcome A actually has the highest probability.请你通过模拟的方法找到问题的答案。要求：1. 说明模拟方法和过程；2. 提交代码，并说明如何运行程序，得到问题答案。-}</span><span class="token import_statement"><span class="token keyword">import</span> System.Random</span><span class="token import_statement"><span class="token keyword">import</span> Text.Printf</span><span class="token hvariable">main</span><span class="token operator">::</span><span class="token constant">IO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token hvariable">main</span><span class="token operator">=</span>    <span class="token keyword">do</span>        <span class="token keyword">let</span> <span class="token hvariable">n</span><span class="token operator">=</span><span class="token number">1000</span>        <span class="token hvariable">a</span><span class="token operator">&lt;-</span><span class="token hvariable">getProbablity</span> <span class="token hvariable">eventA</span> <span class="token hvariable">n</span>        <span class="token hvariable">b</span><span class="token operator">&lt;-</span><span class="token hvariable">getProbablity</span> <span class="token hvariable">eventB</span> <span class="token hvariable">n</span>        <span class="token hvariable">c</span><span class="token operator">&lt;-</span><span class="token hvariable">getProbablity</span> <span class="token hvariable">eventC</span> <span class="token hvariable">n</span>        <span class="token builtin">putStrLn</span><span class="token punctuation">(</span><span class="token hvariable">printf</span> <span class="token string">"P(A)=%.7f,P(B)=%.7f,P(C)=%.7f"</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span> <span class="token hvariable">c</span><span class="token punctuation">)</span><span class="token hvariable">getProbablity</span><span class="token operator">::</span><span class="token punctuation">(</span><span class="token constant">IO</span> <span class="token constant">Bool</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token constant">Int</span><span class="token operator">-></span><span class="token constant">IO</span> <span class="token constant">Float</span><span class="token hvariable">getProbablity</span> <span class="token hvariable">event</span> <span class="token hvariable">n</span><span class="token operator">=</span><span class="token keyword">do</span>     <span class="token hvariable">xs</span><span class="token operator">&lt;-</span><span class="token hvariable">happen</span> <span class="token hvariable">event</span> <span class="token hvariable">n</span>    <span class="token builtin">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">fromIntegral</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token builtin">fromIntegral</span> <span class="token hvariable">n</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token hvariable">happen</span><span class="token operator">::</span><span class="token punctuation">(</span><span class="token constant">IO</span> <span class="token constant">Bool</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token constant">Int</span><span class="token operator">-></span><span class="token punctuation">(</span><span class="token constant">IO</span> <span class="token constant">Int</span><span class="token punctuation">)</span><span class="token hvariable">happen</span> <span class="token hvariable">event</span> <span class="token number">0</span><span class="token operator">=</span><span class="token builtin">return</span> <span class="token number">0</span><span class="token hvariable">happen</span> <span class="token hvariable">event</span> <span class="token hvariable">n</span><span class="token operator">=</span>    <span class="token keyword">do</span>        <span class="token hvariable">e</span><span class="token operator">&lt;-</span><span class="token hvariable">event</span>        <span class="token hvariable">y</span><span class="token operator">&lt;-</span><span class="token hvariable">happen</span> <span class="token hvariable">event</span> <span class="token punctuation">(</span><span class="token hvariable">n</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token hvariable">e</span><span class="token operator">==</span><span class="token constant">True</span>            <span class="token keyword">then</span> <span class="token builtin">return</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span><span class="token hvariable">y</span><span class="token punctuation">)</span>            <span class="token keyword">else</span> <span class="token builtin">return</span> <span class="token hvariable">y</span><span class="token hvariable">getDices</span><span class="token operator">::</span><span class="token constant">Int</span><span class="token operator">-></span><span class="token constant">IO</span> <span class="token punctuation">[</span><span class="token constant">Int</span><span class="token punctuation">]</span><span class="token hvariable">getDices</span> <span class="token number">0</span><span class="token operator">=</span><span class="token builtin">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token hvariable">getDices</span> <span class="token hvariable">x</span><span class="token operator">=</span><span class="token keyword">do</span>    <span class="token hvariable">y</span><span class="token operator">&lt;-</span><span class="token hvariable">randomRIO</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span>    <span class="token hvariable">ys</span><span class="token operator">&lt;-</span><span class="token hvariable">getDices</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token builtin">return</span> <span class="token punctuation">(</span><span class="token hvariable">y</span><span class="token operator">:</span><span class="token hvariable">ys</span><span class="token punctuation">)</span><span class="token hvariable">eventA</span><span class="token operator">::</span><span class="token constant">IO</span> <span class="token constant">Bool</span><span class="token hvariable">eventA</span><span class="token operator">=</span>    <span class="token keyword">do</span>        <span class="token hvariable">xs</span><span class="token operator">&lt;-</span><span class="token hvariable">getDices</span> <span class="token number">6</span>        <span class="token builtin">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token hvariable">countSix</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">0</span><span class="token punctuation">)</span><span class="token hvariable">eventB</span><span class="token operator">::</span><span class="token constant">IO</span> <span class="token constant">Bool</span><span class="token hvariable">eventB</span><span class="token operator">=</span>    <span class="token keyword">do</span>        <span class="token hvariable">xs</span><span class="token operator">&lt;-</span><span class="token hvariable">getDices</span> <span class="token number">12</span>        <span class="token builtin">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token hvariable">countSix</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">1</span><span class="token punctuation">)</span><span class="token hvariable">eventC</span><span class="token operator">::</span><span class="token constant">IO</span> <span class="token constant">Bool</span><span class="token hvariable">eventC</span><span class="token operator">=</span>    <span class="token keyword">do</span>        <span class="token hvariable">xs</span><span class="token operator">&lt;-</span><span class="token hvariable">getDices</span> <span class="token number">18</span>        <span class="token builtin">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token hvariable">countSix</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token number">2</span><span class="token punctuation">)</span><span class="token hvariable">countSix</span><span class="token operator">::</span><span class="token punctuation">[</span><span class="token constant">Int</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token constant">Int</span><span class="token hvariable">countSix</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">0</span><span class="token hvariable">countSix</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">=</span>    <span class="token keyword">if</span> <span class="token hvariable">x</span><span class="token operator">==</span><span class="token number">6</span> <span class="token keyword">then</span> <span class="token punctuation">(</span><span class="token hvariable">countSix</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span>    <span class="token keyword">else</span> <span class="token hvariable">countSix</span> <span class="token hvariable">xs</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 函数程序设计实验 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>函数程序设计实验七：石头、剪刀和布</title>
      <link href="/2018/11/14/2018-11-14-han-shu-cheng-xu-she-ji-shi-yan-qi-shi-tou-jian-dao-he-bu/"/>
      <url>/2018/11/14/2018-11-14-han-shu-cheng-xu-she-ji-shi-yan-qi-shi-tou-jian-dao-he-bu/</url>
      
        <content type="html"><![CDATA[<pre class=" language-haskell"><code class="language-haskell"><span class="token comment" spellcheck="true">{-设计一个交互程序，实现计算机（我）和用户（您）玩猜拳“石头、剪刀和布”。 例如，运行程序实现下来交互游戏：*Main> play请您出手 (R)石头, (S)剪刀, (P)布:p, 您出了布, 我出了石头您赢了这手我的得分: 0您的得分: 1请您出手 (R)石头, (S)剪刀, (P)布:s, 您出了剪刀, 我出了布您赢了这手我的得分: 0您的得分: 2请您出手 (R)石头, (S)剪刀, (P)布:r, 您出了石头, 我出了剪刀您赢了这手我的得分: 0您的得分: 3算您赢了这轮。*Main> play请您出手 (R)石头, (S)剪刀, (P)布:s, 您出了剪刀, 我出了布您赢了这手我的得分: 0您的得分: 1请您出手 (R)石头, (S)剪刀, (P)布:r, 您出了石头, 我出了石头这一手平手我的得分: 0您的得分: 1请您出手 (R)石头, (S)剪刀, (P)布:p, 您出了布, 我出了剪刀我的得分: 1您的得分: 1请您出手 (R)石头, (S)剪刀, (P)布:p, 您出了布, 我出了剪刀我的得分: 2您的得分: 1请您出手 (R)石头, (S)剪刀, (P)布:r, 您出了石头, 我出了剪刀您赢了这手我的得分: 2您的得分: 2请您出手 (R)石头, (S)剪刀, (P)布:s, 您出了剪刀, 我出了石头我的得分: 3您的得分: 2哈哈，我赢了！作业要求：1. 模块命名为Game, 程序命名为play:: IO ();2. 程序要仿照以上例子，输出交互过程和相关详细信息；3. 使用下面的手势类型及instance定义，需要 import System.Random:data Hand = Rock | Scissor | Paper deriving (Enum)instance Random Hand where    random g = case randomR (0,2) g of                     (r, g') -> (toEnum r, g')    randomR (a,b) g = case randomR (fromEnum a, fromEnum b) g of            (r, g') -> (toEnum r, g')你也可以自己将Hand定义为Random的实例，以便能够使用随机手势，如 randomIO :: IO Hand4. 用户（您）的输入用字母表示：r, s和p（不分大小写）分别表示用户选择的石头、剪刀和布5. 建议适当定义一些辅助函数，不要把所有的命令都写在函数play中6. 一点提示：猜数和猜单词中定义了函数：guess :: Int (或者String) -> IO ()其中输入参数是要猜的数或单词，在一系列猜测过程中需要这个信息，以便决定是停止还是继续猜（递归）。那么，猜拳时可能也需要类似的信息。提交要求：1. 提交模块Game;2. 仿照以上例子，至少给出计算机（我）和用户（您）各赢一次的运行截图。-}</span><span class="token keyword">module</span> <span class="token constant">Game</span> <span class="token keyword">where</span><span class="token import_statement"><span class="token keyword">import</span> System.Random</span><span class="token import_statement"><span class="token keyword">import</span> Text.Printf</span><span class="token keyword">data</span> <span class="token constant">Hand</span> <span class="token operator">=</span> <span class="token constant">Rock</span> <span class="token operator">|</span> <span class="token constant">Scissor</span> <span class="token operator">|</span> <span class="token constant">Paper</span> <span class="token keyword">deriving</span> <span class="token punctuation">(</span><span class="token constant">Enum</span><span class="token punctuation">,</span><span class="token constant">Eq</span><span class="token punctuation">)</span><span class="token keyword">instance</span> <span class="token constant">Random</span> <span class="token constant">Hand</span> <span class="token keyword">where</span>    <span class="token hvariable">random</span> <span class="token hvariable">g</span> <span class="token operator">=</span> <span class="token keyword">case</span> <span class="token hvariable">randomR</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token hvariable">g</span> <span class="token keyword">of</span>                     <span class="token punctuation">(</span><span class="token hvariable">r</span><span class="token punctuation">,</span> <span class="token hvariable">g</span>'<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">(</span><span class="token builtin">toEnum</span> <span class="token hvariable">r</span><span class="token punctuation">,</span> <span class="token hvariable">g</span>'<span class="token punctuation">)</span>    <span class="token hvariable">randomR</span> <span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token hvariable">g</span> <span class="token operator">=</span> <span class="token keyword">case</span> <span class="token hvariable">randomR</span> <span class="token punctuation">(</span><span class="token builtin">fromEnum</span> <span class="token hvariable">a</span><span class="token punctuation">,</span> <span class="token builtin">fromEnum</span> <span class="token hvariable">b</span><span class="token punctuation">)</span> <span class="token hvariable">g</span> <span class="token keyword">of</span>            <span class="token punctuation">(</span><span class="token hvariable">r</span><span class="token punctuation">,</span> <span class="token hvariable">g</span>'<span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token punctuation">(</span><span class="token builtin">toEnum</span> <span class="token hvariable">r</span><span class="token punctuation">,</span> <span class="token hvariable">g</span>'<span class="token punctuation">)</span><span class="token hvariable">getHand</span><span class="token operator">::</span><span class="token constant">IO</span> <span class="token constant">Hand</span><span class="token hvariable">getHand</span><span class="token operator">=</span>    <span class="token keyword">do</span>        <span class="token hvariable">s</span><span class="token operator">&lt;-</span><span class="token builtin">getLine</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token hvariable">s</span><span class="token operator">==</span><span class="token string">"r"</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span><span class="token hvariable">s</span><span class="token operator">==</span><span class="token string">"R"</span><span class="token punctuation">)</span>            <span class="token keyword">then</span> <span class="token builtin">return</span> <span class="token constant">Rock</span>            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token hvariable">s</span><span class="token operator">==</span><span class="token string">"s"</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span><span class="token hvariable">s</span><span class="token operator">==</span><span class="token string">"S"</span><span class="token punctuation">)</span>                <span class="token keyword">then</span> <span class="token builtin">return</span> <span class="token constant">Scissor</span>                <span class="token keyword">else</span> <span class="token builtin">return</span> <span class="token constant">Paper</span><span class="token hvariable">isWin</span><span class="token operator">::</span><span class="token constant">Hand</span><span class="token operator">-></span><span class="token constant">Hand</span><span class="token operator">-></span><span class="token constant">Bool</span>    <span class="token hvariable">isWin</span> <span class="token hvariable">p</span> <span class="token hvariable">c</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token hvariable">p</span><span class="token operator">==</span><span class="token constant">Rock</span><span class="token operator">&amp;&amp;</span><span class="token hvariable">c</span><span class="token operator">==</span><span class="token constant">Scissor</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span><span class="token hvariable">p</span><span class="token operator">==</span><span class="token constant">Scissor</span><span class="token operator">&amp;&amp;</span><span class="token hvariable">c</span><span class="token operator">==</span><span class="token constant">Paper</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token punctuation">(</span><span class="token hvariable">p</span><span class="token operator">==</span><span class="token constant">Paper</span><span class="token operator">&amp;&amp;</span><span class="token hvariable">c</span><span class="token operator">==</span><span class="token constant">Rock</span><span class="token punctuation">)</span><span class="token hvariable">toStr</span><span class="token operator">::</span><span class="token constant">Hand</span><span class="token operator">-></span><span class="token constant">String</span><span class="token hvariable">toStr</span> <span class="token constant">Rock</span><span class="token operator">=</span><span class="token string">"石头"</span><span class="token hvariable">toStr</span> <span class="token constant">Scissor</span><span class="token operator">=</span><span class="token string">"剪刀"</span><span class="token hvariable">toStr</span> <span class="token constant">Paper</span><span class="token operator">=</span><span class="token string">"布"</span><span class="token hvariable">play</span><span class="token operator">::</span><span class="token constant">IO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token hvariable">play</span><span class="token operator">=</span><span class="token hvariable">game</span> <span class="token number">0</span> <span class="token number">0</span><span class="token hvariable">game</span><span class="token operator">::</span><span class="token constant">Int</span><span class="token operator">-></span><span class="token constant">Int</span><span class="token operator">-></span><span class="token constant">IO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token hvariable">game</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span><span class="token operator">=</span>    <span class="token keyword">do</span>        <span class="token builtin">putStrLn</span> <span class="token string">"请您出手 (R)石头, (S)剪刀, (P)布:"</span>        <span class="token hvariable">ta</span><span class="token operator">&lt;-</span><span class="token hvariable">getHand</span>        <span class="token hvariable">tb</span><span class="token operator">&lt;-</span><span class="token hvariable">randomIO</span><span class="token operator">::</span><span class="token constant">IO</span> <span class="token constant">Hand</span>        <span class="token builtin">putStrLn</span><span class="token punctuation">(</span><span class="token hvariable">printf</span> <span class="token string">"您出了%s, 我出了%s"</span> <span class="token punctuation">(</span><span class="token hvariable">toStr</span> <span class="token hvariable">ta</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">toStr</span> <span class="token hvariable">tb</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token hvariable">isWin</span> <span class="token hvariable">ta</span> <span class="token hvariable">tb</span>            <span class="token keyword">then</span> <span class="token keyword">do</span>                <span class="token builtin">putStrLn</span><span class="token punctuation">(</span><span class="token hvariable">printf</span> <span class="token string">"您赢了这手\n我的得分: %d\n您的得分: %d"</span> <span class="token hvariable">b</span> <span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> <span class="token hvariable">a</span><span class="token operator">></span><span class="token number">1</span>                    <span class="token keyword">then</span> <span class="token builtin">putStrLn</span> <span class="token string">"算您赢了这轮。"</span>                    <span class="token keyword">else</span> <span class="token hvariable">game</span> <span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token hvariable">b</span>            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token hvariable">isWin</span> <span class="token hvariable">tb</span> <span class="token hvariable">ta</span>                <span class="token keyword">then</span> <span class="token keyword">do</span>                    <span class="token builtin">putStrLn</span><span class="token punctuation">(</span><span class="token hvariable">printf</span> <span class="token string">"我赢了这手\n我的得分: %d\n您的得分: %d"</span> <span class="token punctuation">(</span><span class="token hvariable">b</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token hvariable">a</span><span class="token punctuation">)</span>                    <span class="token keyword">if</span> <span class="token hvariable">b</span><span class="token operator">></span><span class="token number">1</span>                        <span class="token keyword">then</span> <span class="token builtin">putStrLn</span> <span class="token string">"哈哈，我赢了！"</span>                        <span class="token keyword">else</span> <span class="token hvariable">game</span> <span class="token hvariable">a</span> <span class="token punctuation">(</span><span class="token hvariable">b</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>                <span class="token keyword">else</span> <span class="token keyword">do</span>                    <span class="token builtin">putStrLn</span><span class="token punctuation">(</span><span class="token hvariable">printf</span> <span class="token string">"这一手平手\n我的得分: %d\n您的得分: %d"</span> <span class="token hvariable">b</span> <span class="token hvariable">a</span><span class="token punctuation">)</span>                    <span class="token hvariable">game</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span><span class="token comment" spellcheck="true">--main::IO()</span><span class="token comment" spellcheck="true">--main=play</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 函数程序设计实验 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>函数程序设计实验六：字符放大</title>
      <link href="/2018/11/08/2018-11-08-zi-fu-fang-da/"/>
      <url>/2018/11/08/2018-11-08-zi-fu-fang-da/</url>
      
        <content type="html"><![CDATA[<pre class=" language-haskell"><code class="language-haskell"><span class="token keyword">module</span> <span class="token constant">MyPicture</span> <span class="token keyword">where</span><span class="token import_statement"><span class="token keyword">import</span> Data.Char</span><span class="token import_statement"><span class="token keyword">import</span> Data.List</span><span class="token import_statement"><span class="token keyword">import</span> Text.Printf</span><span class="token hvariable">sayit</span><span class="token operator">::</span><span class="token constant">String</span><span class="token operator">-></span><span class="token constant">IO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token hvariable">sayit</span> <span class="token hvariable">s</span><span class="token operator">=</span><span class="token builtin">putStr</span><span class="token punctuation">(</span><span class="token hvariable">say</span> <span class="token hvariable">s</span><span class="token punctuation">)</span><span class="token hvariable">say</span><span class="token operator">::</span><span class="token constant">String</span><span class="token operator">-></span><span class="token constant">String</span><span class="token hvariable">say</span> <span class="token hvariable">s</span><span class="token operator">=</span><span class="token builtin">unlines</span><span class="token punctuation">(</span><span class="token hvariable">says</span> <span class="token hvariable">s</span><span class="token punctuation">)</span><span class="token hvariable">getid</span><span class="token operator">::</span><span class="token constant">Char</span><span class="token operator">-></span><span class="token constant">Int</span><span class="token hvariable">getid</span> <span class="token hvariable">c</span><span class="token operator">=</span>    <span class="token keyword">if</span> <span class="token hvariable">oc</span><span class="token operator">>=</span><span class="token number">97</span> <span class="token keyword">then</span> <span class="token punctuation">(</span><span class="token hvariable">oc</span><span class="token operator">-</span><span class="token number">97</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">)</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token hvariable">oc</span><span class="token operator">>=</span><span class="token number">65</span> <span class="token keyword">then</span> <span class="token punctuation">(</span><span class="token hvariable">oc</span><span class="token operator">-</span><span class="token number">65</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">)</span>    <span class="token keyword">else</span> <span class="token punctuation">(</span><span class="token hvariable">oc</span><span class="token operator">-</span><span class="token number">48</span><span class="token punctuation">)</span>        <span class="token keyword">where</span> <span class="token hvariable">oc</span><span class="token operator">=</span><span class="token builtin">ord</span> <span class="token hvariable">c</span><span class="token hvariable">says</span><span class="token operator">::</span><span class="token constant">String</span><span class="token operator">-></span><span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span><span class="token hvariable">says</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token hvariable">says</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token hvariable">merge</span> <span class="token punctuation">(</span><span class="token hvariable">alphabet</span><span class="token operator">!!</span><span class="token punctuation">(</span><span class="token hvariable">getid</span> <span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">says</span> <span class="token hvariable">xs</span><span class="token punctuation">)</span><span class="token hvariable">merge</span><span class="token operator">::</span><span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span><span class="token operator">-></span><span class="token punctuation">[</span><span class="token constant">String</span><span class="token punctuation">]</span><span class="token hvariable">merge</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token hvariable">x</span><span class="token operator">=</span><span class="token hvariable">x</span><span class="token hvariable">merge</span> <span class="token hvariable">x</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token hvariable">x</span><span class="token hvariable">merge</span> <span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">:</span><span class="token hvariable">xs</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">y</span><span class="token operator">:</span><span class="token hvariable">ys</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">++</span><span class="token hvariable">y</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token hvariable">merge</span> <span class="token hvariable">xs</span> <span class="token hvariable">ys</span><span class="token punctuation">)</span><span class="token hvariable">alphabet</span><span class="token operator">=</span>    <span class="token punctuation">[</span><span class="token punctuation">[</span>        <span class="token string">"  ####  "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">"  ####  "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"    #   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"  ###   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"  ####  "</span><span class="token punctuation">,</span>        <span class="token string">"  #  ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">"     ## "</span><span class="token punctuation">,</span>        <span class="token string">"    ##  "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"  ##    "</span><span class="token punctuation">,</span>        <span class="token string">"  #     "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" ###### "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"  ####  "</span><span class="token punctuation">,</span>        <span class="token string">" ##  #  "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">"     ## "</span><span class="token punctuation">,</span>        <span class="token string">"     #  "</span><span class="token punctuation">,</span>        <span class="token string">"   ###  "</span><span class="token punctuation">,</span>        <span class="token string">"     ## "</span><span class="token punctuation">,</span>        <span class="token string">"      # "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">"  ####  "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"    ##  "</span><span class="token punctuation">,</span>        <span class="token string">"    ##  "</span><span class="token punctuation">,</span>        <span class="token string">"   ###  "</span><span class="token punctuation">,</span>        <span class="token string">"   # #  "</span><span class="token punctuation">,</span>        <span class="token string">"  #  #  "</span><span class="token punctuation">,</span>        <span class="token string">" ##  #  "</span><span class="token punctuation">,</span>        <span class="token string">" #   #  "</span><span class="token punctuation">,</span>        <span class="token string">" ###### "</span><span class="token punctuation">,</span>        <span class="token string">"     #  "</span><span class="token punctuation">,</span>        <span class="token string">"     #  "</span><span class="token punctuation">,</span>        <span class="token string">"     #  "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" ###### "</span><span class="token punctuation">,</span>        <span class="token string">" ##     "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #####  "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">"     ## "</span><span class="token punctuation">,</span>        <span class="token string">"      # "</span><span class="token punctuation">,</span>        <span class="token string">"      # "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##  #  "</span><span class="token punctuation">,</span>        <span class="token string">"  ###   "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"   ###  "</span><span class="token punctuation">,</span>        <span class="token string">"  #  ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##   # "</span><span class="token punctuation">,</span>        <span class="token string">" ##     "</span><span class="token punctuation">,</span>        <span class="token string">" # ###  "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##   # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" ##   # "</span><span class="token punctuation">,</span>        <span class="token string">"  #  ## "</span><span class="token punctuation">,</span>        <span class="token string">"   ###  "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" ###### "</span><span class="token punctuation">,</span>        <span class="token string">"     ## "</span><span class="token punctuation">,</span>        <span class="token string">"     #  "</span><span class="token punctuation">,</span>        <span class="token string">"     #  "</span><span class="token punctuation">,</span>        <span class="token string">"     #  "</span><span class="token punctuation">,</span>        <span class="token string">"    ##  "</span><span class="token punctuation">,</span>        <span class="token string">"    #   "</span><span class="token punctuation">,</span>        <span class="token string">"    #   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   #    "</span><span class="token punctuation">,</span>        <span class="token string">"   #    "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"  ###   "</span><span class="token punctuation">,</span>        <span class="token string">" ##  #  "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##  #  "</span><span class="token punctuation">,</span>        <span class="token string">"  ####  "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">"  ####  "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"  ###   "</span><span class="token punctuation">,</span>        <span class="token string">" ##  #  "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">"  ##### "</span><span class="token punctuation">,</span>        <span class="token string">"     ## "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##  #  "</span><span class="token punctuation">,</span>        <span class="token string">"  ###   "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"  ####  "</span><span class="token punctuation">,</span>        <span class="token string">"  #  #  "</span><span class="token punctuation">,</span>        <span class="token string">"  #  #  "</span><span class="token punctuation">,</span>        <span class="token string">"  #  #  "</span><span class="token punctuation">,</span>        <span class="token string">" ###### "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">"##    ##"</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" #####  "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #####  "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #####  "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"   ###  "</span><span class="token punctuation">,</span>        <span class="token string">"  #  ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##   # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">"  #  ## "</span><span class="token punctuation">,</span>        <span class="token string">"   ###  "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" ####   "</span><span class="token punctuation">,</span>        <span class="token string">" #   #  "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #   #  "</span><span class="token punctuation">,</span>        <span class="token string">" ####   "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" ###### "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" ###### "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" ###### "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" ###### "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #####  "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"   ###  "</span><span class="token punctuation">,</span>        <span class="token string">"  #  ## "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #  ### "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">"   #### "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" ###### "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"      # "</span><span class="token punctuation">,</span>        <span class="token string">"      # "</span><span class="token punctuation">,</span>        <span class="token string">"      # "</span><span class="token punctuation">,</span>        <span class="token string">"      # "</span><span class="token punctuation">,</span>        <span class="token string">"      # "</span><span class="token punctuation">,</span>        <span class="token string">"      # "</span><span class="token punctuation">,</span>        <span class="token string">"      # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">"  ####  "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #   #  "</span><span class="token punctuation">,</span>        <span class="token string">" #  ##  "</span><span class="token punctuation">,</span>        <span class="token string">" # ##   "</span><span class="token punctuation">,</span>        <span class="token string">" ###    "</span><span class="token punctuation">,</span>        <span class="token string">" ####   "</span><span class="token punctuation">,</span>        <span class="token string">" #  #   "</span><span class="token punctuation">,</span>        <span class="token string">" #  ##  "</span><span class="token punctuation">,</span>        <span class="token string">" #   #  "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" ###### "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" ###### "</span><span class="token punctuation">,</span>        <span class="token string">" # ## # "</span><span class="token punctuation">,</span>        <span class="token string">" # ## # "</span><span class="token punctuation">,</span>        <span class="token string">" # ## # "</span><span class="token punctuation">,</span>        <span class="token string">" # ## # "</span><span class="token punctuation">,</span>        <span class="token string">" # ## # "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" ##   # "</span><span class="token punctuation">,</span>        <span class="token string">" ##   # "</span><span class="token punctuation">,</span>        <span class="token string">" ###  # "</span><span class="token punctuation">,</span>        <span class="token string">" # #  # "</span><span class="token punctuation">,</span>        <span class="token string">" # #  # "</span><span class="token punctuation">,</span>        <span class="token string">" #  # # "</span><span class="token punctuation">,</span>        <span class="token string">" #  # # "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"  ####  "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">"  ####  "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" #####  "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #####  "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"  ####  "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #  ### "</span><span class="token punctuation">,</span>        <span class="token string">" #  ### "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">"  ##### "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" #####  "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #####  "</span><span class="token punctuation">,</span>        <span class="token string">" #  #   "</span><span class="token punctuation">,</span>        <span class="token string">" #  ##  "</span><span class="token punctuation">,</span>        <span class="token string">" #   #  "</span><span class="token punctuation">,</span>        <span class="token string">" #   ## "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"  ####  "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">"  #     "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"     ## "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">"  ####  "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" ###### "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">"  ####  "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"##    ##"</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##  #  "</span><span class="token punctuation">,</span>        <span class="token string">"  #  #  "</span><span class="token punctuation">,</span>        <span class="token string">"  # ##  "</span><span class="token punctuation">,</span>        <span class="token string">"  ####  "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">"## ## ##"</span><span class="token punctuation">,</span>        <span class="token string">"## ## ##"</span><span class="token punctuation">,</span>        <span class="token string">"## ## # "</span><span class="token punctuation">,</span>        <span class="token string">" # ## # "</span><span class="token punctuation">,</span>        <span class="token string">" # ## # "</span><span class="token punctuation">,</span>        <span class="token string">" ## ### "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" ##  #  "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" ##  #  "</span><span class="token punctuation">,</span>        <span class="token string">"  #  #  "</span><span class="token punctuation">,</span>        <span class="token string">"  ###   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"  # ##  "</span><span class="token punctuation">,</span>        <span class="token string">"  #  #  "</span><span class="token punctuation">,</span>        <span class="token string">" ##  ## "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">" #    # "</span><span class="token punctuation">,</span>        <span class="token string">"  #  #  "</span><span class="token punctuation">,</span>        <span class="token string">"  #  #  "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>        <span class="token string">" ###### "</span><span class="token punctuation">,</span>        <span class="token string">"     ## "</span><span class="token punctuation">,</span>        <span class="token string">"     #  "</span><span class="token punctuation">,</span>        <span class="token string">"    ##  "</span><span class="token punctuation">,</span>        <span class="token string">"    #   "</span><span class="token punctuation">,</span>        <span class="token string">"   ##   "</span><span class="token punctuation">,</span>        <span class="token string">"   #    "</span><span class="token punctuation">,</span>        <span class="token string">"  #     "</span><span class="token punctuation">,</span>        <span class="token string">" ##     "</span><span class="token punctuation">,</span>        <span class="token string">" #      "</span><span class="token punctuation">,</span>        <span class="token string">" ###### "</span>    <span class="token punctuation">]</span><span class="token punctuation">]</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 函数程序设计实验 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>函数程序设计实验四：列表练习（2）</title>
      <link href="/2018/11/08/2018-11-08-lie-biao-lian-xi-2/"/>
      <url>/2018/11/08/2018-11-08-lie-biao-lian-xi-2/</url>
      
        <content type="html"><![CDATA[<pre class=" language-haskell"><code class="language-haskell"><span class="token comment" spellcheck="true">{-称一个三元组(x,y,z)是毕达哥拉斯三元组，如果x*x + y*y == z*z。例如，(3,4,5), (4,3,5), (6,8,10)等。请定义一个函数triads :: Int -> [(Int, Int, Int)] 使得triads n 给出[1 .. n]中的毕达哥拉斯三元组，如 > triads 5 [(3,4,5),(4,3,5)] > triads 13 [(3,4,5),(4,3,5),(5,12,13),(6,8,10),(8,6,10),(12,5,13)]-}</span><span class="token hvariable">triads</span> <span class="token operator">::</span> <span class="token constant">Int</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token constant">Int</span><span class="token punctuation">,</span> <span class="token constant">Int</span><span class="token punctuation">,</span> <span class="token constant">Int</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token hvariable">triads</span> <span class="token hvariable">n</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span><span class="token hvariable">y</span><span class="token punctuation">,</span><span class="token hvariable">z</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token hvariable">x</span><span class="token operator">&lt;-</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token hvariable">n</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token hvariable">y</span><span class="token operator">&lt;-</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token hvariable">n</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token hvariable">z</span><span class="token operator">&lt;-</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token hvariable">n</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token hvariable">x</span><span class="token operator">*</span><span class="token hvariable">x</span><span class="token operator">+</span><span class="token hvariable">y</span><span class="token operator">*</span><span class="token hvariable">y</span><span class="token operator">==</span><span class="token hvariable">z</span><span class="token operator">*</span><span class="token hvariable">z</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true">{-以上结果中(3,4,5)和(4,3,5)实际上没有区别。请改进该函数，使得结果中不出现这种重复意义的三元组，实现函数 triads2 :: Int -> [(Int, Int, Int)]使得 > triads2 5 [(3,4,5)]  > triads2 13 [(3,4,5),(5,12,13),(6,8,10)]-}</span><span class="token hvariable">triads2</span> <span class="token operator">::</span> <span class="token constant">Int</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token constant">Int</span><span class="token punctuation">,</span> <span class="token constant">Int</span><span class="token punctuation">,</span> <span class="token constant">Int</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token hvariable">triads2</span> <span class="token hvariable">n</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span><span class="token hvariable">y</span><span class="token punctuation">,</span><span class="token hvariable">z</span><span class="token punctuation">)</span><span class="token operator">|</span><span class="token hvariable">x</span><span class="token operator">&lt;-</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">..</span><span class="token hvariable">n</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token hvariable">y</span><span class="token operator">&lt;-</span><span class="token punctuation">[</span><span class="token hvariable">x</span><span class="token operator">..</span><span class="token hvariable">n</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token hvariable">z</span><span class="token operator">&lt;-</span><span class="token punctuation">[</span><span class="token hvariable">y</span><span class="token operator">..</span><span class="token hvariable">n</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token hvariable">x</span><span class="token operator">*</span><span class="token hvariable">x</span><span class="token operator">+</span><span class="token hvariable">y</span><span class="token operator">*</span><span class="token hvariable">y</span><span class="token operator">==</span><span class="token hvariable">z</span><span class="token operator">*</span><span class="token hvariable">z</span><span class="token punctuation">]</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 函数程序设计实验 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>函数程序设计实验三：使用Newton-Raphson方式计算平方根</title>
      <link href="/2018/10/23/2018-10-23-han-shu-cheng-xu-she-ji-shi-yan-san-shi-yong-newton-raphson-fang-shi-ji-suan-ping-fang-gen/"/>
      <url>/2018/10/23/2018-10-23-han-shu-cheng-xu-she-ji-shi-yan-san-shi-yong-newton-raphson-fang-shi-ji-suan-ping-fang-gen/</url>
      
        <content type="html"><![CDATA[<pre class=" language-haskell"><code class="language-haskell"><span class="token keyword">module</span> <span class="token constant">Newton_Raphson</span> <span class="token keyword">where</span><span class="token hvariable">squareroot2</span> <span class="token operator">::</span> <span class="token constant">Float</span> <span class="token operator">-></span> <span class="token constant">Integer</span> <span class="token operator">-></span> <span class="token constant">Float</span><span class="token hvariable">squareroot2</span> <span class="token hvariable">x0</span> <span class="token hvariable">n</span><span class="token operator">=</span><span class="token hvariable">squareroot</span> <span class="token number">2</span> <span class="token hvariable">x0</span> <span class="token hvariable">n</span><span class="token hvariable">squareroot</span> <span class="token operator">::</span> <span class="token constant">Float</span> <span class="token operator">-></span> <span class="token constant">Float</span> <span class="token operator">-></span> <span class="token constant">Integer</span> <span class="token operator">-></span> <span class="token constant">Float</span><span class="token hvariable">squareroot</span> <span class="token hvariable">r</span> <span class="token hvariable">x0</span> <span class="token number">0</span><span class="token operator">=</span><span class="token hvariable">x0</span><span class="token hvariable">squareroot</span> <span class="token hvariable">r</span> <span class="token hvariable">x0</span> <span class="token hvariable">n</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token operator">+</span><span class="token hvariable">r</span><span class="token operator">/</span><span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span> <span class="token keyword">where</span> <span class="token hvariable">x</span><span class="token operator">=</span><span class="token hvariable">squareroot</span> <span class="token hvariable">r</span> <span class="token hvariable">x0</span> <span class="token punctuation">(</span><span class="token hvariable">n</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token hvariable">sqrtSeq</span> <span class="token operator">::</span> <span class="token constant">Float</span> <span class="token operator">-></span> <span class="token constant">Float</span> <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token constant">Float</span><span class="token punctuation">]</span><span class="token hvariable">sqrtSeq</span> <span class="token hvariable">r</span> <span class="token hvariable">x0</span><span class="token operator">=</span><span class="token hvariable">x0</span><span class="token operator">:</span><span class="token hvariable">sqrtSeq</span> <span class="token hvariable">r</span> <span class="token punctuation">(</span><span class="token hvariable">squareroot</span> <span class="token hvariable">r</span> <span class="token hvariable">x0</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token hvariable">squareroot</span>' <span class="token operator">::</span> <span class="token constant">Float</span> <span class="token operator">-></span> <span class="token constant">Float</span> <span class="token operator">-></span> <span class="token constant">Float</span> <span class="token operator">-></span> <span class="token constant">Float</span><span class="token hvariable">squareroot</span>' <span class="token hvariable">r</span> <span class="token hvariable">x0</span> <span class="token hvariable">eps</span><span class="token operator">=</span><span class="token hvariable">f</span> <span class="token punctuation">(</span><span class="token hvariable">sqrtSeq</span> <span class="token hvariable">r</span> <span class="token hvariable">x0</span><span class="token punctuation">)</span> <span class="token hvariable">eps</span> <span class="token keyword">where</span> <span class="token hvariable">f</span> <span class="token punctuation">(</span><span class="token hvariable">y</span><span class="token operator">:</span><span class="token hvariable">ys</span><span class="token punctuation">)</span> <span class="token hvariable">eps</span><span class="token operator">=</span><span class="token keyword">if</span> <span class="token builtin">abs</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token builtin">head</span> <span class="token hvariable">ys</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token hvariable">y</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token hvariable">eps</span> <span class="token keyword">then</span> <span class="token hvariable">y</span> <span class="token keyword">else</span> <span class="token hvariable">f</span> <span class="token hvariable">ys</span> <span class="token hvariable">eps</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 函数程序设计实验 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>函数程序设计实验二：递归练习</title>
      <link href="/2018/10/16/2018-10-16-di-gui-lian-xi/"/>
      <url>/2018/10/16/2018-10-16-di-gui-lian-xi/</url>
      
        <content type="html"><![CDATA[<pre class=" language-haskell"><code class="language-haskell"><span class="token keyword">module</span> <span class="token constant">HW</span> <span class="token keyword">where</span><span class="token comment" spellcheck="true">{-1. 定义求两个非负整数最大公因子的函数：mygcd ::Integer ->Integer ->Integer-}</span><span class="token hvariable">mygcd</span> <span class="token operator">::</span><span class="token constant">Integer</span> <span class="token operator">-></span><span class="token constant">Integer</span> <span class="token operator">-></span><span class="token constant">Integer</span><span class="token hvariable">mygcd</span> <span class="token hvariable">a</span> <span class="token number">0</span><span class="token operator">=</span><span class="token hvariable">a</span><span class="token hvariable">mygcd</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span><span class="token operator">=</span><span class="token hvariable">mygcd</span> <span class="token hvariable">b</span> <span class="token punctuation">(</span><span class="token builtin">mod</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">{-2. 定义阶乘函数fac :: Integer -> Integer -}</span><span class="token hvariable">fac</span> <span class="token operator">::</span> <span class="token constant">Integer</span> <span class="token operator">-></span> <span class="token constant">Integer</span> <span class="token hvariable">fac</span> <span class="token number">0</span><span class="token operator">=</span><span class="token number">1</span><span class="token hvariable">fac</span> <span class="token hvariable">n</span><span class="token operator">=</span><span class="token hvariable">n</span><span class="token operator">*</span> <span class="token hvariable">fac</span> <span class="token punctuation">(</span><span class="token hvariable">n</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">{-3. 定义下列函数：sumFacs :: Integer -> Integer使得sumFacs n = fac 0 + fac 1 + ... + fac n-}</span><span class="token hvariable">sumFacs</span> <span class="token operator">::</span> <span class="token constant">Integer</span> <span class="token operator">-></span> <span class="token constant">Integer</span><span class="token hvariable">sumFacs</span> <span class="token number">0</span><span class="token operator">=</span><span class="token hvariable">fac</span> <span class="token number">0</span><span class="token hvariable">sumFacs</span> <span class="token hvariable">n</span><span class="token operator">=</span><span class="token hvariable">fac</span> <span class="token hvariable">n</span><span class="token operator">+</span><span class="token hvariable">sumFacs</span> <span class="token punctuation">(</span><span class="token hvariable">n</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">{-4. 上述函数sumFacs可以对输入n返回和fac 0 + fac 1 + ... + fac n。任意给定一个函数f, 一个非负整数n, 能否求出和f 0 + f 1 + ... + f n呢？答案是肯定的。请您定义这样的函数：sumFun :: (Integer -> Integer) -> Integer -> Integer使得sumFun f n = f 0 + f 1 + ... + f n-}</span><span class="token hvariable">sumFun</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Integer</span> <span class="token operator">-></span> <span class="token constant">Integer</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token constant">Integer</span> <span class="token operator">-></span> <span class="token constant">Integer</span><span class="token hvariable">sumFun</span> <span class="token hvariable">f</span> <span class="token number">0</span><span class="token operator">=</span><span class="token hvariable">f</span> <span class="token number">0</span><span class="token hvariable">sumFun</span> <span class="token hvariable">f</span> <span class="token hvariable">n</span><span class="token operator">=</span><span class="token hvariable">f</span> <span class="token hvariable">n</span><span class="token operator">+</span><span class="token hvariable">sumFun</span> <span class="token hvariable">f</span> <span class="token punctuation">(</span><span class="token hvariable">n</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">{-5. 定义函数maxFun :: (Integer -> Integer) -> Integer -> Integer使得maxFun f n 等于f 0 ， f 1 ， ... ， f n中的最大值。-}</span><span class="token hvariable">maxFun</span> <span class="token operator">::</span> <span class="token punctuation">(</span><span class="token constant">Integer</span> <span class="token operator">-></span> <span class="token constant">Integer</span><span class="token punctuation">)</span> <span class="token operator">-></span> <span class="token constant">Integer</span> <span class="token operator">-></span> <span class="token constant">Integer</span><span class="token hvariable">maxFun</span> <span class="token hvariable">f</span> <span class="token number">0</span><span class="token operator">=</span><span class="token hvariable">f</span> <span class="token number">0</span><span class="token hvariable">maxFun</span> <span class="token hvariable">f</span> <span class="token hvariable">n</span><span class="token operator">=</span><span class="token builtin">max</span> <span class="token punctuation">(</span><span class="token hvariable">f</span> <span class="token hvariable">n</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token hvariable">maxFun</span> <span class="token hvariable">f</span> <span class="token hvariable">n</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">{-6. 定义函数：fib :: Integer ->Integer使得fib n 返回第n个斐波那契数，如fib 0  =0, fib 1 = 1, fib 2 = 1, fib 3 = 2, fib 4 = 5 ,...。-}</span><span class="token hvariable">fib</span> <span class="token operator">::</span> <span class="token constant">Integer</span> <span class="token operator">-></span><span class="token constant">Integer</span><span class="token hvariable">fib</span> <span class="token hvariable">n</span><span class="token operator">=</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token hvariable">n</span><span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">then</span> <span class="token hvariable">n</span> <span class="token keyword">else</span> <span class="token hvariable">fib</span> <span class="token punctuation">(</span><span class="token hvariable">n</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token hvariable">fib</span><span class="token punctuation">(</span><span class="token hvariable">n</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">{-7. 利用我们可以利用下列迭代公式求2的近似平方根： xn+1 = (xn + 2/xn)/2方法是从任意一个初值x0开始，如x0 = 1, x1 = (x0 +2/x0)/2 =1.5, x2 = (x1 + 2/x1)/2= 1.41667, ...请定义一个函数sqrt2 :: Float ->Integer ->Float使得sqrt2 x0 n  等于第n个逼近值xn, 例如，sqrt2 1.0 0 = 1.0, sqrt2 1.0 1 = 1.5, sqrt2 1.0 2 = 1.41667, ...。-}</span><span class="token hvariable">sqrt2</span> <span class="token operator">::</span> <span class="token constant">Float</span> <span class="token operator">-></span> <span class="token constant">Integer</span> <span class="token operator">-></span> <span class="token constant">Float</span><span class="token hvariable">sqrt2</span> <span class="token hvariable">x0</span> <span class="token number">0</span><span class="token operator">=</span><span class="token hvariable">x0</span><span class="token hvariable">sqrt2</span> <span class="token hvariable">x0</span> <span class="token hvariable">n</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token hvariable">x</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token operator">/</span><span class="token hvariable">x</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span> <span class="token keyword">where</span> <span class="token hvariable">x</span><span class="token operator">=</span><span class="token hvariable">sqrt2</span> <span class="token hvariable">x0</span> <span class="token punctuation">(</span><span class="token hvariable">n</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">{-8. 完成解求一元二次方程根的函数。-}</span><span class="token hvariable">roots</span><span class="token operator">::</span><span class="token punctuation">(</span><span class="token constant">Float</span><span class="token punctuation">,</span><span class="token constant">Float</span><span class="token punctuation">,</span><span class="token constant">Float</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token punctuation">(</span><span class="token constant">Float</span><span class="token punctuation">,</span><span class="token constant">Float</span><span class="token punctuation">)</span><span class="token hvariable">roots</span> <span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">,</span><span class="token hvariable">c</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token hvariable">b</span><span class="token operator">-</span><span class="token hvariable">sqrtDelta</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token operator">/</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token hvariable">b</span><span class="token operator">+</span><span class="token hvariable">sqrtDelta</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token operator">/</span><span class="token hvariable">a</span><span class="token punctuation">)</span> <span class="token keyword">where</span> <span class="token hvariable">sqrtDelta</span><span class="token operator">=</span><span class="token builtin">sqrt</span> <span class="token punctuation">(</span><span class="token hvariable">b</span><span class="token operator">*</span><span class="token hvariable">b</span><span class="token operator">-</span><span class="token number">4</span><span class="token operator">*</span><span class="token hvariable">a</span><span class="token operator">*</span><span class="token hvariable">c</span><span class="token punctuation">)</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 函数程序设计实验 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>函数程序设计实验一：分式</title>
      <link href="/2018/10/16/2018-10-16-fen-shi/"/>
      <url>/2018/10/16/2018-10-16-fen-shi/</url>
      
        <content type="html"><![CDATA[<pre class=" language-haskell"><code class="language-haskell"><span class="token comment" spellcheck="true">--import Test.QuickCheck</span><span class="token keyword">module</span> <span class="token constant">MyFraction</span> <span class="token keyword">where</span><span class="token constant">Fraction</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token constant">Integer</span><span class="token punctuation">,</span><span class="token constant">Integer</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">--分式化简</span><span class="token hvariable">ratreduction</span><span class="token operator">::</span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token hvariable">ratreduction</span><span class="token punctuation">(</span><span class="token hvariable">x</span><span class="token punctuation">,</span><span class="token hvariable">y</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token builtin">div</span> <span class="token hvariable">x</span> <span class="token hvariable">g</span><span class="token punctuation">,</span><span class="token builtin">div</span> <span class="token hvariable">y</span> <span class="token hvariable">g</span><span class="token punctuation">)</span><span class="token keyword">where</span> <span class="token hvariable">g</span><span class="token operator">=</span><span class="token builtin">gcd</span> <span class="token hvariable">x</span> <span class="token hvariable">y</span><span class="token comment" spellcheck="true">--加法</span><span class="token hvariable">ratplus</span><span class="token operator">::</span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token hvariable">ratplus</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token hvariable">ratreduction</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token operator">*</span><span class="token hvariable">d</span><span class="token operator">+</span><span class="token hvariable">b</span><span class="token operator">*</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token operator">*</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">--减法，调用加法实现</span><span class="token hvariable">ratminus</span><span class="token operator">::</span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token hvariable">ratminus</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token hvariable">ratplus</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">--乘法</span><span class="token hvariable">rattimes</span><span class="token operator">::</span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token hvariable">rattimes</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token hvariable">ratreduction</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token operator">*</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token operator">*</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">--除法，调用乘法实现</span><span class="token hvariable">ratdiv</span><span class="token operator">::</span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token hvariable">ratdiv</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token hvariable">rattimes</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token hvariable">d</span><span class="token punctuation">,</span><span class="token hvariable">c</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">--取整</span><span class="token hvariable">ratfloor</span><span class="token operator">::</span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Integer</span><span class="token hvariable">ratfloor</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token builtin">div</span> <span class="token hvariable">a</span> <span class="token hvariable">b</span><span class="token comment" spellcheck="true">--转成浮点</span><span class="token hvariable">ratfloat</span><span class="token operator">::</span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Float</span><span class="token hvariable">ratfloat</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token builtin">fromInteger</span> <span class="token hvariable">a</span><span class="token operator">/</span><span class="token builtin">fromInteger</span> <span class="token hvariable">b</span><span class="token comment" spellcheck="true">--判断相等</span><span class="token hvariable">rateq</span><span class="token operator">::</span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Bool</span><span class="token hvariable">rateq</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token hvariable">a</span><span class="token operator">*</span><span class="token hvariable">d</span><span class="token operator">==</span><span class="token hvariable">b</span><span class="token operator">*</span><span class="token hvariable">c</span><span class="token comment" spellcheck="true">--重载运算符</span><span class="token punctuation">(</span><span class="token operator">&lt;+></span><span class="token punctuation">)</span><span class="token operator">::</span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token operator">&lt;+></span><span class="token punctuation">(</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token hvariable">ratplus</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">&lt;-></span><span class="token punctuation">)</span><span class="token operator">::</span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token operator">&lt;-></span><span class="token punctuation">(</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token hvariable">ratminus</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token operator">&lt;-*-></span><span class="token punctuation">)</span><span class="token operator">::</span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token operator">&lt;-*-></span><span class="token punctuation">(</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token hvariable">rattimes</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token operator">&lt;/></span><span class="token punctuation">)</span><span class="token operator">::</span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token operator">&lt;/></span><span class="token punctuation">(</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token hvariable">ratdiv</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token operator">&lt;==></span><span class="token punctuation">)</span><span class="token operator">::</span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Fraction</span><span class="token operator">-></span><span class="token constant">Bool</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token operator">&lt;==></span><span class="token punctuation">(</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token hvariable">rateq</span><span class="token punctuation">(</span><span class="token hvariable">a</span><span class="token punctuation">,</span><span class="token hvariable">b</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token hvariable">c</span><span class="token punctuation">,</span><span class="token hvariable">d</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">--确定运算优先级</span><span class="token keyword">infixl</span> <span class="token number">6</span> <span class="token operator">&lt;-*-></span><span class="token punctuation">,</span><span class="token operator">&lt;/></span><span class="token keyword">infixl</span> <span class="token number">5</span> <span class="token operator">&lt;+></span><span class="token punctuation">,</span><span class="token operator">&lt;-></span><span class="token keyword">infixl</span> <span class="token number">4</span> <span class="token operator">&lt;==></span><span class="token comment" spellcheck="true">{---检查任意分数+(0,1)之后仍然等于其本身prop_ratplus_unit :: Fraction -> Propertyprop_ratplus_unit (a,b) = b > 0 ==>(a, b) &lt;+> (0,1) &lt;==> (a, b)--检查任意分数加上相反数之后为0prop_ratplus_inv :: Fraction -> Propertyprop_ratplus_inv (a,b) = b > 0 ==>(a, b) &lt;+> (-a,b) &lt;==> (0, 1)--检查任意非零分数乘上倒数之后为1prop_rattimes_inv :: Fraction -> Propertyprop_rattimes_inv (a,b) = a/=0&amp;&amp;b > 0 ==>(a, b) &lt;-*-> (b,a) &lt;==> (1, 1)-- 检查乘法分配律prop_rattimes_plus_distr :: Fraction -> Fraction -> Fraction ->Propertyprop_rattimes_plus_distr (a,b) (c,d) (e,f) = b > 0 &amp;&amp; d > 0 &amp;&amp; f > 0 ==> (a,b) &lt;-*-> ((c,d) &lt;+> (e,f)) &lt;==> ((a,b) &lt;-*-> (c,d)) &lt;+> ((a,b) &lt;-*-> (e,f))-}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 函数程序设计实验 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu MongoDB数据库的安装和使用</title>
      <link href="/2018/08/12/ubuntu-an-zhuang-mongodb-he-shi-yong/"/>
      <url>/2018/08/12/ubuntu-an-zhuang-mongodb-he-shi-yong/</url>
      
        <content type="html"><![CDATA[<p>本博文介绍了MongoDB，并详细指引读者在Ubuntu下MongoDB的安装和使用。本教程在Ubuntu14.04下测试通过。 </p><h2 id="一、MongoDB介绍"><a href="#一、MongoDB介绍" class="headerlink" title="一、MongoDB介绍"></a>一、MongoDB介绍</h2><p>MongoDB 是一个是一个基于分布式文件存储的数据库，介于关系数据库和非关系数据库之间，是非关系数据库当中功能最丰富，最像关系数据库的。他支持的数据结构非常松散，是类似json的bson格式，因此可以存储比较复杂的数据类型。Mongo最大的特点是他支持的查询语言非常强大，其语法有点类似于面向对象的查询语言，几乎可以实现类似关系数据库单表查询的绝大部分功能，而且还支持对数据建立索引。</p><a id="more"></a><h2 id="二、安装MongoDB"><a href="#二、安装MongoDB" class="headerlink" title="二、安装MongoDB"></a>二、安装MongoDB</h2><p>MongoDB安装很简单，无需下载源文件，可以直接用apt-get命令进行安装。<br>打开终端，输入以下命令：</p><pre><code>sudo apt-get install mongodb</code></pre><p><img src="https://upload-images.jianshu.io/upload_images/9135759-3cb41a51c148257b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>1.安装完成后，在终端输入以下命令查看MongoDB版本：</p><pre><code>mongo -version</code></pre><p>输出版本信息，表明安装成功，截图如下：<br><img src="https://upload-images.jianshu.io/upload_images/9135759-8887c3331cd9528f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>2.启动和关闭mongodb命令如下：</p><pre><code>service mongodb startservice mongodb stop</code></pre><p>截图如下：<br> <img src="https://upload-images.jianshu.io/upload_images/9135759-39cb7f47b78e2337.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>3.默认设置MongoDB是随Ubuntu启动自动启动的。<br>输入以下命令查看是否启动成功：</p><pre><code>pgrep mongo -l   #注意：-l是英文字母l，不是阿拉伯数字1</code></pre><p>截图如下：<br><img src="https://upload-images.jianshu.io/upload_images/9135759-f7a5306aeaed8158.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>卸载MongoDB</p><pre><code>sudo apt-get --purge remove mongodb mongodb-clients mongodb-server</code></pre><h2 id="三、使用MongoDB"><a href="#三、使用MongoDB" class="headerlink" title="三、使用MongoDB"></a>三、使用MongoDB</h2><h3 id="shell命令模式"><a href="#shell命令模式" class="headerlink" title="shell命令模式"></a>shell命令模式</h3><p>输入<code>mongo</code>进入shell命令模式，默认连接的数据库是test数据库，在此之前一定要确保你已经启动了MongoDB，否则会出现错误，启动之后运行成功，如下截图：<br><img src="https://upload-images.jianshu.io/upload_images/9135759-47a98bbf23b2cfc7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>常用操作命令：<br>数据库相关 </p><pre><code>show dbs:显示数据库列表 show collections：显示当前数据库中的集合（类似关系数据库中的表table） show users：显示所有用户 use yourDB：切换当前数据库至yourDB db.help() ：显示数据库操作命令 db.yourCollection.help() ：显示集合操作命令，yourCollection是集合名 </code></pre><p>MongoDB没有创建数据库的命令，如果你想创建一个“School”的数据库，先运行use School命令，之后做一些操作（如：创建聚集集合db.createCollection(‘teacher’)）,这样就可以创建一个名叫“School”的数据库。<br>截图如下：<br><img src="https://upload-images.jianshu.io/upload_images/9135759-378e2b1d94454111.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><h3 id="下面以一个School数据库为例，在School数据库中创建两个集合teacher和student，并对student集合中的数据进行增删改查基本操作（集合Collection相当于关系型数据库中的表table）。"><a href="#下面以一个School数据库为例，在School数据库中创建两个集合teacher和student，并对student集合中的数据进行增删改查基本操作（集合Collection相当于关系型数据库中的表table）。" class="headerlink" title="下面以一个School数据库为例，在School数据库中创建两个集合teacher和student，并对student集合中的数据进行增删改查基本操作（集合Collection相当于关系型数据库中的表table）。"></a>下面以一个School数据库为例，在School数据库中创建两个集合teacher和student，并对student集合中的数据进行增删改查基本操作（集合Collection相当于关系型数据库中的表table）。</h3><p>1、切换到School数据库</p><pre><code>use School #切换到School数据库。MongoDB 无需预创建School数据库，在使用时会自动创建</code></pre><p>2、创建Collection</p><pre><code>db.createCollection('teacher') #创建一个聚集集合。MongoDB 其实在插入数据的时候，也会自动创建对应的集合，无需预定义集合</code></pre><p>截图如下：<br><img src="https://upload-images.jianshu.io/upload_images/9135759-81643b44864ee245.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>3、插入数据<br>与数据库创建类似，插入数据时也会自动创建集合。<br>插入数据有两种方式：insert和save。</p><pre><code>db.student.insert({_id:1, sname: 'zhangsan', sage: 20}) #_id可选db.student.save({_id:1, sname: 'zhangsan', sage: 22}) #_id可选</code></pre><p>这两种方式，其插入的数据中_id字段均可不写，会自动生成一个唯一的_id来标识本条数据。而insert和save不同之处在于：在手动插入_id字段时，如果_id已经存在，insert不做操作，save做更新操作；如果不加_id字段，两者作用相同都是插入数据。<br>截图如下：<br><img src="https://upload-images.jianshu.io/upload_images/9135759-f266803fccc124ce.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>添加的数据其结构是松散的，只要是bson格式均可，列属性均不固定，根据添加的数据为准。先定义数据再插入，就可以一次性插入多条数据，截图如下：<br><img src="https://upload-images.jianshu.io/upload_images/9135759-6a2feadc2cbe01c8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>运行完以上例子，student 已自动创建，这也说明 MongoDB 不需要预先定义 collection ，在第一次插入数据后，collection 会自动的创建。<br>截图如下：<br><img src="https://upload-images.jianshu.io/upload_images/9135759-d56b0ffb7ecc980a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>4、查找数据 </p><pre><code>db.youCollection.find(criteria, filterDisplay)</code></pre><p>criteria ：查询条件，可选<br>filterDisplay：筛选显示部分数据，如显示指定列数据，可选（当选择时，第一个参数不可省略，若查询条件为空，可用{}做占位符，如下例第三句）</p><pre><code>db.student.find()  #查询所有记录。相当于：select * from studentdb.student.find({sname: 'lisi'})  #查询sname='lisi'的记录。相当于： select * from student where sname='lisi'db.student.find({},{sname:1, sage:1}) #查询指定列sname、sage数据。相当于：select sname,sage from student。sname:1表示返回sname列，默认_id字段也是返回的，可以添加_id:0（意为不返回_id）写成{sname: 1, sage: 1,_id:0}，就不会返回默认的_id字段了db.student.find({sname: 'zhangsan', sage: 22}) #and 与条件查询。相当于：select * from student where sname = 'zhangsan' and sage = 22db.student.find({$or: [{sage: 22}, {sage: 25}]}) #or 条件查询。相当于：select * from student where sage = 22 or sage = 25</code></pre><p>查询操作类似，这里只给出db.student.find({sname: ‘lisi’})<br>查询的截图，如下：<br><img src="https://upload-images.jianshu.io/upload_images/9135759-75add83f6cda14bd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>5、修改数据 </p><pre><code>db.youCollection.update(criteria, objNew, upsert, multi ) criteria: update的查询条件，类似sql update查询内where后面的 objNew : update的对象和一些更新的操作符（如$set）等，也可以理解为sql update查询内set后面的。 upsert : 如果不存在update的记录，是否插入objNew，true为插入，默认是false，不插入。 multi: mongodb默认是false,只更新找到的第一条记录，如果这个参数为true,就把按条件查出来多条记录全部更新。默认false，只修改匹配到的第一条数据。 其中criteria和objNew是必选参数，upsert和multi可选参数 </code></pre><p>举例如下：</p><pre><code>db.student.update({sname: 'lisi'}, {$set: {sage: 30}}, false, true) #相当于：update student set sage =30 where sname = 'lisi';</code></pre><p>操作截图如下：<br><img src="https://upload-images.jianshu.io/upload_images/9135759-9a33162889a67bd9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>6、删除数据</p><pre><code>db.student.remove({sname: 'chenliu'}) #相当于：delete from student where sname='chenliu'</code></pre><p>操作截图如下：<br><img src="https://upload-images.jianshu.io/upload_images/9135759-bb17d02c7a2f0f8c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><p>7、退出shell命令模式<br>输入exit或者Ctrl+C退出shell命令模式</p><hr><p>参考MongoDB官方文档：</p><pre><code>https://docs.mongodb.com/master/tutorial/install-mongodb-on-ubuntu/?_ga=2.38644067.1704633038.1522762185-1747967431.1522762185</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> MongoDB数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu系统安装MySQL数据库</title>
      <link href="/2018/07/22/ubuntu-xi-tong-an-zhuang-mysql-shu-ju-ku/"/>
      <url>/2018/07/22/ubuntu-xi-tong-an-zhuang-mysql-shu-ju-ku/</url>
      
        <content type="html"><![CDATA[<blockquote><p>UBuntu16.04安装MySQL</p></blockquote><h3 id="一-安装MySQl"><a href="#一-安装MySQl" class="headerlink" title="一.安装MySQl"></a>一.安装MySQl</h3><ol><li>安装前先更新软件包列表：</li></ol><pre><code>在终端执行如下命令：sudo apt-get update</code></pre><a id="more"></a><p><img src="/2018/07/22/ubuntu-xi-tong-an-zhuang-mysql-shu-ju-ku/mysql-20190518191456335.png" alt="image-20190518191456335"></p><ol start="2"><li>在Ubuntu16.04上安装MySQL：</li></ol><pre><code>在终端执行如下命令：sudo apt-get install mysql-server mysql-client</code></pre><p><img src="/2018/07/22/ubuntu-xi-tong-an-zhuang-mysql-shu-ju-ku/mysql-20190518191721166.png" alt="image-20190518191721166"></p><ol start="3"><li>在安装过程中需要你输入MySQL管理员用户（root）密码，如下图</li></ol><p><img src="/2018/07/22/ubuntu-xi-tong-an-zhuang-mysql-shu-ju-ku/mysql-20190518192226707.png" alt="image-20190518192226707"></p><p><img src="/2018/07/22/ubuntu-xi-tong-an-zhuang-mysql-shu-ju-ku/mysql-20190518192828216.png" alt="image-20190518192828216"></p><p>如上即代表安装完成</p><blockquote><p>由于篇幅短小和时间仓促,若你发现了错误请告知我。</p><p>希望我没有误导你，而是带你看了小小的新世界。</p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> MySQL </tag>
            
            <tag> 数据库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu纯净卸载软件</title>
      <link href="/2018/07/22/ubuntu-chun-jing-xie-zai-ruan-jian/"/>
      <url>/2018/07/22/ubuntu-chun-jing-xie-zai-ruan-jian/</url>
      
        <content type="html"><![CDATA[<p>如果你关注搜索到这篇文章，那么我可以合理怀疑你被apt-get的几个卸载命令有点搞晕了。</p><p>apt-get的卸载相关的命令有<code>remove/purge/autoremove/clean/autoclean</code>等。具体来说：</p><pre><code>apt-get purge / apt-get --purge remove 删除已安装包（不保留配置文件)。 如软件包a，依赖软件包b，则执行该命令会删除a，而且不保留配置文件</code></pre><a id="more"></a><hr><pre><code>apt-get autoremove 删除为了满足依赖而安装的，但现在不再需要的软件包（包括已安装包），保留配置文件。</code></pre><hr><pre><code>apt-get remove 删除已安装的软件包（保留配置文件），不会删除依赖软件包，且保留配置文件。</code></pre><hr><pre><code>apt-get autoclean APT的底层包是dpkg, 而dpkg 安装Package时, 会将 *.deb 放在 /var/cache/apt/archives/中，apt-get autoclean 只会删除 /var/cache/apt/archives/ 已经过期的deb。</code></pre><hr><pre><code>apt-get clean 使用 apt-get clean 会将 /var/cache/apt/archives/ 的 所有 deb 删掉，可以理解为 rm /var/cache/apt/archives/*.deb。</code></pre><hr><p>那么如何彻底卸载软件呢？<br>具体来说可以运行如下命令：</p><h1 id="删除软件及其配置文件"><a href="#删除软件及其配置文件" class="headerlink" title="删除软件及其配置文件"></a>删除软件及其配置文件</h1><pre><code>apt-get --purge remove &lt;package&gt;</code></pre><h1 id="删除没用的依赖包"><a href="#删除没用的依赖包" class="headerlink" title="删除没用的依赖包"></a>删除没用的依赖包</h1><pre><code>apt-get autoremove &lt;package&gt;</code></pre><h1 id="此时dpkg的列表中有“rc”状态的软件包，可以执行如下命令做最后清理："><a href="#此时dpkg的列表中有“rc”状态的软件包，可以执行如下命令做最后清理：" class="headerlink" title="此时dpkg的列表中有“rc”状态的软件包，可以执行如下命令做最后清理："></a>此时dpkg的列表中有“rc”状态的软件包，可以执行如下命令做最后清理：</h1><pre><code>dpkg -l |grep ^rc|awk '{print $2}' |sudo xargs dpkg -P</code></pre><p>当然如果要删除暂存的软件安装包，也可以再使用clean命令。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 环境配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu安装chrome浏览器和chromedriver</title>
      <link href="/2018/07/22/ubuntu-an-zhuang-chrome-liu-lan-qi-he-chromedriver/"/>
      <url>/2018/07/22/ubuntu-an-zhuang-chrome-liu-lan-qi-he-chromedriver/</url>
      
        <content type="html"><![CDATA[<h3 id="安装chrome步骤"><a href="#安装chrome步骤" class="headerlink" title="安装chrome步骤"></a>安装chrome步骤</h3><hr><h6 id="一-下载chrome安装包"><a href="#一-下载chrome安装包" class="headerlink" title="一. 下载chrome安装包"></a>一. 下载chrome安装包</h6><ol><li><p>使⽤ubuntu上的⽕狐浏览器打开如下地址：<br><code>http://www.google.cn/intl/zhCN/chrome/browser/desktop/index.html</code></p><a id="more"></a></li><li><p>选择安装版本，接受并安装<br>a. 选择64bit.deb(适⽤于Deblan/Ubuntu)</p></li><li><p>点击接受并安装后，选择保存到本地<br>a. ‘Save file’或者‘保存到本地’</p></li><li><p>下载下来后，会保存在Dowdload⽂件中<br>cd ~/Dowdload 切换到下载⽂件⽬录中<br>ls 进⾏查看</p></li></ol><hr><h3 id="二-安装chrome浏览器"><a href="#二-安装chrome浏览器" class="headerlink" title="二. 安装chrome浏览器"></a>二. 安装chrome浏览器</h3><ol><li><p>打开终端，切换到root⽤户，进⼊下载⽂件夹<br>a. <code>cd ~/Dowdload</code><br>b. <code>sudo dpkg -i google-chrome-stable_current_amd64.deb</code></p></li><li><p>初次安装如果出现 Errors where encountered while<br>processing:google-chrome-stable 这个错误，就需要安装googlechrome-stable<br>a. <code>apt-get install google-chrome-stable</code></p></li><li><p>如果安装了google-chrome-stable后，还报错，错误信息为： Unmet<br>dependencies. “Try apt-get -f install” with no packages (or<br>specify ….)<br>a. 这个时候按照提示执⾏<br><code>apt-get -f install</code></p></li><li><p>如果中间提示”是否继续安装” 输⼊  <code>y</code></p></li></ol><p>v. 安装完毕后，重新执⾏第⼀步的命令<br> <code>sudo dpkg -i google-chromestable_current_amd64.deb</code></p><ol start="5"><li>如果此时没有报错就说明已经安装成功</li></ol><hr><h3 id="三-安装chromedriver"><a href="#三-安装chromedriver" class="headerlink" title="三.安装chromedriver"></a>三.安装chromedriver</h3><ol><li><p>通过百度，搜索“淘宝NPM” 寻找chromedriver下载地址，点击进⼊</p></li><li><p>通过百度，搜索“chrome和chromedriver的对照表”，选择⾃⼰的合适的chromedriver</p></li><li><p>返回第⼀步打开的chromedriver版本⽹⻚，下载适合⾃⼰浏览器的chromedriver</p></li><li><p>下载之后，在下载⽂件夹中找到，点击右键，选择解压到当前⽬录</p></li><li><p><strong>打开终端，将解压后的chromedriver执⾏程序，拷⻉到 /usr/bin ⽬录下</strong><br><code>cd~/Download</code><br><code>sudo cp chromedriver /usr/bin</code></p></li><li><p>运⾏程序如果没有报错，说明选择的chromedriver的版本是正确的，如果还报错<br>说明版本没有选对，删除下载⽂件夹中的chromedriver⽂件和 /usr/bin 中的<br>chromedriver，重复上述步骤，选在适合⾃⼰浏览器的chromedriver下载安装</p></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> chromedriver </tag>
            
            <tag> chrome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu-安装Pycharm，简单粗暴的方法，三行命令行</title>
      <link href="/2018/07/22/ubuntu-an-zhuang-pycharm-jian-dan-cu-bao-de-fang-fa-san-xing-ming-ling-xing/"/>
      <url>/2018/07/22/ubuntu-an-zhuang-pycharm-jian-dan-cu-bao-de-fang-fa-san-xing-ming-ling-xing/</url>
      
        <content type="html"><![CDATA[<h3 id="对于Ubuntu-16-10和Ubuntu-17-04，通过Ctrl-Alt-T打开终端，或通过从应用启动器搜索“terminal”，打开后，执行以下步骤："><a href="#对于Ubuntu-16-10和Ubuntu-17-04，通过Ctrl-Alt-T打开终端，或通过从应用启动器搜索“terminal”，打开后，执行以下步骤：" class="headerlink" title="对于Ubuntu 16.10和Ubuntu 17.04，通过Ctrl + Alt + T打开终端，或通过从应用启动器搜索“terminal”，打开后，执行以下步骤："></a>对于Ubuntu 16.10和Ubuntu 17.04，通过Ctrl + Alt + T打开终端，或通过从应用启动器搜索“terminal”，打开后，执行以下步骤：</h3><ol><li>.通过命令添加PPA存储库：<br><code>sudo add-apt-repository ppa:mystic-mirage/pycharm</code></li></ol><hr><a id="more"></a><p>2.如果您安装了以前的版本，请通过软件更新程序升级PyCharm。</p><h5 id="运行命令来检查更新并安装IDE（社区版本）"><a href="#运行命令来检查更新并安装IDE（社区版本）" class="headerlink" title="运行命令来检查更新并安装IDE（社区版本）"></a>运行命令来检查更新并安装IDE（社区版本）</h5><p><code>sudo apt update</code><br><code>sudo apt install pycharm-professional</code></p><hr><h5 id="或运行命令来检查更新并安装IDE（社区版本）："><a href="#或运行命令来检查更新并安装IDE（社区版本）：" class="headerlink" title="或运行命令来检查更新并安装IDE（社区版本）："></a>或运行命令来检查更新并安装IDE（社区版本）：</h5><p><code>sudo apt update</code><br><code>sudo apt install pycharm</code></p><hr><p>3.卸载PyCharm：<br>要卸载PyCharm Python IDE，只需运行命令：<br>专业版:  <code>sudo apt remove --autoremove pycharm pycharm-professional</code><br>社区版:   <code>sudo apt remove --autoremove pycharm pycharm-community</code>  </p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> Pycharm </tag>
            
            <tag> Python解释器的安装与配置 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deepin中安装配置ChromeDriver</title>
      <link href="/2018/06/22/deepin-zhong-an-zhuang-pei-zhi-chromedriver/"/>
      <url>/2018/06/22/deepin-zhong-an-zhuang-pei-zhi-chromedriver/</url>
      
        <content type="html"><![CDATA[<h3 id="查看当前的Chrome版本信息"><a href="#查看当前的Chrome版本信息" class="headerlink" title="查看当前的Chrome版本信息"></a>查看当前的Chrome版本信息</h3><p>在谷歌浏览器地址栏中输入<code>chrome://version/</code>可以查看当前的Chrome信息：</p><a id="more"></a><pre><code>Google Chrome：    62.0.3202.62 (正式版本) （64 位）修订版本：    9da914b118cb0d10d715ccc4ad20575a0305a304-refs/branch-heads/3202@{#700}操作系统：    LinuxJavaScript：    V8 6.2.414.32Flash：    29.0.0.113 /home/wenbin/.config/google-chrome/PepperFlash/29.0.0.113/libpepflashplayer.so用户代理：    Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.62 Safari/537.36命令行：    /usr/bin/google-chrome-stable --flag-switches-begin --flag-switches-end可执行文件路径：    /opt/google/chrome/google-chrome个人资料路径：    /home/wenbin/.config/google-chrome/Default其他变体：    c134752e-b8b72c88                  ..............</code></pre><table><thead><tr><th>chromedriver版本</th><th align="center">支持的Chrome版本</th></tr></thead><tbody><tr><td>v2.34</td><td align="center">v61-63</td></tr><tr><td>v2.33</td><td align="center">v60-62</td></tr><tr><td>v2.32</td><td align="center">v59-61</td></tr><tr><td>v2.31</td><td align="center">v58-60</td></tr><tr><td>v2.30</td><td align="center">v58-60</td></tr><tr><td>v2.29</td><td align="center">v56-58</td></tr><tr><td>v2.28</td><td align="center">v55-57</td></tr><tr><td>v2.27</td><td align="center">v54-56</td></tr><tr><td>v2.26</td><td align="center">v53-55</td></tr><tr><td>v2.25</td><td align="center">v53-55</td></tr><tr><td>v2.24</td><td align="center">v52-54</td></tr><tr><td>v2.23</td><td align="center">v51-53</td></tr><tr><td>v2.22</td><td align="center">v49-52</td></tr><tr><td>v2.21</td><td align="center">v46-50</td></tr><tr><td>v2.20</td><td align="center">v43-48</td></tr><tr><td>v2.19</td><td align="center">v43-47</td></tr><tr><td>v2.18</td><td align="center">v43-46</td></tr><tr><td>v2.17</td><td align="center">v42-43</td></tr><tr><td>v2.13</td><td align="center">v42-45</td></tr><tr><td>v2.15</td><td align="center">v40-43</td></tr><tr><td>v2.14</td><td align="center">v39-42</td></tr><tr><td>v2.13</td><td align="center">v38-41</td></tr><tr><td>v2.12</td><td align="center">v36-40</td></tr><tr><td>v2.11</td><td align="center">v36-40</td></tr><tr><td>v2.10</td><td align="center">v33-36</td></tr><tr><td>v2.9</td><td align="center">v31-34</td></tr><tr><td>v2.8</td><td align="center">v30-33</td></tr><tr><td>v2.7</td><td align="center">v30-33</td></tr><tr><td>v2.6</td><td align="center">v29-32</td></tr><tr><td>v2.5</td><td align="center">v29-32</td></tr><tr><td>v2.4</td><td align="center">v29-32</td></tr></tbody></table><h3 id="下载对应的Chromedriver版本"><a href="#下载对应的Chromedriver版本" class="headerlink" title="下载对应的Chromedriver版本"></a>下载对应的Chromedriver版本</h3><p>下载地址：</p><pre><code>http://npm.taobao.org/mirrors/chromedriver/</code></pre><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>将下载来的ChromeDriver解压，得到一个ChromeDriver文件<br>我们只需要将ChromeDriver文件放到<code>/uer/bin/</code>路径下</p><pre><code>sudo cp chromedriver /usr/bin/</code></pre><h3 id="测试安装是否成功"><a href="#测试安装是否成功" class="headerlink" title="测试安装是否成功"></a>测试安装是否成功</h3><p>编写py文件写入以下代码：</p><pre><code>from selenium import webdriverdriver = webdriver.Chrome()driver.get("https://www.baidu.com")</code></pre><p>运行之后，如果能过弹出Chrome页面，就说明安装成功：<br><img src="../images/Chrome.png" alt=""></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> Deepin </tag>
            
            <tag> ChromeDriver </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安装谷歌拼音</title>
      <link href="/2018/06/22/an-zhuang-gu-ge-pin-yin/"/>
      <url>/2018/06/22/an-zhuang-gu-ge-pin-yin/</url>
      
        <content type="html"><![CDATA[<p>linux下面的中文输入法一直不给力，Ubuntu里正常使用的搜狗输入法经常突然无法输出中文（具体现象是，可以呼出搜狗输入法界面，但是候选词列表无显示）虽然用惯了搜狗输入法但是实在忍不了啦，于是痛定思痛果断换掉。</p><p>现在,google拼音输入法可以用了！</p><a id="more"></a><p>这得感谢下面这个项目： libgooglepinyin ( A fork from google pinyin on android)</p><blockquote><p>项目地址：<a href="http://code.google.com/p/libgooglepinyin/" target="_blank" rel="noopener">http://code.google.com/p/libgooglepinyin/</a></p></blockquote><p>安装之后记录了下来，希望能为同样遇到输入法问题的人提供参考</p><h3 id="一、"><a href="#一、" class="headerlink" title="一、"></a>一、</h3><pre><code>sudo apt-get install fcitx-googlepinyin</code></pre><h3 id="二、"><a href="#二、" class="headerlink" title="二、"></a>二、</h3><blockquote><p>在settings-&gt;Language Support里将keyboard input method system设置为fcitx</p></blockquote><h3 id="三-、"><a href="#三-、" class="headerlink" title="三 、"></a>三 、</h3><p>注销系统，再登录</p><blockquote><p>在settings-&gt;Text Entry里，添加输入源，搜索google-pinyin添加即可。</p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> 谷歌输入法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安装Ubuntu后要做的事</title>
      <link href="/2018/06/22/an-zhuang-ubuntu-hou-yao-zuo-de-shi/"/>
      <url>/2018/06/22/an-zhuang-ubuntu-hou-yao-zuo-de-shi/</url>
      
        <content type="html"><![CDATA[<h3 id="Ubuntu-16-04安装完成后，还需要做一些配置才能愉快的使用，所以装完系统后还要进行一系列的优化。"><a href="#Ubuntu-16-04安装完成后，还需要做一些配置才能愉快的使用，所以装完系统后还要进行一系列的优化。" class="headerlink" title="Ubuntu 16.04安装完成后，还需要做一些配置才能愉快的使用，所以装完系统后还要进行一系列的优化。"></a>Ubuntu 16.04安装完成后，还需要做一些配置才能愉快的使用，所以装完系统后还要进行一系列的优化。</h3><h3 id="1-删除libreoffice"><a href="#1-删除libreoffice" class="headerlink" title="1.删除libreoffice"></a>1.删除libreoffice</h3><p>libreoffice虽然是开源的，但是Java写出来的office执行效率实在不敢恭维，装完系统后果断删掉</p><p><code>sudo apt-get remove libreoffice-common</code></p><a id="more"></a><h3 id="2-删除Amazon的链接"><a href="#2-删除Amazon的链接" class="headerlink" title="2.删除Amazon的链接"></a>2.删除Amazon的链接</h3><p><code>sudo apt-get remove unity-webapps-common</code></p><h3 id="3-删掉基本不用的自带软件（用的时候再装也来得及）"><a href="#3-删掉基本不用的自带软件（用的时候再装也来得及）" class="headerlink" title="3.删掉基本不用的自带软件（用的时候再装也来得及）"></a>3.删掉基本不用的自带软件（用的时候再装也来得及）</h3><pre><code>sudo apt-get remove thunderbird totem rhythmbox empathy brasero simple-scan gnome-mahjongg aisleriot gnome-mines cheese transmission-common gnome-orca webbrowser-app gnome-sudoku  landscape-client-ui-installsudo apt-get remove onboard deja-dup</code></pre><p>这样系统就基本上干净了。</p><h3 id="4-安装Vim"><a href="#4-安装Vim" class="headerlink" title="4.安装Vim"></a>4.安装Vim</h3><p>居然默认没有集成Vim神器，只能手动安装了。</p><p><code>sudo apt-get install vim</code></p><h3 id="5-设置时间使用UTC"><a href="#5-设置时间使用UTC" class="headerlink" title="5.设置时间使用UTC"></a>5.设置时间使用UTC</h3><p><code>sudo vim /etc/default/rcS</code></p><p>将UTC=no改为UTC=yes</p><h3 id="6-安装Chrome"><a href="#6-安装Chrome" class="headerlink" title="6.安装Chrome"></a>6.安装Chrome</h3><p>通过直接下载安装Google Chrome浏览器deb包。</p><p>打开Ubuntu终端，以下为32位版本，使用下面的命令。</p><p><code>wget https://dl.google.com/linux/direct/google-chrome-stable_current_i386.deb</code></p><p>以下为64位版本，使用下面的命令。</p><p><code>wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb</code></p><p>下载好后</p><p>——————————</p><p>32 位安装命令:</p><p><code>sudo dpkg -i google-chrome-stable_current_i386.deb</code></p><p>64 位安装命令:</p><p><code>sudo dpkg -i google-chrome-stable_current_amd64.deb</code></p><p>——————————</p><p>添加 Google Chrome 的PPA</p><p>安装Google Chrome浏览器官方PPA，打开终端然后运行下面的命令，下载签名密钥：</p><p><code>wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | sudo apt-key add</code></p><p>然后</p><pre><code>sudo sh -c 'echo "deb http://dl.google.com/linux/chrome/deb/ stable main" &gt;&gt; /etc/apt/sources.list.d/google-chrome.list'sudo apt-get updatesudo apt-get install google-chrome</code></pre><p>————————————————</p><p>安装Google Chrome unstable 版本：</p><p><code>sudo apt-get install google-chrome-beta</code></p><p>————————————————</p><p>安装Google Chrome beta 版本：</p><p><code>sudo apt-get install google-chrome-unstable</code></p><h3 id="7-安装搜狗输入法"><a href="#7-安装搜狗输入法" class="headerlink" title="7.安装搜狗输入法"></a>7.安装搜狗输入法</h3><pre><code>vim /etc/apt/sources.list.d/ubuntukylin.list文件，加入ubuntu kylin的apt源deb http://archive.ubuntukylin.com:10006/ubuntukylin trusty main然后sudo apt-get updatesudo apt-get install sogoupinyin</code></pre><p>这样就可以apt安装和更新搜狗输入法了。</p><p>其实Ubuntu16.04自带的中文输入法挺好用的，特别对于需要经常输入拉丁字符、希腊字符的朋友。不过由于用户习惯，Sougou拼音还是需要安装的</p><h3 id="8-安装WPS-Office"><a href="#8-安装WPS-Office" class="headerlink" title="8.安装WPS Office"></a>8.安装WPS Office</h3><p>MS一直未出Linux版的Office，只能凑合着用WPS了</p><p><code>sudo apt-get install wps-office</code></p><h3 id="9-安装Oracle-Java"><a href="#9-安装Oracle-Java" class="headerlink" title="9.安装Oracle Java"></a>9.安装Oracle Java</h3><pre><code>sudo add-apt-repository ppa:webupd8team/javasudo apt-get updatesudo apt-get install oracle-java8-installer</code></pre><p>由于系统自带的是OpenJDK，卸载OpenJDK之后会带有残留，导致运行</p><p>java -version</p><p>时第一行不是java的版本号，会是Picked up JAVA_TOOL_OPTIONS: -javaagent:/usr/share/java/jayatanaag.jar这个提示，导致很多检测java版本号的脚本会运行出错，因此需要手动清除残留。</p><p><code>sudo rm /usr/share/upstart/sessions/jayatana.conf</code></p><p>删除/usr/share/upstart/sessions/jayatana.conf文件，重启之后再运行java -version就不会再有Picked</p><p>up JAVA_TOOL_OPTIONS: -javaagent:/usr/share/java/jayatanaag.jar提示了。</p><h3 id="10-安装Sublime-Text-3"><a href="#10-安装Sublime-Text-3" class="headerlink" title="10.安装Sublime Text 3"></a>10.安装Sublime Text 3</h3><pre><code>sudo add-apt-repository ppa:webupd8team/sublime-text-3sudo apt-get updatesudo apt-get install sublime-text</code></pre><h3 id="11-安装经典菜单指示器"><a href="#11-安装经典菜单指示器" class="headerlink" title="11.安装经典菜单指示器"></a>11.安装经典菜单指示器</h3><pre><code>sudo add-apt-repository ppa:diesch/testingsudo apt-get updatesudo apt-get install classicmenu-indicator</code></pre><h3 id="12-安装系统指示器SysPeek"><a href="#12-安装系统指示器SysPeek" class="headerlink" title="12.安装系统指示器SysPeek"></a>12.安装系统指示器SysPeek</h3><pre><code>sudo add-apt-repository ppa:nilarimogard/webupd8sudo apt-get updatesudo apt-get install syspeek</code></pre><h3 id="13-自定义DHCP网络的DNS-Server-IP地址"><a href="#13-自定义DHCP网络的DNS-Server-IP地址" class="headerlink" title="13.自定义DHCP网络的DNS Server IP地址"></a>13.自定义DHCP网络的DNS Server IP地址</h3><pre><code>sudo vim /etc/dhcp/dhclient.conf文件，在第21行#prepend domain-name-servers 127.0.0.1;下一行添加如下2行使用aliyun和114的DNSprepend domain-name-servers 114.114.114.114;prepend domain-name-servers 223.5.5.5;</code></pre><p>这样可以优先使用aliyun的dns，次要使用114的DNS。</p><h3 id="14-安装git和vpnc"><a href="#14-安装git和vpnc" class="headerlink" title="14.安装git和vpnc"></a>14.安装git和vpnc</h3><p>git和vpn大家都懂的，程序员的好工具。</p><p><code>sudo apt-get install vpnc git</code></p><h3 id="15-安装axel"><a href="#15-安装axel" class="headerlink" title="15.安装axel"></a>15.安装axel</h3><p>axel是Linux命令行界面的多线程下载工具，比wget的好处就是可以指定多个线程同时在命令行终端里下载文件。</p><p><code>sudo apt-get install axel</code></p><p>安装之后，就可以代替wget用多线程下载了。</p><h3 id="16-安装openssh-server"><a href="#16-安装openssh-server" class="headerlink" title="16.安装openssh-server"></a>16.安装openssh-server</h3><p><code>sudo apt-get install openssh-server</code></p><p>安装之后，就可以在Win下用ssh工具远程登陆了，当然也多了一个安全隐患，如果不想远程登陆本机的话，可以不装openssh-server。</p><h3 id="17-安装CMake和Qt-Creator"><a href="#17-安装CMake和Qt-Creator" class="headerlink" title="17.安装CMake和Qt Creator"></a>17.安装CMake和Qt Creator</h3><p>CMake和Qt Creator是Linux下开发C++程序的神器，Ubuntu 17.10已经集成了最新版的Qt Creator （4.4.1）。</p><p><code>sudo apt-get install cmake qtcreator</code></p><h3 id="18-安装ExFat文件系统驱动"><a href="#18-安装ExFat文件系统驱动" class="headerlink" title="18.安装ExFat文件系统驱动"></a>18.安装ExFat文件系统驱动</h3><p>Ubuntu默认不支持exFat文件系统的挂载，需要手动安装exfat的支持</p><p><code>sudo apt-get install exfat-fuse</code></p><p>装上exfat-fuse之后就可以挂载exfat分区的磁盘了。</p><h3 id="19-安装lnav"><a href="#19-安装lnav" class="headerlink" title="19.安装lnav"></a>19.安装lnav</h3><p>lnav工具是在终端界面看日志的神器</p><p><code>sudo apt-get install lnav</code></p><p>装上之后在终端里就可以用lnav彩色显示日志了。</p><h3 id="20-安装unrar"><a href="#20-安装unrar" class="headerlink" title="20.安装unrar"></a>20.安装unrar</h3><p>系统默认不带解压缩rar文件的功能，手动安装unrar程序</p><p><code>sudo apt-get install unrar</code></p><p>装上之后就可以用命令解压缩rar文件了。</p><p>使用如下命令解压缩文件到当前目录。</p><p><code>unrar x test.rar</code></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> Python解释器的安装与配置 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Deepin系统下安装Anaconda</title>
      <link href="/2018/06/12/zai-deepin-xi-tong-xia-an-zhuang-anaconda/"/>
      <url>/2018/06/12/zai-deepin-xi-tong-xia-an-zhuang-anaconda/</url>
      
        <content type="html"><![CDATA[<h2 id="运行安装Anaconda"><a href="#运行安装Anaconda" class="headerlink" title="运行安装Anaconda"></a>运行安装Anaconda</h2><pre><code>bash Anaconda3-4.3.1-Linux-x86_64.sh</code></pre><a id="more"></a><h2 id="安装具体步骤"><a href="#安装具体步骤" class="headerlink" title="安装具体步骤"></a>安装具体步骤</h2><p>在执行上一步骤之后会出现以下：</p><pre><code>Welcome to Anaconda3 5.0.1In order to continue the installation process, please review the licenseagreement.Please, press ENTER to continue&gt;&gt;&gt; </code></pre><p>按ENTER继续，然后按ENTER读取许可证。读完许可证后，系统会提示您批准许可条款：</p><pre><code>Do you accept the license terms? [yes|no]</code></pre><p>选择yes继续安装<br>此时，系统将提示您选择安装的位置。您可以按ENTER接受默认位置，或指定其他位置以进行修改。<br>在这里我选择了其它路径的安装，安装过程需要一些时间</p><pre><code>[/root/anaconda3] &gt;&gt;&gt; /home/wenbin/anaconda3PREFIX=/home/wenbin/anaconda3installing: python-3.6.3-hc9025b9_1 ...Python 3.6.3 :: Anaconda, Inc.installing: ca-certificates-2017.08.26-h1d4fec5_0 ...installing: conda-env-2.6.0-h36134e3_1 ...installing: intel-openmp-2018.0.0-h15fc484_7 ...installing: libgcc-ng-7.2.0-h7cc24e2_2 ...installing: libgfortran-ng-7.2.0-h9f7466a_2 ...installing: libstdcxx-ng-7.2.0-h7a57d05_2 ...installing: bzip2-1.0.6-h0376d23_1 ...installing: expat-2.2.4-hc00ebd1_1 ...installing: gmp-6.1.2-hb3b607b_0 ..........................</code></pre><p>完成后，您将收到以下输出：</p><pre><code>installation finished.Do you wish the installer to prepend the Anaconda3 install locationto PATH in your /root/.bashrc ? [yes|no][no] &gt;&gt;&gt; yes</code></pre><p>键入yes ，以便可以使用conda命令。接下来将看到以下输出：</p><pre><code>Appending source /home/wenbin/anaconda3/bin/activate to /root/.bashrcA backup will be made to: /root/.bashrc-anaconda3.bakFor this change to become active, you have to open a new terminal.Thank you for installing Anaconda3!</code></pre><p>如果你选择了no，那么你就需要手动的将Anaconda3添加的环境变量当中<br>请打开文本编辑器并从主目录打开文件.bashrc或.bash_profile。添加该行。</p><pre><code>export PATH="/&lt;path to anaconda&gt;/bin:$PATH"</code></pre><p>注意：将<code>&lt;path-to-anaconda&gt;</code>替换为安装的anaconda文件的实际路径。<br>保存文件。如果您打开任何终端窗口，请关闭它们，然后打开一个新窗口。您可能需要重新启动计算机才能使PATH更改生效。</p><p>为了激活安装，你应该来源~/.bashrc文件：</p><pre><code>source ~/.bashrc</code></pre><p>之后你可以验证你的安装通过使用conda命令，例如与list ：</p><pre><code>wenbin@wenbin:~$ conda list# packages in environment at /home/wenbin/anaconda3:#_ipyw_jlab_nb_ext_conf    0.1.0            py36he11e457_0  alabaster                 0.7.10           py36h306e16b_0  anaconda                  5.0.1            py36hd30a520_1  anaconda-client           1.6.5            py36h19c0dcd_0  anaconda-navigator        1.6.9            py36h11ddaaa_0 ..............</code></pre><h2 id="设置Anaconda环境"><a href="#设置Anaconda环境" class="headerlink" title="设置Anaconda环境"></a>设置Anaconda环境</h2><p>查看可用的Python解释器版本：</p><pre><code>conda search "^python$"</code></pre><p>使用最新版本的Python 3创建一个环境。我们可以通过将版本3分配给python参数来实现。 我们将调用环境my_python ，但是您可能希望为您的环境使用更具描述性的名称，特别是如果您使用环境来访问多个版本的Python。</p><pre><code>conda create --name my_python python=3</code></pre><p>通过一下命令来激活环境</p><pre><code>source activate my_python</code></pre><p>通过一下命令添加其他包，比如requests</p><pre><code>conda install --name my_python requests</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> Deepin </tag>
            
            <tag> Anaconda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vmware虚拟机安装和配置Ubuntu系统</title>
      <link href="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/"/>
      <url>/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/</url>
      
        <content type="html"><![CDATA[<p><strong>创建带有 SCSI 控制器类型、虚拟机磁盘类型以及与旧版 VMware 产品兼容性等高级选项的虚拟机</strong></p><ul><li><p>安装前准备：</p><ul><li>安装好VMwareWorkstation</li><li>Ubuntu16.04镜像文件<ul><li>（下载地址链接：<a href="https://pan.baidu.com/s/1MSBBv9NOh7_cFgTMUQPEhQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1MSBBv9NOh7_cFgTMUQPEhQ</a> 提取码：w6g7 ）</li></ul></li><li>Ubuntu18.04镜像文件<ul><li>（下载地址链接：链接：<a href="https://pan.baidu.com/s/1uhPj0ttM9M7QxpR3Z4LI5g" target="_blank" rel="noopener">https://pan.baidu.com/s/1uhPj0ttM9M7QxpR3Z4LI5g</a> 提取码：il08 ）<a id="more"></a><h3 id="一、Ubuntu的初步安装"><a href="#一、Ubuntu的初步安装" class="headerlink" title="一、Ubuntu的初步安装"></a>一、Ubuntu的初步安装</h3></li></ul></li></ul></li><li><p>创建新的虚拟机</p></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554713786949.png" alt="1554713786949"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554713919815.png" alt="1554713919815"></p><p>点击下一步，如下图所示</p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554714395837.png" alt="1554714395837"></p><p>选择兼容性版本</p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554714611043.png" alt="1554714611043"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554714641613.png" alt="1554714641613"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554714669480.png" alt="1554714669480"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554714696310.png" alt="1554714696310"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554714767912.png" alt="1554714767912"></p><p>注意修改的信息</p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554714861230.png" alt="1554714861230"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554714922826.png" alt="1554714922826"></p><p>修改处理器配置信息，如下图所示</p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554715071537.png" alt="1554715071537"></p><p>虚拟机内存配置，最低要求2GB,可以根据自己的需求修改，后期也可以再更改</p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554715123156.png" alt="1554715123156"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554715260124.png" alt="1554715260124"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554715283480.png" alt="1554715283480"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554715310027.png" alt="1554715310027"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554715336946.png" alt="1554715336946"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554715445357.png" alt="1554715445357"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554715463889.png" alt="1554715463889"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554715479180.png" alt="1554715479180"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554715497915.png" alt="1554715497915"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554715586157.png" alt="1554715586157"></p><p>此时，切记千万不要手快点开电源！！！</p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554715685795.png" alt="1554715685795"></p><h3 id="二、Ubuntu系统安装设置"><a href="#二、Ubuntu系统安装设置" class="headerlink" title="二、Ubuntu系统安装设置"></a>二、Ubuntu系统安装设置</h3><ul><li>设置加载镜像</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554715904976.png" alt="1554715904976"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554715948576.png" alt="1554715948576"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716035134.png" alt="1554716035134"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716093894.png" alt="1554716093894"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716176488.png" alt="1554716176488"></p><p><strong>这些完成后就可以直接开启虚拟机了</strong></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716252197.png" alt="1554716252197"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716334005.png" alt="1554716334005"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716370278.png" alt="1554716370278"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716422946.png" alt="1554716422946"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716459440.png" alt="1554716459440"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716488179.png" alt="1554716488179"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716543173.png" alt="1554716543173"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716575158.png" alt="1554716575158"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716602325.png" alt="1554716602325"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716620502.png" alt="1554716620502"></p><p>拖动窗口，点 continue 继续下一步</p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716700582.png" alt="1554716700582"></p><p>设置自己的用户名和密码 :</p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716728355.png" alt="1554716728355"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716905189.png" alt="1554716905189"></p><p>安装进行中，等待安装</p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554716944869.png" alt="1554716944869"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554719354860.png" alt="1554719354860"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554731409117.png" alt="1554731409117"></p><p>点击 Restart Now 进行重启，</p><p>如果出现如下图所示的状况，导致无法进入系统界面，需要点击Vmware的重新启动客户机按钮进行重新启动</p><p>如下图所示：</p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554731666457.png" alt="1554731666457"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554776517422.png" alt="1554776517422"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554776873497.png" alt="1554776873497"></p><p>如果出现如下情况，<strong>切记千万不要选择更新</strong></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554778547735.png" alt="1554778547735"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554778836786.png" alt="1554778836786"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554778863798.png" alt="1554778863798"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554778886569.png" alt="1554778886569"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554778926607.png" alt="1554778926607"></p><ul><li>在安装好的Ubuntu系统中鼠标右键选择 Open Terminal，打开Ubuntu系统的命令终端</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554778966309.png" alt="1554778966309"></p><ul><li>然后，修改hosts文件<ul><li>etc目录下的hosts文件<br><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/WechatIMG42.png" alt="WechatIMG42"></li></ul></li><li>使用vim修改编辑hosts文件<br><code>sudo vi /etc/hosts</code><br><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/WechatIMG41.png" alt="WechatIMG41"></li><li>使用gedit修改编辑hosts文件<br><code>sudo gedit /etc/hosts</code><br><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/WechatIMG43.png" alt="WechatIMG43"><br><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/WechatIMG44.png" alt="WechatIMG44"><br><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/WechatIMG46.png" alt="WechatIMG46"></li></ul><p>如此，即代表系统安装成功</p><h3 id="三、安装Vmware-Tools"><a href="#三、安装Vmware-Tools" class="headerlink" title="三、安装Vmware Tools"></a>三、安装Vmware Tools</h3><blockquote><p>为了让系统能像下图一样适应客户机，需要安装Vmware Tools</p></blockquote><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554777043804.png" alt="1554777043804"></p><ul><li>在安装好的Ubuntu系统中鼠标右键选择 Open Terminal，打开Ubuntu系统的命令终端</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554778975398.png" alt="1554778975398"></p><ol><li><p>获取管理员权限</p><p>输入以下命令，来获取管理员权限，密码是你在上面设置的密码：<code>sudo passwd</code></p></li></ol><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554779131062.png" alt="1554779131062"></p><ul><li>前面我设置的密码是<code>chuanzhi</code></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554779170274.png" alt="1554779170274"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554779303171.png" alt="1554779303171"></p><ul><li>如果上面你设置的密码不是<code>chuanzhi</code>,请输入你自己设置的密码</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554779643739.png" alt="1554779643739"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554779704503.png" alt="1554779704503"></p><ul><li>切换到 root 最高权限用户</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554779872183.png" alt="1554779872183"></p><h4 id="安装Vmware-tools工具"><a href="#安装Vmware-tools工具" class="headerlink" title="安装Vmware tools工具"></a>安装Vmware tools工具</h4><blockquote><p>选择Vmware顶部工具栏里的 <strong>安装Vmware Tools（T）</strong>选项</p></blockquote><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554780158202.png" alt="1554780158202"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554780239135.png" alt="1554780239135"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554781022857.png" alt="1554781022857"></p><ul><li><p>在安装好的Ubuntu系统中鼠标右键选择 Open Terminal，打开Ubuntu系统的命令终端</p><ul><li>打开终端后，进行下面设置</li></ul></li><li><p>复制CD中的 VMwareTools-10.0.10-4301679.tar.gz 文件到根目录下：</p><p><code>cp /media/user/VMware\ Tools/VMwareTools-10.0.10-4301679.tar.gz /</code></p></li><li><p>然到移动到根目录：</p><p><code>cd /</code></p></li><li><p>解压 VMwareTools-10.0.10-4301679.tar.gz：</p><p><code>tar -zxvf VMwareTools-10.0.10-4301679.tar.gz</code></p></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554782968942.png" alt="1554782968942"></p><ul><li>按下回车，执行解压<ul><li>如下如所示</li></ul></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554787027354.png" alt="1554787027354"></p><ul><li><p>解压完成后进入解压文件夹vmware-tools-distrib</p><p><code>cd vmware-tools-distrib</code></p></li><li><p>运行安装程序：</p><p><code>./vmware-install.pl</code></p></li><li><p>一路 y 加 回车</p></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554787211386.png" alt="1554787211386"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554787346650.png" alt="1554787346650"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554787370075.png" alt="1554787370075"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554787422575.png" alt="1554787422575"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554787787278.png" alt="1554787787278"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554787868385.png" alt="1554787868385"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554788380134.png" alt="1554788380134"></p><ul><li>如下图所示</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554788414292.png" alt="1554788414292"></p><h3 id="四、设置共享文件夹"><a href="#四、设置共享文件夹" class="headerlink" title="四、设置共享文件夹"></a>四、设置共享文件夹</h3><blockquote><p>设置共享文件夹，可以实现Windows系统和Ubuntu系统的复制粘贴功能</p></blockquote><ul><li>在菜单栏找到虚拟机-&gt;设置，添加自己的共享文件夹</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554788596453.png" alt="1554788596453"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554788674038.png" alt="1554788674038"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554788694696.png" alt="1554788694696"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554788733020.png" alt="1554788733020"></p><p>如此，即完成了Ubuntu系统的初步设置</p><h3 id="五、修改Ubuntu系统的更新源"><a href="#五、修改Ubuntu系统的更新源" class="headerlink" title="五、修改Ubuntu系统的更新源"></a>五、修改Ubuntu系统的更新源</h3><blockquote><p>更改apt源为国内源方法早就有了，内容大同小异，我们应当掌握其规律了，其实每一版内容不同的地方就是版本号（或者官方一点的说：系统代号），所以我们先了解下新版本的系统代号：<br>使用命令：lsb_release -c<br>得到本系统的系统代号，如下图所示：<br>同样的我们也可以得到之前任意版本的系统代号：<br>Ubuntu 12.04 (LTS)代号为precise。<br>Ubuntu 14.04 (LTS)代号为trusty。<br>Ubuntu 15.04 代号为vivid。<br>Ubuntu 15.10 代号为wily。<br>Ubuntu 16.04 (LTS)代号为xenial。<br>所以这也就解释了为什么利用搜索引擎搜出来的那么多方案里面内容不尽相同的原因，因为大家更改apt安装源时用的系统不一样。</p></blockquote><ul><li>*<em>查看系统版本代号 *</em><code>lsb_release -a</code></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554789205438.png" alt="1554789205438"></p><p><font color="red" size="5" face="黑体">注意：一定要对准自己的Ubuntu系统版本代号，检查是Ubuntu16.04还是Ubuntu18.04</font></p><p><strong>下面分别提供Ubuntu16.04和ubuntu 18.04两个不同系统版本的阿里源</strong></p><ul><li>Ubuntu16.04对应阿里源</li></ul><pre><code># deb cdrom:[Ubuntu 16.04 LTS _Xenial Xerus_ - Release amd64 (20160420.1)]/ xenial main restricteddeb-src http://archive.ubuntu.com/ubuntu xenial main restricted #Added by software-propertiesdeb http://mirrors.aliyun.com/ubuntu/ xenial main restricteddeb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted multiverse universe #Added by software-propertiesdeb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricteddeb-src http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted multiverse universe #Added by software-propertiesdeb http://mirrors.aliyun.com/ubuntu/ xenial universedeb http://mirrors.aliyun.com/ubuntu/ xenial-updates universedeb http://mirrors.aliyun.com/ubuntu/ xenial multiversedeb http://mirrors.aliyun.com/ubuntu/ xenial-updates multiversedeb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse #Added by software-propertiesdeb http://archive.canonical.com/ubuntu xenial partnerdeb-src http://archive.canonical.com/ubuntu xenial partnerdeb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricteddeb-src http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted multiverse universe #Added by software-propertiesdeb http://mirrors.aliyun.com/ubuntu/ xenial-security universedeb http://mirrors.aliyun.com/ubuntu/ xenial-security multiverse</code></pre><ul><li>Ubuntu18.04对应阿里源<ul><li>如果是Ubuntu18.04系统可以参照我的简书配置：<a href="https://www.jianshu.com/p/e5677ebd5341" target="_blank" rel="noopener">https://www.jianshu.com/p/e5677ebd5341</a></li></ul></li></ul><pre><code>deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse</code></pre><h4 id="修改系统更新源方法步骤如下："><a href="#修改系统更新源方法步骤如下：" class="headerlink" title="修改系统更新源方法步骤如下："></a>修改系统更新源方法步骤如下：</h4><blockquote><p>首先备份Ubuntu系统的官方源文件</p></blockquote><ul><li>打开Ubuntu的命令终端，进入源文件 <code>sources.list</code> 所在的目录：<ul><li>然后执行备份命令，执行 <code>sudo cp sources.list sources.list.backup</code> 对源文件内容进行备份，以防万一。</li></ul></li></ul><pre><code>cd /etc/aptsudo cp sources.list sources.list.backup</code></pre><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554790544705.png" alt="1554790544705"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554790767758.png" alt="1554790767758"></p><ul><li>修改源文件内容<ul><li>将上述对应系统版本的阿里源的文件内容全部复制，使用 <code>sudo vim sources.list</code> 打开文件，输入 <code>ggdG</code>（vim操作指令）删除所有内容（这句指令可以理解为删除第一行到最后一行的的全部内容）</li></ul></li></ul><pre><code>sudo vim sources.list    # 在 /etc/apt 目录下ggdG    # 使用vim打开 sources.list 文件后执行此命令</code></pre><ul><li>将复制的阿里源文件内容全部粘贴到文件中后，输入 : 然后再输入wq 保存退出。</li></ul><p>值得注意的是 sources.list 文件的条目都是有格式的（通过上面的内容大家也看的出来），一般有如下形式：</p><pre><code>deb http://site.example.com/debian distribution component1 component2 component3deb-src http://site.example.com/debian distribution component1 component2 component3</code></pre><p>所以后面几个参数是对软件包的分类（Ubuntu下是main， restricted，universe ，multiverse这四个）<br>所以你把内容写成:</p><pre><code>deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricteddeb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed universe multiverse</code></pre><p>上面之类的也是可以的，之前我有这个疑惑，所以在这里一并告知和我有一样疑惑的朋友。</p><h4 id="更新源"><a href="#更新源" class="headerlink" title="更新源"></a>更新源</h4><ul><li>使用 <code>sudo apt-get update</code> 即可更新获取阿里软件源 提供的软件列表</li></ul><pre><code>sudo apt-get update</code></pre><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554793359809.png" alt="1554793359809"></p><h4 id="更新软件"><a href="#更新软件" class="headerlink" title="更新软件"></a>更新软件</h4><ul><li>使用 <code>sudo apt-get upgrade</code> 即可跟新软件</li></ul><pre><code>sudo apt-get upgrade</code></pre><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554793398077.png" alt="1554793398077"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554793429708.png" alt="1554793429708"></p><ul><li>如下图所示，即代表更新成功</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554797295052.png" alt="1554797295052"></p><h3 id="六、安装VIM编辑器"><a href="#六、安装VIM编辑器" class="headerlink" title="六、安装VIM编辑器"></a>六、安装VIM编辑器</h3><ul><li>在Ubuntu系统的命令终端输入 <code>sudo apt-get install vim</code> 进行下载</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554803724133.png" alt="1554803724133"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554803952271.png" alt="1554803952271"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554804086386.png" alt="1554804086386"></p><ul><li>检测是否安装成功<ul><li>在命令终端输入 vim 回车</li></ul></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554804141041.png" alt="1554804141041"></p><ul><li>如上图所示，即代表安装成功</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554804186592.png" alt="1554804186592"></p><ul><li>退出 vim<ul><li>1.按下  ESC  键   </li><li>2.再输入 ：</li><li>3.最后输入  q 或 wq  即可</li><li>4.回车</li></ul></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554804467597.png" alt="1554804467597"></p><ul><li>安装完成后的 vim 是默认不显示行号的</li><li>上图中在 /etc/vim/ 目录下打开的 输入 <code>sudo vi vimrc</code>后是不显示行号的，如下图所示</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554804649529.png" alt="1554804649529"></p><ul><li>进入编辑界面后，按下 G 键（这是大写的 G）直接跳转到文件的最后一行</li><li>再次按下 i 键，进行编辑，输入 <code>set number</code>  如下图所示</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554804835256.png" alt="1554804835256"></p><ul><li>退出 vim<ul><li>1.按下  ESC  键   </li><li>2.再输入 ：</li><li>3.最后输入  q 或 wq  即可</li><li>4.回车</li></ul></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554804906611.png" alt="1554804906611"></p><ul><li>检查设置行号是否生效</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554805087039.png" alt="1554805087039"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554805125404.png" alt="1554805125404"></p><p>如此，即代表安装好修改配置成功</p><h3 id="七、安装谷歌浏览器"><a href="#七、安装谷歌浏览器" class="headerlink" title="七、安装谷歌浏览器"></a>七、安装谷歌浏览器</h3><ul><li><p>先下载谷歌浏览器的deb安装包</p><ul><li>下载地址如下：</li></ul><p><code>https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb</code></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554813326034.png" alt="1554813326034"></p></li><li><p>等待下载完成</p></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554813365460.png" alt="1554813365460"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554813409803.png" alt="1554813409803"></p><ul><li><p>安装谷歌浏览器需执行以下两步，回到终端输入以下命令</p><p><code>sudo apt install libappindicator1 libindicator7</code></p></li><li><p>关闭终端，打开下载的存放deb包的文件夹，空白处右键在这里打开终端</p></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554813646605.png" alt="1554813646605"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554813742619.png" alt="1554813742619"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554813992872.png" alt="1554813992872"></p><ul><li><p>输入以下命令</p><p><code>sudo dpkg -i google-chrome-stable_current_amd64.deb</code></p></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554814165619.png" alt="1554814165619"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554814217647.png" alt="1554814217647"></p><ul><li><p>最后在终端中输入以下命令，修复依赖关系</p><p><code>sudo apt -f install</code></p></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554814265937.png" alt="1554814265937"></p><ul><li>至此谷歌浏览器就安装好了，现在把它设置在快速启动栏</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554814413853.png" alt="1554814413853"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554814520209.png" alt="1554814520209"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554814557334.png" alt="1554814557334"></p><ul><li>最后将其移动到快速启动栏的合适位置，右键点击图标锁定到启动器，左键拖动选择合适位置！</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554814641809.png" alt="1554814641809"></p><ul><li>至此，谷歌浏览器即安装成功</li></ul><h3 id="八、安装Pycharm"><a href="#八、安装Pycharm" class="headerlink" title="八、安装Pycharm"></a>八、安装Pycharm</h3><blockquote><p>下载地址：<a href="https://www.jetbrains.com/pycharm/download/#section=linux" target="_blank" rel="noopener">https://www.jetbrains.com/pycharm/download/#section=linux</a></p></blockquote><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554814864232.png" alt="1554814864232"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554814899101.png" alt="1554814899101"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554815355830.png" alt="1554815355830"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554815374846.png" alt="1554815374846"></p><ul><li>右键安装包，点击“Extract Here”意思是提取到这里，相当于解压</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554815431347.png" alt="1554815431347"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554815480951.png" alt="1554815480951"></p><ul><li>提取完成后，会生成一个 pycharm-2019.1.1 的文件夹，然后双击进入该文件夹</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554815530708.png" alt="1554815530708"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554815580850.png" alt="1554815580850"></p><ul><li>，空白处右键在这里打开终端</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554815684306.png" alt="1554815684306"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554815714869.png" alt="1554815714869"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554815763462.png" alt="1554815763462"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554815809209.png" alt="1554815809209"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554815836513.png" alt="1554815836513"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554815856201.png" alt="1554815856201"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554815880671.png" alt="1554815880671"></p><ul><li>选择主题</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554815953777.png" alt="1554815953777"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554815989929.png" alt="1554815989929"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554816006374.png" alt="1554816006374"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554816038655.png" alt="1554816038655"></p><ul><li><p>到这里，我选择秘钥激活的方法</p><ul><li><p>百度：lanyus</p></li><li><p><a href="http://idea.lanyus.com/" target="_blank" rel="noopener">http://idea.lanyus.com/</a></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554816196446.png" alt="1554816196446"></p></li></ul></li><li><p>修改 hosts 文件（hosts文件在 /etc 目录下）</p></li></ul><pre><code>0.0.0.0 account.jetbrains.com0.0.0.0 www.jetbrains.com</code></pre><ul><li>将上面两行代码添加到，hosts文件中</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554816454362.png" alt="1554816454362"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554816518699.png" alt="1554816518699"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554816541195.png" alt="1554816541195"></p><ul><li>添加后如下图所示</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554816591936.png" alt="1554816591936"></p><ul><li>退出 vim<ul><li>1.按下  ESC  键   </li><li>2.再输入 ：</li><li>3.最后输入  q 或 wq  即可</li><li>4.回车</li></ul></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554816648781.png" alt="1554816648781"></p><ul><li>获取注册码后输入</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554816683863.png" alt="1554816683863"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554816725814.png" alt="1554816725814"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554816739779.png" alt="1554816739779"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554816753105.png" alt="1554816753105"></p><ul><li>指定Python3解释器（1）</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554816822783.png" alt="1554816822783"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554816890874.png" alt="1554816890874"></p><ul><li>指定Python3解释器（2）</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554816962147.png" alt="1554816962147"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554817009349.png" alt="1554817009349"></p><ul><li>可以通过在命令终端输入：<code>whereis python</code>找到系统的Python解释器路径</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554817125613.png" alt="1554817125613"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554817211879.png" alt="1554817211879"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554817253896.png" alt="1554817253896"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554817287968.png" alt="1554817287968"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554817306973.png" alt="1554817306973"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554817354430.png" alt="1554817354430"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554817392028.png" alt="1554817392028"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554817411242.png" alt="1554817411242"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554817434009.png" alt="1554817434009"></p><ul><li>如此，Python3的解释器便指定完成</li></ul><h4 id="添加Pycharm桌面快捷方式"><a href="#添加Pycharm桌面快捷方式" class="headerlink" title="添加Pycharm桌面快捷方式"></a>添加Pycharm桌面快捷方式</h4><ul><li><p>第一步</p><ul><li><p>创建Pycharm.desktop文件并用gedit的打开</p><ul><li><p>sudo gedit /usr/share/applications/Pycharm.desktop</p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554898559678.png" alt="1554898559678"></p></li><li><p>然后就会弹出一个新框</p></li></ul></li></ul></li><li><p>第二步</p><ul><li><p>粘贴下面的代码输入并保存</p><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>Desktop Entry<span class="token punctuation">]</span>Type<span class="token operator">=</span>ApplicationName<span class="token operator">=</span>PycharmGenericName<span class="token operator">=</span>Pycharm3Comment<span class="token operator">=</span>Pycharm3:The Python IDEExec<span class="token operator">=</span>sh /home/python/Downloads/pycharm-2019.1.1/bin/pycharm.shIcon<span class="token operator">=</span>/home/python/Downloads/pycharm-2019.1.1/bin/pycharm.pngTerminal<span class="token operator">=</span>pycharmCategories<span class="token operator">=</span>Pycharm</code></pre></li></ul></li><li><p><strong>注意一定要将Desktop Entry复制进去，也就是上面的全部都要复制进去</strong></p><ul><li>Exec 的路径是 <strong><font color="red" size="5" face="黑体">pycharm.sh</font></strong> 的所在路径，即 pycharm 的启动文件</li><li>Icon 的路径是 <strong><font color="red" size="5" face="黑体">pycharm.png</font></strong> 的所在路径，即 pycharm 的图标</li></ul></li></ul><p>我下载解压后的路径，如下图</p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554897945848.png" alt="1554897945848"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554898166630.png" alt="1554898166630"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554898231594.png" alt="1554898231594"></p><ul><li>路径：<code>/home/python/Downloads/pycharm-2019.1.1/bin</code><ul><li>Exec 的路径是 <strong><font color="red" size="5" face="黑体">pycharm.sh</font></strong> 的所在路径，即 pycharm 的启动文件<ul><li><code>/home/python/Downloads/pycharm-2019.1.1/bin/pycharm.sh</code></li></ul></li><li>Icon 的路径是 <strong><font color="red" size="5" face="黑体">pycharm.png</font></strong> 的所在路径，即 pycharm 的图标<ul><li><code>/home/python/Downloads/pycharm-2019.1.1/bin/pycharm.png</code></li></ul></li></ul></li><li>创建的Pycharm.desktop文件如下</li></ul><pre><code>[Desktop Entry]Type=ApplicationName=PycharmGenericName=Pycharm3Comment=Pycharm3:The Python IDEExec=sh /home/python/Downloads/pycharm-2019.1.1/bin/pycharm.shIcon=/home/python/Downloads/pycharm-2019.1.1/bin/pycharm.pngTerminal=pycharmCategories=Pycharm</code></pre><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554898498094.png" alt="1554898498094"></p><ul><li>修改完成后，即可发现Pycharm的快捷方式</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554898638150.png" alt="1554898638150"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554898720552.png" alt="1554898720552"></p><ul><li>如此，即表示配置成功</li></ul><h3 id="九、安装MySQL数据库"><a href="#九、安装MySQL数据库" class="headerlink" title="九、安装MySQL数据库"></a>九、安装MySQL数据库</h3><blockquote><p>有两种安装方法，请将两种方法都阅读完后，再选择其中的一种方式进行安装</p></blockquote><p>方法一 使用命令安装MySQL数据库</p><ol><li>安装前先更新软件包列表：</li></ol><pre><code>在终端执行如下命令：sudo apt-get update</code></pre><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/mysql-20190518191456335.png" alt="image-20190518191456335"><br>Vmware虚拟机安装和配置Ubuntu系统/</p><ol start="2"><li>在Ubuntu16.04上安装MySQL：</li></ol><pre><code>在终端执行如下命令：sudo apt-get install mysql-server mysql-client</code></pre><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/mysql-20190518191721166.png" alt="image-20190518191721166"></p><ol start="3"><li>在安装过程中需要你输入MySQL管理员用户（root）密码，如下图</li></ol><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/mysql-20190518192226707.png" alt="image-20190518192226707"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/mysql-20190518192828216.png" alt="image-20190518192828216"></p><p>如上即代表安装完成</p><hr><p>方法二 <strong>通过APT方式安装</strong></p><blockquote><p>说明：此种方式完全参考官方提供的教程:<br>地址：<a href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/" target="_blank" rel="noopener">https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/</a></p></blockquote><p>注意：通过APT方式安装的版本都是现在最新的版本，现在我安装的是5.7.18。通过这种方式安装好之后开机自启动都已经配置好，和命令行上的环境变量，无需手动配置。</p><ol><li>下载官方提供的mysql-apt-config.deb包进行APT源设置，下载地址：<a href="https://dev.mysql.com/downloads/repo/apt/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/repo/apt/</a></li></ol><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554899654766.png" alt="1554899654766"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554899907427.png" alt="1554899907427"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554899922743.png" alt="1554899922743"></p><ul><li>找到下载的包路径</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554900025755.png" alt="1554900025755"></p><ul><li>输入如下命令：<ul><li><code>sudo dpkg -i mysql-apt-config_0.8.12-1_all.deb</code></li></ul></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554900103387.png" alt="1554900103387"></p><ul><li>运行之后会出现如下界面：</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554900135846.png" alt="1554900135846"></p><ul><li>一般只需要默认，按方向键选择OK回车即可。</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554902470640.png" alt="1554902470640"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554900217426.png" alt="1554900217426"></p><ul><li>完成后使用以下命令从MySQL APT存储库更新包信息（<em>此步骤是必需的</em>）：<ul><li><code>sudo apt-get update</code></li></ul></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554900482957.png" alt="1554900482957"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554902683502.png" alt="1554902683502"></p><blockquote><p>说明：官方说通过这个工具这样操作之后，安装MySQL时就是按照上面选择的来进行。</p></blockquote><ol start="2"><li>安装</li></ol><ul><li><p>通过以下命令安装MySQL</p><ul><li><code>sudo apt-get install mysql-server</code></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554900531962.png" alt="1554900531962"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554900558244.png" alt="1554900558244"></p><ul><li>这将安装MySQL服务器的包，以及客户端和数据库公共文件的包。</li></ul><p>此时如果提示依赖不足，如下所示：</p><ul><li><strong>如果没出现依赖问题，那么就不需要使用此命令。</strong></li></ul></li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554900813099.png" alt="1554900813099"></p><p>​    那么需要运行下面命令解决依赖问题</p><p>​        <code>sudo apt-get install -f</code></p><p>​    安装MySQL时会一并安装如下所示的软件：</p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554900899005.png" alt="1554900899005"></p><p>完成后再次运行 <code>sudo apt-get install mysql-server</code></p><p><strong>如果没出现依赖问题，那么就不需要使用此命令。</strong></p><ul><li>在安装过程中，系统会要求您为MySQL安装的root用户提供密码,输入即可,如下所示：</li></ul><blockquote><p>重要</p><p>确保记住您设置的root密码。想要稍后设置密码的用户可以在对话框中将 密码字段留空，只需按确定即可 ; 在这种情况下，对于使用Unix套接字文件的连接，将通过<a href="https://dev.mysql.com/doc/refman/8.0/en/socket-pluggable-authentication.html" target="_blank" rel="noopener">Socket Peer-Credential Pluggable Authentication</a>对服务器的root访问进行身份 <a href="https://dev.mysql.com/doc/refman/8.0/en/socket-pluggable-authentication.html" target="_blank" rel="noopener">验证</a>。您可以稍后使用程序<strong>mysql_secure_installation</strong>设置root密码 。</p></blockquote><ul><li>我这里密码设置为：mysql  (为了避免忘记密码，建议设置为:mysql)</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554901073287.png" alt="1554901073287"></p><blockquote><p>MySQL8.0采用了新的加密方式，一定要注意，正是因为这个加密方式才导致Ubuntu18.04用设置的root密码登录不了MySQL，因为Ubuntu18.04的终端可能有问题，并不支持这个新的加密方式。幸好有界面可以让我们选择使用旧版本5.x的加密方式，所以果断选择采用5.x的加密方式。</p></blockquote><ul><li>确认密码</li></ul><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554901161042.png" alt="1554901161042"></p><p><img src="/2018/05/22/vmware-xu-ni-ji-an-zhuang-he-pei-zhi-ubuntu-xi-tong/1554901186844.png" alt="1554901186844"></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> 系统配置 </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> VMware </tag>
            
            <tag> 虚拟机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows系统安装配置Pycharm专业版</title>
      <link href="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/"/>
      <url>/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/</url>
      
        <content type="html"><![CDATA[<blockquote><ul><li>安装配置Pycharm前请先安装Python解释器<br>Python解释器配置文档连接：<a href="http://www.jiazhixiang.xyz/2018/05/15/Windows系统Python解释器的安装配置/">http://www.jiazhixiang.xyz/2018/05/15/Windows系统Python解释器的安装配置/</a><br><font color="red" size="5">视屏教程：<a href="https://www.bilibili.com/video/av70499867/" target="_blank" rel="noopener">Windows系统Python解释器的安装配置</a></font><br>微软应用商店安装Python解释器文档连接：<a href="http://www.jiazhixiang.xyz/2019/10/25/使用Microsoft-Store微软应用商店安装Python解释器/">http://www.jiazhixiang.xyz/2019/10/25/使用Microsoft-Store微软应用商店安装Python解释器/</a><br><font color="red" size="5">视屏教程：<a href="https://www.bilibili.com/video/av70543472/" target="_blank" rel="noopener">使用Microsoft Store微软应用商店安装Python解释器</a></font></li></ul></blockquote><h3 id="下载Pycharm"><a href="#下载Pycharm" class="headerlink" title="下载Pycharm"></a>下载Pycharm</h3><ol><li>使用浏览器打开Pycharm官方网站：<a href="http://www.jetbrains.com/pycharm" target="_blank" rel="noopener">http://www.jetbrains.com/pycharm</a></li><li>选择对应的系统安装包，点击DOWNLOAD进行下载(文档以Windows系统举例)</li></ol><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554517581446.png" alt="1554517581446"></p><a id="more"></a><ul><li>选择Pycharm软件包的安装位置</li></ul><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554520100279.png" alt="1554520100279"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554520449821.png" alt="1554520449821"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554520501759.png" alt="1554520501759"></p><h3 id="安装Pycharm"><a href="#安装Pycharm" class="headerlink" title="安装Pycharm"></a>安装Pycharm</h3><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554520595083.png" alt="1554520595083"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554520672452.png" alt="1554520672452"></p><ul><li>运行Windows Denfender SmartScreen</li></ul><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554520741252.png" alt="1554520741252"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554520801452.png" alt="1554520801452"></p><ul><li>更改Pycharm默认安装位置</li></ul><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554521026480.png" alt="1554521026480"></p><ul><li>选择自定义Pycharm安装位置</li></ul><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554521128143.png" alt="1554521128143"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554521309163.png" alt="1554521309163"></p><ul><li>补充说明：<ul><li>64-bit 表示跟64位操作系统相关(如下图所示)</li><li>.py 表示关联后缀为.py的Python相关文件</li></ul></li></ul><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554521596991.png" alt="1554521596991"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554521654440.png" alt="1554521654440"></p><ul><li>等待安装完成</li></ul><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554521706977.png" alt="1554521706977"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554521729592.png" alt="1554521729592"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554521773817.png" alt="1554521773817"></p><h3 id="配置-amp-激活Pycharm"><a href="#配置-amp-激活Pycharm" class="headerlink" title="配置&amp;激活Pycharm"></a>配置&amp;激活Pycharm</h3><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554521914713.png" alt="1554521914713"></p><ul><li>选择主题颜色</li></ul><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554522006893.png" alt="1554522006893"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554522168026.png" alt="1554522168026"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554522489581.png" alt="1554522489581"></p><h3 id="激活Pycharm的两种方式"><a href="#激活Pycharm的两种方式" class="headerlink" title="激活Pycharm的两种方式"></a>激活Pycharm的两种方式</h3><ul><li>1.选择免费试用30天(如下图所示)</li></ul><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554522248008.png" alt="1554522248008"><br><font color="red" size="5">下面的『2.破解方法』已经失效，如需使用Pycharm专业版请移至官网或其他电商平台购买专业秘钥，Pycharm社区版是免费的，建议学习使用Pycharm社区版(请参考<a href="http://www.jiazhixiang.xyz/2019/10/25/Windows%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEPycharm%E7%A4%BE%E5%8C%BA%E7%89%88/">Windows系统安装配置Pycharm专业版社区版</a>)</font></p><ul><li>2.破解激活<ul><li>通过搜索引擎搜索：lanyus</li></ul></li></ul><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554523210185.png" alt="1554523210185"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554523374903.png" alt="1554523374903"></p><ul><li>修改Windows系统的hosts文件</li><li>hosts文件所在路径：C:\Windows\System32\drivers\etc</li></ul><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554522888003.png" alt="1554522888003"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554523017366.png" alt="1554523017366"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554523092401.png" alt="1554523092401"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554555631358.png" alt="1554555631358"></p><ul><li>获得’注册码‘</li></ul><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554555766036.png" alt="1554555766036"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554555806387.png" alt="1554555806387"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554555825945.png" alt="1554555825945"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554555841868.png" alt="1554555841868"></p><ul><li>如此即代表安装安装配置成功</li></ul><h3 id="编写并运行你的第一个Python程序"><a href="#编写并运行你的第一个Python程序" class="headerlink" title="编写并运行你的第一个Python程序"></a>编写并运行你的第一个Python程序</h3><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554555998516.png" alt="1554555998516"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554556078603.png" alt="1554556078603"></p><ul><li>修改程序的默认存放路径</li></ul><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554556221529.png" alt="1554556221529"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554556261261.png" alt="1554556261261"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554556331587.png" alt="1554556331587"></p><ul><li>修改完程序存放路径后，需要制定Python解释器</li></ul><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554556471382.png" alt="1554556471382"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554556539690.png" alt="1554556539690"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554556580081.png" alt="1554556580081"></p><ul><li>我的安装在C:\software\python3.7</li><li>找到  C:\software\python3.7  下的 python.exe</li></ul><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554556665066.png" alt="1554556665066"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554556709037.png" alt="1554556709037"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554556754398.png" alt="1554556754398"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554556886495.png" alt="1554556886495"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554556961470.png" alt="1554556961470"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554556995637.png" alt="1554556995637"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554557046099.png" alt="1554557046099"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554557119529.png" alt="1554557119529"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554557163364.png" alt="1554557163364"></p><p><img src="/2018/05/22/windows-xi-tong-an-zhuang-pei-zhi-pycharm-zhuan-ye-ban/1554557231138.png" alt="1554557231138"></p><blockquote><p>由于篇幅短小和时间仓促,若你发现了错误请告知我。</p><p>希望我没有误导你，而是带你看了小小的新世界。</p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> Pycharm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows系统Python解释器的安装配置</title>
      <link href="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/"/>
      <url>/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/</url>
      
        <content type="html"><![CDATA[<p><font color="red" size="5">视屏教程：<a href="https://www.bilibili.com/video/av70499867/" target="_blank" rel="noopener">Windows系统Python解释器的安装配置</a></font></p><ol><li><p>下载python解释器</p><p>如下图所示，在浏览器中打开python官方网站：<a href="https://www.python.org/" target="_blank" rel="noopener">https://www.python.org/</a> </p><p><img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554190813572.png" alt="Windows系统Python解释器的安装配置"></p><a id="more"></a></li><li><p>点击Downloads进入下载页面</p><p>如下图所示：</p><p><img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554191120114.png" alt="1554191120114"></p><p><img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554191320746.png" alt="1554191320746"></p></li></ol><blockquote><p>目前Python解释器更新到了最新的Python3.8版本(Python3.8版本虽增加了一些新特性，但建议不要使用最新版本的)，想要下载早期的Python版本，向下滑动浏览器页面。</p><p>如下图所示：然后找到你想要安装的的Python解释器版本，点击对应版本的<strong>Download</strong>，跳转至下载页面</p></blockquote><p><img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554191566692.png" alt="1554191566692"></p><ul><li>跳转页面后，继续向下滑动浏览器页面，找到如下图所示的对应位置下载你想要安装的的Python解释器版本</li></ul><p><img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/image-20191122150337602.png" alt="image-20191122150337602"></p><p>注：关于Python解释器版本的选择补充说明</p><p>附官方文档截图说明：</p><p><img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554192262704.png" alt="1554192262704"></p><ol start="3"><li><p>下载完成后选择软件包安装路径</p><p>注：路径最好不要出现中文</p><p>因为我的电脑只有一个C盘，所以为了方便管理安装的软件，我创建了一个software文件夹，然后再在software文件夹里创建对应安装包的安装文件夹</p><p>如下图：C:\software\python3.7</p><p><img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554194556427.png" alt="1554194556427"></p></li><li><p>进行安装</p><p><img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554194818288.png" alt="1554194818288"></p></li></ol><pre><code>    出现如下安装界面</code></pre><p>   <img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554194878760.png" alt="1554194878760"></p><p>   ​        </p><pre><code>    **添加python解释器的环境变量**</code></pre><p>   <img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554195054771.png" alt="1554195054771"></p><p>   <img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554195333724.png" alt="1554195333724"></p><pre><code>    这里我们可以选择安装到自己指定的安装目录</code></pre><p>   <img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554195664070.png" alt="1554195664070"></p><p>   ​        </p><pre><code>       点击进入指定目录安装，勾选的选项默认就好，不需修改</code></pre><p>   <img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554195850833.png" alt="1554195850833"></p><pre><code>    勾选的选项默认就好，不需修改    点击Browse修改Python解释器的默认安装路径</code></pre><p>   <img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554195977148.png" alt="1554195977148"></p><p>   <img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554196126754.png" alt="1554196126754"></p><pre><code>    修改后的安装路径显示</code></pre><p>   <img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554196195762.png" alt="1554196195762"></p><pre><code>    点击Install进行安装</code></pre><pre><code>   ![1554196262694](Windows系统Python解释器的安装配置/1554196262694.png)</code></pre><p>   ​    </p><p>   <img src="/home/allen/.config/Typora/typora-user-images/1554196294131.png" alt="1554196294131">            </p><p>   <img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554196307981.png" alt="1554196307981"></p><p>   ​     </p><pre><code>    如图所示即安装成功</code></pre><pre><code>  ![1554196536112](Windows系统Python解释器的安装配置/1554196536112.png)</code></pre><ol start="5"><li><p>测试是否安装成功</p><p>按下 win+R 组合键打开windows系统的命令终端</p><p><img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554197177971.png" alt="1554197177971"></p></li></ol><pre><code>    命令终端如下图所示</code></pre><p>  <img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554197221054.png" alt="1554197221054"></p><p><img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554197368525.png" alt="1554197368525"></p><p><img src="/2018/05/15/windows-xi-tong-python-jie-shi-qi-de-an-zhuang-pei-zhi/1554197492578.png" alt="1554197492578"></p><blockquote><h4 id="至此Python解释器即安装成功啦"><a href="#至此Python解释器即安装成功啦" class="headerlink" title="至此Python解释器即安装成功啦"></a>至此Python解释器即安装成功啦</h4><p>由于篇幅短小和时间仓促,若你发现了错误请告知我。</p><p>希望我没有误导你，而是带你看了小小的新世界。</p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 『环境配置』- 工欲善其事，必先利其器 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 环境配置 </tag>
            
            <tag> Windows系统Python解释器的安装配置 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>种一棵树最好的时间是十年前其次是现在</title>
      <link href="/2018/03/14/chong-yi-ke-shu-zui-hao-de-shi-jian-shi-shi-nian-qian-qi-ci-shi-xian-zai/"/>
      <url>/2018/03/14/chong-yi-ke-shu-zui-hao-de-shi-jian-shi-shi-nian-qian-qi-ci-shi-xian-zai/</url>
      
        <content type="html"><![CDATA[<p>“随着年龄的增长，你会失去很多东西，你的爱人，你的工作，你的头发，你的视力。</p><p>但当你开始学习新东西的时候，不管是编程还是弹钢琴，这些都是一种加分，是一种激励”</p><p>　　　　　　　　　　　　　　　　　　　　　　　　　　　　——若宫雅子，82岁程序员。</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      
        <tags>
            
            <tag> 励志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++51行贪吃蛇</title>
      <link href="/2017/10/04/2017-10-04-c-51-xing-tan-chi-she/"/>
      <url>/2017/10/04/2017-10-04-c-51-xing-tan-chi-she/</url>
      
        <content type="html"><![CDATA[<pre class=" language-cpp"><code class="language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;cstdio></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;deque></span></span><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;windows.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>COORD gSize<span class="token punctuation">{</span><span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">}</span><span class="token punctuation">,</span> pos<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span> food <span class="token operator">=</span> gSize<span class="token punctuation">;</span>deque<span class="token operator">&lt;</span>COORD<span class="token operator">></span> <span class="token function">snake</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">cdprintf</span><span class="token punctuation">(</span>COORD cd<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>s<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">SetConsoleCursorPosition</span><span class="token punctuation">(</span><span class="token function">GetStdHandle</span><span class="token punctuation">(</span>STD_OUTPUT_HANDLE<span class="token punctuation">)</span><span class="token punctuation">,</span> cd<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">printf</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">isLegal</span><span class="token punctuation">(</span>COORD cd<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span>deque<span class="token operator">&lt;</span>COORD<span class="token operator">></span><span class="token operator">::</span>iterator it <span class="token operator">=</span> snake<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> it <span class="token operator">!=</span> snake<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>it<span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>it<span class="token operator">-</span><span class="token operator">></span>X <span class="token operator">==</span> cd<span class="token punctuation">.</span>X <span class="token operator">&amp;&amp;</span> it<span class="token operator">-</span><span class="token operator">></span>Y <span class="token operator">==</span> cd<span class="token punctuation">.</span>Y<span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span> <span class="token operator">&lt;=</span> cd<span class="token punctuation">.</span>X <span class="token operator">&amp;&amp;</span> cd<span class="token punctuation">.</span>X <span class="token operator">&lt;</span> gSize<span class="token punctuation">.</span>X <span class="token operator">&amp;&amp;</span> <span class="token number">0</span> <span class="token operator">&lt;=</span> cd<span class="token punctuation">.</span>Y <span class="token operator">&amp;&amp;</span> cd<span class="token punctuation">.</span>Y <span class="token operator">&lt;</span> gSize<span class="token punctuation">.</span>Y<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> gSize<span class="token punctuation">.</span>Y<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>        <span class="token function">cdprintf</span><span class="token punctuation">(</span><span class="token punctuation">{</span>gSize<span class="token punctuation">.</span>X<span class="token punctuation">,</span> i<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"♂"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">cdprintf</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> gSize<span class="token punctuation">.</span>Y<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">"←↑↓→方向键移动，Space键暂停"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> SCORE <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> FOOD <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> BACK <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token function">isLegal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>snake<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>X <span class="token operator">+</span> pos<span class="token punctuation">.</span>X<span class="token punctuation">,</span> snake<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Y <span class="token operator">+</span> pos<span class="token punctuation">.</span>Y<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">Sleep</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>BACK<span class="token punctuation">)</span>            <span class="token operator">--</span>BACK<span class="token punctuation">;</span>        <span class="token keyword">else</span>            <span class="token function">cdprintf</span><span class="token punctuation">(</span>snake<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">,</span> snake<span class="token punctuation">.</span><span class="token function">pop_back</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        snake<span class="token punctuation">.</span><span class="token function">push_front</span><span class="token punctuation">(</span><span class="token punctuation">{</span>snake<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>X <span class="token operator">+</span> pos<span class="token punctuation">.</span>X<span class="token punctuation">,</span> snake<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Y <span class="token operator">+</span> pos<span class="token punctuation">.</span>Y<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">cdprintf</span><span class="token punctuation">(</span>snake<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isLegal</span><span class="token punctuation">(</span>food<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">{</span>            <span class="token keyword">char</span> s<span class="token punctuation">[</span><span class="token number">63</span><span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token function">sprintf</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">"WuK的贪吃蛇 %d分"</span><span class="token punctuation">,</span> SCORE <span class="token operator">+</span><span class="token operator">=</span> FOOD<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">SetConsoleTitle</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>BACK <span class="token operator">+</span><span class="token operator">=</span> FOOD<span class="token punctuation">;</span> <span class="token operator">!</span><span class="token function">isLegal</span><span class="token punctuation">(</span>food <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> gSize<span class="token punctuation">.</span>X<span class="token punctuation">,</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> gSize<span class="token punctuation">.</span>Y<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span>                <span class="token punctuation">;</span>            <span class="token function">sprintf</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">"%d"</span><span class="token punctuation">,</span> FOOD <span class="token operator">=</span> <span class="token function">rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">cdprintf</span><span class="token punctuation">(</span>food<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_SPACE<span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"游戏很好玩？\n请联系wu.kan@foxmail.com"</span><span class="token punctuation">,</span> <span class="token string">"By WuK"</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_UP<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> pos<span class="token punctuation">.</span>Y <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span>            pos <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_DOWN<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> pos<span class="token punctuation">.</span>Y <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>            pos <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_LEFT<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> pos<span class="token punctuation">.</span>X <span class="token operator">!=</span> <span class="token number">1</span><span class="token punctuation">)</span>            pos <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">GetAsyncKeyState</span><span class="token punctuation">(</span>VK_RIGHT<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> pos<span class="token punctuation">.</span>X <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>            pos <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">MessageBox</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> <span class="token string">"Game Over"</span><span class="token punctuation">,</span> <span class="token string">"By WuK"</span><span class="token punctuation">,</span> <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> 程序设计 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
